/**
 * @license Copyright (c) 2014, Cruks
 * For licensing, see LICENSE
 */

"use strict";

/*global describe: false, it: false */

var assert = require("chai").assert,
    AssertionFailureException = require(process.env.PACKAGE_ROOT + "/cruks-lib-config/Exception/AssertionFailure"),
    NumberTypeAssertion = require(process.env.PACKAGE_ROOT + "/cruks-lib-config/Testable/Assertion/Type/Number"),
    OptionalAssertion = require(process.env.PACKAGE_ROOT + "/cruks-lib-config/Testable/Assertion/Optional");

describe("cruks-lib-config/Testable/Assertion/Optional", function () {
    describe("#assert()", function () {
        var oa = new OptionalAssertion(new NumberTypeAssertion());

        it("accepts items fulfilling inner assertion", function () {
            assert.strictEqual(5, oa.assert(5));
        });

        it("does not accept item not matching inner assertion", function () {
            assert.throws(function () {
                oa.assert("not-a-number");
            }, AssertionFailureException, "expected optional number but got (string)\"not-a-number\"");
        });

        it("accepts empty item even if it does not fulfill inner assertion", function () {
            assert.strictEqual(null, oa.assert(""));
        });
    });
});
