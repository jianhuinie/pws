<div class="cloud-playback">
    <div class="title">直播回放</div>
    <div class="course-tabs">
        <span class="tab" ng-class="{'active': courseType === 2}"
              ng-click="setCourseType(2)">
            班课
        </span>
        <span class="tab" ng-class="{'active': courseType === 1}"
              ng-click="setCourseType(1)">
            一对一
        </span>
    </div>
    <loading-status ng-if="isLoading"></loading-status>
    <div ng-if="!courseList.length && !isLoading">
        <empty-data options="{text:'暂时没有可用的直播回放哦~'}"></empty-data>
    </div>
    <div class="item-list" ng-if="courseList.length && !isLoading">
        <div class="list-head">
            <span class="course-info">课程信息</span>
            <span class="course-time" ng-if="courseType === 2">课节时间</span>
            <span class="course-time" ng-if="courseType === 1">创建时间</span>
            <span class="course-deadline">回放截止时间</span>
            <span class="course-expireday">回放有效期</span>
            <span class="course-actions">
                操作
                <i class="icon icon-question-circle" tooltip options="operationRemind"></i>
            </span>
        </div>
        <div class="item" ng-repeat="course in courseList">
            <div class="item-info">
                <div class="inline course-info" ng-if="courseType === 2">
                    <span class="img-box">
                        <crop-image options="{width:80,height:80,imgSrc:course.cover_url}"></crop-image>
                    </span>
                    <div class="detal-info">
                        <div ng-bind="course.name" ng-if="!course.displayName"></div>
                        <div ng-bind="course.displayName" ng-if="course.displayName"
                             tooltip options="{position:'bottom',width:200,content:course.name}">
                        </div>
                        <div class="playback-count" ng-bind="'共' + course.schedules.length + '节回放'"></div>
                    </div>
                </div>
                <div class="inline course-info" ng-if="courseType === 1">
                    <span class="img-box">
                            <crop-image options="{width:80,height:80,imgSrc:course.user.avatar_url}"></crop-image>
                    </span>
                    <div class="detal-info">
                        <div ng-bind="course.name" ng-if="!course.displayName"></div>
                        <div ng-bind="course.displayName" ng-if="course.displayName"
                                tooltip options="{position:'bottom',width:200,content:course.name}">
                        </div>
                        <div class="student-name single-line" ng-bind="course.user.display_name"></div>
                    </div>
                </div>
                <div class="inline course-time" ng-if="courseType === 2">
                        <div ng-bind="course.beginTime"></div>
                        <div>到</div>
                        <div ng-bind="course.endTime"></div>
                </div>
                <div class="inline course-time one2one" ng-if="courseType === 1">
                        <div ng-bind="course.create_time"></div>
                </div>
                <div class="inline course-deadline">
                    <div class="success" ng-if="course.playback_status == 1">回放中</div>
                    <div class="disabled" ng-if="course.playback_status == 2">已结束</div>
                    <div ng-bind="course.playback_end_day"></div>
                </div>
                <div class="inline course-expireday">
                    <span ng-bind="course.playback_expire_day + '天'"></span>
                    <span class="edit" ng-click="editExpireDate(course)"> &nbsp;编辑</span>
                </div>
                <div class="inline course-actions disabled" ng-if="course.playback_status == 1">
                    <span tooltip options="{position:'bottom',content:'回放有效期内的视频不能结束回放',width:225}">
                        关闭回放
                    </span>
                </div>
                <div class="inline course-actions" ng-if="course.playback_status == 2"
                     ng-click="closePlayback(course, $index)">
                    关闭回放
                </div>
                <div class="toggle-show" ng-if="!course.showSubList" ng-click="toggleFlag(course, 1)">
                    展开
                    <i class="icon icon-caret-down"></i>
                </div>
                <div class="toggle-show" ng-if="course.showSubList" ng-click="toggleFlag(course, 2)">
                    收起
                    <i class="icon icon-caret-up"></i>
                </div>
            </div>
            <div class="sub-list" ng-show="course.showSubList">
                <div class="sublist-header">
                    <span class="schedule-name">课节</span>
                    <span class="schedule-time">上课时间</span>
                    <span class="schedule-actions">操作</span>
                </div>
                <div class="sub-item" ng-repeat="subCourse in course.schedules">
                    <div class="inline schedule-name" ng-bind="'第' + subCourse.index + '节'"></div>
                    <div class="inline schedule-time" ng-bind="subCourse.displayCourseTime"></div>
                    <div class="inline schedule-actions">
                        
                        <!-- <span ng-bind="statusMap[subCourse.media_status]"
                              ng-if="subCourse.playback_id && !subCourse.videoUploading && !subCourse.uploadedPercent 
                              && (subCourse.media_status == '50' || subCourse.media_status == '70' || subCourse.media_status == '90')"
                              ng-class="{'success': subCourse.media_status == '70', 'warning': subCourse.media_status == '50'}">
                        </span>
                        <span class="remind" ng-if="subCourse.playback_id && !subCourse.videoUploading && !subCourse.uploadedPercent && subCourse.verify_status 
                              && subCourse.media_status != '50' && subCourse.media_status != '70' && subCourse.media_status != '90'"
                              ng-class="{'warning': subCourse.verify_status != '0' && subCourse.verify_status != '5'}">
                            {{verifyStatusMap[subCourse.verify_status]}}
                            <i class="icon icon-question-circle" ng-if="subCourse.verify_status == '2'"
                                tooltip options="subCourse.verifyReasonsOpt">
                            </i>
                        </span> -->
                        <span ng-bind="'上传中' + subCourse.uploadedPercent"
                              ng-if="subCourse.videoUploading">
                        </span>
                        <span class="remind"
                            ng-if="!subCourse.videoUploading && subCourse.uploadedPercent">
                            审核中
                        </span>

                        <span class="action" ng-repeat="action in subCourse.actions"
                              ng-bind="action.name"
                              ng-click="doAction(course, subCourse, action)"
                              ng-class="{'disabled': action.disable}">
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="pager-box" ng-if="courseList.length && !isLoading">
        <pager total-count="totalCount" page="currentPage" page-change-handler="changePage(newVal)" page-size="{{pageSize}}"></pager>
    </div>
</div>