<div class="videocourse-list">
    <div class="operations">
        <a class="add-course"
            ng-click="addCourseRemind()">
            <i class="icon icon-plus"></i>
            添加课程
        </a>
        <a class="add-watermark"
           ng-href="{{addWaterMarkUrl}}"
           ng-if="vipLevel === 3">
            <i class="icon icon-plus"></i>
            添加水印
        </a>
    </div>

    <loading-status ng-if="isLoading"></loading-status>

    <div ng-if="!courseList.length && !isLoading && !isSearchResult">
        <empty-data options="{text:'快来上传你的第一门视频课程吧~'}"></empty-data>
    </div>

    <div class="item-list" ng-show="(courseList.length || isSearchResult) && !isLoading">
        <div class="search-terms">
            <div class="keyword">
                <input type="text" placeholder="输入视频课名称或编号" ng-model="searchKeyword">
            </div>
            <div class="fee-type">
                收费类别：
                <dropdown options="feeTypeOptions"></dropdown>
            </div>
            <div class="course-state">
                视频课状态：
                <dropdown options="courseStatusOptions"></dropdown>
            </div>
            <button class="btn-search" ng-click="searchCourse()">搜索</button>
            <div class="clear-up" ng-click="clearSearchTerms()">
                清除筛选条件
            </div>
        </div>

        <table>
            <tr class="list-head">
                <th class="course-name">
                    课程名称
                </th>
                <th class="course-price">
                    价格
                    <i class="icon icon-arrow-up-o"
                        ng-if="orderByParams.price === 'desc' && !orderBy.price"
                        ng-click="searchCourse('price')"></i>
                    <i class="icon icon-arrow-up"
                        ng-if="orderByParams.price === 'desc' && orderBy.price"
                        ng-click="searchCourse('price')"></i>
                    <i class="icon icon-arrow-down"
                        ng-if="orderByParams.price === 'asc' && orderBy.price"
                        ng-click="searchCourse('price')"></i>
                </th>
                <th class="payers-count">
                    购买人数
                    <!--i class="icon icon-arrow-up-o"
                        ng-if="orderByParams.totalPaySuccess === 'desc' && !orderBy.totalPaySuccess"
                        ng-click="searchCourse('totalPaySuccess')"></i>
                    <i class="icon icon-arrow-up"
                        ng-if="orderByParams.totalPaySuccess === 'desc' && orderBy.totalPaySuccess"
                        ng-click="searchCourse('totalPaySuccess')"></i>
                    <i class="icon icon-arrow-down"
                        ng-if="orderByParams.totalPaySuccess === 'asc' && orderBy.totalPaySuccess"
                        ng-click="searchCourse('totalPaySuccess')"></i-->
                </th>
                <th class="course-status">
                    状态
                </th>
                <th class="course-actions">
                    操作
                </th>
            </tr>

            <tr class="course-item cache-course" ng-if="cacheCourse && currentPage === 1">
                <td class="course-name">
                    <crop-image options="{width: 114, height: 72, imgSrc: cacheCourse.covers.url}" ng-if="cacheCourse.covers.url"></crop-image>

                    <a class="name" ng-if="!cacheCourse.baseInfo.displayName"
                        ng-bind="cacheCourse.baseInfo.courseName"></a>
                    <a class="name" ng-if="cacheCourse.baseInfo.displayName"
                        ng-bind="cacheCourse.baseInfo.displayName"
                        tooltip options="{content:cacheCourse.baseInfo.courseName,width:240,position:'bottom'}">
                    </a>

                    <div class="play-count">
                        0次播放
                    </div>
                </td>

                <td class="course-price">
                    ¥ {{cacheCourse.baseInfo.coursePrice}}
                </td>

                <td class="payers-count">
                    0人
                </td>

                <td class="course-status">
                    草稿
                </td>

                <td class="course-actions">
                    <span class="action" ng-click="doAction('toEdit')">
                        编辑
                    </span>
                    <span class="action" ng-click="doAction('deleteCourse')">
                        删除
                    </span>
                </td>
            </tr>

            <tr class="course-item" ng-repeat="course in courseList track by $index">
                <td class="course-name">
                    <a ng-href="{{course.pc_dynamic_url}}">
                        <crop-image options="{width: 114, height: 72, imgSrc: course.portrait}"></crop-image>
                    </a>

                    <a class="name" ng-if="!course.displayName"
                        ng-bind="course.display_name" ng-href="{{course.pc_dynamic_url}}"></a>
                    <a class="name" ng-if="course.displayName"
                        ng-bind="course.displayName" ng-href="{{course.pc_dynamic_url}}"
                        tooltip options="{content:course.display_name,width:240,position:'bottom'}">
                    </a>

                    <div class="play-count">
                        {{course.play_count}}次播放
                    </div>
                </td>

                <td class="course-price">
                    ¥ {{course.price}}
                </td>

                <td class="payers-count">
                    {{course.payers_count}}人
                    <div class="view-roster"
                        ng-if="course.payers_count > 0 && !hasRoster"
                        tooltip options="{content:'您无权查看花名册，机构老师请通过机构后台进入老师个人中心查看；个体老师请直接进入老师个人中心查看。', width:280, position:'bottom'}">
                        查看花名册
                    </div>
                    <a class="view-roster"
                        ng-if="course.payers_count > 0 && hasRoster"
                        ng-href="{{course.roster_url}}" target="_blank">
                        查看花名册
                    </a>
                </td>

                <td class="course-status" style="color: {{course.display_status.color}}">
                    {{course.display_status.name}}
                    <i class="icon icon-ic_dingdan"
                        ng-if="course.verify_reasons"
                        tooltip options="{content:course.verify_reasons.tips, width:240, position:'bottom'}"></i>
                </td>

                <td class="course-actions">
                    <div class="action"
                        ng-repeat="action in course.allow_actions_pc track by $index"
                        ng-click="doAction(action.action, course)">
                        <span ng-if="action.action !== 'shareCourse'">
                            {{action.name}}
                        </span>
                        <!-- <span ng-if="action.action === 'shareCourse'"
                            baidu-share share-options="course.shareOptions">
                            {{action.name}}
                        </span> -->
                    </div>
                </td>
            </tr>
        </table>
    </div>

    <div class="pager-box" ng-if="courseList.length && !isLoading">
        <pager total-count="totalCount" page-size="{{pageSize}}" page="currentPage" page-change-handler="changePage(newVal)" ></pager>
    </div>
</div>

