<div class="main-content">

    <div class="header">
        <div class="top-line">
            <img src="https://imgs.genshuixue.com/0cms/d/file/content/2017/01/587cac091163a.png">
            <div class="line"></div>
            <div class="name">资料库</div>
        </div>

        <div class="second-line">
            <i class="icon icon-search" ng-click="queryParam()"></i>
            <div class="search-box">
                <input class="search-box-in" type="text" ng-model="queryContent" placeholder="输入文件名" ng-keypress="keyPressQueryParam($event)">
            </div>
        </div>

        <div class="last-line">
            <div class="upload" ng-class="{'unusable': !canUploader}" ng-show="canUpload">
                <i class="icon icon-ic_uplord"></i>
                <div class="upload-text" ng-click="upLoadFile()">上传文件</div>
            </div>
            <div class="upload unusable" ng-hide="canUpload">
                <i class="icon icon-ic_uplord"></i>
                <div class="upload-text">上传文件</div>
            </div>

            <div class="new-backup" ng-click="makeNewFolder()" ng-show="canNew">
                <i class="icon icon-ic_newfolder"></i>
                <div class="new-text">新建文件夹</div>
            </div>
            <div class="new-backup unusable" ng-hide="canNew">
                <i class="icon icon-ic_newfolder"></i>
                <div class="new-text">新建文件夹</div>
            </div>
        </div>

    </div>
    <div class="left-content">
        <div class="box" ng-repeat="it in getIndex">
            <div class="title" ng-bind="it.name"></div>
            <div class="item" ng-repeat="i in it.items" ng-click="refreshList(i)">
                <i class="icon icon-ic_backup"></i>
                <div class="texts" ng-bind="i.name"></div>
            </div>
        </div>

        <div class="storage">
            <div class="line">
                <div class="has-storage" ng-style="{'width': sizeRate * 132 + 'px'}"></div>
            </div>

            <div class="texts">
                <span class="has-texts" ng-bind="usedSize"></span>
                <span class="space">/</span>
                <span class="max-texts" ng-bind="maxSize"></span>
            </div>

            <div class="expand" ui-sref="Manage.storageSpace">
                扩容
            </div>
        </div>
    </div>
    <div class="right-content">
        <div class="first-nav">
            <div class="roots" ng-click="goBack()">返回上一级</div>
            <div class="line"></div>
            <!-- <div class="path" ng-bind="currentPath"></div> -->
            <div class="path">
                <div ng-repeat="its in getCrumbList track by $index" class="path-item">
                    <div class="name" ng-bind="its.name" ng-click = "refreshList(its);"></div>
                    <div class="divide-line" ng-if="$index < getCrumbList.length - 1">></div>
                </div>
            </div>

            <div class="menu-button" ng-show="showMenuButtons">
                <div class="down-load" ng-click="downloadAll()">
                    <i class="icon icon-ic_down"></i>
                    <div>下载</div>
                </div>

                <div class="delete" ng-click="deteleAll()">
                    <i class="icon icon-ic_delete"></i>
                    <div>删除</div>
                </div>

                <div class="move" ng-click="removeSomeInfo()">
                    移动到
                </div>
            </div>
        </div>

        <div class="title-nav">
            <div class="choose item" ng-click="chooseAllBox();">
                <!-- <div class="quota"> -->
                    <!-- <img src="/app/module/main/uploadFile/img/ic_selected.png" ng-show="hasSelectAllBox"> -->
                <input type="checkbox" class="selectedSingle" ng-model="allSelected" ng-click="selectAll()">
                <!-- </div> -->

                <div class="name">全选</div>
            </div>

            <div class="size item">
                <div class="name">总大小</div>
            </div>

            <div class="item actions"></div>

            <div class="status item">
                <div class="name">状态</div>
            </div>

            <div class="last-time item">
                <div class="name">修改时间</div>
            </div>
        </div>

        <div class="list-content">

            <div class="make-new-folder" ng-show="showNewFolder">
                <input type="checkbox" class="selectedSingle" ng-model="it.selected"
                    ng-click="chooseSingleBox()"
                    >
                <i class="icon icon-ic_backup"></i>
                <input ng-model="newfileName" class="file-name-edit" type="text" placeholder="" ng-keypress="keyPressMakeNewFolder($event);" autofocus="autofocus">
                <i class="icon icon-ic_finish" ng-click="makeNewFolderOnBlur()"></i>
                <i class="icon icon-ic_cancel2" ng-click="cancelMakeNewFolder()"></i>
            </div>
            <div ng-repeat="it in getDetailInfos" class="list-box" ng-mouseover="showIcons(it)" ng-mouseleave="hideIcons(it)" ng-class="{'activeSelected': it.selected}" ng-click="goToNextPage($event, it)">
                <div class="item-info" ng-if="it.type === 'dir'" ng-class="{'set-padding':it.showEditName || !it.name}">
                    <input type="checkbox" class="selectedSingle" ng-model="it.selected"
                    ng-click="chooseSingleBox()"
                    >
                    <i class="icon icon-ic_backup"></i>
                    <div class="name" ng-bind="it.name" ng-hide="it.showEditName"></div>
                    <input ng-model="it.name" class="file-name-edit" type="text" ng-show="it.showEditName" ng-keypress="keyPress($event, it);"  autofocus>
                    <i class="icon icon-ic_finish" ng-show="it.showEditName" ng-click="renameContent(it)"></i>
                    <i class="icon icon-ic_cancel2" ng-show="it.showEditName" ng-click="renameInfo(it)"></i>
                </div>

                <div class="item-info" ng-if="it.type === 'file'" ng-class="{'set-padding':it.showEditName || !it.name}">
                    <input type="checkbox" class="selectedSingle" ng-model="it.selected" ng-click="chooseSingleBox()">
                    <div class="cover {{fileTypeClassMap[it.file_type]}}" ng-if="it.type === 'file'"></div>
                    <div class="name" ng-bind="it.name" ng-hide="it.showEditName"></div>
                    <input ng-model="it.name" class="file-name-edit" type="text" ng-show="it.showEditName" ng-keypress="keyPress($event, it);" autofocus>
                    <i class="icon icon-ic_finish" ng-show="it.showEditName" ng-click="renameContent(it)"></i>
                    <i class="icon icon-ic_cancel2" ng-show="it.showEditName" ng-click="renameInfo(it)"></i>
                </div>

                <div class="list-size">
                    <div class="name" ng-bind="it.size"></div>
                </div>

                <div class="icon-list" ng-class="{'unactive': !it.isShowIcons}">
                    <i class="icon icon-ic_down" ng-click="dowloadSingle(it.path);" ng-if="(it.type==='file') && it.permition.can_download"></i>
                    <i class="icon icon-ic_move2" ng-click="removeInfo(it);" ng-if="it.permition.can_move"></i>
                    <i class="icon icon-ic_edit" ng-click="showEditName(it, $event)" ng-if="it.permition.can_rename"></i>
                    <i class="icon icon-ic_delete2" ng-click="deleteSingle($index);" ng-if="it.permition.can_delete"></i>
                </div>

                <div class="list-status">
                    <div class="name" ng-if="it.uploadStatus === 'uploaded'">上传成功</div>
                    <div class="name" ng-if="it.uploadStatus === 'uploadFail'">上传失败</div>
                    <div class="name" ng-if="it.uploadStatus === 'uploading'">上传中...</div>
                    <div class="name" ng-show="file.uploadStatus==='uploadFail'"
                      ng-click="uploadAgain(it)">
                    重新上传
                    </div>
                </div>

                <div class="list-time">
                    <div class="name" ng-bind="it.time"></div>
                </div>

                <div class="progress-bar" ng-show="it.uploadStatus==='uploading'"
                     ng-style="{'width': it.uploadRate}">

                </div>
            </div>
        </div>

    </div>
</div>