## 探寻最适合的前端性能优化方案
前端性能优化，已经是一个老生常谈的话题了，从雅虎的前端性能优化 35 条军规到现在各种项目打包、网络资源传输方面的优化手段，在众多优化方案中，探寻最适合自己项目的，才是最重要的。

### 性能优化的重要性（摘自网络）
+ 来自 Google 的数据表明，一个有 10 条数据 0.4 秒能加载完的页面，变成 30 条数据 0.9 秒加载完之后，流量和广告收入下降 90%。
+ Google Map 首页文件大小从 100KB 减小到 70-80KB 后，流量在第一周涨了 10%，接下来的三周涨了 25%。
+ 亚马逊的数据表明：加载时间增加 100 毫秒，销量就下降 1%。

性能优化，优化的是用户体验，收获的是“增加收入”。


### 现状是什么
性能优化需要具备体系化，很多小伙伴说到性能优化，上来就是各种“优化处理”，优化上线完一问收效浑然不知。

首先，我们需要明确我们性能优化评估的指标是什么，确定了指标之后我们需要了解现状，我们需要根据我们制定的数据指标进行数据埋点，拿到我们想要的数据。

对于数据指标这块，目前我们关注的是首屏时间 FCP，埋点上报工具我们基于哈勃 SDK，详细的指标计算方式说明可以参照 【SDK 文档】http://npm.baijiahulian.com/-/web/detail/habo

#### 数据

#### 分析工具

### “对症下药”

### 基础优化手段

#### 静态资源优化
+ JS、CSS 混淆压缩，开启 gzip
+ 图片压缩处理，上传的图片先通过 tinypng 物理压缩，使用时再根据实际场景做阿里云参数裁剪
+ 非首屏必要脚本异步加载（网易验证、友盟统计等）
+ 静态资源 CDN 化
+ 小的图片转 base64（webpack 打包配置）
+ 图片支持多域名（域名并发限制，一般 6 个）
+ 脚本放在 body 后（defer、async 属性）
+ 静态资源使用无 cookie 域名


#### 网络优化
+ DNS 预解析



#### 代码优化
+ 长列表渲染
+ 移除冗余的 DOM（不必要等嵌套、伪元素能实现等不用标签）
查看标签数量: document.getElementsByTagName('*').length
+ CSS 书写顺序遵循定位在前等原则，减少重排（回流），不要使用 CSS 表达式
+ 尽量少用表格
默认的表格布局算法会产生大量重绘
+ 减少 iframe 使用
阻塞页面 load 事件触发（动态设置可避免）
+ 避免图片 src 为空
+ 减少 DOM 操作

#### 接口优化
+ 接口响应时间
+ 接口返回必要的字段

#### 深度优化
+ 非首屏模块异步加载
+ CSS 内联
+ 服务端渲染
+ 项目打包优化
+ 骨架屏
+ 利用缓存（Cache-Control、Etag、Last-Modified）
+ 路由跳转，单页应用体验
+ 预加载
+ 图片支持 webp
