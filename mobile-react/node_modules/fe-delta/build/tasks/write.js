/**
 * Created by bjhl on 16/1/14.
 */
const path = require('path');
const write = require('write');

const util = require('../tool/util');
const config = require('../config');

exports.write = function (fileName, content, fun, isSync) {
    fileName = util.getFilterFileName(fileName);
    var outer = '';
    // 模板文件
    if (util.isHtml(fileName) || util.isTpl(fileName)) {
        outer = path.join(config.releaseDir.html.root, fileName);
    } else {
        // 静态资源文件
        outer = path.join(config.releaseDir.js.root, fileName);
    }
    if (isSync) {
        write.sync(outer, content);
        return;
    }
    write(outer, content, function (err) {
        if (err) {
            throw new Error('writeFile:' + err);
        } else {
            fun && fun();
        }
    });
};