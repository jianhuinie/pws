{{ strip }}

{{ if !isset($data) }}
    {{ $data = [] }}
{{ /if }}

    {{ if isset($log_data) && isset($log_data.qid) }}
        {{ $log_id = $log_data.qid }}
    {{ else }}
        {{ $log_id = '' }}
    {{ /if }}

    {{ $log_flag = true }}

{{ $class_type = ["1" => ["cls" => "offline-tag", "name" => "线下"], "2" => ["cls" => "live-tag", "name" => "直播"], "3" => ["cls" => "video-tag", "name" => "视频"]] }}

<div class="special {{ $data.theme|default:'' }}">

    <div class="special-header">

        <h4 class="special-title">
            {{ $data.title|default:'' }}
        </h4>

        <div class="special-header-ads" data-ad-id="{{ $data.adId }}">
        </div>

    </div>

    <div class="special-content">

        <div class="special-left-content">
            <div class="special-logo">
                <div class="special-logo-wrapper"></div>
            </div>

            <div class="special-course-list">
                {{ foreach $data.data.subject_list as $word }}
                    <a data-source="{{ $data.source }}" class="special-course-item {{ if $word@index < 5 }}bold{{ /if }}" target="_blank"
                    {{ if isset($tpl_data.is_www) && $tpl_data.is_www }}
                        href="/sc/-1-{{ $word.id|escape }}.html"
                    {{ else }}
                        href="/{{ $curr_city.domain }}/sc--1-{{ $word.id|escape }}.html"
                    {{ /if }} >
                        {{ $word.name }}
                    </a>
                {{ /foreach }}
            </div>

            <div class="special-more-course">
                <a data-source="{{ $data.source }}" rel="nofollow" target="_blank"
                {{ if isset($tpl_data.is_www) && $tpl_data.is_www }}
                    href="/sc/-1-{{ $data.data.id }}.html"
                {{ else }}
                    href="/{{ $curr_city.domain }}/sc--1-{{ $data.data.id }}.html"
                {{ /if }}
                >
                    更多课程
                    <i class="icon icon-arrow-circle"></i>
                </a>
            </div>
        </div>

        <div class="special-right-content">
            <div class="hot-header">
                热门老师
                <a class="more-hot-link" rel="nofollow" data-source="{{ $data.source }}" target="_blank"
                {{ if isset($tpl_data.is_www) && $tpl_data.is_www }}
                    href="/st/-{{ $data.data.id }}.html"
                {{ else }}
                    href="/{{ $curr_city.domain }}/st--{{ $data.data.id }}.html"
                {{ /if }}>
                    更多<i class="icon icon-chevron-right"></i>
                </a>
            </div>
            <div class="hot-list">
                <ul>
                    {{ foreach array_slice($data.data.hot_teachers, 0, 5) as $teacher }}
                        {{ ** 埋点统计 ** }}
                            {{ $log_url = ($teacher@index+1)|cat:","|cat:$teacher.number|cat:","|cat:$data.qid.hot_teachers|cat:","|cat:$teacher.is_cms }}

                    <li class="{{ if $teacher@last }}last{{ /if }}" data-num="{{ $teacher.number }}" data-cms="{{ $teacher.is_cms }}">
                        <a class="hot-teacher click-monitor" rel="nofollow" href="{{ $teacher.detail_url }}" target="_blank" data-monitor-stype="1" data-monitor-type="{{ $data.type }}" data-monitor-tid="{{ $teacher.number }}" {{ if $log_flag }} data-type="3" log="{{ $log_url }}" {{ /if }}>

                            <div class="teacher-avatar">
                                <div class="avatar-wrapper">
                                     {{ include file="common/component/image.html" url=$teacher.avatar_url width=60 height=60 lazy_load=true }}
                                </div>
                                {{ if $teacher.video_url }}
                                    <i class="icon icon-play-oo" data-video="{{ $teacher.video_url }}"></i>
                                {{ /if }}
                            </div>
                            <div class="teacher-info">
                                <div class="row ellipsis">
                                    <span class="teacher-name">
                                        {{ $teacher.name }}
                                    </span>
                                    <span class="teacher-course" title="{{ $teacher.course }}">
                                        {{ $teacher.course }}
                                    </span>
                                </div>
                                <div class="row teacher-inro ellipsis" title="{{ $teacher.summary }}">
                                    {{ $teacher.summary }}
                                </div>
                            </div>
                        </a>
                    </li>
                    {{ /foreach }}
                </ul>
            </div>
        </div>

        <div class="special-middle-content">

            <div class="course-media-list">
                <ul>
                    {{ $counter = 1 }}
                    {{ foreach $data.data.media_list as $course }}

                        {{ ** 埋点统计 ** }}
                        {{ $log_url = ($course@index+1)|cat:","|cat:$course.number|cat:","|cat:$data.qid.media_list|cat:","|cat:$course.is_cms }}

                        <li class="course-media" data-num={{ $course.number }} data-cms="{{ $course.is_cms }}">

                            <div class="course-media-img-wrapper">
                                <a class="click-monitor" rel="nofollow" href="{{ $course.course_url }}" target="_blank" data-monitor-stype="2" data-monitor-type="{{ $data.type }}" data-monitor-cid="{{ $course.number }}" {{ if $log_flag }} data-type="1" log="{{ $log_url }}" {{ /if }}>
                                    {{ if $course.is_cms == 0 }}
                                        <div class="course-template theme{{ $counter }}" title="{{ $course.name }}">
                                            <div class="course-template-name">{{ $course.name|cn_truncate:15:'':true }}</div>
                                            <div class="course-template-teacher">
                                                <div class="course-template-tname" title="{{ $course.author_name }}">{{ $course.teacher_name|cn_truncate:15:'':true }}</div>
                                                <div class="course-template-avatar">
                                                    {{ include file="common/component/image.html" url=$course.avatar_url width=40 height=40 lazy_load=true }}
                                                </div>
                                            </div>
                                        </div>
                                        {{ $counter = $counter + 1 }}
                                    {{ else }}
                                        {{ include file="common/component/image.html" url=$course.img width=214 height=120 alt=$course.name lazy_load=true }}
                                    {{ /if }}
                                </a>
                            </div>

                            <div class="course-media-content">
                                <div class="course-media-name">
                                    <span class="course-tag {{ $class_type[$course.type].cls }}">
                                        {{ $class_type[$course.type].name }}
                                    </span>
                                    <a class="ellipsis click-monitor" href="{{ $course.course_url }}" target="_blank" title="{{ $course.name }}" data-monitor-stype="2" data-monitor-type="{{ $data.type }}" data-monitor-cid="{{ $course.number }}">{{ $course.name }}</a>
                                </div>
                                <div class="course-media-other">
                                    {{ if !empty($course.plan) && $course.type != 3 }}
                                    <span class="course-media-time">
                                        {{ $course.plan }}
                                    </span>
                                    <span class="course-media-divider">
                                        |
                                    </span>
                                    {{ /if }}
                                    <a class="click-monitor" href="{{ $course.detail_url }}" target="_blank" class="course-media-author" data-monitor-stype="2" data-monitor-type="{{ $data.type }}" {{ if !empty($course.org_number) }}data-monitor-oid="{{ $course.org_number }}" {{ else if !empty($course.teacher_number) }}data-monitor-tid="{{ $course.teacher_number }}" {{ else }}data-monitor-cid="{{ $course.number }}"{{ /if }}>
                                        {{ $course.author_name }}
                                    </a>
                                </div>
                            </div>

                        </li>
                    {{ /foreach }}
                </ul>
            </div>

            <div class="course-recommend-wrapper">
                <div class="course-recommend-list">
                    <h4 class="list-title">最新课程</h4>
                    <ul class="list-contents">
                        {{ foreach array_slice($data.data.latest_courses, 0, 4) as $item }}

                        {{ ** 埋点统计 ** }}
                        {{ $log_url = ($item@index+1)|cat:","|cat:$item.number|cat:","|cat:$data.qid.latest_courses|cat:","|cat:$item.is_cms }}

                        <li {{ if $log_flag }} data-type="2" log="{{ $log_url }}" {{ /if }} data-num={{ $item.number }} data-cms="{{ $item.is_cms }}">
                            <span class="list-tag-before"></span>
                            <a class="ellipsis click-monitor" href="{{ $item.url }}" target="_blank" title="{{ $item.name }}" data-monitor-stype="3" data-monitor-type="{{ $data.type }}" data-monitor-cid="{{ $item.number }}">{{ $item.name }}</a>
                            <span class="course-tag {{ $class_type[$item.type].cls }}">
                                {{ $class_type[$item.type].name }}
                            </span>
                        </li>
                        {{ /foreach }}
                    </ul>
                </div>

                <div class="article-recommend-list">
                    <h4 class="list-title">热门文章
                        <a class="more-link" rel="nofollow" href="{{ $data.data.hot_articles.more_url }}" target="_blank">
                            更多
                            <i class="icon icon-chevron-right"></i>
                        </a>
                    </h4>
                    <ul class="list-contents">
                        {{ foreach array_slice($data.data.hot_articles.articles, 0, 4) as $item }}
                        <li>
                            <span class="list-tag-before"></span>
                            <a class="ellipsis click-monitor" rel="nofollow" href="{{ $item.url }}" target="_blank" title="{{ $item.title }}" data-monitor-stype="4" data-monitor-type="{{ $data.type }}" data-monitor-aid="{{ $item.number }}">
                                {{ $item.title }}
                            </a>
                        </li>
                        {{ /foreach }}
                    </ul>
                </div>
            </div>

            <div class="learning-wrapper">
                <h4 class="list-title">
                    晒学习
                </h4>
                <div class="comment-list">
                    <ul>
                        {{ foreach $data.data.student_comments as $comment }}
                        <li class="comment-item">
                            <a class="click-monitor" rel="nofollow" href="{{ $comment.teacher_url }}" target="_blank" data-monitor-stype="5" data-monitor-type="{{ $data.type }}" data-monitor-tid="{{ $comment.tnumber }}">
                                <div class="student-info">
                                    <div class="student-avatar">
                                        {{ include file="common/component/image.html" url=$comment.avatar_url width=40 height=40 lazy_load=true }}
                                    </div>
                                    <div class="student-name ellipsis" title="{{ $comment.display_name }}">
                                        {{ $comment.display_name|default:'' }}
                                    </div>
                                </div>
                                <div class="student-comment-wrapper">
                                    <i class="arrow"></i>
                                    <div class="student-comment">
                                        {{ $comment.content|cn_truncate:50 }}
                                    </div>
                                    <div class="comment-course">
                                        <span class="course-name ellipsis" title="{{ $comment.course_name }}">
                                            {{ $comment.course_name|default:'' }}
                                        </span>
                                        <span class="course-way">{{ $comment.course_type|default:'' }}</span>
                                    </div>
                                </div>
                            </a>
                        </li>
                        {{ /foreach }}
                    </ul>
                </div>
            </div>
        </div>

    </div>
</div>
{{ /strip }}
