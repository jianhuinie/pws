{{ extends file="./base.html" }}

{{ block name="data" }}

    {{ $smarty.block.parent }}

    {{ $script_path = "activity/uk/member_32326c2f26" }}

    {{ $script_data.has_pay = $tpl_data.has_pay }}

{{ /block }}

{{ block name="variable" }}

    {{ $menu = "memberList" }}

{{ /block }}

{{ block name="content" }}

<div class="content-wrapper" style="padding-bottom: 40px;">

    {{ if $tpl_data.time_status == 1 }}

    <div class="uk-main">

        <div class="member-header">

            <div class="member-types">
                <a href="?grade=0&query={{ $tpl_data.query|default:'' }}#uk-nav" {{ if not isset($tpl_data.grade_id) || $tpl_data.grade_id == 0 }} class="active" {{ /if }}>全部</a>

                {{ foreach $tpl_data.grade as $gde }}
                <a href="?grade={{ $gde.id }}&query={{ $tpl_data.query|default:'' }}#uk-nav" {{ if isset($tpl_data.grade_id) && $tpl_data.grade_id == $gde.id }} class="active" {{ /if }}>
                    {{ $gde.name }}
                </a>
                {{ /foreach }}

            </div>

            <div class="member-search">
                <form id="search-form" method="get" action="/uk/rank#uk-nav">
                    <input type="hidden" name="grade" value="{{ $tpl_data.grade_id|default:'' }}">
                    <input id="search-input" name="query" type="text" value="{{ $tpl_data.query|default:'' }}" placeholder="请输入选手姓名或编号"/>
                    <i class="icon icon-search" onclick="$('#search-form').submit()"></i>
                </form>
            </div>

        </div>

    </div>

    <div class="member-list">

        {{ if $tpl_data.page_info.total > 0 }}

        {{ foreach $tpl_data.user_infos as $member }}

        <div class="member-list-box member-vote">
            {{ $rank = ($tpl_data.page_info.curr_page - 1) * $tpl_data.page_info.page_size + $member@index + 1 }}
            <div class="badge badge{{ $rank }}">
                {{ if $rank > 3 && $rank < 100 }}
                <span>
                    {{ $rank }}
                </span>
                {{ /if }}
            </div>
            <a href="/uk/detail/{{ $member.number }}#uk-nav">
                <img class="member-photo" data-src="{{ $member.avatar }}"/>
            </a>
            <h3>
                <a href="/uk/detail/{{ $member.number }}#uk-nav">{{ $member.name }}</a>
            </h3>
            <p>编号：{{ $member.number }}</p>
            <p class="talent">才艺：{{ $member.talent }}</p>
            <p><span class="stats vote-count">{{ $member.vote_count }}</span> 票</p>
            <p>
                {{ if $member.can_vote }}
                <span class="uk-btn vote-btn" data-number="{{ $member.number }}">
                    <i class="icon icon-heart"></i>
                    投票
                </span>
                {{ else }}
                <span class="uk-btn disable">
                    已投票
                </span>
                {{ /if }}
            </p>
        </div>

        {{ /foreach }}

        {{ else }}

        <div class="member-empty">
            未找到搜索结果，请再次确认搜索信息
        </div>

        {{ /if }}

    </div>

    {{ include file="common/component/pager.html" page=$tpl_data.page_info.curr_page page_size=$tpl_data.page_info.page_size count=$tpl_data.page_info.total }}

    {{ else }}

    <div class="unstart">
        投票将于<span>{{ $tpl_data.start_date }}</span>开始，敬请期待！~
    </div>

    {{ /if }}

</div>

{{ /block }}