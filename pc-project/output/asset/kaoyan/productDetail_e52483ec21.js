define('cobble/form/Text',['require','exports','../helper/Input','../helper/Placeholder','../function/init','../function/jquerify','../function/lifeCycle'],function(require){'use strict';function e(e){return o.init(this,e);}var t=require('../helper/Input'),n=require('../helper/Placeholder'),r=require('../function/init'),i=require('../function/jquerify'),o=require('../function/lifeCycle');return e.prototype={constructor:e,type:'Text',init:function(){var e=this,r=e.element;e.placeholder=new n({element:r,simple:e.placeholderSimple,nativeFirst:e.placeholderNativeFirst,placeholderSelector:e.placeholderSelector,template:e.template});var i=e.action;if(i)$.each(i,function(t,n){i[t]=$.proxy(n,e);});e.input=new t({element:r,onChange:function(t){e.emit(t);},onKeyDown:function(t){e.emit(t);},action:i});},getValue:function(){return $.trim(this.element.val());},setValue:function(e,t){var n=this;if(t=t||{},t.force||n.getValue()!==e){if(n.element.val(e),n.placeholder)n.placeholder.refresh();if(!t.silence)n.emit('change');}},dispose:function(){var e=this;o.dispose(e),e.input.dispose(),e.placeholder.dispose(),e.element=e.input=e.placeholder=null;}},i(e.prototype),e.defaultOptions={simple:!1,nativeFirst:!0,placeholderSelector:'.placeholder',template:'<div class="placeholder-wrapper"><div class="placeholder"></div></div>'},e.init=r(e),e;}),define('cobble/form/Validator',['require','exports','module','../function/jquerify','../function/lifeCycle'],function(require){'use strict';function e(e){return i.init(this,e);}function t(e,t){if(e.length>0){var n=e[0].element;if(n.is(':hidden'))n=n.parent();var r=n.offset().top;if(t>0)r-=t;window.scrollTo(window.scrollX,r);}}function n(e){var t=$.Deferred();return $.when.apply($,e).done(function(){t.resolve(arguments);}),t;}var r=require('../function/jquerify'),i=require('../function/lifeCycle');e.prototype={constructor:e,type:'Validator',init:function(){var t=this,n=t.element,r='FORM'===n.prop('tagName')?n:n.find('form');if(r.length>0)r.attr('novalidate','novalidate').on('submit'+a,$.proxy(t.validate,t));$.each(t.fields,function(t,r){var i=n.find('[name="'+t+'"]'),a=r.type;if(!a)a=r.type=i.attr('type')||'text';var u=r.rules;if(!u)u=r.rules={};var s=e.type[a]||[];$.each(s,function(e,t){if(null==u[t]){var n=o[t];if($.isFunction(n))u[t]=n(i,r);}});});var i=t.groupSelector;if(n.on('focusin'+a,function(e){var n=$(e.target).closest(i),r=[t.successClass,t.errorClass,t.requiredClass].join(' ');n.removeClass($.trim(r));}),t.realtime)n.on('focusout'+a,function(e){var n=$(e.target),r=n.prop('name');if(!r)n=n.find('[name]'),r=n.prop('name');if(r)t.validate(r);});},validate:function(e,r){var i=this,o=i.emit('beforeValidate');if(!o.isDefaultPrevented()){var a,u=i.element,s=i.groupSelector;if('string'===$.type(e))e=[e];if($.isArray(e))a=$.map(e,function(e){return u.find('[name="'+e+'"]').closest(s);});else if(a=u.find(s),'boolean'===$.type(e))r=e;var l=[],c=[];$.each(a,function(e,t){var n=i.validateGroup($(t));if(n){if(n.promise)c.push(n),n=n.data;$.merge(l,n);}});var e=[],f=[],p=function(){if($.each(l,function(t,n){if(n.error)f.push(n);e.push(n.element.prop('name'));}),r)t(f,i.scrollGap);i.emit('afterValidate',{fields:e,errors:f});};if(c.length>0)return n(c).done(p);else return p(),0===f.length;}},validateGroup:function(t){if(t.is(':visible')){var r=this,i=[],o=[],a=[];if(t.find('[name]').each(function(t){var n,u,s=this,l=s.name,c=s.value,f=s.disabled,p=$(s);if(!f){var d=r.fields[l];if(d){n=!0,d=$.extend(!0,{},d),d.form=r.element,d.value=$.trim(c);var h;if($.each(e.type[d.type]||[],function(t,n){var r=e.rule[n](d);if(r===!1)return h=n,!1;else if(''===d.value&&'required'===n)return!1;}),h){var m=d.errors;if(m)u=m[h];if(!u)throw new Error(l+' 字段 '+h+' 类型错误信息未定义');}else if($.isFunction(d.custom)){var v=$.Deferred(),y=d.custom(p,function(e){v.resolve(e);});u=null==y||y.done?v:y;}}}if(n)if(t=i.push({element:p,error:u}),u&&u.promise)o.push(u),a.push(t-1);}),o.length>0){var u=n(o).done(function(e){$.each(e,function(e,t){i[a[e]].error=t;}),r.refreshGroup(t,i);});return u.data=i,u;}else return r.refreshGroup(t,i),i;}},refreshGroup:function(e,t){var n=this,r=n.successClass,i=n.errorClass;$.each(t,function(t,o){var a,u=o.element,s=o.error,l=n.errorSelector;if(l)a=e.find(l).eq(t);if(s&&'string'===$.type(s)){if(e.removeClass(r).addClass(i),a){var c=n.renderTemplate;if($.isFunction(c))s=c({text:s},n.errorTemplate);a.html(s).show();var f=n.errorPlacement;if($.isFunction(f))f(u,a);}}else if(o.error='',e.removeClass(i).addClass(r),a)a.html('').hide();});},dispose:function(){var e=this;i.dispose(e),e.element.off(a),e.element=null;}},r(e.prototype),e.defaultOptions={realtime:!1,scrollGap:100,groupSelector:'.form-group',successClass:'has-success',errorClass:'has-error',errorSelector:'.error',errorTemplate:'<i class="icon icon-times-circle"></i>&nbsp;${text}',requiredClass:'has-required',requiredSelector:'.required',requiredTemplate:'${text}',renderTemplate:function(e,t){return t.replace(/\${(\w+)}/g,function(t,n){return e[n]||'';});},errorPlacement:function(e,t){if('hidden'===e.prop('type'))e=e.parent();t.css({position:'static',width:'auto'});var n=t.outerWidth(!0)+5;t.css({position:'absolute',width:n});var r=e.parent();if(r.is('.placeholder-wrapper'))e=r;var i=e.position();t.css({left:i.left+e.outerWidth()-37,top:i.top-t.outerHeight()+8});}},e.type={text:['required','pattern','min','max','minlength','maxlength'],hidden:['required'],password:['required','pattern','minlength','maxlength','equals'],number:['required','pattern','min','max','step'],range:['required','pattern','min','max','step'],tel:['required','pattern'],url:['required','pattern'],email:['required','pattern'],mobile:['required','pattern'],money:['required','pattern','min','max'],idcard:['required','pattern'],'int':['required','pattern','min','max'],internationalMobile:['required','pattern']},e.rule={required:function(e){if(e.value.length>0)return!0;else if(e.rules.required)return!1;},pattern:function(e){var t=e.rules.pattern;if(t)return t.test(e.value);else return void 0;},minlength:function(e){var t=e.rules.minlength;if($.isNumeric(t))return e.value.length>=+t;else return void 0;},maxlength:function(e){var t=e.rules.maxlength;if($.isNumeric(t))return e.value.length<=+t;else return void 0;},min:function(e){var t=e.rules.min;if($.isNumeric(t))return e.value>=+t;else return void 0;},max:function(e){var t=e.rules.max;if($.isNumeric(t))return e.value<=+t;else return void 0;},step:function(e){var t=e.rules.step;if($.isNumeric(t)){var n=e.rules.min||1;return(e.value-n)%t===0;}},equals:function(e){var t=e.rules.equals;if(t){var n=e.form.find('[name="'+t+'"]');return e.value===$.trim(n.val());}}},e.pattern={number:/^[\d.]*$/,'int':/^\d+$/,url:/^(?:(?:0\d{2,3}[- ]?[1-9]\d{6,7})|(?:[48]00[- ]?[1-9]\d{6}))$/,tel:/^(?:(?:0\d{2,3}[- ]?[1-9]\d{6,7})|(?:[48]00[- ]?[1-9]\d{6}))$/,mobile:/^1[3-9]\d{9}$/,email:/^(?:[a-z0-9]+[_\-+.]+)*[a-z0-9]+@(?:([a-z0-9]+-?)*[a-z0-9]+.)+([a-z]{2,})+$/i,money:/^[\d.]*$/,idcard:/(^\d{15}$)|(^\d{17}([0-9]|X)$)/i,internationalMobile:/^\d{7,20}$/};var o={required:function(e){return'required'===e.attr('required');},pattern:function(t,n){var r=t.attr('pattern')||e.pattern[n.type];if('string'===$.type(r))r=new RegExp(r);return r;},minlength:function(e){return e.attr('minlength');},maxlength:function(e){return e.attr('maxlength');},min:function(e){return e.attr('min');},max:function(e){return e.attr('max');},step:function(e){return e.attr('step');},equals:function(e){return e.attr('equals');}},a='.cobble_form_validator';return e;}),define('cobble/function/around',['require','exports','module'],function(){'use strict';return function(e,t,n,r){var i='string'===$.type(t),o=i?e[t]:e;if(!i)r=n,n=t;var a=function(){var e,t=arguments;if($.isFunction(n))e=n.apply(this,t);if(e!==!1){if($.isFunction(o))e=o.apply(this,t);if($.isFunction(r)){var i=r.apply(this,t);if('undefined'!==$.type(i))e=i;}return e;}};return i?e[t]=a:a;};}),define('cobble/function/call',['require','exports','module'],function(){'use strict';return function(e,t,n){if($.isFunction(e)){var r=$.isArray(n)?'apply':'call';return e[r](t,n);}};}),define('cobble/function/init',['require','exports','module'],function(){'use strict';return function(e){return function(t,n){var r=[];return t.each(function(){r.push(new e($.extend({element:$(this)},n)));}),r;};};}),define('cobble/function/jquerify',['require','exports','module'],function(){'use strict';function e(e){return e.faker||e.element;}var t=$.prototype,n={on:function(){return t.on.apply(e(this),arguments),this;},off:function(){return t.off.apply(e(this),arguments),this;},emit:function(n,r){var i=this,o=e(i);if(o){if(!n[$.expando])n='string'===$.type(n)?$.Event(n):$.Event(null,n);n.cobble=i;var a=[n];if(r)a.push(r);var u=i[$.camelCase('on-'+n.type)];if($.isFunction(u)&&u.apply(i,a)===!1)n.preventDefault();if(!n.isPropagationStopped())t.trigger.apply(o,a);return n;}},before:function(t){e(this).before(t);},after:function(t){e(this).after(t);},appendTo:function(t){e(this).appendTo(t);},prependTo:function(t){e(this).prependTo(t);}};return function(e){$.each(n,function(t,n){if(null==e[t])e[t]=n;});};}),define('cobble/function/lifeCycle',['require','exports'],function(require,exports){'use strict';exports.init=function(e,t){var n=e.constructor,r='__cobble__'+n.prototype.type,i=t.element;if(i&&i.data(r))e=i.data(r);else if($.extend(e,n.defaultOptions,t),e.init(),i)i.data(r,e);return e;},exports.dispose=function(e){var t='__cobble__'+e.constructor.prototype.type,n=e.element;if(n)n.removeData(t);};}),define('cobble/function/replaceWith',['require'],function(){'use strict';return function(e,t){e=e[0],t=t[0],e.parentNode.replaceChild(t,e);};}),define('cobble/function/split',['require','exports','module'],function(){'use strict';return function(e,t){var n=[];return $.each(e.split(t),function(e,t){if(t=$.trim(t))n.push(t);}),n;};}),define('cobble/helper/Input',['require','exports','module','../function/around','../function/jquerify','../function/lifeCycle','../util/keyboard','../util/input','./Keyboard'],function(require){'use strict';function e(e){return n.init(this,e);}var t=(require('../function/around'),require('../function/jquerify')),n=require('../function/lifeCycle'),r=require('../util/keyboard'),i=require('../util/input'),o=require('./Keyboard');e.prototype={constructor:e,type:'Input',init:function(){var e=this,t=e.element;i.init(t);var n=e.action;if(n)$.each(n,function(t,r){n[t]=$.proxy(r,e);});var u,s;e.keyboard=new o({element:t,action:n,longPress:e.longPress,onKeyDown:function(t){e.emit(t);},onKeyUp:function(t){e.emit(t);},onBeforeLongPress:function(){u=t.val(),s=!0,e.emit('beforeLongPress');},onAfterLongPress:function(n){if(s=!1,e.emit('afterLongPress'),u!==t.val()&&(r.isCharKey(n.keyCode)||r.isDeleteKey()))e.emit('change');}}),t.on('input'+a,function(){if(!s||!e.smart)e.emit('change');});},autoWidth:function(){var e=this,t=e.element;e.on('change',function(){if(t.scrollLeft()>0)t.width(t.prop('scrollWidth'));});},autoHeight:function(){var e=this,t=e.element;if('hidden'!==t.css('overflow-y'))t.css('overflow-y','hidden');var n,r=t.height(),i=r,o=parseInt(t.css('font-size'),10),a=t.innerHeight()-r;e.on('change',function(){if(i!==r)i=r,t.height(r);if(n=t.prop('scrollHeight')-a,Math.abs(n-i)>o)t.height(n),i=n;});},dispose:function(){var e=this;n.dispose(e);var t=e.element;i.dispose(t),t.off(a),e.keyboard.dispose(),e.element=e.keyboard=null;}},t(e.prototype),e.defaultOptions={smart:!0,longPress:!1};var a='.cobble_helper_input';return e;}),define('cobble/helper/Keyboard',['require','exports','module','../function/call','../function/split','../function/jquerify','../util/keyboard'],function(require){'use strict';function e(t){$.extend(this,e.defaultOptions,t),this.init();}function t(e){var t=[];return $.each(e,function(e,n){var r=[],i='plus',a=o(e.replace(/\$\+/g,i),'+');if($.each(u.combinationKey,function(e){if($.inArray(e,a)<0)a.push('!'+e);}),$.each(a,function(e,t){var n=0===t.indexOf('!');if(n)t=t.substr(1);if(t===i)t='$+';if(u.combinationKey[t])r.push((n?'!':'')+'e.'+t+'Key');else if(u[t])r.push('e.keyCode==='+u[t]);else return r.length=0,!1;}),r.length>0)t.push({test:new Function('e','return '+r.join('&')),handler:n});}),t;}function n(e){var t=e.data,n=e.keyCode,r=t.cache,o=r.counter;if(r.keyCode===n&&o>0){if(1===o)t.emit({type:'beforeLongPress',keyCode:n});o++;}else r.keyCode=n,o=1;if(r.counter=o,t.longPress||1===o)$.each(r.action,function(n,r){if(r.test(e))i(r.handler,t,e);});e.type='keyDown',t.emit(e);}function r(e){var t=e.data,n=t.cache;if(n.keyCode=null,n.counter>1)t.emit({type:'afterLongPress',keyCode:e.keyCode}),n.counter=0;e.type='keyUp',t.emit(e);}var i=require('../function/call'),o=require('../function/split'),a=require('../function/jquerify'),u=require('../util/keyboard');e.prototype={constructor:e,type:'Keyboard',init:function(){var e=this;e.cache={counter:0,action:t(e.action||{})},e.element.on('keydown'+s,e,n).on('keyup'+s,e,r);},dispose:function(){var e=this;e.element.off(s),e.element=e.cache=null;}},a(e.prototype),e.defaultOptions={longPress:!1};var s='.cobble_helper_keyboard';return e;}),define('cobble/helper/Placeholder',['require','exports','module','../function/init','../function/jquerify','../function/lifeCycle','../function/replaceWith','../util/input'],function(require){'use strict';function e(e){return r.init(this,e);}var t=require('../function/init'),n=require('../function/jquerify'),r=require('../function/lifeCycle'),i=require('../function/replaceWith'),o=require('../util/input');e.prototype={constructor:e,type:'Placeholder',init:function(){var e=this,t=e.element,n=t.attr('placeholder');if(null==e.value)e.value=n||'';var r;if(s)if(e.nativeFirst)r='native';else if(n)t.removeAttr('placeholder');if(!r)r=e.simple?'simple':'complex';if(r=l[r],$.extend(e,r),r.init)e.init();if(e.refresh)e.refresh();}},n(e.prototype),e.defaultOptions={simple:!1,nativeFirst:!0,simpleClass:'placeholder-active',placeholderSelector:'.placeholder',template:'<div class="placeholder-wrapper"><div class="placeholder"></div></div>'},e.init=t(e);var a='.cobble_helper_placeholder',u=$('<input type="text" />')[0],s='placeholder'in u;u=null;var l={'native':{show:$.noop,hide:$.noop,refresh:$.noop,dispose:function(){var e=this;r.dispose(e),e.element=null;}},simple:{init:function(){var e=this,t=$.proxy(e.refresh,e);e.element.on('focus'+a,t).on('blur'+a,t);},show:function(){var e=this;e.element.addClass(e.simpleClass).val(e.value);},hide:function(){var e=this;e.element.removeClass(e.simpleClass).val('');},refresh:function(){var e=this,t=e.element;if(document.activeElement===t[0]){if(t.hasClass(e.simpleClass))e.hide();}else if(!t.val())e.show();},dispose:function(){var e=this;r.dispose(e),e.element.off(a),e.element=null;}},complex:{init:function(){var e=this,t=e.element,n=$(e.template);i(t,n),n.append(t),e.faker=n.find(e.placeholderSelector);var r=$.proxy(e.refresh,e);o.init(t),t.on('focus'+a,r).on('blur'+a,r).on('input'+a,r);},show:function(){var e=this;e.faker.html(e.value).show();},hide:function(){this.faker.hide();},refresh:function(){var e=this,t=e.element.val();if($.trim(t))e.hide();else e.show();},dispose:function(){var e=this;r.dispose(e);var t=e.element;o.dispose(t),t.off(a),e.faker=e.element=null;}}};return e;}),define('cobble/util/input',['require','exports','module','../function/around'],function(require,exports){'use strict';function e(){}function t(e){var t=e.val(),r=!1;e.on('propertychange'+o,function(n){if(r)return void(r=!1);if('value'===n.originalEvent.propertyName){var i=e.val();if(i!==t)e.trigger('input'),t=i;}}),n(e,'val',function(){if(0!==arguments.length)r=!0;});}var n=require('../function/around'),r=$('<input type="text" />')[0],i='oninput'in r;r=null;var o='.cobble_util_input';exports.init=i?e:t,exports.dispose=function(e){e.off(o);};}),define('cobble/util/keyboard',['require','exports','module'],function(require,exports){'use strict';function e(e){var t={};return $.each(e,function(e,n){t[n]=e;}),t;}var t={a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,'`':192,'-':173,'=':61,'[':219,']':221,'\\':220,';':59,"'":222,',':188,'.':190,'/':191,$0:96,$1:97,$2:98,$3:99,$4:100,$5:101,$6:102,$7:103,$8:104,$9:105,'$.':110,'$+':107,'$-':109,'$*':106,'$/':111,space:32,tab:9},n={backspace:8,'delete':46},r={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,enter:13,esc:27,capslock:20,insert:45,home:36,end:35,pageup:33,pagedown:34,left:37,right:39,up:38,down:40},i={shift:16,ctrl:17,meta:91,alt:18};$.extend(exports,t,r,i),exports.charKey=t,exports.deleteKey=n,exports.functionKey=r,exports.combinationKey=i,exports.isCharKey=function(n){return n in e(t);},exports.isDeleteKey=function(t){return t in e(n);},exports.isFunctionKey=function(t){return t in e(r);},exports.isCombinationKey=function(t){return t in e(i);};}),define('common/component/Editor_c19cafc60f',['require','cobble/form/Text'],function(require){'use strict';function e(e){$.extend(this,e),this.init();}var t=require('cobble/form/Text');e.prototype={constructor:e,init:function(){var e=this,n=this.element,r=this.minLength||0,i=this.maxLength,o=(this.flexHeight||!1,this.autoHint||!1),a=n.find('.form-hint');if(r)a.html('还需要输入<strong>'+r+'</strong>个字');else if(!o)a.html('还可以输入<strong>'+i+'</strong>个字');var u=this.textarea=n.find('textarea'),s=function(){var t,n=u.val();if(n.length<r)t=r-n.length,a.html('还需要输入<strong>'+t+'</strong>个字');else if(n.length>=r&&n.length<=i)if(!o||n.length>=o)t=i-n.length,a.html('还可以输入<strong>'+t+'</strong>个字');else a.html('');else if(i<n.length)t=n.length-i,a.html('<span class="text-error">已超出<strong>'+t+'</strong>个字</span>');e.autoHeight();};this.textInput=new t({element:u,placeholderNativeFirst:!1,placeholderSimple:!1,onChange:s}),s();},getValue:function(){return this.textarea.val();},setValue:function(e){this.textInput.setValue(e),this.autoHeight();},autoHeight:function(){if(this.flexHeight){var e=this.textarea[0].scrollHeight+'px';this.textarea.css('height',e);}},validate:function(){return this.maxLength>=this.getValue().length;}};return e;}),define('common/component/SaveButton_b1f301d041',['require'],function(){'use strict';function e(e){$.extend(this,e),this.init();}return e.prototype={init:function(){var e=this,t=e.element,n=t.html();if('BUTTON'!==t.prop('tagName'))throw new Error('SaveButton 必须使用 button 标签');var r=function(){var r=e.save();if(r)t.focus(),t.prop('disabled',!0),t.html(e.saveText||'正在保存...'),r.always(function(){setTimeout(function(){t.prop('disabled',!1),t.html(n);},10);});return!1;};if(t.click(r),e.form)e.form.submit(function(){return r(),!1;});}},e;}),define('common/form_2ef59f4d41',['require','exports','cobble/form/Validator'],function(require,exports){'use strict';function e(e){var t={},n=e.find('[name]');return n.each(function(){var e=this.name,n=this.value,r='radio'===this.type||'checkbox'===this.type;if(r){if(this.checked)t[e]=n;}else{var i=t[e];if(null==i)t[e]=n;else i=t[e]=[i],i.push(n);}}),$.each(t,function(e,n){t[e]=$.isArray(n)?n.join(','):$.trim(n);}),t;}function t(e,t){$.each(t,function(t,r){if(r){var i=e.find('[name="'+t+'"]'),o=i.closest('.form-group');o.removeClass('has-success').addClass('has-error');var a=o.find('.error');a.html(r),n.defaultOptions.errorPlacement(i,a);}});}var n=require('cobble/form/Validator');exports.parse=function(t){return e(t);},exports.get=function(n,r){return $.ajax({url:r,type:'get',dataType:'json',data:n.jquery?e(n):n}).done(function(e){if(e.code){var r=e.data;if(r)t(n,r);}return e;});},exports.post=function(n,r){return $.ajax({url:r,type:'post',dataType:'json',data:n.jquery?e(n):n}).done(function(e){if(e.code){var r=e.data;if(r)t(n,r);}return e;});};}),define('kaoyan/productDetail_e52483ec21',['require','exports','common/component/Editor_c19cafc60f','cobble/form/Validator','common/component/SaveButton_b1f301d041','common/service_9c322508d3','common/form_2ef59f4d41','common/store_a1a35b3dfc'],function(require,exports){'use strict';var e=require('common/component/Editor_c19cafc60f'),t=require('cobble/form/Validator'),n=require('common/component/SaveButton_b1f301d041'),r=require('common/service_9c322508d3'),i=require('common/form_2ef59f4d41'),o=require('common/store_a1a35b3dfc'),a=$('#main'),u=new t({element:a,fields:{student_name:{errors:{required:'请输入上课人姓名'}}}});exports.init=function(){new e({element:a.find('.note'),maxLength:200});a.on('change','input[name="self"]',function(e){var t=$(e.currentTarget),n=a.find('.student-name');if(1==t.val())n.hide();else if(n.show(),n.hasClass('has-error'))n.removeClass('has-error');});new n({element:a.find('#btn-submit'),saveText:'正在提交...',save:function(){var e=i.parse(a.find('.form')),t={};if(t.courseNumber=o.get('courseNumber'),t.isSelf=e.self,t.studentName=e.student_name,t.note=e.note,t.isSelf||u.validate('student_name')){var n='';if(7==o.get('courseType'))n='https://'+location.host+'/pay/createPackageProductPurchase';else n='https://'+location.host+'/pay/createUnionProductPurchase';return r.createPackagePurchase(n,t,{errorHandler:{100014:function(){var e=o.get('user').id==teacherId?'你不能约自己的课':'权限错误';alert(e,'温馨提示');},6:function(){alert({title:'温馨提示',content:'不好意思\uFF0C同一节课不能重复报名哦~<br />如果你之前提交过订单未支付\uFF0C请去 <span class="text-primary">我的订单 &gt; 待支付</span> 完成支付',buttons:[{text:'查看我的订单',type:'primary',handler:function(){this.hide(),location.href='http://'+o.get('env')+'.genshuixue.com/order/studentOrders';}},{text:'取消',handler:function(){this.hide();}}]});},100039:function(){alert('已经开课\uFF0C不能再提交订单','温馨提示');},100051:function(){alert({title:'温馨提示',content:'当前课程无法购买',buttons:[{text:'我知道了',type:'primary',handler:function(){this.hide();}}]});},100040:function(){alert({title:'温馨提示',content:'来晚了一步\uFF01<br />目前课程已经报满\uFF0C你可以联系老师增加名额\u3002',buttons:[{text:'返回老师主页',type:'primary',handler:function(){location.href='/t/'+o.get('teacherNumber'),this.hide();}}]});}}}).done(function(e){if(0===e.code){var t=e.data;if(t.err_code&&'66'==t.err_code)return void alert({title:'温馨提示',content:'该课程订单已经存在\uFF0C是否查看\uFF1F',buttons:[{text:'取消',handler:function(){this.hide();}},{text:'查看订单',type:'primary',handler:function(){this.hide(),location.href=t.order_url;}}]});var n={'test-kaoyan':'test',test:'test','beta-kaoyan':'beta',beta:'beta',kaoyan:'www',www:'www'};if('0.00'===o.get('price'))success('提交成功',function(){location.href='https://'+n[o.get('env')]+'.genshuixue.com/pay/result?purchase_id='+t.purchase_id;});else location.href='https://'+n[o.get('env')]+'.genshuixue.com/pay/payProductPurchase?purchase_id='+t.purchase_id;}});}}});};});