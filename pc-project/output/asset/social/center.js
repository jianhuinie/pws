define('common/eventEmitter_8bcc038860',['require','exports'],function(require,exports){var e=$({});exports.emit=function(){e.trigger.apply(e,arguments);},exports.on=function(){e.on.apply(e,arguments);},exports.un=function(){e.off.apply(e,arguments);},exports.once=function(){e.one.apply(e,arguments);};}),define('social/center',['require','exports','common/eventEmitter_8bcc038860','./center/post_e59be86692','./center/favor_bca98c23e4','./center/group_612702d90c','tpl!social/common/pager_8de893f3ed.tpl','tpl!social/center_58ce053dd3.tpl'],function(require,exports){{var e=require('common/eventEmitter_8bcc038860');require('./center/post_e59be86692'),require('./center/favor_bca98c23e4'),require('./center/group_612702d90c');}require('tpl!social/common/pager_8de893f3ed.tpl'),require('tpl!social/center_58ce053dd3.tpl'),exports.init=function(){var a=$('#main .content');a.find('.post-nav-wrapper').on('click','.post-nav-item',function(){var a=$(this);if(!a.hasClass('active'))a.siblings().removeClass('active'),a.addClass('active'),e.emit('center-nav-change',a.data('nav'));});};}),define('social/center_html',function(){return'{{ -- tpl:social-center-post -- }}<div class="my-post"><% if (_this.data.length > 0){ %><ul><% var tmp; %><% for (var i = 0, len = _this.data.length; i < len; i++){ tmp = _this.data[i]; %><li class="post-item" data-post-id="<%= tmp.id %>"><a class="post-title ellipsis" href="<%= tmp.post_info_url %>" target="_blank"><%=# tmp.title %></a><a class="post-group" href="<%= tmp.group_info_url %>" target="_blank"><%=# tmp.group_name %></a><span class="post-time"><%= tmp.create_time %></span><span class="action delete-action">删除</span><span class="action edit-action">编辑</span></li><% } %></ul><% } else { %><div class="no-data"><i class="icon icon-info-circle"></i>暂无数据</div><% } %></div>{{ -- /tpl -- }}{{ -- tpl:social-center-favor -- }}<div class="my-favor"><% if (_this.data.length > 0){ %><ul><% var tmp; %><% for (var i = 0, len = _this.data.length; i < len; i++){ tmp = _this.data[i]; %><li class="post-item" data-thread-id="<%= tmp.id %>"><a class="post-title ellipsis" href="<%= tmp.post_info_url %>" target="_blank"><%=# tmp.title %></a><a class="post-group" href="<%= tmp.group_info_url %>" target="_blank"><%=# tmp.group_name %></a><span class="divider"></span><a class="post-author" href="<%= tmp.user_homepage_url %>" target="_blank"><%=# tmp.author_name %></a><span class="action delete-action">取消收藏</span></li><% } %></ul><% } else { %><div class="no-data"><i class="icon icon-info-circle"></i>暂无数据</div><% } %></div>{{ -- /tpl -- }}{{ -- tpl:social-center-group -- }}<div class="group"><% if (_this.data.length > 0){ %><div class="group-list-wrapper"><ul class="group-list"><% var tmp; %><% for (var i = 0, len = _this.data.length; i < len; i++){ tmp = _this.data[i]; %><li class="group-item" data-id="<%= tmp.id %>"><div class="group-avatar"><a class="img-wrapper" href="<%= tmp.group_info_url %>" target="_blank"><img src="<%= tmp.avatar %>@1e_70w_70h_1c_0i_1o_90Q_1x" width="70px" height="70px"/></a></div><div class="group-info"><div class="group-title"><a href="<%= tmp.group_info_url %>" target="_blank"><%=# tmp.name %></a><span class="group-btn cancel-btn">退出</span></div><p class="group-des"><%=# tmp.brief %></p></div></li><% } %></ul></div><% } else { %><div class="no-data"><i class="icon icon-info-circle"></i>暂无数据</div><% } %></div>{{ -- /tpl -- }}';}),define('social/center/favor_bca98c23e4',['require','exports','common/service_9c322508d3'],function(require,exports){var e,a,t=require('common/service_9c322508d3');exports.fresh=function(e){var e=$.extend(!0,{page:1,page_size:25,count:0,hide_jump:!0},e);t.getCollect(e).done(function(t){if(!t.code){var i=t.data,n=Simplite.render('social-center-favor',{data:i.list});e.count=i.pager.count,n+=Simplite.render('social-common-pager',{pager:e}),a.html(n);}});},exports.init=function(i){a=$(this),e=i,a.on('click','.delete-action',function(){var e=$(this).closest('.post-item');confirm('确定要删除该收藏吗?','温馨提示').done(function(){t.setCollect({threadId:e.data('threadId'),op:0}).done(function(){var e=$('.pager-block .active',a).text();exports.fresh({page:e||1});});});}).on('click','.pager a[data-page]',function(){var e=$(this).data('page');return exports.fresh({page:e}),!1;}),e.on('center-nav-change',function(e,t){if('favor'===t)exports.fresh(),a.show();else a.hide();});};}),define('social/center/group_612702d90c',['require','exports','common/service_9c322508d3'],function(require,exports){var e,a,t=require('common/service_9c322508d3');exports.fresh=function(e){var e=$.extend(!0,{page:1,page_size:6,count:0,hide_jump:!0},e);t.getGroup(e).done(function(t){if(!t.code){var i=t.data,n=Simplite.render('social-center-group',{data:i.list||[]});e.count=i.pager.count,n+=Simplite.render('social-common-pager',{pager:e}),a.html(n);}});},exports.init=function(i){e=i,a=$(this),e.on('center-nav-change',function(e,t){if('group'===t)exports.fresh(),a.show();else a.hide();}),a.on('click','.cancel-btn',function(){var e=$(this),i=e.closest('.group-item'),n=i.data('id');t.quitGroup({groupId:n}).done(function(){var e=$('.pager-block .active',a).text();exports.fresh({page:e||1});});}).on('click','.pager a[data-page]',function(){var e=$(this).data('page');return exports.fresh({page:e}),!1;});};}),define('social/center/post_e59be86692',['require','exports','common/service_9c322508d3'],function(require,exports){var e,a,t=require('common/service_9c322508d3');exports.fresh=function(e){var e=$.extend(!0,{page:1,page_size:25,count:0,hide_jump:!0},e);t.getOwner(e).done(function(t){if(!t.code){var i=t.data,n=Simplite.render('social-center-post',{data:i.list||[]});e.count=i.pager.count,n+=Simplite.render('social-common-pager',{pager:e}),a.html(n);}});},exports.init=function(i){a=$(this),e=i,a.on('click','.delete-action',function(){var e=$(this).closest('.post-item'),i=e.data('postId');confirm('确定要删除该帖子吗?','温馨提示').done(function(){var e={threadId:i};t.deleteThread(e).done(function(e){if(!e.code){var t=$('.pager-block .active',a).text();success('删除成功'),exports.fresh({page:t||1});}else error('删除失败');});});}).on('click','.edit-action',function(){var e=$(this).closest('.post-item'),a=e.data('postId');window.open('/forum/modifyThread?thread_id='+a,'_blank');}).on('click','.pager a[data-page]',function(){var e=$(this).data('page');return exports.fresh({page:e}),!1;}),e.on('center-nav-change',function(e,t){if('post'===t)exports.fresh(),a.show();else a.hide();});};}),define('social/common/pager_html',function(){return'{{ -- tpl:social-common-pager -- }}<%var pager = _this.pager || {};var page = pager.page || 1;var pageSize = pager.page_size;var count = pager.count || 0;var hideJump = pager.hide_jump;var showCount = pager.show_count || 4;var pageCount = Math.ceil(count/pageSize);if(showCount % 2 == 1){showCount = showCount - 1;}%><% if(pageCount > 1){ %><div class="pager-block"><div class="pager"><% if(page > 1){ %><a href="javascript:void(0);" data-page="<%= page-1 %>" rel="nofollow"><i class="icon icon-chevron-left"></i> 上一页</a><% } %><%var start = 1, end = pageCount;if(pageCount <= showCount + 1){start = 1;end = pageCount;} else if (pageCount <= page + showCount) {end = pageCount;start = pageCount - showCount;} else if (page <= showCount/2){start = 1;end = 1 + showCount;} else {start = page - showCount/2;end = page + showCount/2;}%><% if (start > 2){ %><a href="javascript:void(0);" data-page="1" rel="nofollow">1</a><b class="ellipsis">...</b><% } %><% for(var item=start; item <= end; item++){ %><% if(item != page){ %><a href="javascript:void(0);" data-page="<%= item %>" rel="nofollow"><%= item %></a><% } else { %><a class="active" href="javascript:void(0);" rel="nofollow"><%= item %></a><% } %><% }%><% if(end < pageCount){ %><b class="ellipsis">...</b><a href="javascript:void(0);" data-page="<%= pageCount %>" rel="nofollow"><%= pageCount %></a><% } %><% if(page < pageCount){ %><a href="javascript:void(0);" data-page="<%= page+1 %>" rel="nofollow">下一页 <i class="icon icon-chevron-right"></i></a><% } %></div><% if(!hideJump){ %><div class="pager-form"><b>共 <%= pageCount %> 页\uFF0C去第</b><input class="form-text small" type="text" onchange="var button = this.nextSibling.nextSibling;var page = this.value;button.href = \'javascript:void(0);\';button.removeAttribute(\'data-page\');if (/^\\d+$/.test(page) && parseInt(page, 10) >= 1 && parseInt(page, 10) <= <%= page_count %>) {button.setAttribute(\'data-page\', page);}else {this.select();}"/><b>页</b><a class="btn-default small">确定</a></div><% } %></div><% } %>{{ -- /tpl -- }}{{ -- tpl:social-common-report -- }}<div class="report-dialog"><diV class="row"><label>举报类型\uFF1A</label><label><input type="radio" value="1" name="type"/>广告</label><label><input type="radio" value="2" name="type"/>色情</label><label><input type="radio" value="3" name="type"/>反动</label><label><input type="radio" value="4" name="type"/>欺诈</label></div><div class="actions"><button class="btn btn-primary" disabled="disabled">确认举报</button></div></div>{{ -- /tpl -- }}{{ -- tpl:social-common-ban -- }}<div class="ban-dialog"><div class="row"><div class="row-label"><label>封禁时间\uFF1A</label></div><div class="row-content"><label><input type="radio" value="1" name="time"/>1天</label><label><input type="radio" value="3" name="time"/>3天</label><label><input type="radio" value="10" name="time"/>10天</label></div></div><div class="row"><div class="row-label"><label>封禁理由\uFF1A</label></div><div class="row-content"><div class="reason"><label><input type="radio" value="辱骂管理员\uFF0C对管理员工作造成干扰" name="reason"/>辱骂管理员\uFF0C对管理员工作造成干扰</label></div><div class="reason"><label><input type="radio" value="垃圾广告营销" name="reason"/>垃圾广告营销</label></div><div class="reason"><label><input type="radio" value="传播有害信息" name="reason"/>传播有害信息</label></div></div></div><div class="row actions"><button class="btn btn-primary" disabled="disabled">确认禁言</button></div></div>{{ -- /tpl -- }}';});