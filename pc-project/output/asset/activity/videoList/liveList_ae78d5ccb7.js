define('cobble/function/jquerify',['require','exports','module'],function(){'use strict';function e(e){return e.faker||e.element;}var t=$.prototype,i={on:function(){return t.on.apply(e(this),arguments),this;},off:function(){return t.off.apply(e(this),arguments),this;},emit:function(i,n){var o=this,a=e(o);if(a){if(!i[$.expando])i='string'===$.type(i)?$.Event(i):$.Event(null,i);i.cobble=o;var r=[i];if(n)r.push(n);var s=o[$.camelCase('on-'+i.type)];if($.isFunction(s)&&s.apply(o,r)===!1)i.preventDefault();if(!i.isPropagationStopped())t.trigger.apply(a,r);return i;}},before:function(t){e(this).before(t);},after:function(t){e(this).after(t);},appendTo:function(t){e(this).appendTo(t);},prependTo:function(t){e(this).prependTo(t);}};return function(e){$.each(i,function(t,i){if(null==e[t])e[t]=i;});};}),define('cobble/function/lifeCycle',['require','exports'],function(require,exports){'use strict';exports.init=function(e,t){var i=e.constructor,n='__cobble__'+i.prototype.type,o=t.element;if(o&&o.data(n))e=o.data(n);else if($.extend(e,i.defaultOptions,t),e.init(),o)o.data(n,e);return e;},exports.dispose=function(e){var t='__cobble__'+e.constructor.prototype.type,i=e.element;if(i)i.removeData(t);};}),define('cobble/function/toNumber',['require','exports','module'],function(){'use strict';var e={'int':parseInt,'float':parseFloat};return function(t,i,n){if('number'!==$.type(t)){var o=e[n];if(t=o?o(t,10):+t,isNaN(t))t=i;}return t;};}),define('cobble/function/viewportHeight',['require','exports','module'],function(){'use strict';return function(){return window.innerHeight||document.documentElement.clientHeight;};}),define('cobble/helper/Switchable',['require','exports','module','../function/jquerify','../function/lifeCycle','../function/toNumber'],function(require){'use strict';function e(e){return i.init(this,e);}var t=require('../function/jquerify'),i=require('../function/lifeCycle'),n=require('../function/toNumber');e.prototype={constructor:e,type:'Switchable',init:function(){var e=this,t=e.element,i=e.selector,r=e.items=t.find(i),s=n(e.index,a),l=e.activeClass;if(s===a&&l)s=r.index(t.find('.'+l));if(i){var c=e.trigger;if('click'===c)t.on('click'+o,i,function(){e.to(r.index(this));});else if('over'===c)t.on('mouseenter'+o,i,function(){var t=this;e.timer=setTimeout(function(){if(e.element)e.to(r.index(t));},150);}),t.on('mouseleave'+o,i,function(){if(e.timer)clearTimeout(e.timer),e.timer=null;});}if(e.index=a,s>=0)e.to(s);},to:function(e){var t=this;e=n(e,a);var i=t.index;if(e!==i){var o=t.activeClass,r=t.items;if(o){if(i>=0)r.eq(i).removeClass(o);if(e>=0)r.eq(e).addClass(o);}t.index=e,t.change({from:i,to:e});}},dispose:function(){var e=this;i.dispose(e),e.element.off(o),e.element=e.items=null;}},t(e.prototype),e.defaultOptions={index:0,trigger:'click'};var o='.cobble_helper_switchable',a=-1;return e;}),define('cobble/ui/Carousel',['require','exports','module','../function/jquerify','../function/lifeCycle','../helper/Switchable'],function(require){'use strict';function e(e){return i.init(this,e);}var t=require('../function/jquerify'),i=require('../function/lifeCycle'),n=require('../helper/Switchable');e.prototype={constructor:e,type:'Carousel',init:function(){var e=this,t=e.element,i='click'+o,a='mouseenter'+o,r='mouseleave'+o,s=e.prevSelector;if(s)t.on(i,s,$.proxy(e.prev,e));var l=e.nextSelector;if(l)t.on(i,l,$.proxy(e.next,e));var c=e.autoPlay,d=e.itemSelector;if(c&&e.pauseOnHover)t.on(a,d,$.proxy(e.pause,e)).on(r,d,$.proxy(e.play,e));if(e.minIndex=0,e.maxIndex=t.find(d).length-1-(e.showCount-1),e.switcher=new n({element:t,index:e.index,trigger:e.trigger,selector:e.iconSelector,activeClass:e.activeClass,change:function(t){e.index=t.to,e.animation(t),e.emit('change',t);}}),c)e.play();},prev:function(){var e=this,t=e.index-e.step;if(t<e.minIndex)if(e.loop)t=e.maxIndex;else return;e.to(t);},next:function(){var e=this,t=e.index+e.step;if(t>e.maxIndex)if(e.loop)t=e.minIndex;else return;e.to(t);},to:function(e){var t=this;if(t.autoPlay)t.play(e);else t.switcher.to(e);},play:function(e){var t=this;if(t.autoPlay){if(t.playing)t.pause();if(t.playing=!0,t.playTimer=setTimeout($.proxy(t.next,t),t.delay),e!==t.index&&$.isNumeric(e))t.switcher.to(e);}},pause:function(){var e=this;if(e.autoPlay)if(e.playing=!1,e.playTimer)clearTimeout(e.playTimer),e.playTimer=null;},dispose:function(){var e=this;if(i.dispose(e),e.playing)e.pause();e.element.off(o),e.switcher.dispose(),e.element=e.switcher=null;}},t(e.prototype),e.defaultOptions={index:0,step:1,delay:5000,showCount:1,trigger:'over',loop:!0,autoPlay:!0,pauseOnHover:!0};var o='.cobble_ui_carousel';return e;}),define('cobble/util/cookie',['require','exports','module'],function(require,exports){'use strict';function e(e){if(0===e.indexOf('"'))e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');var t={};try{e=decodeURIComponent(e.replace(/\+/g,' ')),$.each(e.split(';'),function(e,i){var n=i.split('='),o=$.trim(n[0]),a=$.trim(n[1]);if(o)t[o]=a;});}catch(i){}return t;}function t(e,t,n){var o=n.expires;if($.isNumeric(o)){var a=o;o=new Date(),o.setTime(o.getTime()+a*i);}document.cookie=[encodeURIComponent(e),'=',encodeURIComponent(t),o?';expires='+o.toUTCString():'',n.path?';path='+n.path:'',n.domain?';domain='+n.domain:'',n.secure?';secure':''].join('');}var i=3600000;exports.get=function(t){var i=e(document.cookie);return'string'===$.type(t)?i[t]:i;},exports.set=function(e,i,n){if($.isPlainObject(e))n=i,i=null;if(n=$.extend({},exports.defaultOptions,n),null===i)$.each(e,function(e,i){t(e,i,n);});else t(e,i,n);},exports.remove=function(e,i){if(null!=e)i=i||{},i.expires=-1,t(e,'',$.extend({},exports.defaultOptions,i));},exports.defaultOptions={path:'/'};}),define('cobble/util/instance',['require','exports','module'],function(require,exports){exports.window=$(window),exports.document=$(document),exports.html=$(document.documentElement),exports.body=$(document.body);}),define('cobble/util/url',['require','exports','module'],function(require,exports){'use strict';exports.parseQuery=function(e){var t={};if('string'===$.type(e)&&e.length>1){var i=0,n=e.charAt(0);if('?'===n)i=1;else if('#'===n){i=1;var o=e.charAt(1);if('/'===o)i=2;}if(i>0)e=e.substr(i);$.each(e.split('&'),function(e,i){var n=i.split('=');if(2===n.length){var o=$.trim(n[0]);if(o)t[o]=decodeURIComponent($.trim(n[1]));}});}return t;},exports.getOrigin=function(e){if(!e)e=document.URL;return exports.parse(e).origin;},exports.parse=function(e){var t=document.createElement('a');t.href=e,e=t.href;var i='';if(t.protocol&&t.host)i=t.protocol+'//'+t.host;else if(/^(http[s]?:\/\/[^\/]+)(?=\/)/.test(e))i=RegExp.$1;var n=i.split(':');if(0===i.indexOf('http:')&&3===n.length&&80==n[2])n.length=2,i=n.join(':');var o=t.pathname;if(o&&'/'!==o.charAt(0))o='/'+o;return{origin:i,pathname:o,search:t.search};};}),define('activity/videoList/ad_da35cc9b91',['require','exports','common/store_a1a35b3dfc','common/service_9c322508d3','common/eventEmitter_8bcc038860','common/component/Slider_e976f1c044','common/function/getAdMonitorUrl_4b5526f5c9','tpl!../videoList/ad_e57106b00b.tpl'],function(require,exports){'use strict';var e=require('common/store_a1a35b3dfc'),t=require('common/service_9c322508d3'),i=require('common/eventEmitter_8bcc038860'),n=require('common/component/Slider_e976f1c044'),o=require('common/function/getAdMonitorUrl_4b5526f5c9');require('tpl!../videoList/ad_e57106b00b.tpl');var a,r,s=function(){new n({element:$('.slider-container'),itemSelector:'.promotion-slideritem',iconSelector:'.promotion-slider-navitem',prevSelector:'.promotion-slider-left',nextSelector:'.promotion-slider-right',duration:3000,onChange:function(e,t){var i=$('.promotion-slideritem[data-index="'+t.to+'"]',this.element);if(i.addClass('active'),t.from>=0)$('.promotion-slideritem[data-index="'+t.from+'"]',this.element).removeClass('active');}});},l=function(e){var t={material:'http://img.gsxservice.com/0cms/d/file/content/2016/04/5714bd74ec168.jpg',click:'http://ju.genshuixue.com?zn=zn_juhuixue_banner_pc ',monitor:'',clickMonitor:'',hover:'聚惠学'};if(!e||!e.length)e=[t];for(var i=e.length-1;i>=0;i--){var n=e[i];if(!n.material)e[i]=t;else if(!n.click)n.click='javascript:void(0);';}var o=$('#slider-container');o.prepend(Simplite.render('ad-slider',e)),s();},c=[],d=function(e,t,i){if(e){var n=e.replace(/^http:\/\//,'//');if(t)if(n){n=o(n,!0,i);var a=new Image(),r=c.push(a)-1;a.onload=a.onerror=function(){a=a.onload=a.onerror=null,delete c[r];},a.src=n;}}},f=function(){a.on('click','.slider-container [data-click-monitor]',function(){var e=$(this).data('click-monitor');return d(e,!0),!0;});},u=function(){if(r=a.find('#slider-container').data('adid'))t.fetchadvertisement({adId:r,cityId:e.get('cityId')}).done(function(e){if(e&&!e.status){var t=e.data;if(!t)i.emit('ad-promotion-data-fail');else i.emit('ad-promotion-data',t);}else i.emit('ad-promotion-data-fail');}).fail(function(){i.emit('ad-promotion-data-fail');});};exports.init=function(){a=this,u(),f(),i.on('ad-promotion-data',function(e,t){l(t[r]);}),i.on('ad-promotion-data-fail',function(){l();});};}),define('activity/videoList/ad_html',function(){return'{{ -- tpl:ad-slider -- }}<ul class="promotion-slider"><% for (var i = 0; i < _this.length; i++) {var data = _this[i];%><li class="promotion-slideritem" data-index="<%= i %>"><a href="<%= data.click %>" target="_blank" title="<%= data.hover %>" data-click-monitor="<%= data.clickMonitor %>"><img src="<%= data.material %>" width="1190" height="390"  alt="<%= data.hover %>"></a><div class="mask"></div></li><% } %></ul><% if (_this.length > 1) {%><ul class="promotion-slider-nav"><% for (var i = 0; i < _this.length; i++) {%><li><span class="promotion-slider-navitem"></span></li><% } %></ul><a href="javascript:;" class="promotion-slider-left" title="上一个"><i class="icon icon-chevron-left"></i></a><a href="javascript:;" class="promotion-slider-right" title="下一张"><i class="icon icon-chevron-right"></i></a><% } %>{{ -- /tpl -- }}';}),define('activity/videoList/bestList_html',function(){return'{{ -- tpl:best-list -- }}<div class="best-list" data-click="best-list"><%var today_data = _this.today;var tomorrow_data = _this.tomorrow;var dat_data = _this.day_after_tomorrow;%><div class="best-content"><ul class="title-tabs"><%if (today_data.length > 0) {if (tomorrow_data.length > 0) {if (dat_data.length > 0) {%><li class="first active width3" data-idx="0" data-click="today">今天</li><li class="width3" data-idx="1" data-click="tomorrow">明天</li><li class="last width3" data-idx="2" data-click="day-affter-tomorrow">后天</li><%} else {%><li class="first active width2" data-idx="0" data-click="today">今天</li><li class="last width2" data-idx="1" data-click="tomorrow">明天</li><%}} else {if (dat_data.length > 0) {%><li class="first active width2" data-idx="0" data-click="today">今天</li><li class="last width2" data-idx="1" data-click="day-affter-tomorrow">后天</li><%} else {%><li class="first active width1" data-idx="0" data-click="today">今天</li><%}}} else {if (tomorrow_data.length > 0) {if (dat_data.length > 0) {%><li class="first active  width2" data-idx="0" data-click="tomorrow">明天</li><li class="last  width2" data-idx="1" data-click="day-affter-tomorrow">后天</li><%} else {%><li class="first active width1" data-idx="0" data-click="tomorrow">明天</li><%}} else {if (dat_data.length > 0) {%><li class="first last width1" data-idx="0" data-click="day-affter-tomorrow">后天</li><%}}}%></ul><div class="content-list"><%if (today_data.length > 0) {%><ul data-click="list-today"><%for (var i = 0; i < today_data.length; i++) {var item = today_data[i];var stime = item.begin_time * 1000;var etime = item.end_time * 1000;var ntime = new Date().getTime();%><li data-sku="class|<%= today_data.number %>"><a href="<%= item.link %>" target="_blank"><% if (ntime >= stime && etime >= ntime) {%><p>正在直播<span class="img-live"></span></p><% } else {stime = new Date(stime);var sh = stime.getHours();var sm = stime.getMinutes();sh = sh < 10 ? \'0\' + sh : sh;sm = sm < 10 ? \'0\' + sm : sm;stime = sh + \':\' + sm;%><p><%= stime %> 开始</p><% } %><p class="info"><%= item.name %></p></a></li><%}%></ul><%}%><%if (tomorrow_data.length > 0) {%><ul style="display: none;" data-click="list-tomorrow"><%for (var i = 0; i < tomorrow_data.length; i++) {var item = tomorrow_data[i];var stime = item.begin_time * 1000;stime = new Date(stime);var sh = stime.getHours();var sm = stime.getMinutes();sh = sh < 10 ? \'0\' + sh : sh;sm = sm < 10 ? \'0\' + sm : sm;stime = sh + \':\' + sm;%><li data-sku="class|<%= tomorrow_data.number %>"><a href="<%= item.link %>" target="_blank"><p><%= stime %> 开始</p><p class="info"><%= item.name %></p></a></li><%}%></ul><%}%><%if (dat_data.length > 0) {%><ul style="display: none;" data-click="list-datomorrow"><%for (var i = 0; i < dat_data.length; i++) {var item = dat_data[i];var stime = item.begin_time * 1000;stime = new Date(stime);var sh = stime.getHours();var sm = stime.getMinutes();sh = sh < 10 ? \'0\' + sh : sh;sm = sm < 10 ? \'0\' + sm : sm;stime = sh + \':\' + sm;%><li data-sku="class|<%= dat_data.number %>"><a href="<%= item.link %>" target="_blank"><p><%= stime %> 开始</p><p class="info"><%= item.name %></p></a></li><%}%></ul><%}%></div></div><a href="#" class="get-button" data-click="get-button">收起精品课<i class="icon icon-angle-up"></i></a></div>{{ -- /tpl -- }}';}),define('activity/videoList/liveList_ae78d5ccb7',['require','exports','common/component/Slider_e976f1c044','common/service_9c322508d3','common/store_a1a35b3dfc','common/lazyImage_92160e3789','common/component/ClickMonitor_2ea1c7c842','tpl!../videoList/bestList_b4935c01e3.tpl','../videoList/ad_da35cc9b91','../videoList/search_8543b61be7'],function(require,exports){'use strict';function e(){var e={type:'search',stype:'course_recommend'};gsx_ready(function(t){e.uid=t.log[1];});var t=function(e){for(var t={};e;){var i,n='monitor',o=e.data();for(var a in o)if(0===a.indexOf(n)){i=a.substring(n.length).toLowerCase();var r=(o[a]+'').split('|');if(r.length>1)i=i+'_'+r[0],o[a]=r[1];if(i)if(t[i])t[i]=o[a]+'.'+t[i];else t[i]=o[a];}if('BODY'==e[0].tagName)break;else e=e.parent();}return t.t=new Date().getTime(),t;};return new a({selector:'.click-monitor',monitorUrl:' //click.genshuixue.com/w.gif',defaultParams:e,useDataHref:!1,isSend:'www'===n.get('env'),interceptor:t});}var t=require('common/component/Slider_e976f1c044'),i=require('common/service_9c322508d3'),n=require('common/store_a1a35b3dfc'),o=require('common/lazyImage_92160e3789'),a=require('common/component/ClickMonitor_2ea1c7c842');require('tpl!../videoList/bestList_b4935c01e3.tpl'),require('../videoList/ad_da35cc9b91'),require('../videoList/search_8543b61be7');var r=function(){i.getHotLiveList({from:'live_index'}).done(function(e){if(!e.code){var t=e.data;$('#slider-container').append(Simplite.render('best-list',t)),$('#slider-container .title-tabs li').eq(0).click();}});},s=function(){var e=$('.hot-video'),i=e.find('.scroll-list-box .list').length;new t({element:$('.hot-video'),itemSelector:'.scroll-list-box .list',prevSelector:'.icon-chevron-left',nextSelector:'.icon-chevron-right',autoPlay:!1,loop:!1,duration:5000,delay:8000,onChange:function(t,n){var o=(n.form,n.to);if(0==o)e.find('.icon-chevron-left').addClass('disable'),e.find('.icon-chevron-right').removeClass('disable');else if(o==i-1)e.find('.icon-chevron-right').addClass('disable'),e.find('.icon-chevron-left').removeClass('disable');else e.find('.icon-chevron-left').removeClass('disable'),e.find('.icon-chevron-right').removeClass('disable');}});},l=function(){var e=navigator.platform;if(e.indexOf('Mac')>-1)return!0;else return!1;};exports.init=function(){r(),s(),o.init(),e();var t,i;if(n.get('user'))t=n.get('user').type,i=n.get('user').number;if(0===t)$('.to-liveroom').attr('href','/live/teacher_trial?number='+i);else if(2===t)$('.to-liveroom').attr('href','http://www.genshuixue.com/live/teacher_trial?number=371780178');else $('.to-liveroom').attr('href','/static/login?next=/static/windows');var a=$('.search-box'),c=l();if(c)a.find('.not-mac').hide(),a.find('.mac').show();var d=$('.slider-container');d.on('click','.get-button',function(e){var t=$(this);if(t.find('.icon-angle-up').length)d.find('.best-content').animate({height:'0'},500,function(){t.html('展开精品课<i class="icon icon-angle-down"></i>');});else d.find('.best-content').animate({height:'334px'},500,function(){t.html('收起精品课<i class="icon icon-angle-up"></i>');});e.preventDefault();}).on('click','.title-tabs li',function(){var e=$(this).data('idx');d.find('.title-tabs li').removeClass('active').eq(e).addClass('active'),d.find('.content-list ul').hide().eq(e).show();});var f=$('.like-video');f.on('click','.tabs li',function(){var e=$(this).data('idx');f.find('.tabs li').removeClass('active').eq(e).addClass('active'),f.find('.rank-list').hide().eq(e).show();}).on('click','.refresh',function(){var e=f.find('.list:visible').hide();if(e.next().length)e.next().show();else f.find('.list').eq(0).show();}),f.find('.rank-item').hover(function(){$(this).addClass('active').siblings('.rank-item').removeClass('active');});};}),define('activity/videoList/search_8543b61be7',['require','exports'],function(require,exports){'use strict';var e;exports.init=function(){e=this,e.on('click','.search-button',function(){var t='/sc/',i=e.find('.search-input'),n=$.trim(i.val()),o=$(this).data('type');if(n)t+=encodeURIComponent(n.split('-').join(' '));if(o)t+='-'+o;t+='.html?source=search',location.href=t;}).on('keyup','.search-input',function(t){$(this);if(13===t.keyCode)e.find('.search-button').click();});};}),define('common/bindScroll_f2ce0a166a',function(){'use strict';var e=function(e,t){return e===t.target||e===window&&t.target===document;},t=function(e){for(;e.length>1;)clearTimeout(e.shift());};return function(i,n,o,a){var r=[],s=null,l=$(i);if(i=l[0],isNaN(o)||0>o)if(a)s=n;else s=function(t){if(e(i,t))n(t);};else if(a)s=function(e){r.push(setTimeout(function(){t(r),n(e);},o));};else s=function(a){r.push(setTimeout(function(){if(t(r),e(i,a))n(a);},o));};l.scroll(s);};}),define('common/component/ClickMonitor_2ea1c7c842',function(){function e(t){$.extend(this,e.defaultOptions,t),this.init();}var t=function(){};return e.defaultOptions={selector:'[data-click-monitor="1"]',monitorUrl:'http://click.genshuixue.com/',defaultParams:{},useDataHref:!0,isSend:!0,interceptor:t},e.prototype.setInterceptor=function(e){this.interceptor=e;},e.prototype.init=function(){var e=this;$(document).on('click',e.selector,function(){var t=$(this),i=e.useDataHref?t.data('href'):'',n={};if(e.interceptor)n=e.interceptor(t);if(e.isSend&&e.monitorUrl)WAT.send(e.monitorUrl,$.extend({},e.defaultParams,n));else console.log($.extend({},e.defaultParams,n));if(i&&window.open(i,'_blank'),e.useDataHref)return!1;else return void 0;});},e;}),define('common/component/Slider_e976f1c044',['require','exports','module','cobble/ui/Carousel'],function(require){'use strict';function e(t){$.extend(this,e.defaultOptions,t),this.init();}var t=require('cobble/ui/Carousel');return e.prototype={constructor:e,init:function(){{var e,i=this,n=i.element,o=i.itemSelector,a=n.find(o),r=a.parent(),s=a.length,l=2,c=s+l,d=a.eq(0),f=a.eq(s-1),u=d.width(),m=d.height(),p=0,h=!i.isVertical?function(){r.css('left',-1*e*u);}:function(){r.css('top',-1*e*m);};new t({element:n,itemSelector:o,iconSelector:i.iconSelector,prevSelector:i.prevSelector,nextSelector:i.nextSelector,activeClass:'active',trigger:i.trigger,loop:i.loop,delay:i.delay,autoPlay:i.autoPlay,pauseOnHover:!0,onChange:i.onChange,animation:function(t){var n=t.to,o=t.from;if(!(0>o)){if(p>0)if(r.stop(),e>-1)h();{var a;this.element;}if(0===n&&o===s-1)a=c-1,e=1;else if(!i.scrollOneDirection&&n===s-1&&0===o)a=0,e=c-l;else a=n+1,e=-1;p++,r.animate(i.isVertical?{top:-1*a*m}:{left:-1*a*u},this.duration,'easeOutQuad',function(){if(p--,e>-1)h();});}}});}if(d=d.clone(),f=f.clone(),r.prepend(f),r.append(d),!i.isVertical)r.css({width:c*u,left:-1*u});else r.css({height:c*m,top:-1*m});}},e.defaultOptions={duration:300,trigger:'click',isVertical:!1,scrollOneDirection:!1,loop:!0,delay:5000},e;}),define('common/eventEmitter_8bcc038860',['require','exports'],function(require,exports){var e=$({});exports.emit=function(){e.trigger.apply(e,arguments);},exports.on=function(){e.on.apply(e,arguments);},exports.un=function(){e.off.apply(e,arguments);},exports.once=function(){e.one.apply(e,arguments);};}),define('common/function/getAdMonitorUrl_4b5526f5c9',['require','exports','cobble/util/url','cobble/util/cookie'],function(require){'use strict';var e,t=require('cobble/util/url'),i=require('cobble/util/cookie');return function(n,o,a){if(!n)return null;var r=n.indexOf('?'),s={};if(-1!=r)s=n.substring(r),s=t.parseQuery(s);else n+='?';if(o){if(!e)e=i.get('PHPSESSID');s.uuid=e;}if(a&&a.length>0){var l={p:s.p||'',c:a.join(',')};s=l;}var c=Math.ceil(Math.random()*Math.pow(10,13));return $.extend(s,{_:c}),s=$.param(s),n=n.replace(/\?.*$/,'?'+s);};}),define('common/lazyImage_92160e3789',['require','common/bindScroll_f2ce0a166a','cobble/util/instance','cobble/function/viewportHeight'],function(require){'use strict';function e(e){if(!e.prop('loading'))e.prop('loading',!0).addClass('img-loading');}function t(e){for(var t=e.height();!t;)e=e.parent(),t=e.height();return t;}var i=require('common/bindScroll_f2ce0a166a'),n=require('cobble/util/instance'),o=require('cobble/function/viewportHeight'),a=n.window,r=n.body,s=0,l=null,exports={init:function(e){i(e||a,exports.scanning,s),exports.scanning(!0),setTimeout(function(){a.scroll();},0);},scanning:function(i,n){var s=o(),c=a.scrollTop(),d=c+s;if(i)n=n?$(n):r,l=n.find('img[data-src]');l.each(function(){var i=$(this),n=i.offset().top,o=t(i);if(d>=n-o-s&&n+o+s>=c){if(!i.prop('loaded'))i.prop('src',i.data('src')).prop('loaded',!0).removeAttr('data-src').removeClass('img-loading');}else e(i);});var f=n.find('iframe'),u=f.length;if(u)for(var m,p=0;u>p;p++){var h=f[p],v=$(h).offset();m=$(f[p].contentWindow.document).find('img[data-src]'),m.each(function(){var i=$(this),n=i.offset().top+v.top,o=t(i);if(d>=n&&n+o+s>=c){if(!i.prop('loaded'))i.prop('src',i.data('src')).prop('loaded',!0).removeAttr('data-src').removeClass('img-loading');}else e(i);});}}};return exports;});