define('custom/form/Number',['require','exports','module','cc/form/Number'],function(require){'use strict';var e=require('cc/form/Number');return e.defaultOptions={step:1,interval:100,inputSelector:'input[type="text"]',upSelector:'.icon-caret-up',downSelector:'.icon-caret-down'},e;}),define('cc/form/Number',['require','exports','module','../ui/SpinBox','../util/life','./common'],function(require){'use strict';function e(e){n.init(this,e);}var t=require('../ui/SpinBox'),n=require('../util/life'),i=require('./common'),r=e.prototype;return r.type='Number',r.init=function(){var e=this;e.initStruct();var n=e.option('mainElement'),i=new t({mainElement:n,value:e.option('value'),minValue:e.option('minValue'),maxValue:e.option('maxValue'),upSelector:e.option('upSelector'),downSelector:e.option('downSelector'),inputSelector:e.option('inputSelector'),timeout:e.option('timeout'),interval:e.option('interval'),step:e.option('step')});e.once('aftersync',function(){i.option('watchSync',{value:function(t){e.set('value',t);},minValue:function(t){e.set('minValue',t);},maxValue:function(t){e.set('maxValue',t);}}),e.set({value:i.get('value'),minValue:i.get('minValue'),maxValue:i.get('maxValue')});}),e.inner({main:n,'native':i.inner('input'),spinbox:i}),e.set({name:e.option('name')});},r.dispose=function(){n.dispose(this),this.inner('spinbox').dispose();},n.extend(r),e.propertyUpdater={name:function(e){i.prop(this,'name',e);},value:function(e){this.inner('spinbox').set('value',e);},minValue:function(e){this.inner('spinbox').set('minValue',e);},maxValue:function(e){this.inner('spinbox').set('maxValue',e);}},e.propertyValidator={name:function(e){return i.validateName(this,e);}},e;}),define('cc/form/common',['require','exports','module'],function(require,exports){'use strict';exports.prop=function(e,t,n){if($.isPlainObject(t))$.each(t,function(t,n){exports.prop(e,t,n);});else{var i=e.inner('native');if(2===arguments.length)return i.prop(t);else{if(i.prop(t)!==n)i.prop(t,n);if('value'===t)i.trigger('change');}}},exports.setClass=function(e,t,n){var i=e.option(t);if(i)e.option('mainElement')[n+'Class'](i);},exports.findNative=function(e,t){var n=e.option('mainElement').find(t);if(0===n.length)e.error('form/'+e.type+' 必须包含一个 ['+t+'].');return n.eq(0);},exports.validateName=function(e,t){if('string'!==$.type(t))if(t=exports.prop(e,'name'),!t||'string'!==$.type(t))e.error('name attribute is missing.');return t;},exports.validateValue=function(e,t){var n=$.type(t);if('number'===n)t=''+t;else if('string'!==n)t=exports.prop(e,'value')||'';return t;};}),define('cc/function/around',['require','exports','module'],function(){'use strict';return function(e,t,n,i){var r='string'===$.type(t),o=r?e[t]:e;if(!r)i=n,n=t;var u=function(){var e,t=$.makeArray(arguments);if($.isFunction(n))e=n.apply(this,t);if(e!==!1){if($.isFunction(o))e=o.apply(this,t);if($.isFunction(i)){t.push(e);var r=i.apply(this,t);if('undefined'!==$.type(r))e=r;}return e;}};return r?e[t]=u:u;};}),define('cc/function/createEvent',['require','exports','module'],function(){'use strict';return function(e){if(e&&!e[$.expando])e='string'===$.type(e)||e.type?$.Event(e):$.Event(null,e);return e||$.Event();};}),define('cc/function/decimalLength',['require','exports','module'],function(){'use strict';return function(e){var t=(''+e).split('.');return 2===t.length?t[1].length:0;};}),define('cc/function/divide',['require','exports','module','./decimalLength','./float2Int'],function(require){'use strict';var e=require('./decimalLength'),t=require('./float2Int');return function(n,i){var r=Math.max(e(n),e(i));return n=t(n,r),i=t(i,r),n/ i;};}),define('cc/function/extend',['require','exports','module'],function(){'use strict';return function(e,t){if($.isPlainObject(t))$.each(t,function(t,n){if(!(t in e))e[t]=n;});};}),define('cc/function/float2Int',['require','exports','module'],function(){'use strict';return function(e,t){var n,i=(''+e).split('.');if(t>=0);else t=0;if(1===i.length)n=e+new Array(t+1).join('0');else t=Math.max(0,t-i[1].length),n=i.join('')+new Array(t+1).join('0');return+n;};}),define('cc/function/guid',['require','exports','module'],function(){var e=0;return function(){return'cc_'+e++;};}),define('cc/function/minus',['require','exports','module','./decimalLength','./float2Int'],function(require){'use strict';var e=require('./decimalLength'),t=require('./float2Int');return function(n,i){var r=Math.max(e(n),e(i));return n=t(n,r),i=t(i,r),(n-i)/Math.pow(10,r);};}),define('cc/function/nextTick',['require','exports','module'],function(){'use strict';return function(e){var t=setTimeout(e,0);return function(){clearTimeout(t);};};}),define('cc/function/offsetParent',['require','exports','module'],function(){'use strict';function e(e){return e.is('body')||'static'!==e.css('position');}return function(t){if(t.is('body'))return t;for(var n=t.parent();!e(n);)n=n.parent();return n;};}),define('cc/function/plus',['require','exports','module','./decimalLength','./float2Int'],function(require){'use strict';var e=require('./decimalLength'),t=require('./float2Int');return function(n,i){var r=Math.max(e(n),e(i));return n=t(n,r),i=t(i,r),(n+i)/Math.pow(10,r);};}),define('cc/function/replaceWith',['require'],function(){'use strict';return function(e,t){e=e[0],t=t[0],e.parentNode.replaceChild(t,e);};}),define('cc/function/split',['require','exports','module'],function(){'use strict';return function(e,t){var n=[];if('number'===$.type(e))e=''+e;if(e&&'string'===$.type(e))$.each(e.split(t),function(e,t){if(t=$.trim(t))n.push(t);});return n;};}),define('cc/function/toBoolean',['require','exports','module'],function(){'use strict';return function(e,t){if('boolean'!==$.type(e)){if(1===arguments.length)t=!!e;e=t;}return e;};}),define('cc/function/toNumber',['require','exports','module'],function(){'use strict';var e={'int':parseInt,'float':parseFloat};return function(t,n,i){if('number'!==$.type(t)){var r=e[i];if(r)t=r(t,10);else if($.isNumeric(t))t=+t;else t=0/0;}return isNaN(t)?n:t;};}),define('cc/function/ucFirst',['require','exports','module'],function(){'use strict';return function(e){return e.charAt(0).toUpperCase()+e.slice(1);};}),define('cc/helper/Iterator',['require','exports','module','../function/plus','../function/minus','../function/toNumber','../util/Timer','../util/life'],function(require){'use strict';function e(e){o.init(this,e);}var t=require('../function/plus'),n=require('../function/minus'),i=require('../function/toNumber'),r=require('../util/Timer'),o=require('../util/life'),u=e.prototype;return u.init=function(){var e=this;e.set({index:e.option('index'),minIndex:e.option('minIndex'),maxIndex:e.option('maxIndex')});},u.start=function(e){var t=this,n=t.inner('timer');if(n)n.dispose();var i=e?t.prev:t.next,o=t.option('timeout'),u=t.option('interval');if('number'!==$.type(u))t.error('interval must be a number.');n=new r({task:$.proxy(i,t),timeout:o,interval:u}),n.start(),t.inner('timer',n);},u.pause=function(){this.inner('timer').dispose(),this.inner('timer',null);},u._pause=function(){if(!this.inner('timer'))return!1;else return void 0;},u.stop=function(){var e=this;e.pause(),e.set('index',e.option('defaultIndex'));},u.prev=function(){var e=this,t=n(e.get('index'),e.option('step')),r=e.get('minIndex'),o=e.get('maxIndex');if(!$.isNumeric(t)||r>t||t>o)t=o;e.set('index',i(t,0));},u._prev=function(){var e=this;if(!e.option('loop')&&n(e.get('index'),e.option('step'))<e.get('minIndex'))return!1;else return void 0;},u.next=function(){var e=this,n=t(e.get('index'),e.option('step')),r=e.get('minIndex'),o=e.get('maxIndex');if(!$.isNumeric(n)||n>o||r>n)n=r;e.set('index',i(n,0));},u._next=function(){var e=this;if(!e.option('loop')&&t(e.get('index'),e.option('step'))>e.get('maxIndex'))return!1;else return void 0;},u.dispose=u.stop,o.extend(u),e.propertyValidator={index:function(e){if(e=i(e,null),null==e)e=this.option('defaultIndex');return e;}},e;}),define('cc/helper/Keyboard',['require','exports','module','../function/split','../util/life','../util/keyboard'],function(require){'use strict';function e(e){i.init(this,e);}function t(e){var t=[];return $.each(e,function(e,i){var o=[],u='plus',a=n(e.replace(/\$\+/g,u),'+');if($.each(r.combinationKey,function(e){if($.inArray(e,a)<0)a.push('!'+e);}),$.each(a,function(e,t){var n=0===t.indexOf('!');if(n)t=t.substr(1);if(t===u)t='$+';if(r.combinationKey[t])o.push((n?'!':'')+'e.'+t+'Key');else if(r[t])o.push('e.keyCode==='+r[t]);else return o.length=0,!1;}),o.length>0)t.push({test:new Function('e','return '+o.join('&')),handler:i});}),t;}var n=require('../function/split'),i=require('../util/life'),r=require('../util/keyboard'),o=e.prototype;return o.type='Keyboard',o.init=function(){var e=this,n=e.option('shortcut');if($.isPlainObject(n))n=t(n);var i,r=0,o=1,u=function(){return r>o;},a=e.namespace();e.option('mainElement').on('keydown'+a,function(t){var a=t.keyCode;if(i===a&&r>0){if(r===o)e.emit('beforelongpress',{keyCode:a},!0);r++;}else i=a,r=1;if(e.dispatch(e.emit(t)),n){var s={isLongPress:u()},c=[t,s];$.each(n,function(n,i){if(i.test(t))e.execute(i.handler,c);});}}).on('keyup'+a,function(t){if(u())e.emit('afterlongpress',{keyCode:t.keyCode},!0);r=0,i=null,e.dispatch(e.emit(t));});},o.dispose=function(){i.dispose(this);},i.extend(o),e;}),define('cc/helper/KeyboardIterator',['require','exports','module','./Keyboard','./Iterator','../util/life','../util/keyboard'],function(require){'use strict';function e(e){i.init(this,e);}var t=require('./Keyboard'),n=require('./Iterator'),i=require('../util/life'),r=require('../util/keyboard'),o=e.prototype;o.init=function(){var e=this,i=new n({index:e.option('index'),minIndex:e.option('minIndex'),maxIndex:e.option('maxIndex'),defaultIndex:e.option('defaultIndex'),timeout:e.option('timeout'),interval:e.option('interval'),step:e.option('step'),loop:e.option('loop'),watchSync:{index:function(t){e.set('index',t);},minIndex:function(t){e.set('minIndex',t);},maxIndex:function(t){e.set('maxIndex',t);}}}),o=function(t,n){e.emit(t,n);};$.each(u,function(e,t){i.before(t,o).after(t,o);});var a=e.option('prevKey'),s=e.option('nextKey'),c={};c[a]=function(e,t){if(!t.isLongPress)i.prev();},c[s]=function(e,t){if(!t.isLongPress)i.next();};var f=e.option('mainElement'),l=new t({mainElement:f,shortcut:c});if(e.option('autoOnLongPress')){var p=!1;l.before('longpress',function(t,n){var i,o=n.keyCode;if(o===r[a])i=!0;else if(o===r[s])i=!1;if(null!=i)p=!0,e.start(i);}).after('longpress',function(){if(p)p=!1,e.pause();});}if(f.is('input[type="text"]'))l.on('keydown',function(e){if(e.keyCode===r.up)return!1;else return void 0;});e.inner({iterator:i,keyboard:l});},o.start=function(e){this.inner('iterator').start(e);},o.pause=function(){this.inner('iterator').pause();},o.stop=function(){this.inner('iterator').stop();},o.prev=function(){this.inner('iterator').prev();},o.next=function(){this.inner('iterator').next();},o.dispose=function(){this.inner('iterator').dispose(),this.inner('keyboard').dispose();};var u=['start','pause','stop','prev','next'];return i.extend(o,u),e.propertyUpdater={index:function(e){this.inner('iterator').set('index',e);},minIndex:function(e){this.inner('iterator').set('minIndex',e);},maxIndex:function(e){this.inner('iterator').set('maxIndex',e);}},e;}),define('cc/ui/SpinBox',['require','exports','module','../function/minus','../function/divide','../function/toNumber','../helper/KeyboardIterator','../util/life','../util/instance'],function(require){'use strict';function e(e){r.init(this,e);}var t=require('../function/minus'),n=(require('../function/divide'),require('../function/toNumber')),i=require('../helper/KeyboardIterator'),r=require('../util/life'),o=require('../util/instance').document,u=e.prototype;return u.type='SpinBox',u.init=function(){var e=this;e.initStruct();var t=e.option('mainElement'),n=t.find(e.option('inputSelector')),r=new i({mainElement:n,index:e.option('value'),minIndex:e.option('minValue'),maxIndex:e.option('maxValue'),timeout:e.option('timeout'),interval:e.option('interval'),autoOnLongPress:!0,step:e.option('step'),prevKey:'down',nextKey:'up',watchSync:{index:function(t){e.set('value',t,{action:'press'});},minIndex:function(t){e.set('minValue',t);},maxIndex:function(t){e.set('maxValue',t);}}}),u=e.namespace(),a=e.option('upSelector'),s=e.option('downSelector'),c='mousedown'+u,f='mouseup'+u,l='focusout'+u,p=function(){r.pause(),o.off(u);};t.on(c,a,function(){r.next(),r.start(!1),o.on(f,p);}).on(c,s,function(){r.prev(),r.start(!0),o.on(f,p);}).on(l,function(){var t=$.trim(n.val());e.set('value',t,{action:'blur'});}),e.inner({main:t,input:n,iterator:r});},u.dispose=function(){var e=this;r.dispose(e),e.inner('iterator').dispose(),o.off(e.namespace());},r.extend(u),e.propertyUpdater={value:function(e){this.inner('input').val(e),this.inner('iterator').set('index',e);},minValue:function(e){this.inner('iterator').set('minIndex',e);},maxValue:function(e){this.inner('iterator').set('maxIndex',e);}},e.propertyValidator={value:function(e,i){var r=e,o=!1,u=this,a=u.get('minValue'),s=u.get('maxValue');if(e=n(e,''),e>=a&&s>=e){var c=u.option('step');if(t(e,a)%c===0)o=!0;}if(!o){var f=u.option('defaultValue');if('number'===$.type(f))e=f,i.force=!0;else e=r;}return e;},minValue:function(e){if(e=n(e,null),null==e)this.error('minValue must be a number.');return e;},maxValue:function(e){if(e=n(e,null),null==e)this.error('maxValue must be a number.');return e;}},e;}),define('cc/util/Timer',['require','exports','module'],function(){'use strict';function e(e){$.extend(this,e);}var t=e.prototype;return t.start=function(){var e=this;e.stop();var t=e.timeout,n=e.interval,i=function(){if(e.count++,e.task()!==!1)e.timer=setTimeout(i,n);else e.stop();};if(null==t)t=n;e.timer=setTimeout(i,t);},t.stop=function(){var e=this;if(e.timer)clearTimeout(e.timer),e.timer=null,e.count=0;},t.dispose=function(){var e=this;e.stop(),e.task=e.timeout=e.interval=null;},e;}),define('cc/util/event',['require','exports','module','../function/extend','../function/createEvent'],function(require,exports){'use strict';var e=require('../function/extend'),t=require('../function/createEvent'),n={get$:function(){var e=this;if(!e.$)e.$=$({});return e.$;},on:function(e,t,n){return this.get$().on(e,t,n),this;},once:function(e,t,n){return this.get$().one(e,t,n),this;},off:function(e,t){return this.get$().off(e,t),this;},emit:function(e,n){return e=t(e),this.get$().trigger(e,n),e;}};exports.extend=function(t){e(t,n);};}),define('cc/util/instance',['require','exports','module'],function(require,exports){exports.window=$(window),exports.document=$(document),exports.html=$(document.documentElement),exports.body=$(document.body);}),define('cc/util/keyboard',['require','exports','module'],function(require,exports){'use strict';function e(e){var t={};return $.each(e,function(e,n){t[n]=e;}),t;}var t={a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,'`':192,'-':173,'=':61,'[':219,']':221,'\\':220,';':59,"'":222,',':188,'.':190,'/':191,$0:96,$1:97,$2:98,$3:99,$4:100,$5:101,$6:102,$7:103,$8:104,$9:105,'$.':110,'$+':107,'$-':109,'$*':106,'$/':111,space:32,tab:9},n={backspace:8,'delete':46},i={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,enter:13,esc:27,capslock:20,insert:45,home:36,end:35,pageup:33,pagedown:34,left:37,right:39,up:38,down:40},r={shift:16,ctrl:17,meta:91,alt:18};$.extend(exports,t,n,i,r),exports.charKey=t,exports.deleteKey=n,exports.functionKey=i,exports.combinationKey=r,exports.isCharKey=function(n){return n in e(t);},exports.isDeleteKey=function(t){return t in e(n);},exports.isFunctionKey=function(t){return t in e(i);},exports.isCombinationKey=function(t){return t in e(r);};}),define('cc/util/life',['require','exports','module','../function/guid','../function/around','../function/extend','../function/ucFirst','../function/nextTick','../function/toBoolean','../function/createEvent','../function/replaceWith','../function/offsetParent','./event'],function(require,exports){'use strict';function e(e,t,n,i,r){return function(a,s,c){var f=this;if($.isPlainObject(a))return c=s,void $.each(a,function(e,t){f[n](e,t,c);});c=c||{};var l=f[i](a),d=f.constructor[e+'Validator'];if(d)if($.isFunction(d[a]))s=d[a].call(f,s,c);if($.isFunction(r))s=r(f,s,c);if(l!==s||c.force)if(f[t][a]=s,!c.silent){var m={};o(m,c),m.newValue=s,m.oldValue=l;var h={};h[a]=m;var v=function(e){if(e&&e[a])f.execute(e[a],[s,l,m]);};if(v(f.inner('watchSync')),v(f.option('watchSync')),c.sync)return v(f.constructor[e+'Updater']),v(f.option('watch')),void f.emit(e+'change',h);var y=f.inner(e+'Changes');if(!y)y={},f.inner(e+'Changes',y);if($.extend(y,h),!f.inner(p))f.inner(p,u(function(){f.sync(p);}));}};}function t(){this.error('initStruct() can just call one time.');}function n(e,t,n,i,r){var o,u='before'===i?'_'+t:t+'_',a=e[u];if($.isFunction(a))if(o=a.apply(e,n),o!==!1&&!$.isPlainObject(o))o=null;if(o===!1)return!1;var s=!1;if(o&&o.dispatch)s=!0,delete o.dispatch;if(r=$.Event(r),r.type=i+t,e.emit(r,o),s)e.dispatch(r,o);if(r.isDefaultPrevented())return!1;else return void 0;}var i=require('../function/guid'),r=require('../function/around'),o=require('../function/extend'),u=(require('../function/ucFirst'),require('../function/nextTick')),a=require('../function/toBoolean'),s=require('../function/createEvent'),c=require('../function/replaceWith'),f=(require('../function/offsetParent'),require('./event')),l={},p='__update_async__',d={},m={initStruct:function(){var e=this,n=e.option('mainElement'),i=e.option('mainTemplate');if('string'===$.type(i)){var r=e.option('share'),o=e.type+i;if(r)n=d[o];var u;if(!n){if(u=$(i),r)d[o]=u;}else if(e.option('replace'))c(n,u=$(i));else n.html(i);if(u)n=u,e.option('mainElement',n);}var a=e.option('parentSelector');if(a&&!n.parent().is(a))n.appendTo(a);e.initStruct=t;},warn:function(e){if('undefined'!=typeof console)console.warn(['[CC warn]',this.type,e].join(' '));},error:function(e){throw new Error(['[CC error]',this.type,e].join(' '));},live:function(e,t,n){var i=this,r=i.inner('main');if(r)r.on(e+i.namespace(),t,n);return i;},emit:function(e,t){var n=this,i=n.option('context')||n;e=s(e),e.cc=i;var r=[e];if($.isPlainObject(t))r.push(t);e.type=e.type.toLowerCase();var o=i.get$();o.trigger.apply(o,r);var u='on'+e.type;if(!e.isPropagationStopped()&&i.execute(u,r)===!1)e.preventDefault(),e.stopPropagation();return i.execute(u+'_',r),e;},dispatch:function(e,t){if(!e.isPropagationStopped()){if(!e.originalEvent)e.originalEvent={preventDefault:$.noop,stopPropagation:$.noop};var n=$.Event(e);if(n.type='dispatch',this.emit(n,t),n.isPropagationStopped())e.preventDefault(),e.stopPropagation();}},before:function(e,t){return this.on('before'+e.toLowerCase(),t);},after:function(e,t){return this.on('after'+e.toLowerCase(),t);},find:function(e){var t=this.inner('main');if(t){var n=t.find(e);if(n.length)return n;}},appendTo:function(e){var t=this.inner('main');if(t)t.appendTo(e);},prependTo:function(e){var t=this.inner('main');if(t)t.prependTo(e);},execute:function(e,t){var n=this,i=e;if('string'===$.type(e))i=n.option(e);if($.isFunction(i)){var r=n.option('context')||n;if($.isArray(t))return i.apply(r,t);else return i.call(r,t);}},renderWith:function(e,t,n){var i=this;if(!t)if(t=i.option('renderTemplate'),!t)t=i.option('mainTemplate');if(!n)n=i.option('mainElement');var r=i.option('renderSelector');if(r)n=n.find(r);var o;if($.isPlainObject(e)||$.isArray(e))o=i.execute('render',[e,t]);else if('string'===$.type(e))o=e;n.html(o);},namespace:function(){return'.'+this.guid;},option:function(e,t){var n=this;if(1===arguments.length&&'string'===$.type(e))return n.options[e];else{if($.isPlainObject(e))return void $.each(e,function(e,t){n.option(e,t);});n.options[e]=t;}},inner:function(e,t){var n=this,i=n.inners||{};if(1===arguments.length&&'string'===$.type(e))return i[e];else{if($.isPlainObject(e))return void $.each(e,function(e,t){n.inner(e,t);});i[e]=t;}},is:function(e){return this.states[e];},state:e('state','states','state','is',function(e,t){return a(t,!1);}),get:function(e){return this.properties[e];},set:e('property','properties','set','get')},h={sync:function(){var e=this,t=function(t,n,i){$.each(t,function(r,o){return e.execute(n[r],[o.newValue,o.oldValue,i?t:o]);});};if($.each(['property','state'],function(n,i){var r=e.inner(i+'Changes');if(r){e.inner(i+'Changes',null);var o=e.constructor[i+'Updater'];if(o)t(r,o,!0);var u=e.option('watch');if(u)t(r,u);e.emit(i+'change',r);}}),arguments[0]!==p)e.execute(e.inner(p));e.inner(p,!1);},_sync:function(){if(!this.inner(p))return!1;else return void 0;},_init:function(){var e='initCalled';if(this.is(e))return!1;else return void this.state(e,!0);},_dispose:function(){var e='disposeCalled';if(this.is(e))return!1;else return void this.state(e,!0);}};exports.extend=function(e,t){o(e,h),$.each(e,function(i,o){var u=i.indexOf('_');if($.isFunction(o)&&0!==u&&u!==i.length-1)if(!($.isArray(t)&&$.inArray(i,t)>=0)){var a=function(e){return n(this,i,arguments,'before',e);},s=function(e){var t=this,r=arguments,u=function(){return n(t,i,r,'after',e);};if(o.length+1===r.length){var a=r[r.length-1];if(a&&$.isFunction(a.then))return void a.then(u);}u();};r(e,i,a,s);}}),o(e,m),f.extend(e);},exports.init=function(e,t){if(!t)t={};return o(t,e.constructor.defaultOptions),t.onafterinit_=function(){e.state('inited',!0);},t.onafterdispose_=function(){e.state('disposed',!0),e.off();var t=e.inner('main');if(e.option('removeOnDispose')&&t)t.remove();u(function(){delete l[e.guid],e.properties=e.options=e.changes=e.states=e.inners=e.guid=null;});},l[e.guid=i()]=e,e.properties={},e.options=t,e.states={},e.inners={},e.init(),e;},exports.dispose=function(e){e.sync();var t=e.inner('main')||e.option('mainElement');if(t)t.off(e.namespace());};}),define('cobble/form/Text',['require','exports','../helper/Input','../helper/Placeholder','../function/init','../function/jquerify','../function/lifeCycle'],function(require){'use strict';function e(e){return o.init(this,e);}var t=require('../helper/Input'),n=require('../helper/Placeholder'),i=require('../function/init'),r=require('../function/jquerify'),o=require('../function/lifeCycle');return e.prototype={constructor:e,type:'Text',init:function(){var e=this,i=e.element;e.placeholder=new n({element:i,simple:e.placeholderSimple,nativeFirst:e.placeholderNativeFirst,placeholderSelector:e.placeholderSelector,template:e.template});var r=e.action;if(r)$.each(r,function(t,n){r[t]=$.proxy(n,e);});e.input=new t({element:i,onChange:function(t){e.emit(t);},onKeyDown:function(t){e.emit(t);},action:r});},getValue:function(){return $.trim(this.element.val());},setValue:function(e,t){var n=this;if(t=t||{},t.force||n.getValue()!==e){if(n.element.val(e),n.placeholder)n.placeholder.refresh();if(!t.silence)n.emit('change');}},dispose:function(){var e=this;o.dispose(e),e.input.dispose(),e.placeholder.dispose(),e.element=e.input=e.placeholder=null;}},r(e.prototype),e.defaultOptions={simple:!1,nativeFirst:!0,placeholderSelector:'.placeholder',template:'<div class="placeholder-wrapper"><div class="placeholder"></div></div>'},e.init=i(e),e;}),define('cobble/form/Validator',['require','exports','module','../function/jquerify','../function/lifeCycle'],function(require){'use strict';function e(e){return r.init(this,e);}function t(e,t){if(e.length>0){var n=e[0].element;if(n.is(':hidden'))n=n.parent();var i=n.offset().top;if(t>0)i-=t;window.scrollTo(window.scrollX,i);}}function n(e){var t=$.Deferred();return $.when.apply($,e).done(function(){t.resolve(arguments);}),t;}var i=require('../function/jquerify'),r=require('../function/lifeCycle');e.prototype={constructor:e,type:'Validator',init:function(){var t=this,n=t.element,i='FORM'===n.prop('tagName')?n:n.find('form');if(i.length>0)i.attr('novalidate','novalidate').on('submit'+u,$.proxy(t.validate,t));$.each(t.fields,function(t,i){var r=n.find('[name="'+t+'"]'),u=i.type;if(!u)u=i.type=r.attr('type')||'text';var a=i.rules;if(!a)a=i.rules={};var s=e.type[u]||[];$.each(s,function(e,t){if(null==a[t]){var n=o[t];if($.isFunction(n))a[t]=n(r,i);}});});var r=t.groupSelector;if(n.on('focusin'+u,function(e){var n=$(e.target).closest(r),i=[t.successClass,t.errorClass,t.requiredClass].join(' ');n.removeClass($.trim(i));}),t.realtime)n.on('focusout'+u,function(e){var n=$(e.target),i=n.prop('name');if(!i)n=n.find('[name]'),i=n.prop('name');if(i)t.validate(i);});},validate:function(e,i){var r=this,o=r.emit('beforeValidate');if(!o.isDefaultPrevented()){var u,a=r.element,s=r.groupSelector;if('string'===$.type(e))e=[e];if($.isArray(e))u=$.map(e,function(e){return a.find('[name="'+e+'"]').closest(s);});else if(u=a.find(s),'boolean'===$.type(e))i=e;var c=[],f=[];$.each(u,function(e,t){var n=r.validateGroup($(t));if(n){if(n.promise)f.push(n),n=n.data;$.merge(c,n);}});var e=[],l=[],p=function(){if($.each(c,function(t,n){if(n.error)l.push(n);e.push(n.element.prop('name'));}),i)t(l,r.scrollGap);r.emit('afterValidate',{fields:e,errors:l});};if(f.length>0)return n(f).done(p);else return p(),0===l.length;}},validateGroup:function(t){if(t.is(':visible')){var i=this,r=[],o=[],u=[];if(t.find('[name]').each(function(t){var n,a,s=this,c=s.name,f=s.value,l=s.disabled,p=$(s);if(!l){var d=i.fields[c];if(d){n=!0,d=$.extend(!0,{},d),d.form=i.element,d.value=$.trim(f);var m;if($.each(e.type[d.type]||[],function(t,n){var i=e.rule[n](d);if(i===!1)return m=n,!1;else if(''===d.value&&'required'===n)return!1;}),m){var h=d.errors;if(h)a=h[m];if(!a)throw new Error(c+' 字段 '+m+' 类型错误信息未定义');}else if($.isFunction(d.custom)){var v=$.Deferred(),y=d.custom(p,function(e){v.resolve(e);});a=null==y||y.done?v:y;}}}if(n)if(t=r.push({element:p,error:a}),a&&a.promise)o.push(a),u.push(t-1);}),o.length>0){var a=n(o).done(function(e){$.each(e,function(e,t){r[u[e]].error=t;}),i.refreshGroup(t,r);});return a.data=r,a;}else return i.refreshGroup(t,r),r;}},refreshGroup:function(e,t){var n=this,i=n.successClass,r=n.errorClass;$.each(t,function(t,o){var u,a=o.element,s=o.error,c=n.errorSelector;if(c)u=e.find(c).eq(t);if(s&&'string'===$.type(s)){if(e.removeClass(i).addClass(r),u){var f=n.renderTemplate;if($.isFunction(f))s=f({text:s},n.errorTemplate);u.html(s).show();var l=n.errorPlacement;if($.isFunction(l))l(a,u);}}else if(o.error='',e.removeClass(r).addClass(i),u)u.html('').hide();});},dispose:function(){var e=this;r.dispose(e),e.element.off(u),e.element=null;}},i(e.prototype),e.defaultOptions={realtime:!1,scrollGap:100,groupSelector:'.form-group',successClass:'has-success',errorClass:'has-error',errorSelector:'.error',errorTemplate:'<i class="icon icon-times-circle"></i>&nbsp;${text}',requiredClass:'has-required',requiredSelector:'.required',requiredTemplate:'${text}',renderTemplate:function(e,t){return t.replace(/\${(\w+)}/g,function(t,n){return e[n]||'';});},errorPlacement:function(e,t){if('hidden'===e.prop('type'))e=e.parent();t.css({position:'static',width:'auto'});var n=t.outerWidth(!0)+5;t.css({position:'absolute',width:n});var i=e.parent();if(i.is('.placeholder-wrapper'))e=i;var r=e.position();t.css({left:r.left+e.outerWidth()-37,top:r.top-t.outerHeight()+8});}},e.type={text:['required','pattern','min','max','minlength','maxlength'],hidden:['required'],password:['required','pattern','minlength','maxlength','equals'],number:['required','pattern','min','max','step'],range:['required','pattern','min','max','step'],tel:['required','pattern'],url:['required','pattern'],email:['required','pattern'],mobile:['required','pattern'],money:['required','pattern','min','max'],idcard:['required','pattern'],'int':['required','pattern','min','max'],internationalMobile:['required','pattern']},e.rule={required:function(e){if(e.value.length>0)return!0;else if(e.rules.required)return!1;},pattern:function(e){var t=e.rules.pattern;if(t)return t.test(e.value);else return void 0;},minlength:function(e){var t=e.rules.minlength;if($.isNumeric(t))return e.value.length>=+t;else return void 0;},maxlength:function(e){var t=e.rules.maxlength;if($.isNumeric(t))return e.value.length<=+t;else return void 0;},min:function(e){var t=e.rules.min;if($.isNumeric(t))return e.value>=+t;else return void 0;},max:function(e){var t=e.rules.max;if($.isNumeric(t))return e.value<=+t;else return void 0;},step:function(e){var t=e.rules.step;if($.isNumeric(t)){var n=e.rules.min||1;return(e.value-n)%t===0;}},equals:function(e){var t=e.rules.equals;if(t){var n=e.form.find('[name="'+t+'"]');return e.value===$.trim(n.val());}}},e.pattern={number:/^[\d.]*$/,'int':/^\d+$/,url:/^(?:(?:0\d{2,3}[- ]?[1-9]\d{6,7})|(?:[48]00[- ]?[1-9]\d{6}))$/,tel:/^(?:(?:0\d{2,3}[- ]?[1-9]\d{6,7})|(?:[48]00[- ]?[1-9]\d{6}))$/,mobile:/^1[3-9]\d{9}$/,email:/^(?:[a-z0-9]+[_\-+.]+)*[a-z0-9]+@(?:([a-z0-9]+-?)*[a-z0-9]+.)+([a-z]{2,})+$/i,money:/^[\d.]*$/,idcard:/(^\d{15}$)|(^\d{17}([0-9]|X)$)/i,internationalMobile:/^\d{7,20}$/};var o={required:function(e){return'required'===e.attr('required');},pattern:function(t,n){var i=t.attr('pattern')||e.pattern[n.type];if('string'===$.type(i))i=new RegExp(i);return i;},minlength:function(e){return e.attr('minlength');},maxlength:function(e){return e.attr('maxlength');},min:function(e){return e.attr('min');},max:function(e){return e.attr('max');},step:function(e){return e.attr('step');},equals:function(e){return e.attr('equals');}},u='.cobble_form_validator';return e;}),define('cobble/function/around',['require','exports','module'],function(){'use strict';return function(e,t,n,i){var r='string'===$.type(t),o=r?e[t]:e;if(!r)i=n,n=t;var u=function(){var e,t=arguments;if($.isFunction(n))e=n.apply(this,t);if(e!==!1){if($.isFunction(o))e=o.apply(this,t);if($.isFunction(i)){var r=i.apply(this,t);if('undefined'!==$.type(r))e=r;}return e;}};return r?e[t]=u:u;};}),define('cobble/function/call',['require','exports','module'],function(){'use strict';return function(e,t,n){if($.isFunction(e)){var i=$.isArray(n)?'apply':'call';return e[i](t,n);}};}),define('cobble/function/init',['require','exports','module'],function(){'use strict';return function(e){return function(t,n){var i=[];return t.each(function(){i.push(new e($.extend({element:$(this)},n)));}),i;};};}),define('cobble/function/jquerify',['require','exports','module'],function(){'use strict';function e(e){return e.faker||e.element;}var t=$.prototype,n={on:function(){return t.on.apply(e(this),arguments),this;},off:function(){return t.off.apply(e(this),arguments),this;},emit:function(n,i){var r=this,o=e(r);if(o){if(!n[$.expando])n='string'===$.type(n)?$.Event(n):$.Event(null,n);n.cobble=r;var u=[n];if(i)u.push(i);var a=r[$.camelCase('on-'+n.type)];if($.isFunction(a)&&a.apply(r,u)===!1)n.preventDefault();if(!n.isPropagationStopped())t.trigger.apply(o,u);return n;}},before:function(t){e(this).before(t);},after:function(t){e(this).after(t);},appendTo:function(t){e(this).appendTo(t);},prependTo:function(t){e(this).prependTo(t);}};return function(e){$.each(n,function(t,n){if(null==e[t])e[t]=n;});};}),define('cobble/function/lifeCycle',['require','exports'],function(require,exports){'use strict';exports.init=function(e,t){var n=e.constructor,i='__cobble__'+n.prototype.type,r=t.element;if(r&&r.data(i))e=r.data(i);else if($.extend(e,n.defaultOptions,t),e.init(),r)r.data(i,e);return e;},exports.dispose=function(e){var t='__cobble__'+e.constructor.prototype.type,n=e.element;if(n)n.removeData(t);};}),define('cobble/function/replaceWith',['require'],function(){'use strict';return function(e,t){e=e[0],t=t[0],e.parentNode.replaceChild(t,e);};}),define('cobble/function/split',['require','exports','module'],function(){'use strict';return function(e,t){var n=[];return $.each(e.split(t),function(e,t){if(t=$.trim(t))n.push(t);}),n;};}),define('cobble/helper/Input',['require','exports','module','../function/around','../function/jquerify','../function/lifeCycle','../util/keyboard','../util/input','./Keyboard'],function(require){'use strict';function e(e){return n.init(this,e);}var t=(require('../function/around'),require('../function/jquerify')),n=require('../function/lifeCycle'),i=require('../util/keyboard'),r=require('../util/input'),o=require('./Keyboard');e.prototype={constructor:e,type:'Input',init:function(){var e=this,t=e.element;r.init(t);var n=e.action;if(n)$.each(n,function(t,i){n[t]=$.proxy(i,e);});var a,s;e.keyboard=new o({element:t,action:n,longPress:e.longPress,onKeyDown:function(t){e.emit(t);},onKeyUp:function(t){e.emit(t);},onBeforeLongPress:function(){a=t.val(),s=!0,e.emit('beforeLongPress');},onAfterLongPress:function(n){if(s=!1,e.emit('afterLongPress'),a!==t.val()&&(i.isCharKey(n.keyCode)||i.isDeleteKey()))e.emit('change');}}),t.on('input'+u,function(){if(!s||!e.smart)e.emit('change');});},autoWidth:function(){var e=this,t=e.element;e.on('change',function(){if(t.scrollLeft()>0)t.width(t.prop('scrollWidth'));});},autoHeight:function(){var e=this,t=e.element;if('hidden'!==t.css('overflow-y'))t.css('overflow-y','hidden');var n,i=t.height(),r=i,o=parseInt(t.css('font-size'),10),u=t.innerHeight()-i;e.on('change',function(){if(r!==i)r=i,t.height(i);if(n=t.prop('scrollHeight')-u,Math.abs(n-r)>o)t.height(n),r=n;});},dispose:function(){var e=this;n.dispose(e);var t=e.element;r.dispose(t),t.off(u),e.keyboard.dispose(),e.element=e.keyboard=null;}},t(e.prototype),e.defaultOptions={smart:!0,longPress:!1};var u='.cobble_helper_input';return e;}),define('cobble/helper/Keyboard',['require','exports','module','../function/call','../function/split','../function/jquerify','../util/keyboard'],function(require){'use strict';function e(t){$.extend(this,e.defaultOptions,t),this.init();}function t(e){var t=[];return $.each(e,function(e,n){var i=[],r='plus',u=o(e.replace(/\$\+/g,r),'+');if($.each(a.combinationKey,function(e){if($.inArray(e,u)<0)u.push('!'+e);}),$.each(u,function(e,t){var n=0===t.indexOf('!');if(n)t=t.substr(1);if(t===r)t='$+';if(a.combinationKey[t])i.push((n?'!':'')+'e.'+t+'Key');else if(a[t])i.push('e.keyCode==='+a[t]);else return i.length=0,!1;}),i.length>0)t.push({test:new Function('e','return '+i.join('&')),handler:n});}),t;}function n(e){var t=e.data,n=e.keyCode,i=t.cache,o=i.counter;if(i.keyCode===n&&o>0){if(1===o)t.emit({type:'beforeLongPress',keyCode:n});o++;}else i.keyCode=n,o=1;if(i.counter=o,t.longPress||1===o)$.each(i.action,function(n,i){if(i.test(e))r(i.handler,t,e);});e.type='keyDown',t.emit(e);}function i(e){var t=e.data,n=t.cache;if(n.keyCode=null,n.counter>1)t.emit({type:'afterLongPress',keyCode:e.keyCode}),n.counter=0;e.type='keyUp',t.emit(e);}var r=require('../function/call'),o=require('../function/split'),u=require('../function/jquerify'),a=require('../util/keyboard');e.prototype={constructor:e,type:'Keyboard',init:function(){var e=this;e.cache={counter:0,action:t(e.action||{})},e.element.on('keydown'+s,e,n).on('keyup'+s,e,i);},dispose:function(){var e=this;e.element.off(s),e.element=e.cache=null;}},u(e.prototype),e.defaultOptions={longPress:!1};var s='.cobble_helper_keyboard';return e;}),define('cobble/helper/Placeholder',['require','exports','module','../function/init','../function/jquerify','../function/lifeCycle','../function/replaceWith','../util/input'],function(require){'use strict';function e(e){return i.init(this,e);}var t=require('../function/init'),n=require('../function/jquerify'),i=require('../function/lifeCycle'),r=require('../function/replaceWith'),o=require('../util/input');e.prototype={constructor:e,type:'Placeholder',init:function(){var e=this,t=e.element,n=t.attr('placeholder');if(null==e.value)e.value=n||'';var i;if(s)if(e.nativeFirst)i='native';else if(n)t.removeAttr('placeholder');if(!i)i=e.simple?'simple':'complex';if(i=c[i],$.extend(e,i),i.init)e.init();if(e.refresh)e.refresh();}},n(e.prototype),e.defaultOptions={simple:!1,nativeFirst:!0,simpleClass:'placeholder-active',placeholderSelector:'.placeholder',template:'<div class="placeholder-wrapper"><div class="placeholder"></div></div>'},e.init=t(e);var u='.cobble_helper_placeholder',a=$('<input type="text" />')[0],s='placeholder'in a;a=null;var c={'native':{show:$.noop,hide:$.noop,refresh:$.noop,dispose:function(){var e=this;i.dispose(e),e.element=null;}},simple:{init:function(){var e=this,t=$.proxy(e.refresh,e);e.element.on('focus'+u,t).on('blur'+u,t);},show:function(){var e=this;e.element.addClass(e.simpleClass).val(e.value);},hide:function(){var e=this;e.element.removeClass(e.simpleClass).val('');},refresh:function(){var e=this,t=e.element;if(document.activeElement===t[0]){if(t.hasClass(e.simpleClass))e.hide();}else if(!t.val())e.show();},dispose:function(){var e=this;i.dispose(e),e.element.off(u),e.element=null;}},complex:{init:function(){var e=this,t=e.element,n=$(e.template);r(t,n),n.append(t),e.faker=n.find(e.placeholderSelector);var i=$.proxy(e.refresh,e);o.init(t),t.on('focus'+u,i).on('blur'+u,i).on('input'+u,i);},show:function(){var e=this;e.faker.html(e.value).show();},hide:function(){this.faker.hide();},refresh:function(){var e=this,t=e.element.val();if($.trim(t))e.hide();else e.show();},dispose:function(){var e=this;i.dispose(e);var t=e.element;o.dispose(t),t.off(u),e.faker=e.element=null;}}};return e;}),define('cobble/util/input',['require','exports','module','../function/around'],function(require,exports){'use strict';function e(){}function t(e){var t=e.val(),i=!1;e.on('propertychange'+o,function(n){if(i)return void(i=!1);if('value'===n.originalEvent.propertyName){var r=e.val();if(r!==t)e.trigger('input'),t=r;}}),n(e,'val',function(){if(0!==arguments.length)i=!0;});}var n=require('../function/around'),i=$('<input type="text" />')[0],r='oninput'in i;i=null;var o='.cobble_util_input';exports.init=r?e:t,exports.dispose=function(e){e.off(o);};}),define('cobble/util/keyboard',['require','exports','module'],function(require,exports){'use strict';function e(e){var t={};return $.each(e,function(e,n){t[n]=e;}),t;}var t={a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,'`':192,'-':173,'=':61,'[':219,']':221,'\\':220,';':59,"'":222,',':188,'.':190,'/':191,$0:96,$1:97,$2:98,$3:99,$4:100,$5:101,$6:102,$7:103,$8:104,$9:105,'$.':110,'$+':107,'$-':109,'$*':106,'$/':111,space:32,tab:9},n={backspace:8,'delete':46},i={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,enter:13,esc:27,capslock:20,insert:45,home:36,end:35,pageup:33,pagedown:34,left:37,right:39,up:38,down:40},r={shift:16,ctrl:17,meta:91,alt:18};$.extend(exports,t,i,r),exports.charKey=t,exports.deleteKey=n,exports.functionKey=i,exports.combinationKey=r,exports.isCharKey=function(n){return n in e(t);},exports.isDeleteKey=function(t){return t in e(n);},exports.isFunctionKey=function(t){return t in e(i);},exports.isCombinationKey=function(t){return t in e(r);};}),define('common/form_2ef59f4d41',['require','exports','cobble/form/Validator'],function(require,exports){'use strict';function e(e){var t={},n=e.find('[name]');return n.each(function(){var e=this.name,n=this.value,i='radio'===this.type||'checkbox'===this.type;if(i){if(this.checked)t[e]=n;}else{var r=t[e];if(null==r)t[e]=n;else r=t[e]=[r],r.push(n);}}),$.each(t,function(e,n){t[e]=$.isArray(n)?n.join(','):$.trim(n);}),t;}function t(e,t){$.each(t,function(t,i){if(i){var r=e.find('[name="'+t+'"]'),o=r.closest('.form-group');o.removeClass('has-success').addClass('has-error');var u=o.find('.error');u.html(i),n.defaultOptions.errorPlacement(r,u);}});}var n=require('cobble/form/Validator');exports.parse=function(t){return e(t);},exports.get=function(n,i){return $.ajax({url:i,type:'get',dataType:'json',data:n.jquery?e(n):n}).done(function(e){if(e.code){var i=e.data;if(i)t(n,i);}return e;});},exports.post=function(n,i){return $.ajax({url:i,type:'post',dataType:'json',data:n.jquery?e(n):n}).done(function(e){if(e.code){var i=e.data;if(i)t(n,i);}return e;});};}),define('teacherCenter/course/ComboForm',['require','exports','common/service_9c322508d3','common/form_2ef59f4d41','cobble/form/Text','custom/form/Number','cobble/form/Validator'],function(require){'use strict';function e(e){$.extend(this,e),this.init();}var t=require('common/service_9c322508d3'),n=require('common/form_2ef59f4d41'),i=require('cobble/form/Text'),r=require('custom/form/Number'),o=require('cobble/form/Validator');return e.prototype={init:function(){var e=this,u=e.element,a=e.data||{},s=new r({mainElement:u.find('.form-number'),value:9.9,minValue:1,maxValue:9.9,step:0.1});e.numberCtrl=s,e.nameInput=new i({element:u.find('[name="name"]')}),e.hoursInput=new i({element:u.find('[name="hours"]')});var c=new o({element:u,fields:{name:{errors:{required:'请输入名称',minlength:'最少输入 2 个字'}},hours:{errors:{required:'请输入时长',min:'最少为 1 个小时',max:'最多为 999 个小时',pattern:'请输入整数'}},discount:{errors:{min:'请输入 1-9.9',max:'请输入 1-9.9',pattern:'请输入 1-9.9'}}}});u.on('click','.btn-primary',function(){var e=s.get('value');if(e<s.get('minValue')&&e>s.get('maxValue'))s.set('value','');if(c.validate()){var i=n.parse(u);if(a.id)i.id=a.id;t.editCombo(i).done(function(e){if(0===e.code)location.reload();});}});},refresh:function(){var e=this,t=(e.element,e.data||{});e.nameInput.setValue(t.name),e.hoursInput.setValue(t.hours);var n=$.isNumeric(t.discount)?t.discount:'';if(10==n)n='';e.numberCtrl.set('value',n);}},e;});