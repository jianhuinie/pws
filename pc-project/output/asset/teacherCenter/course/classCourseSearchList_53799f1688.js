define('teacherCenter/course/classCourseSearchList_53799f1688',['require','exports','common/service_9c322508d3','common/store_a1a35b3dfc'],function(require,exports){'use strict';var t=require('common/service_9c322508d3'),e=require('common/store_a1a35b3dfc'),n='';exports.init=function(i){function a(e){t.delClassCourse({number:e}).done(function(t){if(0===t.code)success('成功删除',function(){i.trigger('reload');});});}function o(t,e,n,i,a){confirm({content:t,title:'温馨提示',width:e}).done(function(){if(a)a(n,i);});}var r=$('#class-course-list');t.getUserBasicInfo().done(function(t){if(0===t.code)n=t.data.org_id;}),r.on('click','[data-action="edit"] span',function(e){{var n=$(e.currentTarget),i=n.closest('.course-item'),a=i.data('display-status-search'),o=i.data('verify-status'),r=i.data('number');i.data('total-pay');}if(8==a&&2!=o)confirm({content:'你首先需要撤回审核才能编辑班课信息\uFF0C是否要撤回审核\uFF1F',title:'温馨提示',width:335,buttons:[{text:'撤回审核',type:'primary',handler:function(){this.hide(),t.classCourseRevokeAudit({number:r}).done(function(t){if(0===t.code)success('撤回审核',function(){location.href='/class_course/upsert_form?type=edit&number='+r;});});}},{text:'返回',handler:function(){this.hide();}}]});else location.href='/class_course/upsert_form?type=edit&number='+r;}).on('click','[data-action="delete"] span',function(e){var n=$(e.currentTarget),i=n.closest('.course-item'),r=i.data('total-pay'),c=i.data('number'),s=i.data('display-status-search');switch(s){case 1:case 2:case 9:o('删除班课操作不能撤销\uFF0C确认要删除吗\uFF1F',330,c,i,a);break;case 3:case 4:if(r>0)alert({title:'温馨提示',content:'当前班课已有学生报名\uFF0C如需删除请联系学生取消订单',buttons:[{text:'我知道了',type:'primary',handler:function(){this.hide();}}]});else t.isSingleCourse({}).done(function(t){if(0===t.code){var e='删除班课不能撤销\uFF0C学生将无法在您的主页找到该课程<br />确认要删除吗\uFF1F';if(t.data)e='由于该班课是你的唯一生效课程\uFF0C删除后你将不能被搜索到<br />确认要删除吗\uFF1F';o(e,408,c,i,a);}});break;case 5:case 6:if(r>0)alert({title:'温馨提示',content:'当前班课已有学生报名\uFF0C如需删除请联系学生取消订单',buttons:[{text:'我知道了',type:'primary',handler:function(){this.hide();}}]});else t.isSingleCourse({}).done(function(t){if(0===t.code){var e='删除班课不能撤销\uFF0C学生将无法在您的主页找到该课程<br />确认要删除吗\uFF1F';if(t.data)e='由于该班课是你的唯一生效课程\uFF0C删除后你将不能被搜索到<br />确认要删除吗\uFF1F';o(e,408,c,i,a);}});break;case 7:case 11:t.isSingleCourse({}).done(function(t){if(0===t.code){var e='删除班课不能撤销\uFF0C学生将无法在您的主页找到该课程<br />确认要删除吗\uFF1F';if(t.data)e='由于该班课是你的唯一生效课程\uFF0C删除后你将不能被搜索到<br />确认要删除吗\uFF1F';o(e,408,c,i,a);}});break;case 8:alert({title:'温馨提示',content:'班课正在审核中\uFF0C暂时无法删除',buttons:[{text:'确定',type:'primary',handler:function(){this.hide();}}]});break;case 10:t.isSingleCourse({}).done(function(t){if(0===t.code){var e='删除班课不能撤销\uFF0C确认要删除吗\uFF1F';if(t.data)e='由于该班课是你的唯一生效课程\uFF0C删除后你将不能被搜索到<br />确认要删除吗\uFF1F';o(e,408,c,i,a);}});}}).on('click','[data-action="check"] span',function(e){var n=$(e.currentTarget),i=n.closest('.course-item'),a=i.data('total-pay'),o=new Date(),r=o.getTime()/1000,c=i.data('start-time');if(0==a&&r>c)alert('老师\uFF0C现在已经过了你设置的开课时间\uFF0C快去检查一下教学计划吧\uFF01');else t.classCourseAudit({number:i.data('number')},{errorHandler:{991107:function(){alert({title:'温馨提示',content:'请先修改违规内容后再提交审核',buttons:[{text:'马上修改',type:'primary',handler:function(){this.hide(),location.href='/class_course/upsert_form?type=edit&number='+i.data('number');}},{text:'返回',handler:function(){this.hide();}}]});},230101:function(t){var e='恭喜你\uFF0C班课已提交审核<br />但是小秘书发现您的';if(0==t.data.cert)e+='<span class="text-info">身份认证&nbsp;</span>';if(0==t.data.profile)e+='<span class="text-info">资料设置&nbsp;</span>';e+='仍未完善<br />',e+='完善后班课才会自动开始审核',alert({content:e,title:'温馨提示',buttons:[{text:'我知道了',type:'primary',handler:function(){this.hide(),location.reload();}}]});}}}).done(function(t){if(0===t.code)success('提交审核',function(){location.reload();});});}).on('click','[data-action="revoke"] span',function(e){var n=$(e.currentTarget),i=n.closest('.course-item');confirm({content:'确定要撤回本次审核吗\uFF1F',title:'温馨提示',width:335}).done(function(){t.classCourseRevokeAudit({number:i.data('number')}).done(function(t){if(0===t.code)success('撤回审核',function(){location.reload();});});});}).on('click','[data-action="stop"] span',function(e){var n=$(e.currentTarget),i=n.closest('.course-item');confirm({content:'老师\uFF0C停止招生后\uFF0C学生将无法继续报名该班课\uFF0C仍然要停止招生吗\uFF1F',title:'温馨提示',width:335}).done(function(){t.statusClassCourse({number:i.data('number'),op:'stop'}).done(function(t){if(0===t.code)success('停止招生',function(){location.reload();});});});}).on('click','[data-action="continue"] span',function(e){var n=$(e.currentTarget),i=n.closest('.course-item'),a=i.data('total-pay'),o=i.data('max-student');if(a>=o)new CourseMaxStudentDialog({number:i.data('number'),nowStudent:a});else confirm({content:'老师\uFF0C班课继续招生后\uFF0C学生将可以继续报名该课程\uFF0C确认要继续招生吗\uFF1F',title:'温馨提示',width:335}).done(function(){t.statusClassCourse({number:i.data('number'),op:'goon'}).done(function(t){if(0===t.code)success('继续招生',function(){location.reload();});});});}).on('click','[data-action="again"] span',function(e){var n=$(e.currentTarget),i=n.closest('.course-item');t.copyClassCourse({number:i.data('number')}).done(function(t){if(0===t.code)location.href='/class_course/upsert_form?type=edit&number='+t.data.number;});}).on('click','.goto-roster',function(t){var i=$(t.currentTarget),a=i.data('price'),o=i.data('way');if(2==o)if(0==a)if(0==e.get('vip_level')){if(0==n)alert({title:'温馨提示',content:'免费课花名册只有会员才能查看\uFF0C会员还可享有优先推荐获得更多生源哦\u3002',width:382,skinClass:'vip_dialog',buttons:[{text:'立即开通',type:'error',handler:function(){location.href='/teacher_center/vip_center',this.hide();}},{text:'了解详情',type:'default',handler:function(){location.href='/teacher_center/vip_detail?type=seeRoster',this.hide();}}]});else alert({title:'温馨提示',content:'免费课花名册只有会员才能查看\uFF0C请联系机构开通会员',width:382,skinClass:'vip_dialog',buttons:[{text:'我知道了',type:'primary',handler:function(){this.hide();}}]});return!1;}else if(1==e.get('vip_level')){if(0==n)alert({title:'温馨提示',content:'免费课花名册只有高级会员才能查看\uFF0C高级会员还可享有优先推荐获得更多生源哦\u3002',width:382,skinClass:'vip_dialog',buttons:[{text:'立即开通',type:'error',handler:function(){location.href='/teacher_center/vip_center',this.hide();}},{text:'了解详情',type:'default',handler:function(){location.href='/teacher_center/vip_detail?type=seeRoster',this.hide();}}]});else alert({title:'温馨提示',content:'免费课花名册只有高级会员才能查看\uFF0C请联系机构开通会员',width:382,skinClass:'vip_dialog',buttons:[{text:'我知道了',type:'primary',handler:function(){this.hide();}}]});return!1;}});};});