define('common/component/SaveButton_b1f301d041',['require'],function(){'use strict';function n(n){$.extend(this,n),this.init();}return n.prototype={init:function(){var n=this,e=n.element,t=e.html();if('BUTTON'!==e.prop('tagName'))throw new Error('SaveButton 必须使用 button 标签');var o=function(){var o=n.save();if(o)e.focus(),e.prop('disabled',!0),e.html(n.saveText||'正在保存...'),o.always(function(){setTimeout(function(){e.prop('disabled',!1),e.html(t);},10);});return!1;};if(e.click(o),n.form)n.form.submit(function(){return o(),!1;});}},n;}),define('teacherCenter/couponFreeStudentList',['require','exports','common/service_9c322508d3','common/store_a1a35b3dfc','common/component/SaveButton_b1f301d041'],function(require,exports){'use strict';function n(){var n=0;c.find('input[name="student_number"]').each(function(e,t){if($(t).prop('checked'))n++;}),d.html(n);}function e(n,e,i,r){var d={};a.html(''),u.html('');var s='.'+e;if(!i)i=c.find(s).data('mode');var f=c.find('input[name="keyword"]').val();if('order_num'==e)d={serialNum:t,keyWord:f,orderNum:i,page:n};else d={serialNum:t,keyWord:f,consume:i,page:n};o.getCouponFreeStudent(d).done(function(n){if(0==n.code){var e=n.data.tpl.student_list,t=$(e).find('table tr'),o=$(e).find('.pager-block'),i=$(e).find('.no-data');if(t.length>0)a.html(t),u.html(o);else c.find('.student_list').html(i);if($.isFunction(r))r();}});}var t,o=require('common/service_9c322508d3'),i=require('common/store_a1a35b3dfc'),r=require('common/component/SaveButton_b1f301d041'),c=$('#content'),a=c.find('.student-list tbody'),u=c.find('.pager-container'),d=c.find('.choiced strong'),s='order_num',f='desc',m=0;exports.init=function(){t=i.get('serialNum');e(1,null),c.on('click','.btn-search',function(n){{var t=$(n.currentTarget),o=t.closest('.search-form');o.find('input[name="keyword"]').val();}e(0,s,f);}).on('click','#select-all',function(e){var t=$(e.currentTarget);if(t.prop('checked'))a.find('input[name="student_number"]').each(function(n,e){$(e).prop('checked',!0);});else a.find('input[name="student_number"]').each(function(n,e){$(e).prop('checked',!1);});n();}).on('click','input[name="student_number"]',function(){n();}).on('click','.sort',function(n){var t=$(n.currentTarget),o=t.data('by'),i=t.data('mode');e(0,o,i,function(){if('asc'==i)t.data('mode','desc');else t.data('mode','asc');s=o,f=i;});}).on('click','.pager [data-page]',function(){return m=$(this).data('page'),e(m,s,f),!1;});new r({element:c.find('.btn-send'),save:function(){var n=[];a.find('input[name="student_number"]').each(function(e,t){if($(t).prop('checked'))n.push($(t).val());});var e=[t];if(n.length)return o.sendCoupon({serialNum:e,studentNum:n}).done(function(n){if(0===n.code)success('发送成功',function(){location.reload();});});else alert('请选择需要发送优惠券的学生');}});};});