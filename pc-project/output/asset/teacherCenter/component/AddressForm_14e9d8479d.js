define('cobble/form/Select',['require','exports','module','../ui/ComboBox','../function/jquerify','../function/lifeCycle'],function(require){'use strict';function e(e){return i.init(this,e);}var n=require('../ui/ComboBox'),t=require('../function/jquerify'),i=require('../function/lifeCycle');return e.prototype={constructor:e,type:'Select',init:function(){var e=this,t=e.element,i='<input type="hidden" name="'+e.name+'"';if(null!=e.value)i+=' value="'+e.value+'"';if(t.attr('required'))i+=' required';i+=' />';var o=e.input=$(i);t.append(o),e.comboBox=new n({element:t,button:t.find(e.buttonSelector),menu:t.find(e.menuSelector),data:e.data,value:e.value,show:e.show,hide:e.hide,defaultText:e.defaultText,template:e.template,renderTemplate:e.renderTemplate,activeClass:e.activeClass,openClass:e.openClass,setText:$.proxy(e.setText,e),onChange:function(n,t){if(e.setValue(t.value),!e.silence)e.emit('change',t);},onAfterShow:function(){t.trigger('focusin');},onAfterHide:function(){t.trigger('focusout');}});},disable:function(){var e=this,n=e.element;n.find(e.buttonSelector).prop('disabled',!0);},enable:function(){var e=this,n=e.element;n.find(e.buttonSelector).prop('disabled',!1);},getValue:function(){return this.value;},setValue:function(e,n){var t=this;if(n=n||{},n.force||e!=t.value)t.value=e,t.input.val(null==e?'':e),t.silence=n.silence,t.comboBox.setValue(e),delete t.silence;},refresh:function(e){this.comboBox.refresh(e);},dispose:function(){var e=this;i.dispose(e),e.comboBox.dispose(),e.input=e.element=e.comboBox=null;}},t(e.prototype),e.defaultOptions={defaultText:'请选择',buttonSelector:'.btn-default',menuSelector:'.dropdown-menu',labelSelector:'.btn-default span',activeClass:'active',openClass:'open',renderTemplate:function(e){var n=[];return $.each(e,function(e,t){var i=[];$.each(t,function(e,n){if('text'!==e&&null!=n)i.push('data-'+e+'="'+n+'"');}),n.push('<li '+i.join(' ')+'>'+t.text+'</li>');}),n.join('');},setText:function(e){this.element.find(this.labelSelector).html(e);}},e;}),define('cobble/form/Text',['require','exports','../helper/Input','../helper/Placeholder','../function/init','../function/jquerify','../function/lifeCycle'],function(require){'use strict';function e(e){return r.init(this,e);}var n=require('../helper/Input'),t=require('../helper/Placeholder'),i=require('../function/init'),o=require('../function/jquerify'),r=require('../function/lifeCycle');return e.prototype={constructor:e,type:'Text',init:function(){var e=this,i=e.element;e.placeholder=new t({element:i,simple:e.placeholderSimple,nativeFirst:e.placeholderNativeFirst,placeholderSelector:e.placeholderSelector,template:e.template});var o=e.action;if(o)$.each(o,function(n,t){o[n]=$.proxy(t,e);});e.input=new n({element:i,onChange:function(n){e.emit(n);},onKeyDown:function(n){e.emit(n);},action:o});},getValue:function(){return $.trim(this.element.val());},setValue:function(e,n){var t=this;if(n=n||{},n.force||t.getValue()!==e){if(t.element.val(e),t.placeholder)t.placeholder.refresh();if(!n.silence)t.emit('change');}},dispose:function(){var e=this;r.dispose(e),e.input.dispose(),e.placeholder.dispose(),e.element=e.input=e.placeholder=null;}},o(e.prototype),e.defaultOptions={simple:!1,nativeFirst:!0,placeholderSelector:'.placeholder',template:'<div class="placeholder-wrapper"><div class="placeholder"></div></div>'},e.init=i(e),e;}),define('cobble/form/Validator',['require','exports','module','../function/jquerify','../function/lifeCycle'],function(require){'use strict';function e(e){return o.init(this,e);}function n(e,n){if(e.length>0){var t=e[0].element;if(t.is(':hidden'))t=t.parent();var i=t.offset().top;if(n>0)i-=n;window.scrollTo(window.scrollX,i);}}function t(e){var n=$.Deferred();return $.when.apply($,e).done(function(){n.resolve(arguments);}),n;}var i=require('../function/jquerify'),o=require('../function/lifeCycle');e.prototype={constructor:e,type:'Validator',init:function(){var n=this,t=n.element,i='FORM'===t.prop('tagName')?t:t.find('form');if(i.length>0)i.attr('novalidate','novalidate').on('submit'+a,$.proxy(n.validate,n));$.each(n.fields,function(n,i){var o=t.find('[name="'+n+'"]'),a=i.type;if(!a)a=i.type=o.attr('type')||'text';var u=i.rules;if(!u)u=i.rules={};var l=e.type[a]||[];$.each(l,function(e,n){if(null==u[n]){var t=r[n];if($.isFunction(t))u[n]=t(o,i);}});});var o=n.groupSelector;if(t.on('focusin'+a,function(e){var t=$(e.target).closest(o),i=[n.successClass,n.errorClass,n.requiredClass].join(' ');t.removeClass($.trim(i));}),n.realtime)t.on('focusout'+a,function(e){var t=$(e.target),i=t.prop('name');if(!i)t=t.find('[name]'),i=t.prop('name');if(i)n.validate(i);});},validate:function(e,i){var o=this,r=o.emit('beforeValidate');if(!r.isDefaultPrevented()){var a,u=o.element,l=o.groupSelector;if('string'===$.type(e))e=[e];if($.isArray(e))a=$.map(e,function(e){return u.find('[name="'+e+'"]').closest(l);});else if(a=u.find(l),'boolean'===$.type(e))i=e;var c=[],s=[];$.each(a,function(e,n){var t=o.validateGroup($(n));if(t){if(t.promise)s.push(t),t=t.data;$.merge(c,t);}});var e=[],f=[],d=function(){if($.each(c,function(n,t){if(t.error)f.push(t);e.push(t.element.prop('name'));}),i)n(f,o.scrollGap);o.emit('afterValidate',{fields:e,errors:f});};if(s.length>0)return t(s).done(d);else return d(),0===f.length;}},validateGroup:function(n){if(n.is(':visible')){var i=this,o=[],r=[],a=[];if(n.find('[name]').each(function(n){var t,u,l=this,c=l.name,s=l.value,f=l.disabled,d=$(l);if(!f){var p=i.fields[c];if(p){t=!0,p=$.extend(!0,{},p),p.form=i.element,p.value=$.trim(s);var m;if($.each(e.type[p.type]||[],function(n,t){var i=e.rule[t](p);if(i===!1)return m=t,!1;else if(''===p.value&&'required'===t)return!1;}),m){var h=p.errors;if(h)u=h[m];if(!u)throw new Error(c+' 字段 '+m+' 类型错误信息未定义');}else if($.isFunction(p.custom)){var v=$.Deferred(),g=p.custom(d,function(e){v.resolve(e);});u=null==g||g.done?v:g;}}}if(t)if(n=o.push({element:d,error:u}),u&&u.promise)r.push(u),a.push(n-1);}),r.length>0){var u=t(r).done(function(e){$.each(e,function(e,n){o[a[e]].error=n;}),i.refreshGroup(n,o);});return u.data=o,u;}else return i.refreshGroup(n,o),o;}},refreshGroup:function(e,n){var t=this,i=t.successClass,o=t.errorClass;$.each(n,function(n,r){var a,u=r.element,l=r.error,c=t.errorSelector;if(c)a=e.find(c).eq(n);if(l&&'string'===$.type(l)){if(e.removeClass(i).addClass(o),a){var s=t.renderTemplate;if($.isFunction(s))l=s({text:l},t.errorTemplate);a.html(l).show();var f=t.errorPlacement;if($.isFunction(f))f(u,a);}}else if(r.error='',e.removeClass(o).addClass(i),a)a.html('').hide();});},dispose:function(){var e=this;o.dispose(e),e.element.off(a),e.element=null;}},i(e.prototype),e.defaultOptions={realtime:!1,scrollGap:100,groupSelector:'.form-group',successClass:'has-success',errorClass:'has-error',errorSelector:'.error',errorTemplate:'<i class="icon icon-times-circle"></i>&nbsp;${text}',requiredClass:'has-required',requiredSelector:'.required',requiredTemplate:'${text}',renderTemplate:function(e,n){return n.replace(/\${(\w+)}/g,function(n,t){return e[t]||'';});},errorPlacement:function(e,n){if('hidden'===e.prop('type'))e=e.parent();n.css({position:'static',width:'auto'});var t=n.outerWidth(!0)+5;n.css({position:'absolute',width:t});var i=e.parent();if(i.is('.placeholder-wrapper'))e=i;var o=e.position();n.css({left:o.left+e.outerWidth()-37,top:o.top-n.outerHeight()+8});}},e.type={text:['required','pattern','min','max','minlength','maxlength'],hidden:['required'],password:['required','pattern','minlength','maxlength','equals'],number:['required','pattern','min','max','step'],range:['required','pattern','min','max','step'],tel:['required','pattern'],url:['required','pattern'],email:['required','pattern'],mobile:['required','pattern'],money:['required','pattern','min','max'],idcard:['required','pattern'],'int':['required','pattern','min','max'],internationalMobile:['required','pattern']},e.rule={required:function(e){if(e.value.length>0)return!0;else if(e.rules.required)return!1;},pattern:function(e){var n=e.rules.pattern;if(n)return n.test(e.value);else return void 0;},minlength:function(e){var n=e.rules.minlength;if($.isNumeric(n))return e.value.length>=+n;else return void 0;},maxlength:function(e){var n=e.rules.maxlength;if($.isNumeric(n))return e.value.length<=+n;else return void 0;},min:function(e){var n=e.rules.min;if($.isNumeric(n))return e.value>=+n;else return void 0;},max:function(e){var n=e.rules.max;if($.isNumeric(n))return e.value<=+n;else return void 0;},step:function(e){var n=e.rules.step;if($.isNumeric(n)){var t=e.rules.min||1;return(e.value-t)%n===0;}},equals:function(e){var n=e.rules.equals;if(n){var t=e.form.find('[name="'+n+'"]');return e.value===$.trim(t.val());}}},e.pattern={number:/^[\d.]*$/,'int':/^\d+$/,url:/^(?:(?:0\d{2,3}[- ]?[1-9]\d{6,7})|(?:[48]00[- ]?[1-9]\d{6}))$/,tel:/^(?:(?:0\d{2,3}[- ]?[1-9]\d{6,7})|(?:[48]00[- ]?[1-9]\d{6}))$/,mobile:/^1[3-9]\d{9}$/,email:/^(?:[a-z0-9]+[_\-+.]+)*[a-z0-9]+@(?:([a-z0-9]+-?)*[a-z0-9]+.)+([a-z]{2,})+$/i,money:/^[\d.]*$/,idcard:/(^\d{15}$)|(^\d{17}([0-9]|X)$)/i,internationalMobile:/^\d{7,20}$/};var r={required:function(e){return'required'===e.attr('required');},pattern:function(n,t){var i=n.attr('pattern')||e.pattern[t.type];if('string'===$.type(i))i=new RegExp(i);return i;},minlength:function(e){return e.attr('minlength');},maxlength:function(e){return e.attr('maxlength');},min:function(e){return e.attr('min');},max:function(e){return e.attr('max');},step:function(e){return e.attr('step');},equals:function(e){return e.attr('equals');}},a='.cobble_form_validator';return e;}),define('cobble/function/around',['require','exports','module'],function(){'use strict';return function(e,n,t,i){var o='string'===$.type(n),r=o?e[n]:e;if(!o)i=t,t=n;var a=function(){var e,n=arguments;if($.isFunction(t))e=t.apply(this,n);if(e!==!1){if($.isFunction(r))e=r.apply(this,n);if($.isFunction(i)){var o=i.apply(this,n);if('undefined'!==$.type(o))e=o;}return e;}};return o?e[n]=a:a;};}),define('cobble/function/autoScrollDown',['require','exports','module'],function(){'use strict';return function(e,n){var t=e.height(),i=e.scrollTop(),o=i+t,r=n.prop('offsetTop')+n.outerHeight(!0);if(i>r||r>o)e.scrollTop(r-t);};}),define('cobble/function/autoScrollUp',['require','exports','module'],function(){'use strict';return function(e,n){var t=e.scrollTop(),i=t+e.height(),o=n.prop('offsetTop');if(t>o||o>i)e.scrollTop(o);};}),define('cobble/function/call',['require','exports','module'],function(){'use strict';return function(e,n,t){if($.isFunction(e)){var i=$.isArray(t)?'apply':'call';return e[i](n,t);}};}),define('cobble/function/contains',['require','exports','module'],function(){'use strict';return function(e,n){if(e=e.jquery?e[0]:e,n=n.jquery?n[0]:n,!e||!n)return!1;if(e===n)return!0;else return $.contains(e,n);};}),define('cobble/function/debounce',['require','exports','module'],function(){'use strict';return function(e,n){n='number'===$.type(n)?n:50;var t;return function(){if(!t){var i=arguments;t=setTimeout(function(){t=null,e.apply(null,$.makeArray(i));},n);}};};}),define('cobble/function/decimalLength',['require','exports','module'],function(){'use strict';return function(e){var n=(''+e).split('.');return 2===n.length?n[1].length:0;};}),define('cobble/function/disableSelection',['require','exports','module'],function(){'use strict';var e=$('<i></i>')[0],n='onselectstart'in e,t='MozUserSelect'in e.style;if(e=null,n)return function(e){e=e||document,e.onselectstart=function(){return!1;};};if(t)return function(e){e=e||document.body,e.style.MozUserSelect='none';};else return $.noop;}),define('cobble/function/divide',['require','exports','module','./decimalLength','./float2Int'],function(require){'use strict';var e=require('./decimalLength'),n=require('./float2Int');return function(t,i){var o=Math.max(e(t),e(i));return t=n(t,o),i=n(i,o),t/ i;};}),define('cobble/function/dragGlobal',['require','exports','module','../helper/Draggable','../util/instance','../util/dimension','./pin'],function(require){'use strict';{var e=require('../helper/Draggable'),n=require('../util/instance'),t=require('../util/dimension');require('./pin');}return function(i){return new e({element:i.element,container:n.body,draggingClass:i.draggingClass,handleSelector:i.handleSelector,cancelSelector:i.cancelSelector,rect:function(){var e=i.fixed,n=i.scrollable;return{x:e||n?0:t.getPageScrollLeft(),y:e||n?0:t.getPageScrollTop(),width:e||!n?t.getViewportWidth():t.getPageWidth(),height:e||!n?t.getViewportHeight():t.getPageHeight()};}});};}),define('cobble/function/enableSelection',['require','exports','module'],function(){'use strict';var e=$('<i></i>')[0],n='onselectstart'in e,t='MozUserSelect'in e.style;if(e=null,n)return function(e){e=e||document,e.onselectstart=null;};if(t)return function(e){e=e||document.body,e.style.MozUserSelect='';};else return $.noop;}),define('cobble/function/float2Int',['require','exports','module'],function(){'use strict';return function(e,n){var t,i=(''+e).split('.');if(n>=0);else n=0;if(1===i.length)t=e+new Array(n+1).join('0');else n=Math.max(0,n-i[1].length),t=i.join('')+new Array(n+1).join('0');return+t;};}),define('cobble/function/init',['require','exports','module'],function(){'use strict';return function(e){return function(n,t){var i=[];return n.each(function(){i.push(new e($.extend({element:$(this)},t)));}),i;};};}),define('cobble/function/innerOffset',['require','exports','module','./toNumber'],function(require){'use strict';var e=require('./toNumber');return function(n){var t=n.offset(),i=n.css('border-left-width'),o=n.css('border-top-width');return{left:t.left+e(i,0,'int'),top:t.top+e(o,0,'int')};};}),define('cobble/function/isHidden',['require','exports','module'],function(){'use strict';return function(e){e.css('display');return'none'===e.css('display')||0==e.css('opacity')||'hidden'===e.css('visibility');};}),define('cobble/function/jquerify',['require','exports','module'],function(){'use strict';function e(e){return e.faker||e.element;}var n=$.prototype,t={on:function(){return n.on.apply(e(this),arguments),this;},off:function(){return n.off.apply(e(this),arguments),this;},emit:function(t,i){var o=this,r=e(o);if(r){if(!t[$.expando])t='string'===$.type(t)?$.Event(t):$.Event(null,t);t.cobble=o;var a=[t];if(i)a.push(i);var u=o[$.camelCase('on-'+t.type)];if($.isFunction(u)&&u.apply(o,a)===!1)t.preventDefault();if(!t.isPropagationStopped())n.trigger.apply(r,a);return t;}},before:function(n){e(this).before(n);},after:function(n){e(this).after(n);},appendTo:function(n){e(this).appendTo(n);},prependTo:function(n){e(this).prependTo(n);}};return function(e){$.each(t,function(n,t){if(null==e[n])e[n]=t;});};}),define('cobble/function/lifeCycle',['require','exports'],function(require,exports){'use strict';exports.init=function(e,n){var t=e.constructor,i='__cobble__'+t.prototype.type,o=n.element;if(o&&o.data(i))e=o.data(i);else if($.extend(e,t.defaultOptions,n),e.init(),o)o.data(i,e);return e;},exports.dispose=function(e){var n='__cobble__'+e.constructor.prototype.type,t=e.element;if(t)t.removeData(n);};}),define('cobble/function/offsetParent',['require','exports','module'],function(){'use strict';function e(e){return e.is('body')||'static'!==e.css('position');}return function(n){if(n.is('body'))return n;for(var t=n.parent();!e(t);)t=t.parent();return t;};}),define('cobble/function/outerOffset',['require','exports','module','./toNumber'],function(require){'use strict';var e=require('./toNumber');return function(n){var t=n.offset(),i=e(n.css('margin-left'),0,'int'),o=e(n.css('margin-top'),0,'int');return{left:t.left-i,top:t.top-o};};}),define('cobble/function/page',['require','exports','module','../util/instance'],function(require){'use strict';var e=require('../util/instance');return function(){if(e.body.prop('clientHeight')<e.html.prop('clientHeight'))return e.html;else return e.body;};}),define('cobble/function/pageHeight',['require','exports','module','./page'],function(require){'use strict';var e=require('./page');return function(){var n=e()[0];return Math.max(n.scrollHeight,n.clientHeight);};}),define('cobble/function/pageScrollLeft',['require','exports','module'],function(){'use strict';return function(){return Math.max(document.body.scrollLeft,document.documentElement.scrollLeft);};}),define('cobble/function/pageScrollTop',['require','exports','module'],function(){'use strict';return function(){return Math.max(document.body.scrollTop,document.documentElement.scrollTop);};}),define('cobble/function/pageWidth',['require','exports','module','./page'],function(require){'use strict';var e=require('./page');return function(){var n=e()[0];return Math.max(n.scrollWidth,n.clientWidth);};}),define('cobble/function/parsePercent',['require','exports','module','./divide'],function(require){'use strict';var e=require('./divide'),n=/(-?\d+(\.\d+)?)%/;return function(t){if(n.test(t))return e(RegExp.$1,100);else return void 0;};}),define('cobble/function/pin',['require','exports','module','../util/instance','./parsePercent'],function(require){'use strict';function e(e){var n=o[e.x];if(null==n)n=e.x;if('string'===$.type(n)){var t=i(n);if(null!=t)n=t*(e.width||e.element.outerWidth());}return n;}function n(e){var n=o[e.y];if(null==n)n=e.y;if('string'===$.type(n)){var t=i(n);if(null!=t)n=t*(e.height||e.element.outerHeight());}return n;}var t=require('../util/instance'),i=require('./parsePercent'),o={left:0,top:0,center:'50%',middle:'50%',right:'100%',bottom:'100%'};return function(i){var o=i.element,r=i.attachment||{};if(!r.element)r.element=t.body;var a=r.element.offset(),u=a.left+e(r),l=a.top+n(r),c=u-e(i),s=l-n(i),f=i.offset;if(f){if('number'===$.type(f.x))c+=f.x;if('number'===$.type(f.y))s+=f.y;}var d={left:c,top:s},p=o.css('position');if('absolute'!==p&&'fixed'!==p)d.position='absolute';if(i.silence)return d;else o.css(d);};}),define('cobble/function/pinGlobal',['require','exports','module','./pin','../util/dimension','../function/viewport'],function(require){'use strict';var e=require('./pin'),n=require('../util/dimension'),t=require('../function/viewport');return function(i){var o={silence:!0,element:i.element,x:'50%'===i.x?'50%':0,y:'50%'===i.y?'50%':0,attachment:{element:t(),width:n.getViewportWidth(),height:n.getViewportHeight(),x:i.x,y:i.y}};if(!i.fixed)o.offset={x:n.getPageScrollLeft(),y:n.getPageScrollTop()};return e(o);};}),define('cobble/function/position',['require','exports','module','./offsetParent'],function(require){'use strict';var e=require('./offsetParent');return function(n){var t=e(n),i=n.css('position'),o=parseInt(n.css('left'),10),r=parseInt(n.css('top'),10),a=isNaN(o),u=isNaN(r);if(a||u)if(1===t.length){var l=n.offset(),c=t.offset();if(a)o=l.left-c.left-(parseInt(t.css('border-left-width'),10)||0);if(u)r=l.top-c.top-(parseInt(t.css('border-top-width'),10)||0);}else o=r=0;if(!i||'static'===i)i='absolute';return{position:i,left:o,top:r};};}),define('cobble/function/replaceWith',['require'],function(){'use strict';return function(e,n){e=e[0],n=n[0],e.parentNode.replaceChild(n,e);};}),define('cobble/function/restrain',['require','exports','module'],function(){'use strict';return function(e,n,t){if(n>e)e=n;else if(e>t)e=t;return e;};}),define('cobble/function/split',['require','exports','module'],function(){'use strict';return function(e,n){var t=[];return $.each(e.split(n),function(e,n){if(n=$.trim(n))t.push(n);}),t;};}),define('cobble/function/timer',['require','exports','module'],function(){'use strict';return function(e,n,t){t='number'===$.type(t)?t:0;var i,o=function(){i=setTimeout(o,n),e();},r={start:function(){r.stop(),setTimeout(o,t);},stop:function(){if(i)clearTimeout(i),i=null;}};return r;};}),define('cobble/function/toNumber',['require','exports','module'],function(){'use strict';var e={'int':parseInt,'float':parseFloat};return function(n,t,i){if('number'!==$.type(n)){var o=e[i];if(n=o?o(n,10):+n,isNaN(n))n=t;}return n;};}),define('cobble/function/viewport',['require','exports','module','../util/instance'],function(require){'use strict';var e=require('../util/instance');return function(){if(e.body.prop('clientHeight')>e.html.prop('clientHeight'))return e.html;else return e.body;};}),define('cobble/function/viewportHeight',['require','exports','module'],function(){'use strict';return function(){return window.innerHeight||document.documentElement.clientHeight;};}),define('cobble/function/viewportWidth',['require','exports','module'],function(){'use strict';return function(){return window.innerWidth||document.documentElement.clientWidth;};}),define('cobble/helper/Draggable',['require','exports','module','../function/page','../function/toNumber','../function/restrain','../function/position','../function/contains','../function/jquerify','../function/lifeCycle','../function/innerOffset','../function/outerOffset','../function/pageScrollLeft','../function/pageScrollTop','../function/enableSelection','../function/disableSelection','../util/instance','../util/mouse'],function(require){'use strict';function e(e){return c.init(this,e);}function n(e){var n=b(e),t=y(e);if(C.left!==n||C.top!==t){C.left=n,C.top=t;var i=e.data;if(1===++x){var o=i.draggingClass;if(o)i.element.addClass(o);i.emit('beforeDrag');}if(!i.silence)i.element.css(C);i.emit('drag',C);}}function t(e){m(),v.document.off(w);var n=e.data,t=n.draggingClass;if(t)n.element.removeClass(t);if(x>0)n.emit('afterDrag',C);x=b=y=null;}function i(e,n,t){var i=!1;if($.isArray(n))n=n.join(',');return e.find(n).each(function(){if(i=u(this,t))return!1;else return void 0;}),i;}var o=require('../function/page'),r=(require('../function/toNumber'),require('../function/restrain')),a=require('../function/position'),u=require('../function/contains'),l=require('../function/jquerify'),c=require('../function/lifeCycle'),s=require('../function/innerOffset'),f=require('../function/outerOffset'),d=require('../function/pageScrollLeft'),p=require('../function/pageScrollTop'),m=require('../function/enableSelection'),h=require('../function/disableSelection'),v=require('../util/instance'),g=require('../util/mouse');e.prototype={constructor:e,type:'Draggable',init:function(){var e=this,r=e.element;if(!e.container)e.container=o();r.css(a(r)),$.each(g,function(o,l){if(l.support)r.on(l.mousedown+w,function(c){var d=c.target,p=e.handleSelector,m=e.cancelSelector;if(!(p&&!i(r,p,d)||m&&i(r,m,d))){var g=q[o],$=f(r),_=g.absoluteX(c)-$.left,k=g.absoluteY(c)-$.top,T=e.container;if(u(T,r)){var M=s(T);_+=M.left,k+=M.top;}var O=a(r),A=O.position;C.left=O.left,C.top=O.top;var P=e.axis,B=e.getRectange(!0);b='y'===P?S.constant(C.left):S.change(g[A+'X'],_,B.x,B.x+B.width),y='x'===P?S.constant(C.top):S.change(g[A+'Y'],k,B.y,B.y+B.height),x=0,h(),v.document.on(l.mousemove+w,e,n).on(l.mouseup+w,e,t);}});});},getRectange:function(e){var n=this,t=n.rect;if($.isFunction(t))t=n.rect();if(e){var i=n.element,o=t.width-i.outerWidth(!0),r=t.height-i.outerHeight(!0);t.width=Math.max(0,o),t.height=Math.max(0,r);}return t;},setRectange:function(e){this.rect=e;},dispose:function(){var e=this;c.dispose(e),e.element.off(w),e.element=e.container=null;}},l(e.prototype),e.defaultOptions={rect:function(){var e=this,n=e.container,t={x:0,y:0,width:n.innerWidth(),height:n.innerHeight()};if(!u(n,e.element)){var i=s(n);t.x=i.left,t.y=i.top;}return t;}};var b,y,x,w='.cobble_helper_draggable',C={},S={constant:function(e){return function(){return e;};},change:function(e,n,t,i){return function(o){return r(e(o)-n,t,i);};}},q={};return $.each(g,function(e,n){if(n.support)q[e]={absoluteX:function(e){return n.clientX(e)+d();},absoluteY:function(e){return n.clientY(e)+p();},fixedX:function(e){return n.clientX(e);},fixedY:function(e){return n.clientY(e);}};}),e;}),define('cobble/helper/Input',['require','exports','module','../function/around','../function/jquerify','../function/lifeCycle','../util/keyboard','../util/input','./Keyboard'],function(require){'use strict';function e(e){return t.init(this,e);}var n=(require('../function/around'),require('../function/jquerify')),t=require('../function/lifeCycle'),i=require('../util/keyboard'),o=require('../util/input'),r=require('./Keyboard');e.prototype={constructor:e,type:'Input',init:function(){var e=this,n=e.element;o.init(n);var t=e.action;if(t)$.each(t,function(n,i){t[n]=$.proxy(i,e);});var u,l;e.keyboard=new r({element:n,action:t,longPress:e.longPress,onKeyDown:function(n){e.emit(n);},onKeyUp:function(n){e.emit(n);},onBeforeLongPress:function(){u=n.val(),l=!0,e.emit('beforeLongPress');},onAfterLongPress:function(t){if(l=!1,e.emit('afterLongPress'),u!==n.val()&&(i.isCharKey(t.keyCode)||i.isDeleteKey()))e.emit('change');}}),n.on('input'+a,function(){if(!l||!e.smart)e.emit('change');});},autoWidth:function(){var e=this,n=e.element;e.on('change',function(){if(n.scrollLeft()>0)n.width(n.prop('scrollWidth'));});},autoHeight:function(){var e=this,n=e.element;if('hidden'!==n.css('overflow-y'))n.css('overflow-y','hidden');var t,i=n.height(),o=i,r=parseInt(n.css('font-size'),10),a=n.innerHeight()-i;e.on('change',function(){if(o!==i)o=i,n.height(i);if(t=n.prop('scrollHeight')-a,Math.abs(t-o)>r)n.height(t),o=t;});},dispose:function(){var e=this;t.dispose(e);var n=e.element;o.dispose(n),n.off(a),e.keyboard.dispose(),e.element=e.keyboard=null;}},n(e.prototype),e.defaultOptions={smart:!0,longPress:!1};var a='.cobble_helper_input';return e;}),define('cobble/helper/Iterator',['require','exports','module','./Keyboard','../function/timer','../function/jquerify'],function(require){'use strict';function e(n){$.extend(this,e.defaultOptions,n),this.init();}var n=require('./Keyboard'),t=require('../function/timer'),i=require('../function/jquerify');return e.prototype={constructor:e,init:function(){var e=this;e.setData(e.data);var i=function(){e.prev(),e.timer=a;},o=function(){e.next(),e.timer=u;},r=e.delay,a=t(i,r,r),u=t(o,r,r),l={};l[e.prevKey]=i,l[e.nextKey]=o,e.keyboard=new n({element:e.element,longPress:!1,onBeforeLongPress:$.proxy(e.start,e),onAfterLongPress:$.proxy(e.pause,e),action:l});},start:function(){var e=this.timer;if(e)e.start();},pause:function(){var e=this.timer;if(e)e.stop(),this.timer=null;},stop:function(){var e=this;e.pause(),e.index=e.startIndex;},getData:function(){return this.data;},setData:function(e){var n=this;if(n.stop(),$.isArray(e))n.data=e,n.maxIndex=e.length-1;},to:function(e,n){var t=this,i=t.index;if(n=n||{},n.force||i!==e)if(t.index=e,!n.silence)t.emit('change',{from:i,to:e,action:n.action||'to'});},prev:function(){var e=this,n=e.index-1;if(n<e.minIndex)n=e.loop?e.maxIndex:e.minIndex;e.to(n,{action:'prev'});},next:function(){var e=this,n=e.index+1;if(n>e.maxIndex)n=e.loop?e.minIndex:e.maxIndex;e.to(n,{action:'next'});},dispose:function(){var e=this;e.stop(),e.keyboard.dispose(),e.element=e.keyboard=null;}},i(e.prototype),e.defaultOptions={delay:60,loop:!0,minIndex:0,startIndex:-1,prevKey:'up',nextKey:'down'},e;}),define('cobble/helper/Keyboard',['require','exports','module','../function/call','../function/split','../function/jquerify','../util/keyboard'],function(require){'use strict';function e(n){$.extend(this,e.defaultOptions,n),this.init();}function n(e){var n=[];return $.each(e,function(e,t){var i=[],o='plus',a=r(e.replace(/\$\+/g,o),'+');if($.each(u.combinationKey,function(e){if($.inArray(e,a)<0)a.push('!'+e);}),$.each(a,function(e,n){var t=0===n.indexOf('!');if(t)n=n.substr(1);if(n===o)n='$+';if(u.combinationKey[n])i.push((t?'!':'')+'e.'+n+'Key');else if(u[n])i.push('e.keyCode==='+u[n]);else return i.length=0,!1;}),i.length>0)n.push({test:new Function('e','return '+i.join('&')),handler:t});}),n;}function t(e){var n=e.data,t=e.keyCode,i=n.cache,r=i.counter;if(i.keyCode===t&&r>0){if(1===r)n.emit({type:'beforeLongPress',keyCode:t});r++;}else i.keyCode=t,r=1;if(i.counter=r,n.longPress||1===r)$.each(i.action,function(t,i){if(i.test(e))o(i.handler,n,e);});e.type='keyDown',n.emit(e);}function i(e){var n=e.data,t=n.cache;if(t.keyCode=null,t.counter>1)n.emit({type:'afterLongPress',keyCode:e.keyCode}),t.counter=0;e.type='keyUp',n.emit(e);}var o=require('../function/call'),r=require('../function/split'),a=require('../function/jquerify'),u=require('../util/keyboard');e.prototype={constructor:e,type:'Keyboard',init:function(){var e=this;e.cache={counter:0,action:n(e.action||{})},e.element.on('keydown'+l,e,t).on('keyup'+l,e,i);},dispose:function(){var e=this;e.element.off(l),e.element=e.cache=null;}},a(e.prototype),e.defaultOptions={longPress:!1};var l='.cobble_helper_keyboard';return e;}),define('cobble/helper/Placeholder',['require','exports','module','../function/init','../function/jquerify','../function/lifeCycle','../function/replaceWith','../util/input'],function(require){'use strict';function e(e){return i.init(this,e);}var n=require('../function/init'),t=require('../function/jquerify'),i=require('../function/lifeCycle'),o=require('../function/replaceWith'),r=require('../util/input');e.prototype={constructor:e,type:'Placeholder',init:function(){var e=this,n=e.element,t=n.attr('placeholder');if(null==e.value)e.value=t||'';var i;if(l)if(e.nativeFirst)i='native';else if(t)n.removeAttr('placeholder');if(!i)i=e.simple?'simple':'complex';if(i=c[i],$.extend(e,i),i.init)e.init();if(e.refresh)e.refresh();}},t(e.prototype),e.defaultOptions={simple:!1,nativeFirst:!0,simpleClass:'placeholder-active',placeholderSelector:'.placeholder',template:'<div class="placeholder-wrapper"><div class="placeholder"></div></div>'},e.init=n(e);var a='.cobble_helper_placeholder',u=$('<input type="text" />')[0],l='placeholder'in u;u=null;var c={'native':{show:$.noop,hide:$.noop,refresh:$.noop,dispose:function(){var e=this;i.dispose(e),e.element=null;}},simple:{init:function(){var e=this,n=$.proxy(e.refresh,e);e.element.on('focus'+a,n).on('blur'+a,n);},show:function(){var e=this;e.element.addClass(e.simpleClass).val(e.value);},hide:function(){var e=this;e.element.removeClass(e.simpleClass).val('');},refresh:function(){var e=this,n=e.element;if(document.activeElement===n[0]){if(n.hasClass(e.simpleClass))e.hide();}else if(!n.val())e.show();},dispose:function(){var e=this;i.dispose(e),e.element.off(a),e.element=null;}},complex:{init:function(){var e=this,n=e.element,t=$(e.template);o(n,t),t.append(n),e.faker=t.find(e.placeholderSelector);var i=$.proxy(e.refresh,e);r.init(n),n.on('focus'+a,i).on('blur'+a,i).on('input'+a,i);},show:function(){var e=this;e.faker.html(e.value).show();},hide:function(){this.faker.hide();},refresh:function(){var e=this,n=e.element.val();if($.trim(n))e.hide();else e.show();},dispose:function(){var e=this;i.dispose(e);var n=e.element;r.dispose(n),n.off(a),e.faker=e.element=null;}}};return e;}),define('cobble/helper/Popup',['require','exports','module','../function/split','../function/isHidden','../function/contains','../function/jquerify','../function/lifeCycle','../util/instance'],function(require){'use strict';function e(e){return q.init(this,e);}function n(e,n){$.each(e.showConfigList,function(t,i){i[n](e);});}function t(e,n){$.each(e.hideConfigList,function(t,i){i[n](e);});}function i(e,n){if(e)e.type=n;else e=n;return e;}function o(e){var n=e.currentTarget;return n&&'HTML'===n.tagName?null:n;}function r(e,n){return e.emit(i(n,'beforeShow'));}function a(e,i){return e.layer.data(A,o(i)),n(e,'off'),t(e,'on'),e.emit('afterShow');}function u(e,n){return e.emit(i(n,'beforeHide'));}function l(e){return e.layer.removeData(A),t(e,'off'),n(e,'on'),e.emit('afterHide');}function c(){return $.now();}function s(e){return'__'+e+'Handler__';}function f(e,n){return null==e[n];}function d(e,n){return e.layer.data(A)!==o(n);}function p(e,n,t){return!n||n(e,t);}function m(e,n){return n-e[O]>50;}function h(n,t){return function(i){var o=i.data,r=c(i);if(f(o,T)&&d(o,i)&&p(o,t,i))o[O]=r,g({popup:o,delay:o.show.delay,toggle:e.trigger.show[n].delay,timer:T,success:function(){var e=function(){o.open(i);},n=o[k];if(n)n.done(e);else e();}});};}function v(n,t){return function(i){var o=i.data,r=c(i);if(f(o,M)&&p(o,t,i)&&m(o,r))o[O]=r,o[k]=$.Deferred(),g({popup:o,delay:o.hide.delay,toggle:e.trigger.hide[n].delay,timer:M,success:function(){o.close(i),o[k].resolve();},fail:function(){o[k]=null;}});};}function g(e){var n=e.delay,t=e.success;if(n>0){var i=e.popup,o=e.timer,r=e.toggle||{},a=r.on||$.noop,u=r.off||$.noop,l=e.fail||$.noop,c=function(){clearTimeout(i[o]),u(i,s),i[o]=null;},s=function(e){var n=i[o];if(n)c();if(n&&e===O)t();else l();};a(i,s),i[o]=setTimeout(function(){s(O);},n);}else t();}function b(e){var n=this,t=n.type,i=n.handler,o=s(t);if(e[o]!==i)e.element.on(t,e.selector,e,i),e[o]=i;}function y(e){var n=this;if(!e.selector){var t=n.type;e.element.off(t,n.handler),e[s(t)]=null;}}var x=require('../function/split'),w=require('../function/isHidden'),C=require('../function/contains'),S=require('../function/jquerify'),q=require('../function/lifeCycle'),_=require('../util/instance');e.prototype={constructor:e,type:'Popup',init:function(){var i=this,o=i.showConfigList=[],r=i.hideConfigList=[],a=i.show.trigger,u=i.hide.trigger;if(a)$.each(x(a,','),function(n,t){var i=e.trigger.show[t];if(i)o.push(i);});if(u)$.each(x(i.hide.trigger,','),function(n,t){var i=e.trigger.hide[t];if(i)r.push(i);});if(i.hidden=w(i.layer))n(i,'on');else t(i,'on');},open:function(){var e=this,n=arguments[0];if(!n)e[O]=c();if(n=r(e,n),!n.isDefaultPrevented()){var t=e.layer,i=e.show.animation;if($.isFunction(i))i.call(e,t);else t.show();e.hidden=!1,a(e,n);}},close:function(){var e=this;if(!e.hidden){var n=arguments[0];if(!n)e[O]=c();if(n=u(e,n),!n.isDefaultPrevented()){var t=e.layer,i=e.hide.animation;if($.isFunction(i))i.call(e,t);else t.hide();e.hidden=!0,l(e);}}},dispose:function(){var e=this;q.dispose(e),e.close(),n(e,'off'),e.element=e.layer=null;}},S(e.prototype),e.defaultOptions={show:{trigger:'click'},hide:{trigger:'click'}};var k='__hidePromise__',T='__showTimer__',M='__hideTimer__',O='__lastTriggerTime__',A='__sourceElement__',P=function(e,n){if(!n)return!1;else return C(e.layer,n);};return e.trigger={show:{focus:{type:'focusin',handler:h('focus'),on:b,off:y},click:{type:'click',handler:h('click'),on:b,off:y},over:{type:'mouseenter',handler:h('over'),on:b,off:y,delay:{on:function(e,n){e.element.on('mouseleave',e.selector,n);},off:function(e,n){e.element.off('mouseleave',n);}}},context:{type:'contextmenu',handler:h('context'),on:b,off:y}},hide:{blur:{type:'focusout',handler:v('blur'),on:b,off:y},click:{type:'click',handler:function(){return v(this.type,function(e,n){return!P(e,n.target);});},on:function(e){var n=this;_.document.on(n.type,e,e.clickHandler=n.handler());},off:function(e){_.document.off(this.type,e.clickHandler);}},out:{type:'mouseleave',handler:v('out'),on:function(e){var n=this.type,t=this.handler;e.layer.on(n,e,t),e.element.on(n,e.selector,e,t);},off:function(e){var n=this.type,t=this.handler;e.element.off(n,t),e.layer.off(n,t);},delay:{on:function(e,n){e.element.on('mouseenter',e.selector,n),e.layer.on('mouseenter',n);},off:function(e,n){e.element.off('mouseenter',n),e.layer.off('mouseenter',n);}}},context:{type:'contextmenu',handler:function(){return v('context',function(e,n){return!P(e,n.target);});},on:function(e){var n=this;_.document.on(n.type,e,e.contextHandler=n.handler());},off:function(e){_.document.off(this.type,e.contextHandler);}}}},e;}),define('cobble/ui/AutoComplete',['require','exports','module','../function/timer','../function/jquerify','../function/lifeCycle','../function/autoScrollUp','../function/autoScrollDown','../helper/Input','../helper/Popup','../helper/Iterator'],function(require){'use strict';function e(e){return o.init(this,e);}function n(e){var n=e.element,i=e.show,o=e.hide;if(!i.trigger)i.trigger='focus';if(!o.trigger)o.trigger='click';var r=i.animation;if($.isFunction(r))i.animation=$.proxy(r,e);if(r=o.animation,$.isFunction(r))o.animation=$.proxy(r,e);return new l({element:n,layer:e.menu,show:i,hide:o,onBeforeShow:function(n){if('eventPhase'in n)return t(e),!1;else return void 0;},onBeforeHide:function(t){var i;if('eventPhase'in t)i=t.target!==n[0];if(i)e.iterator.stop();return i;}});}function t(e){var n=e.cache,t=$.trim(e.element.val()),i=n[t];if(i)e.render(i);else e.load(t,function(i){n[t]=i,e.render(i);});}var i=(require('../function/timer'),require('../function/jquerify')),o=require('../function/lifeCycle'),r=require('../function/autoScrollUp'),a=require('../function/autoScrollDown'),u=require('../helper/Input'),l=require('../helper/Popup'),c=require('../helper/Iterator');e.prototype={constructor:e,type:'AutoComplete',init:function(){var e,i,o=this,l=o.menu,d=o.element,p=o.activeClass;o.cache={};var m=[{element:d,data:{text:d.val()}}],h=o.iterator=new c({element:d,startIndex:0,minIndex:o.includeInput?0:1,data:m,delay:o.delay,onChange:function(n,t){var u=t.to,c=(t.from,t.action),s=this.data[u];if(i)i.removeClass(p);if(i=s.element,o.autoScroll){var f='prev'===c?r:a;f(l,i);}if(u>0)i.addClass(p);if(e=s.data,'render'!==c)d.val(e.text);o.emit('change',{index:u-1,data:e});}});o.input=new u({element:d,smart:!0,longPress:!1,action:{up:function(e){e.preventDefault();},enter:function(){if(o.popup.hidden)e=m[0].data;else o.close();o.emit('enter',e);}},onChange:function(){m[0].data.text=d.val(),t(o);}}),o.popup=n(o);var v,g=o.itemSelector,b=!1,y=function(){l.on('mouseleave'+s,g,function(){if(!b)h.to(h.startIndex),x();});},x=function(){l.off('mouseleave'+s);};l.on('scroll'+s,function(){if(v)clearTimeout(v);b=!0,v=setTimeout(function(){v=null,b=!1;},500);}).on('click'+s,g,function(){x();var n=$(this).data(f);h.to(n,{force:!0}),o.close(),o.emit('itemClick',e);}).on('mouseenter'+s,g,function(){if(!b){if(i)i.removeClass(p);i=$(this),i.addClass(p),h.index=i.data(f),y();}});},render:function(e){var n=this;if($.isArray(e)&&e.length>0){n.emit('beforeRender');var t=n.iterator;t.stop();var i=t.getData();i.length=1;var o=n.menu;o.html(n.renderTemplate(e,n.template)),o.find(n.itemSelector).each(function(){var e=$(this),n=e.data();if(null==n.text)n.text=e.html();var t=i.push({element:e,data:n});e.data(f,t-1);}),t.maxIndex=i.length-1;var r=o.find('.'+n.activeClass);if(1===r.length){var a=r.data(f);if('number'===$.type(a))t.to(a,{action:'render'});}n.emit('afterRender'),n.open();}else n.close();},open:function(){var e=this,n=e.popup;if(n.hidden)e.emit('beforeOpen'),n.open(),e.emit('afterOpen');},close:function(){var e=this,n=e.popup;if(!n.hidden)e.emit('beforeClose'),n.close(),e.emit('afterClose');},dispose:function(){var e=this;o.dispose(e),e.menu.off(s),e.input.dispose(),e.popup.dispose(),e.element=e.menu=e.data=e.items=e.cache=null;}},i(e.prototype),e.defaultOptions={delay:60,includeInput:!0,itemSelector:'li',show:{},hide:{}};var s='.cobble_ui_autocomplete',f='__index__';return e;}),define('cobble/ui/ComboBox',['require','exports','module','../function/jquerify','../function/lifeCycle','../helper/Popup'],function(require){'use strict';function e(e){return t.init(this,e);}var n=require('../function/jquerify'),t=require('../function/lifeCycle'),i=require('../helper/Popup');e.prototype={constructor:e,type:'ComboBox',init:function(){var e=this,n=e.button,t=e.menu,r=e.element||n,a=e.openClass,u=e.show,l=e.hide,c=u.animation;if($.isFunction(c))u.animation=$.proxy(c,e);if(c=l.animation,$.isFunction(c))l.animation=$.proxy(c,e);if(e.popup=new i({element:n,layer:t,show:u,hide:l,onBeforeShow:function(n){e.emit(n);},onBeforeHide:function(n){e.emit(n);},onAfterShow:function(n){if(a)r.addClass(a);e.emit(n);},onAfterHide:function(n){if(a)r.removeClass(a);e.emit(n);}}),null==e.value){var s=t.find('.'+e.activeClass);if(1===s.length)e.value=s.data('value');}if(e.data)t.html(e.renderTemplate(e.data,e.template));if(null!=e.value)e.setValue(e.value,{force:!0,silence:!0});t.on('click'+o,'[data-value]',function(){e.setValue($(this).data('value')),e.close();});},getValue:function(){return this.value;},setValue:function(e,n){var t,i=this,o=i.menu,r=o.find('[data-value="'+e+'"]');if(1===r.length){if(t=r.data(),null==t.text)t.text=r.html();}else t={};if(n=n||{},n.force||e!=i.value){var a=i.activeClass;if(a)o.find('.'+a).removeClass(a);if(1===r.length){if(i.value=e,a)r.addClass(a);}else i.value=null;if(!n.silence)i.emit('change',t);}if($.isFunction(i.setText))i.setText(t.text||i.defaultText);},refresh:function(e){var n=this,t=n.value,i={};if(e){var o=e.data;if(o)n.menu.html(n.renderTemplate(o,n.template));if('value'in e)t=e.value,i.force=!0;}n.setValue(t,i);},open:function(){this.popup.open();},close:function(){this.popup.close();},dispose:function(){var e=this;t.dispose(e),e.menu.off(o),e.popup.dispose(),e.popup=e.element=e.button=e.menu=null;}},n(e.prototype),e.defaultOptions={show:{trigger:'click'},hide:{trigger:'click'}};var o='.cobble_ui_combobox';return e;}),define('cobble/ui/Dialog',['require','exports','module','../util/instance','../util/dimension','../function/jquerify','../function/lifeCycle','../function/offsetParent','../function/debounce','../function/pinGlobal','../function/dragGlobal'],function(require){'use strict';function e(e){return o.init(this,e);}var n=require('../util/instance'),t=require('../util/dimension'),i=require('../function/jquerify'),o=require('../function/lifeCycle'),r=require('../function/offsetParent'),a=require('../function/debounce'),u=require('../function/pinGlobal'),l=require('../function/dragGlobal');e.prototype={constructor:e,type:'Dialog',init:function(){var e=this,t=e.element||(e.element=$(e.template)),i=[],o=e.skinClass;if(o)i.push(o);var a=e.draggableClass;if(e.draggable&&a)i.push(a);if(i.length>0)t.addClass(i.join(' '));var u=e.removeOnEmpty,l=e.title;if(l)t.find(e.titleSelector).html(l);else if(u)t.find(e.headerSelector).remove();var s=e.content,f=t.find(e.bodySelector);if(s)f.html(s);else if(u)f.remove();var d=e.closeSelector,p=$.proxy(e.hide,e);if(d)t.on('click'+c,d,p);var m={};if(e.width)m.width=e.width;var h=e.fixed?'fixed':'absolute';if(t.css('position')!==h)m.position=h;if(!r(t).is('body'))n.body.append(t);if(e.modal){var v=e.mask||(e.mask=$(e.maskTemplate));if(t.before(v),e.hideOnClickMask)v.on('click'+c,p);var g='zIndex',b=e[g];if(!$.isNumeric(b))if(b=v.css(g),!$.isNumeric(b))b='auto';var y={overflow:'hidden'};y[g]=b,v.css(y),m[g]=b;}if(t.css(m),!e.hidden)e.hidden=!0,e.show();},show:function(){var e=this;if(e.hidden!==!1){var t=e.emit('beforeShow');if(!t.isDefaultPrevented()){var i=e.element,o=e.scrollable;if(e.draggable)e.drager=l({element:i,handleSelector:e.draggableHandleSelector,cancelSelector:e.draggableCancelSelector,draggingClass:e.draggingClass,fixed:e.fixed,scrollable:o});if(e.refresh(),e.showAnimation(),e.mask)e.showMaskAnimation();e.hidden=!1,n.window.resize(e.resizer=a(function(){e.refresh(!0);},50)),e.emit('afterShow');}}},hide:function(){var e=this;if(e.hidden!==!0){var t=e.emit('beforeHide');if(!t.isDefaultPrevented()){if(e.resizer)n.window.off('resize',e.resizer),e.resizer=null;if(e.drager)e.drager.dispose(),e.drager=null;if(e.hideAnimation(),e.mask)e.hideMaskAnimation();if(e.hidden=!0,e.emit('afterHide'),e.disposeOnHide)e.dispose();}}},refresh:function(){var e=this,n=arguments[0];if(!n||e.positionOnResize){var i=e.element,o=u({element:i,x:e.x,y:e.y,fixed:e.fixed});if(n)e.resizeAnimation(o);else i.css(o);}var r=e.mask;if(r)r.css({width:t.getPageWidth(),height:t.getPageHeight()});},dispose:function(){var e=this;if(o.dispose(e),!e.hidden)e.disposeOnHide=!1,e.hide();var n=e.element,t=e.mask;if(n.off(c),t)t.off(c);if(e.removeOnDispose)if(n.remove(),t)t.remove();e.element=e.mask=null;}},i(e.prototype),e.defaultOptions={x:'50%',y:'50%',modal:!0,fixed:!0,hidden:!1,draggable:!0,scrollable:!0,removeOnEmpty:!0,disposeOnHide:!0,removeOnDispose:!0,hideOnClickMask:!1,positionOnResize:!0,draggableClass:'draggable',draggableHandleSelector:'.dialog-header',draggableCancelSelector:['.dialog-header h1','.dialog-close'],headerSelector:'.dialog-header',titleSelector:'.dialog-header h1',closeSelector:'.dialog-close',bodySelector:'.dialog-body',template:'<div class="dialog"><i class="dialog-close">&times;</i><div class="dialog-header"><h1></h1></div><div class="dialog-body"></div></div>',maskTemplate:'<div class="dialog-mask"></div>',showAnimation:function(){this.element.show();},hideAnimation:function(){this.element.hide();},showMaskAnimation:function(){this.mask.show();},hideMaskAnimation:function(){this.mask.hide();},resizeAnimation:function(e){this.element.css(e);}};{var c='.cobble_ui_dialog';n.html.css('overflow'),n.body.css('overflow');}return e;}),define('cobble/util/dimension',['require','exports','module','../function/pageScrollTop','../function/pageScrollLeft','../function/pageWidth','../function/pageHeight','../function/viewportWidth','../function/viewportHeight'],function(require,exports){'use strict';var e=require('../function/pageScrollTop'),n=require('../function/pageScrollLeft'),t=require('../function/pageWidth'),i=require('../function/pageHeight'),o=require('../function/viewportWidth'),r=require('../function/viewportHeight');exports.getPageScrollTop=e,exports.getPageScrollLeft=n,exports.getPageWidth=t,exports.getPageHeight=i,exports.getViewportWidth=o,exports.getViewportHeight=r;}),define('cobble/util/input',['require','exports','module','../function/around'],function(require,exports){'use strict';function e(){}function n(e){var n=e.val(),i=!1;e.on('propertychange'+r,function(t){if(i)return void(i=!1);if('value'===t.originalEvent.propertyName){var o=e.val();if(o!==n)e.trigger('input'),n=o;}}),t(e,'val',function(){if(0!==arguments.length)i=!0;});}var t=require('../function/around'),i=$('<input type="text" />')[0],o='oninput'in i;i=null;var r='.cobble_util_input';exports.init=o?e:n,exports.dispose=function(e){e.off(r);};}),define('cobble/util/instance',['require','exports','module'],function(require,exports){exports.window=$(window),exports.document=$(document),exports.html=$(document.documentElement),exports.body=$(document.body);}),define('cobble/util/keyboard',['require','exports','module'],function(require,exports){'use strict';function e(e){var n={};return $.each(e,function(e,t){n[t]=e;}),n;}var n={a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,'`':192,'-':173,'=':61,'[':219,']':221,'\\':220,';':59,"'":222,',':188,'.':190,'/':191,$0:96,$1:97,$2:98,$3:99,$4:100,$5:101,$6:102,$7:103,$8:104,$9:105,'$.':110,'$+':107,'$-':109,'$*':106,'$/':111,space:32,tab:9},t={backspace:8,'delete':46},i={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,enter:13,esc:27,capslock:20,insert:45,home:36,end:35,pageup:33,pagedown:34,left:37,right:39,up:38,down:40},o={shift:16,ctrl:17,meta:91,alt:18};$.extend(exports,n,i,o),exports.charKey=n,exports.deleteKey=t,exports.functionKey=i,exports.combinationKey=o,exports.isCharKey=function(t){return t in e(n);},exports.isDeleteKey=function(n){return n in e(t);},exports.isFunctionKey=function(n){return n in e(i);},exports.isCombinationKey=function(n){return n in e(o);};}),define('cobble/util/mouse',['require','exports','module'],function(){'use strict';function e(e){return e.originalEvent.changedTouches[0];}var n=document.createElement('div'),t={support:'ontouchend'in n,click:'touchstart',mousedown:'touchstart',mousemove:'touchmove',mouseup:'touchend',pageX:function(n){return e(n).pageX;},pageY:function(n){return e(n).pageY;},clientX:function(n){return e(n).clientX;},clientY:function(n){return e(n).clientY;}},i={support:'onclick'in n,click:'click',mousedown:'mousedown',mousemove:'mousemove',mouseup:'mouseup',pageX:function(e){return e.pageX;},pageY:function(e){return e.pageY;},clientX:function(e){return e.clientX;},clientY:function(e){return e.clientY;}};return n=null,{touch:t,mouse:i};}),define('common/component/LocationMapDialog_401dd1847f',['require','exports','cobble/ui/Dialog','common/store_a1a35b3dfc','common/map/baidu_b4abd6bbd1','common/form_2ef59f4d41','common/component/SaveButton_b1f301d041','common/service_9c322508d3'],function(require){'use strict';function e(e,n,t){if($('dialog-body').find('#big-map').show(),n&&t)a.addrReso('big-map',e,n,t);else a.addrReso('big-map',e);}function n(e){$.extend(this,e),this.init();}{var t,i,o,r=require('cobble/ui/Dialog'),a=(require('common/store_a1a35b3dfc'),$('#consult'),require('common/map/baidu_b4abd6bbd1'));require('common/form_2ef59f4d41'),require('common/component/SaveButton_b1f301d041'),require('common/service_9c322508d3');}return n.prototype={init:function(){var n=this;t=n.area,i=n.lng,o=n.lat;var u='<div class="big-map"><div id="big-map"></div><span class="map-oper"><button class="small btn-primary btn-over">保存位置</button><button class="small btn-default btn-initial">回原位置</button><span class="bg"></span></span><input type="hidden" name="lng" /><input type="hidden" name="lat" /><input type="hidden" name="bd_area_name" /></div>',l=new r({title:'地图定位',skinClass:'location-map-dialog',content:u,width:550}),c=l.element;if(i&&o)e(t,i,o);else e(t);c.on('click','.btn-over',function(){var e=c.find('input[name="lng"]').val(),t=c.find('input[name="lat"]').val();l.hide(),n.closeDialog(),n.saveAddress(e,t);}).on('click','.btn-initial',function(){a.makeMarker('big-map',t);}).on('click','.dialog-close',function(){n.closeDialog();});}},n;}),define('common/component/RegionSelect_28068924d5',['require','cobble/form/Select','common/service_9c322508d3','common/store_a1a35b3dfc'],function(require){'use strict';function e(e){$.extend(this,e),this.init();}function n(e,n){setTimeout(function(){e.resolve(n);},0);}function t(){var e=$.Deferred();if(d)n(e,$.extend(!0,[],d));else c.getRegionList({filter:f}).done(function(t){d=t,n(e,$.extend(!0,[],t));});return e;}function i(e){var t=$.Deferred();if(!e)n(t,[]);else if(p[e])n(t,$.extend(!0,[],p[e]));else c.getRegionList({id:e,filter:f}).done(function(i){p[e]=i,n(t,$.extend(!0,[],i));});return t;}function o(e){var t=$.Deferred();if(!e)n(t,[]);else if(m[e])n(t,$.extend(!0,[],m[e]));else c.getRegionList({id:e,filter:f}).done(function(i){m[e]=i,n(t,$.extend(!0,[],i));});return t;}function r(e){var t=$.Deferred();if(!e)n(t,[]);else if(h[e])n(t,$.extend(!0,[],h[e]));else c.getRegionList({id:e,filter:f}).done(function(i){h[e]=i,n(t,$.extend(!0,[],i));});return t;}function a(e){return $.map(e||[],function(e){return{text:e.name,value:e.id};});}function u(e,n,t){e.refresh({data:a(n),value:null!=t?t:null});}var l=require('cobble/form/Select'),c=require('common/service_9c322508d3'),s=require('common/store_a1a35b3dfc'),f='';e.prototype={init:function(){var e=this,n=e.element;f=e.filter;var t=e.prefix||'';e.provinceSelect=new l({element:n.find('.province'),defaultText:e.provinceText||'- 省 -',name:t+'province',onChange:function(n,t){if(i(t.value).done(function(n){if('1'==s.get('user').globalDistrict)if(e.eachAll&&n.length>1)n.unshift({id:t.value,name:'全省'});u(e.citySelect,n,1===n.length?n[0].id:null);}),$.isFunction(e.onProvinceChange))e.onProvinceChange(t);}}),e.citySelect=new l({element:n.find('.city'),defaultText:e.cityText||'- 市 -',name:t+'city',onChange:function(n,t){if(o(t.value).done(function(n){if(e.eachAll)n.unshift({id:t.value,name:'全市'});u(e.areaSelect,n,null);}),$.isFunction(e.onCityChange))e.onCityChange(t);}}),e.areaSelect=new l({element:n.find('.area'),defaultText:e.areaText||'- 区 -',name:t+'area',onChange:function(n,t){if(r(t.value).done(function(n){if(e.eachAll)n.unshift({id:t.value,name:'全部'});u(e.countrySelect,n,null);}),$.isFunction(e.onAreaChange))e.onAreaChange(t);}}),e.countrySelect=new l({element:n.find('.country'),defaultText:e.countrySelect||'- 商圈 -',name:t+'country',onChange:function(n,t){if($.isFunction(e.onCountryChange))e.onCountryChange(t);}}),e.refresh();},refresh:function(e){var n=this;if(e)$.extend(n,e);var a=n.provinceSelect.onChange,l=n.citySelect.onChange,c=n.areaSelect.onChange,f=n.countrySelect.onChange;n.provinceSelect.onChange=n.citySelect.onChange=n.areaSelect.onChange=n.countrySelect.onChange=null,$.when(t(),i(n.provinceId),o(n.cityId),r(n.areaId)).done(function(e,t,i,o){if('1'==s.get('user').globalDistrict)if(n.eachAll)e.unshift({id:0,name:'全国'});if(u(n.provinceSelect,e,n.provinceId),u(n.citySelect,t,n.cityId),u(n.areaSelect,i,n.areaId),u(n.countrySelect,o,n.countryId),n.provinceSelect.onChange=a,n.citySelect.onChange=l,n.areaSelect.onChange=c,n.countrySelect.onChange=f,$.isFunction(n.callback))n.callback();});}};var d=null,p={},m={},h={};return e;}),define('common/component/SaveButton_b1f301d041',['require'],function(){'use strict';function e(e){$.extend(this,e),this.init();}return e.prototype={init:function(){var e=this,n=e.element,t=n.html();if('BUTTON'!==n.prop('tagName'))throw new Error('SaveButton 必须使用 button 标签');var i=function(){var i=e.save();if(i)n.focus(),n.prop('disabled',!0),n.html(e.saveText||'正在保存...'),i.always(function(){setTimeout(function(){n.prop('disabled',!1),n.html(t);},10);});return!1;};if(n.click(i),e.form)e.form.submit(function(){return i(),!1;});}},e;}),define('common/form_2ef59f4d41',['require','exports','cobble/form/Validator'],function(require,exports){'use strict';function e(e){var n={},t=e.find('[name]');return t.each(function(){var e=this.name,t=this.value,i='radio'===this.type||'checkbox'===this.type;if(i){if(this.checked)n[e]=t;}else{var o=n[e];if(null==o)n[e]=t;else o=n[e]=[o],o.push(t);}}),$.each(n,function(e,t){n[e]=$.isArray(t)?t.join(','):$.trim(t);}),n;}function n(e,n){$.each(n,function(n,i){if(i){var o=e.find('[name="'+n+'"]'),r=o.closest('.form-group');r.removeClass('has-success').addClass('has-error');var a=r.find('.error');a.html(i),t.defaultOptions.errorPlacement(o,a);}});}var t=require('cobble/form/Validator');exports.parse=function(n){return e(n);},exports.get=function(t,i){return $.ajax({url:i,type:'get',dataType:'json',data:t.jquery?e(t):t}).done(function(e){if(e.code){var i=e.data;if(i)n(t,i);}return e;});},exports.post=function(t,i){return $.ajax({url:i,type:'post',dataType:'json',data:t.jquery?e(t):t}).done(function(e){if(e.code){var i=e.data;if(i)n(t,i);}return e;});};}),define('common/map/baidu_b4abd6bbd1',['require'],function(require){'use strict';function e(e,n,t){e='.'+e;var i={offset:new BMap.Size(20,-30)},o=new BMap.Label(t,i);o.setStyle({color:'#3d3d3d',fontSize:'12px',height:'26px',lineHeight:'26px',borderColor:'#ff9900',paddingLeft:'5px',paddingRight:'5px',fontFamily:'微软雅黑'});var r=$(e);r.find('.BMap_Marker label').remove(),n.setLabel(o);var a=n.getPosition();r.find('input[name="lng"]').val(a.lng),r.find('input[name="lat"]').val(a.lat);var u=new BMap.Geocoder();u.getLocation(a,function(e){var n=e.addressComponents;r.find('input[name="bd_area_name"]').val(n.district);});}function n(e,n,i){function o(){var o=n.getPosition(),r=$('.new-address'),a=new BMap.Geocoder();if(a.getLocation(o,function(n){var t=n.addressComponents,i=t.city,o=r.find('.city .btn-default span').text();if(-1==i.indexOf(o))if('big-map'==e)$('.big-map').find('.btn-initial').click();else r.find('.btn-initial').click();}),t(e,n,o.lng,o.lat),i)$('.map-oper').show(),$('.map-oper').find('.btn-initial').show();}n.addEventListener('dragend',o);}function t(n,t,i,o){var r=new BMap.Point(i,o),a=new BMap.Geocoder();a.getLocation(r,function(i){var o=i.addressComponents,r=o.province;if(o.province!=o.city)r+=o.city;r+=o.district+o.street+o.streetNumber,e(n,t,r);});}var i,exports=$({});exports.init=function(e){if('undefined'==typeof BMap){if(!i)i=[],require(['js!http://api.map.baidu.com/api?v=2.0&ak=EMB0bKIvMeOd70lyyG92BZlu'],function(){$.each(i,function(e,n){n();}),i=null;});i.push(e);}else setTimeout(e);};var o={};return exports.getExistedMap=function(){return o;},exports.search=function(e,n,t,i){var r;if(null==t)t=116.404;if(null==i)i=39.915;if(o[e])r=o[e];else{var r=new BMap.Map(e);r.centerAndZoom(new BMap.Point(t,i),16);var a=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_ZOOM});r.addControl(a),r.enableScrollWheelZoom(),o[e]=r;}var u=!1,l=new BMap.LocalSearch(r,{renderOptions:{map:r,selectFirstResult:!1},pageCapacity:1,onSearchComplete:function(e){var t=e.getNumPois();if(1>t){var i=n.split('-');if(!u&&i[0]&&i[0]!=n)u=!0,l.search(i[0]);else return r.clearOverlays(),r.reset(),!1;}}});l.search(n);},exports.areaCenter=function(e,n){var t;if(o[e])t=o[e],t.centerAndZoom(n,16);else{var t=new BMap.Map(e);t.centerAndZoom(n,16);var i=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_ZOOM});t.addControl(i),t.enableScrollWheelZoom(),o[e]=t;}},exports.addrResolution=function(t,i,r){var a;if(o[t]){a=o[t];var u=new BMap.Geocoder();a.clearOverlays(),u.getPoint(i,function(o){if(o){a.centerAndZoom(o,16);var r=new BMap.Marker(o);e(t,r,i),n(t,r,!1),a.addOverlay(r),r.enableDragging();}},'北京市');}else{var a=new BMap.Map(t),u=new BMap.Geocoder();a.clearOverlays(),u.getPoint(i,function(o){if(o){a.centerAndZoom(o,16);var r=new BMap.Marker(o);e(t,r,i),n(t,r,!1),a.addOverlay(r),r.enableDragging();}},'北京市');var l=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_ZOOM});if(a.addControl(l),r)a.enableScrollWheelZoom();else a.disableScrollWheelZoom();o[t]=a;}},exports.addrReso=function(t,i,r,a){var u,l,c=$('.set-address-dialog');if(c.length)l=c.find('.'+t);else l=$('.'+t+':visible');var s,f=l.find('.location-addr'),d=f.closest('.form-group'),p=f.find('.error'),m=f.find('.message-primary');if(o[t])u=o[t];else{var u=new BMap.Map(t),h=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_ZOOM});u.addControl(h),u.enableScrollWheelZoom(),o[t]=u;}var v=new BMap.Geocoder();u.clearOverlays();var g='http://api.map.baidu.com/geocoder/v2/';if($.ajax(g,{async:!1,dataType:'jsonp',data:{output:'json',ak:'EMB0bKIvMeOd70lyyG92BZlu',address:i},success:function(e){if(0===e.status)if(s=e.result.confidence,60>s)d.addClass('has-error'),m.show(),p.hide();else d.removeClass('has-error'),m.hide();}}),exports.getConfidence=function(){return s;},r&&a){var b=new BMap.Point(r,a);u.centerAndZoom(b,16),v.getLocation(b,function(i){var o=i.addressComponents,r=o.province;if(o.province!=o.city)r+=o.city;r+=o.district+o.street+o.streetNumber;var a=new BMap.Marker(b);e(t,a,r),n(t,a,!0),u.addOverlay(a),a.enableDragging(),u.panTo(b);});}else v.getPoint(i,function(o){if(o){u.centerAndZoom(o,16);var r=new BMap.Marker(o);e(t,r,i),n(t,r,!0),u.addOverlay(r),r.enableDragging();}},'北京市');l.find('.amplify').show(),l.find('.map-oper').show();},exports.makeMarker=function(t,i){var r;if(o[t])r=o[t];else var r=new BMap.Map(t);var a=new BMap.Geocoder();r.clearOverlays(),a.getPoint(i,function(o){if(o){r.centerAndZoom(o,16);var a=new BMap.Marker(o);e(t,a,i),n(t,a,!0),r.addOverlay(a),a.enableDragging();}},'北京市');},exports.reAddress=function(e,n,t){if(null==n)n=116.404;if(null==t)t=39.915495;var i=new BMap.Point(n,t),o=new BMap.Geocoder();o.getLocation(i,function(n){var t=n.addressComponents,i=t.province+t.city+t.district+t.street+t.streetNumber;exports.addrResolution(e,i);});},exports.modifiedAddress=function(t,i,r,a){if(null==i)i=116.404;if(null==r)r=39.915495;var u=new BMap.Point(i,r),l=new BMap.Geocoder();l.getLocation(u,function(i){var r=i.addressComponents,l=r.province;if(r.province!=r.city)l+=r.city;l+=r.district+r.street+r.streetNumber;var c=new BMap.Marker(u);e(t,c,l),n(t,c,!1);var s=null;if(o[t])s=o[t],s.clearOverlays();else{s=new BMap.Map(t),s.clearOverlays(),s.centerAndZoom(u,16);var f=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_ZOOM});if(s.addControl(f),a)s.enableScrollWheelZoom();else s.disableScrollWheelZoom();}s.addOverlay(c),c.enableDragging(),s.panTo(u);});},exports;}),define('teacherCenter/component/AddressForm_14e9d8479d',['require','common/store_a1a35b3dfc','cobble/form/Select','common/component/RegionSelect_28068924d5','cobble/ui/AutoComplete','common/map/baidu_b4abd6bbd1','common/component/LocationMapDialog_401dd1847f','common/form_2ef59f4d41','cobble/form/Text','common/service_9c322508d3','common/component/SaveButton_b1f301d041'],function(require){'use strict';function e(e){$.extend(this,e),this.init();}function n(e,n){var i=$('.form');if(i.find('#map').show(),i.find('.area-hint').hide(),e&&n)u.addrReso('map',t(),e,n);else u.addrReso('map',t());}function t(){var e=$('.form'),n=c.parse(e),t=e.find('.region-select'),i=t.find('.province b span').text(),o=t.find('.city b span').text(),r=t.find('.area b span').text(),a=n.location_addr;if(m='','- 省 -'!=i)m=i;if('- 市 -'!=o&&o!=i)m+=o;if('- 省 -'!=i)m+=r;if(''!=a)m+=a;return m;}var i,o=require('common/store_a1a35b3dfc'),r=(require('cobble/form/Select'),require('common/component/RegionSelect_28068924d5')),a=require('cobble/ui/AutoComplete'),u=require('common/map/baidu_b4abd6bbd1'),l=require('common/component/LocationMapDialog_401dd1847f'),c=require('common/form_2ef59f4d41'),s=require('cobble/form/Text'),f=require('common/service_9c322508d3'),d=require('common/component/SaveButton_b1f301d041'),p='user';e.prototype={init:function(){var e=this,o=e.element,c=e.data;if(!c)c=e.data={};e.regionSelect=new r({element:o.find('.region-select'),filter:e.filter,eachAll:!1,onCityChange:function(e){i=e.text;},onAreaChange:function(e){var t=o.find('textarea[name="location_addr"]');if(void 0!=e.text)if(t.prop('disabled',!1),t.val())if('user'==p)n();else p='user';},callback:e.callback}),o.find('.region-select li').each(function(){var e=['全国','全省','全市'];if($.contains($(this).text(),e))$(this).remove();});var h=o.find('textarea[name="location_addr"]'),v=o.find('.suggestion-list');new a({element:h,menu:v,activeClass:'active',renderTemplate:function(e){var n='';return $.each(e||[],function(e,t){n=n+'<li data-text="'+t.name+'"><i class="icon icon-location"></i><span>'+t.name+'</span><em>'+t.city+t.district+'</em></li>';}),n;},load:function(e,n){f.getAddressSuggestion({query:e,region:i}).done(function(e){if(e.result.length)n(e.result);});},onItemClick:function(){var e=$('.form .inland-address'),n='',i='';if($.each(e.find('.suggestion-list li'),function(e,t){if($(t).hasClass('active'))n=$(t).find('em').text(),i=$(t).data('text');}),n)i=n+i;else i=t();e.find('#map').show(),e.find('.area-hint').hide(),u.addrReso('map',i),e.find('textarea[name="detailed_address"]').focus();}}),o.on('blur','textarea[name="location_addr"]',function(e){var n=$(e.currentTarget);if(n.val())o.find('.show-map').prop('disabled',!1);else o.find('.show-map').prop('disabled',!0);}).on('click','.show-map',function(){n();}).on('click','.btn-initial',function(){u.makeMarker('map',m);}).on('click','.amplify',function(){var e=t(),n=o.find('input[name="lng"]').val(),i=o.find('input[name="lat"]').val();new l({area:e,lng:n,lat:i,closeDialog:function(){var e=u.getExistedMap();e['big-map']=null;},saveAddress:function(n,t){u.addrReso('map',e,n,t);}});});new d({element:o.find('.btn-over'),save:function(){var n=o.find('input[name="bd_area_name"]').val(),t=o.find('input[name="city"]').val(),i=o.find('input[name="area"]').val(),r=o.find('.area span').text();return f.checkAddress({cityId:t,areaName:n}).done(function(t){if(0===t.code)if(o.find('.map-oper').hide(),t.data.match_area&&t.data.match_area.id)if(i!=t.data.match_area.id)confirm({content:'小秘书发现你输入的地址似乎在\u201C'+n+'\u201D<br />是否需要小秘书帮你把\u201C'+r+'\u201D修改为\u201C'+n+'\u201D呢\uFF1F',title:'温馨提示',width:400,buttons:[{text:'帮我修改',type:'primary',handler:function(){p='saveAddr',e.regionSelect.areaSelect.setValue(t.data.match_area.id),this.hide();}},{text:'不修改',handler:function(){this.hide();}}]});});}});e.locationAddrInput=new s({element:o.find('[name="location_addr"]')}),e.detailedAddressInput=new s({element:o.find('[name="detailed_address"]')});},refresh:function(e){var t=this,r=t.element;t.data=e,r.find('[name="id"]').val(e.id),t.locationAddrInput.setValue(e.location_addr);var a=r.find('[name="location_addr"]');a.prop('disabled',!1),t.detailedAddressInput.setValue(e.detailed_address);var u=e.regular_address?e.regular_address.province.id:null,l=e.regular_address?e.regular_address.city.id:null,c=e.regular_address?e.regular_address.area.id:null;i=e.regular_address.city.name,t.regionSelect.refresh({provinceId:u,cityId:l,areaId:c,onCityChange:function(e){i=e.text;},onAreaChange:function(e){var t=r.find('textarea[name="location_addr"]');if(void 0!=e.text)if(t.prop('disabled',!1),t.val())n();},callback:function(){n(e.lng,e.lat);}});var s=r.find(':checkbox');if(s.prop('disabled',!1),1==e.status)s.prop('checked',!0).prop('disabled',!0);else s.prop('checked',!1);if(1==o.get('addressNum'))s.prop('disabled',!0);},setAreaChangeSrc:function(e){p=e;}};var m='';return e;});