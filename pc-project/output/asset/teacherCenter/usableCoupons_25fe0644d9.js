define('common/component/SaveButton_b1f301d041',['require'],function(){'use strict';function e(e){$.extend(this,e),this.init();}return e.prototype={init:function(){var e=this,n=e.element,t=n.html();if('BUTTON'!==n.prop('tagName'))throw new Error('SaveButton 必须使用 button 标签');var o=function(){var o=e.save();if(o)n.focus(),n.prop('disabled',!0),n.html(e.saveText||'正在保存...'),o.always(function(){setTimeout(function(){n.prop('disabled',!1),n.html(t);},10);});return!1;};if(n.click(o),e.form)e.form.submit(function(){return o(),!1;});}},e;}),define('teacherCenter/usableCoupons_25fe0644d9',['require','exports','common/service_9c322508d3','common/store_a1a35b3dfc','common/component/SaveButton_b1f301d041'],function(require,exports){'use strict';var e=require('common/service_9c322508d3'),n=require('common/store_a1a35b3dfc'),t=require('common/component/SaveButton_b1f301d041');exports.init=function(){var o=$('#content'),i=o.find('.coupon-list'),c=n.get('studentNum');o.on('click','#select-all',function(e){var n=$(e.currentTarget);if(n.prop('checked'))i.find('input[name="serial_number"]').each(function(e,n){$(n).prop('checked',!0);});else i.find('input[name="serial_number"]').each(function(e,n){$(n).prop('checked',!1);});});new t({element:o.find('.btn-send'),save:function(){var n=[];i.find('input[name="serial_number"]').each(function(e,t){if($(t).prop('checked'))n.push($(t).val());});var t=[c];if(n.length)return e.sendCoupon({serialNum:n,studentNum:t}).done(function(e){if(0===e.code)success('发送成功',function(){location.reload();});});else alert('请选择需要发送的优惠券');}});};});