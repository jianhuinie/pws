define('cobble/function/viewportHeight',['require','exports','module'],function(){'use strict';return function(){return window.innerHeight||document.documentElement.clientHeight;};}),define('cobble/util/cookie',['require','exports','module'],function(require,exports){'use strict';function t(t){if(0===t.indexOf('"'))t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');var e={};try{t=decodeURIComponent(t.replace(/\+/g,' ')),$.each(t.split(';'),function(t,n){var i=n.split('='),r=$.trim(i[0]),o=$.trim(i[1]);if(r)e[r]=o;});}catch(n){}return e;}function e(t,e,i){var r=i.expires;if($.isNumeric(r)){var o=r;r=new Date(),r.setTime(r.getTime()+o*n);}document.cookie=[encodeURIComponent(t),'=',encodeURIComponent(e),r?';expires='+r.toUTCString():'',i.path?';path='+i.path:'',i.domain?';domain='+i.domain:'',i.secure?';secure':''].join('');}var n=3600000;exports.get=function(e){var n=t(document.cookie);return'string'===$.type(e)?n[e]:n;},exports.set=function(t,n,i){if($.isPlainObject(t))i=n,n=null;if(i=$.extend({},exports.defaultOptions,i),null===n)$.each(t,function(t,n){e(t,n,i);});else e(t,n,i);},exports.remove=function(t,n){if(null!=t)n=n||{},n.expires=-1,e(t,'',$.extend({},exports.defaultOptions,n));},exports.defaultOptions={path:'/'};}),define('cobble/util/etpl',function(){function t(t,e){for(var n in e)if(e.hasOwnProperty(n))t[n]=e[n];return t;}function e(){this.raw=[],this.length=0;}function n(){return'___'+O++;}function i(t,e){var n=new Function();n.prototype=e.prototype,t.prototype=new n(),t.prototype.constructor=t;}function r(t){return A[t];}function o(t){return'"'+t.replace(/\x5C/g,'\\\\').replace(/"/g,'\\"').replace(/\x0A/g,'\\n').replace(/\x09/g,'\\t').replace(/\x0D/g,'\\r')+'"';}function s(t){return t.replace(/[\^\[\]\$\(\)\{\}\?\*\.\+]/g,function(t){return'\\'+t;});}function a(t){var e=arguments;return t.replace(/\{([0-9]+)\}/g,function(t,n){return e[n-0+1];});}function c(t){return t=t.replace(/^\s*\*/,''),a('gv({0},["{1}"])',o(t),t.replace(/\[['"]?([^'"]+)['"]?\]/g,function(t,e){return'.'+e;}).split('.').join('","'));}function l(t,e,n,i,r,o){for(var s=n.length,a=t.split(e),c=0,l=[],p=0,u=a.length;u>p;p++){var f=a[p];if(p){var h=1;for(c++;;){var d=f.indexOf(n);if(0>d){l.push(c>1&&h?e:'',f);break;}if(c=i?c-1:0,l.push(c>0&&h?e:'',f.slice(0,d),c>0?n:''),f=f.slice(d+s),h=0,0===c)break;}if(0===c)r(l.join('')),o(f),l=[];}else f&&o(f);}if(c>0&&l.length>0)o(e),o(l.join(''));}function p(t,e,n){var i,r=[],s=e.options,a='',u='',f='',h='';if(n)a='ts(',u=')',f=D,h=q,i=s.defaultFilter;return l(t,s.variableOpen,s.variableClose,1,function(t){if(n&&t.indexOf('|')<0&&i)t+='|'+i;var o=t.indexOf('|'),s=(o>0?t.slice(0,o):t).replace(/^\s+/,'').replace(/\s+$/,''),l=o>0?t.slice(o+1):'',d=0===s.indexOf('*'),g=[d?'':a,c(s),d?'':u];if(l){l=p(l,e);for(var v=l.split('|'),m=0,y=v.length;y>m;m++){var w=v[m];if(/^\s*([a-z0-9_-]+)(\((.*)\))?\s*$/i.test(w)){if(g.unshift('fs["'+RegExp.$1+'"]('),RegExp.$3)g.push(',',RegExp.$3);g.push(')');}}}r.push(f,g.join(''),h);},function(t){r.push(f,n?o(t):t,h);}),r.join('');}function u(t,e){this.value=t,this.engine=e;}function f(t,e){this.value=t,this.engine=e,this.children=[],this.cloneProps=[];}function h(t,e){var n=t.stack,i=e?n.find(function(t){return t instanceof e;}):n.bottom();if(i){for(var r;(r=n.top())!==i;){if(!r.autoClose)throw new Error(r.type+' must be closed manually: '+r.value);r.autoClose(t);}i.close(t);}return i;}function d(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*(\(\s*master\s*=\s*([a-z0-9\/_-]+)\s*\))?\s*/i.test(t))throw new Error('Invalid '+this.type+' syntax: '+t);this.master=RegExp.$3,this.name=RegExp.$1,f.call(this,t,e),this.blocks={};}function g(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(t))throw new Error('Invalid '+this.type+' syntax: '+t);this.name=RegExp.$1,f.call(this,t,e),this.cloneProps=['name'];}function v(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(t))throw new Error('Invalid '+this.type+' syntax: '+t);this.name=RegExp.$1,f.call(this,t,e),this.cloneProps=['name','state','blocks'],this.blocks={};}function m(t,e){if(!/^\s*([a-z0-9_]+)\s*=([\s\S]*)$/i.test(t))throw new Error('Invalid '+this.type+' syntax: '+t);this.name=RegExp.$1,this.expr=RegExp.$2,f.call(this,t,e),this.cloneProps=['name','expr'];}function y(t,e){if(!/^\s*([a-z0-9_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(t))throw new Error('Invalid '+this.type+' syntax: '+t);this.name=RegExp.$1,this.args=RegExp.$3,f.call(this,t,e),this.cloneProps=['name','args'];}function w(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(t))throw new Error('Invalid '+this.type+' syntax: '+t);this.name=RegExp.$1,this.args=RegExp.$3,f.call(this,t,e),this.cloneProps=['name','args'];}function b(t,e){var n=new RegExp(a('^\\s*({0}[\\s\\S]+{1})\\s+as\\s+{0}([0-9a-z_]+){1}\\s*(,\\s*{0}([0-9a-z_]+){1})?\\s*$',s(e.options.variableOpen),s(e.options.variableClose)),'i');if(!n.test(t))throw new Error('Invalid '+this.type+' syntax: '+t);this.list=RegExp.$1,this.item=RegExp.$2,this.index=RegExp.$4,f.call(this,t,e),this.cloneProps=['list','item','index'];}function x(t,e){f.call(this,t,e);}function $(t,e){x.call(this,t,e);}function R(t,e){f.call(this,t,e);}function E(t,e){e.target=t;var n=e.engine,i=t.name;if(n.targets[i])switch(n.options.namingConflict){case'override':n.targets[i]=t,e.targets.push(i);case'ignore':break;default:throw new Error('Target exists: '+i);}else n.targets[i]=t,e.targets.push(i);}function k(t,e){j[t]=e,e.prototype.type=t;}function C(e){this.options={commandOpen:'<!--',commandClose:'-->',commandSyntax:/^\s*(\/)?([a-z]+)\s*(?::([\s\S]*))?$/,variableOpen:'${',variableClose:'}',defaultFilter:'html'},this.config(e),this.targets={},this.filters=t({},I);}function _(t,n){function i(){var t;if(d.length>0&&(t=d.join(''))){var e=new u(t,n);if(e.beforeAdd(p),c.top().addChild(e),d=[],n.options.strip&&p.current instanceof f)e.value=t.replace(/^[\x20\t\r]*\n/,'');p.current=e;}}var r,o=n.options.commandOpen,s=n.options.commandClose,a=n.options.commandSyntax,c=new e(),p={engine:n,targets:[],stack:c,target:null},d=[];return l(t,o,s,0,function(t){var e=a.exec(t);if(e&&(r=j[e[2].toLowerCase()])&&'function'==typeof r){i();var c=p.current;if(n.options.strip&&c instanceof u)c.value=c.value.replace(/\r?\n[\x20\t]*$/,'\n');if(e[1])c=h(p,r);else{if(c=new r(e[3],n),'function'==typeof c.beforeOpen)c.beforeOpen(p);c.open(p);}p.current=c;}else if(!/^\s*\/\//.test(t))d.push(o,t,s);r=null;},function(t){d.push(t);}),i(),h(p),p.targets;}e.prototype={push:function(t){this.raw[this.length++]=t;},pop:function(){if(this.length>0){var t=this.raw[--this.length];return this.raw.length=this.length,t;}},top:function(){return this.raw[this.length-1];},bottom:function(){return this.raw[0];},find:function(t){for(var e=this.length;e--;){var n=this.raw[e];if(t(n))return n;}}};var O=178245,A={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'},I={html:function(t){return t.replace(/[&<>"']/g,r);},url:encodeURIComponent,raw:function(t){return t;}},P='var r="";',D='r+=',q=';',B='return r;';if('undefined'!=typeof navigator&&/msie\s*([0-9]+)/i.test(navigator.userAgent)&&RegExp.$1-0<8)P='var r=[],ri=0;',D='r[ri++]=',B='return r.join("");';u.prototype={getRendererBody:function(){var t=this.value,e=this.engine.options;if(!t||e.strip&&/^\s*$/.test(t))return'';else return p(t,this.engine,1);},clone:function(){return this;}},f.prototype={addChild:function(t){this.children.push(t);},open:function(t){var e=t.stack.top();e&&e.addChild(this),t.stack.push(this);},close:function(t){if(t.stack.top()===this)t.stack.pop();},getRendererBody:function(){for(var t=[],e=this.children,n=0;n<e.length;n++)t.push(e[n].getRendererBody());return t.join('');},clone:function(){for(var t=new this.constructor(this.value,this.engine),e=0,n=this.children.length;n>e;e++)t.addChild(this.children[e].clone());for(var e=0,n=this.cloneProps.length;n>e;e++){var i=this.cloneProps[e];t[i]=this[i];}return t;}};var z='data=data||{};var v={},fs=engine.filters,hg=typeof data.get=="function",gv=function(n,ps){var p=ps[0],d=v[p];if(d==null){if(hg){return data.get(n);}d=data[p];}for(var i=1,l=ps.length;i<l;i++)if(d!=null)d = d[ps[i]];return d;},ts=function(s){if(typeof s==="string"){return s;}if(s==null){s="";}return ""+s;};';i(d,f),i(g,f),i(v,f),i(m,f),i(y,f),i(w,f),i(b,f),i(x,f),i($,x),i(R,x);var S={READING:1,READED:2,APPLIED:3,READY:4};v.prototype.applyMaster=d.prototype.applyMaster=function(t){function e(t){var i=t.children;if(i instanceof Array)for(var r=0,o=i.length;o>r;r++){var s=i[r];if(s instanceof g&&n[s.name])s=i[r]=n[s.name];e(s);}}if(this.state>=S.APPLIED)return 1;var n=this.blocks,i=this.engine.targets[t];if(i&&i.applyMaster(i.master))return this.children=i.clone().children,e(this),this.state=S.APPLIED,1;else return void 0;},d.prototype.isReady=function(){function t(i){for(var r=0,o=i.children.length;o>r;r++){var s=i.children[r];if(s instanceof v){var a=e.targets[s.name];n=n&&a&&a.isReady(e);}else if(s instanceof f)t(s);}}if(this.state>=S.READY)return 1;var e=this.engine,n=1;if(this.applyMaster(this.master))return t(this),n&&(this.state=S.READY),n;else return void 0;},d.prototype.getRenderer=function(){if(this.renderer)return this.renderer;if(this.isReady()){var t=new Function('data','engine',[z,P,this.getRendererBody(),B].join('\n')),e=this.engine;return this.renderer=function(n){return t(n,e);},this.renderer;}return null;},d.prototype.open=function(t){h(t),f.prototype.open.call(this,t),this.state=S.READING,E(this,t);},m.prototype.open=w.prototype.open=function(t){t.stack.top().addChild(this);},g.prototype.open=function(t){f.prototype.open.call(this,t),(t.imp||t.target).blocks[this.name]=this;},$.prototype.open=function(t){var e=new R();e.open(t);var n=h(t,x);n.addChild(this),t.stack.push(this);},R.prototype.open=function(t){var e=h(t,x);e.addChild(this),t.stack.push(this);},v.prototype.open=function(t){this.parent=t.stack.top(),this.target=t.target,f.prototype.open.call(this,t),this.state=S.READING,t.imp=this;},w.prototype.close=m.prototype.close=function(){},v.prototype.close=function(t){f.prototype.close.call(this,t),this.state=S.READED,t.imp=null;},d.prototype.close=function(t){f.prototype.close.call(this,t),this.state=this.master?S.READED:S.APPLIED,t.target=null;},v.prototype.autoClose=function(t){var e=this.parent.children;e.push.apply(e,this.children),this.children.length=0;for(var n in this.blocks)this.target.blocks[n]=this.blocks[n];this.blocks={},this.close(t);},w.prototype.beforeOpen=v.prototype.beforeOpen=m.prototype.beforeOpen=b.prototype.beforeOpen=y.prototype.beforeOpen=g.prototype.beforeOpen=x.prototype.beforeOpen=u.prototype.beforeAdd=function(t){if(!t.stack.bottom()){var e=new d(n(),t.engine);e.open(t);}},v.prototype.getRendererBody=function(){return this.applyMaster(this.name),f.prototype.getRendererBody.call(this);},w.prototype.getRendererBody=function(){return a('{0}engine.render({2},{{3}}){1}',D,q,o(this.name),p(this.args,this.engine).replace(/(^|,)\s*([a-z0-9_]+)\s*=/gi,function(t,e,n){return(e||'')+o(n)+':';}));},m.prototype.getRendererBody=function(){if(this.expr)return a('v[{0}]={1};',o(this.name),p(this.expr,this.engine));else return'';},x.prototype.getRendererBody=function(){return a('if({0}){{1}}',p(this.value,this.engine),f.prototype.getRendererBody.call(this));},R.prototype.getRendererBody=function(){return a('}else{{0}',f.prototype.getRendererBody.call(this));},b.prototype.getRendererBody=function(){return a('var {0}={1};if({0} instanceof Array)for (var {4}=0,{5}={0}.length;{4}<{5};{4}++){v[{2}]={4};v[{3}]={0}[{4}];{6}}else if(typeof {0}==="object")for(var {4} in {0}){v[{2}]={4};v[{3}]={0}[{4}];{6}}',n(),p(this.list,this.engine),o(this.index||n()),o(this.item),n(),n(),f.prototype.getRendererBody.call(this));},y.prototype.getRendererBody=function(){var t=this.args;return a('{2}fs[{5}]((function(){{0}{4}{1}})(){6}){3}',P,B,D,q,f.prototype.getRendererBody.call(this),o(this.name),t?','+p(t,this.engine):'');};var j={};k('target',d),k('block',g),k('import',v),k('use',w),k('var',m),k('for',b),k('if',x),k('elif',$),k('else',R),k('filter',y),C.prototype.config=function(e){t(this.options,e);},C.prototype.compile=C.prototype.parse=function(t){if(t){var e=_(t,this);if(e.length)return this.targets[e[0]].getRenderer();}return new Function('return ""');},C.prototype.getRenderer=function(t){var e=this.targets[t];if(e)return e.getRenderer();else return void 0;},C.prototype.render=function(t,e){var n=this.getRenderer(t);if(n)return n(e);else return'';},C.prototype.addFilter=function(t,e){if('function'==typeof e)this.filters[t]=e;};var T=new C();return T.Engine=C,T;}),define('cobble/util/instance',['require','exports','module'],function(require,exports){exports.window=$(window),exports.document=$(document),exports.html=$(document.documentElement),exports.body=$(document.body);}),define('common/bindScroll_f2ce0a166a',function(){'use strict';var t=function(t,e){return t===e.target||t===window&&e.target===document;},e=function(t){for(;t.length>1;)clearTimeout(t.shift());};return function(n,i,r,o){var s=[],a=null,c=$(n);if(n=c[0],isNaN(r)||0>r)if(o)a=i;else a=function(e){if(t(n,e))i(e);};else if(o)a=function(t){s.push(setTimeout(function(){e(s),i(t);},r));};else a=function(o){s.push(setTimeout(function(){if(e(s),t(n,o))i(o);},r));};c.scroll(a);};}),define('common/lazyImage_92160e3789',['require','common/bindScroll_f2ce0a166a','cobble/util/instance','cobble/function/viewportHeight'],function(require){'use strict';function t(t){if(!t.prop('loading'))t.prop('loading',!0).addClass('img-loading');}function e(t){for(var e=t.height();!e;)t=t.parent(),e=t.height();return e;}var n=require('common/bindScroll_f2ce0a166a'),i=require('cobble/util/instance'),r=require('cobble/function/viewportHeight'),o=i.window,s=i.body,a=0,c=null,exports={init:function(t){n(t||o,exports.scanning,a),exports.scanning(!0),setTimeout(function(){o.scroll();},0);},scanning:function(n,i){var a=r(),l=o.scrollTop(),p=l+a;if(n)i=i?$(i):s,c=i.find('img[data-src]');c.each(function(){var n=$(this),i=n.offset().top,r=e(n);if(p>=i-r-a&&i+r+a>=l){if(!n.prop('loaded'))n.prop('src',n.data('src')).prop('loaded',!0).removeAttr('data-src').removeClass('img-loading');}else t(n);});var u=i.find('iframe'),f=u.length;if(f)for(var h,d=0;f>d;d++){var g=u[d],v=$(g).offset();h=$(u[d].contentWindow.document).find('img[data-src]'),h.each(function(){var n=$(this),i=n.offset().top+v.top,r=e(n);if(p>=i&&i+r+a>=l){if(!n.prop('loaded'))n.prop('src',n.data('src')).prop('loaded',!0).removeAttr('data-src').removeClass('img-loading');}else t(n);});}}};return exports;}),define('main/mods/hotLive',['require','exports','common/service_9c322508d3','cobble/util/etpl','common/lazyImage_92160e3789','common/store_a1a35b3dfc','cobble/util/cookie'],function(require,exports){function t(t,e){for(var n,i=t.length-1;i>=0;i--)n=t[i],t[i].log_url=i+1+','+n.number+','+e+','+n.is_cms;}function e(e,n){var i={isCurrent:!0,list:n.today,qid:n.qid},r={isCurrent:!1,list:n.tomorrow,qid:n.qid};if(t(i.list,n.qid),t(r.list,n.qid),e.html(c({data:i})+c({data:r})),e.find('.week-item:eq(0)').addClass('active'),o.scanning(!0,e),i.list.length<=0)e.find('.week-title:eq(0)').addClass('hide');}function n(t){t.find('.list-wrapper .week-item').hover(function(){var t=$(this);if(!t.hasClass('active'))$('.list-wrapper .week-item.active').removeClass('active'),t.addClass('active');}),t.find('.list-wrapper').mouseover(function(){var t=$(this);t.addClass('hover');}).mouseout(function(){var t=$(this);t.removeClass('hover');});}var i=require('common/service_9c322508d3'),r=require('cobble/util/etpl'),o=require('common/lazyImage_92160e3789'),s=require('common/store_a1a35b3dfc'),a=require('cobble/util/cookie'),c=r.compile($('#hot-live-template').html());r.addFilter('truncate',function(t,e){if(t.length>e)return t.substring(0,e-1)+'...';else return t.substring(0,e);}),exports.init=function(){{var t=this;t.find('.now-week').data('qid');}i.getHotLiveList().done(function(i){if(!i.code){e($('.list-liner',t),i.data),n(t);var r='http://click.genshuixue.com/sl.gif',o=[];t.find('.week-list .week-item').each(function(t,e){o.push($(e).data('num'),$(e).data('cms'));});var s={type:'search',stype:'index_page_hot_online',qid:t.find('.now-week').data('qid'),data:o.join()};WAT.send(r,s);}}),t.on('click','[log]',function(){var t=$(this),e=(t.closest('.org-list-wrapper').prev('.special-wrapper'),'http://click.genshuixue.com/w.gif'),n=t.attr('log'),i=n.split(','),r=i[0],o=i[1],c=i[2],l=i[3],p=a.get('PHPSESSID'),u=new Date().getTime(),f=s.get('user').id?s.get('user').id:-1,h={type:'search',stype:'index_page_hot_online',rank:r,item_id:o,qid:c,item_type:l,uid:p,t:u,user_id:f};WAT.send(e,h);});};});