define('cobble/util/etpl',function(){function t(t,e){for(var n in e)if(e.hasOwnProperty(n))t[n]=e[n];return t;}function e(){this.raw=[],this.length=0;}function n(){return'___'+A++;}function i(t,e){var n=new Function();n.prototype=e.prototype,t.prototype=new n(),t.prototype.constructor=t;}function r(t){return C[t];}function s(t){return'"'+t.replace(/\x5C/g,'\\\\').replace(/"/g,'\\"').replace(/\x0A/g,'\\n').replace(/\x09/g,'\\t').replace(/\x0D/g,'\\r')+'"';}function o(t){return t.replace(/[\^\[\]\$\(\)\{\}\?\*\.\+]/g,function(t){return'\\'+t;});}function a(t){var e=arguments;return t.replace(/\{([0-9]+)\}/g,function(t,n){return e[n-0+1];});}function l(t){return t=t.replace(/^\s*\*/,''),a('gv({0},["{1}"])',s(t),t.replace(/\[['"]?([^'"]+)['"]?\]/g,function(t,e){return'.'+e;}).split('.').join('","'));}function p(t,e,n,i,r,s){for(var o=n.length,a=t.split(e),l=0,p=[],c=0,f=a.length;f>c;c++){var h=a[c];if(c){var u=1;for(l++;;){var d=h.indexOf(n);if(0>d){p.push(l>1&&u?e:'',h);break;}if(l=i?l-1:0,p.push(l>0&&u?e:'',h.slice(0,d),l>0?n:''),h=h.slice(d+o),u=0,0===l)break;}if(0===l)r(p.join('')),s(h),p=[];}else h&&s(h);}if(l>0&&p.length>0)s(e),s(p.join(''));}function c(t,e,n){var i,r=[],o=e.options,a='',f='',h='',u='';if(n)a='ts(',f=')',h=P,u=B,i=o.defaultFilter;return p(t,o.variableOpen,o.variableClose,1,function(t){if(n&&t.indexOf('|')<0&&i)t+='|'+i;var s=t.indexOf('|'),o=(s>0?t.slice(0,s):t).replace(/^\s+/,'').replace(/\s+$/,''),p=s>0?t.slice(s+1):'',d=0===o.indexOf('*'),g=[d?'':a,l(o),d?'':f];if(p){p=c(p,e);for(var m=p.split('|'),y=0,v=m.length;v>y;y++){var $=m[y];if(/^\s*([a-z0-9_-]+)(\((.*)\))?\s*$/i.test($)){if(g.unshift('fs["'+RegExp.$1+'"]('),RegExp.$3)g.push(',',RegExp.$3);g.push(')');}}}r.push(h,g.join(''),u);},function(t){r.push(h,n?s(t):t,u);}),r.join('');}function f(t,e){this.value=t,this.engine=e;}function h(t,e){this.value=t,this.engine=e,this.children=[],this.cloneProps=[];}function u(t,e){var n=t.stack,i=e?n.find(function(t){return t instanceof e;}):n.bottom();if(i){for(var r;(r=n.top())!==i;){if(!r.autoClose)throw new Error(r.type+' must be closed manually: '+r.value);r.autoClose(t);}i.close(t);}return i;}function d(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*(\(\s*master\s*=\s*([a-z0-9\/_-]+)\s*\))?\s*/i.test(t))throw new Error('Invalid '+this.type+' syntax: '+t);this.master=RegExp.$3,this.name=RegExp.$1,h.call(this,t,e),this.blocks={};}function g(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(t))throw new Error('Invalid '+this.type+' syntax: '+t);this.name=RegExp.$1,h.call(this,t,e),this.cloneProps=['name'];}function m(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(t))throw new Error('Invalid '+this.type+' syntax: '+t);this.name=RegExp.$1,h.call(this,t,e),this.cloneProps=['name','state','blocks'],this.blocks={};}function y(t,e){if(!/^\s*([a-z0-9_]+)\s*=([\s\S]*)$/i.test(t))throw new Error('Invalid '+this.type+' syntax: '+t);this.name=RegExp.$1,this.expr=RegExp.$2,h.call(this,t,e),this.cloneProps=['name','expr'];}function v(t,e){if(!/^\s*([a-z0-9_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(t))throw new Error('Invalid '+this.type+' syntax: '+t);this.name=RegExp.$1,this.args=RegExp.$3,h.call(this,t,e),this.cloneProps=['name','args'];}function $(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(t))throw new Error('Invalid '+this.type+' syntax: '+t);this.name=RegExp.$1,this.args=RegExp.$3,h.call(this,t,e),this.cloneProps=['name','args'];}function b(t,e){var n=new RegExp(a('^\\s*({0}[\\s\\S]+{1})\\s+as\\s+{0}([0-9a-z_]+){1}\\s*(,\\s*{0}([0-9a-z_]+){1})?\\s*$',o(e.options.variableOpen),o(e.options.variableClose)),'i');if(!n.test(t))throw new Error('Invalid '+this.type+' syntax: '+t);this.list=RegExp.$1,this.item=RegExp.$2,this.index=RegExp.$4,h.call(this,t,e),this.cloneProps=['list','item','index'];}function R(t,e){h.call(this,t,e);}function x(t,e){R.call(this,t,e);}function w(t,e){h.call(this,t,e);}function E(t,e){e.target=t;var n=e.engine,i=t.name;if(n.targets[i])switch(n.options.namingConflict){case'override':n.targets[i]=t,e.targets.push(i);case'ignore':break;default:throw new Error('Target exists: '+i);}else n.targets[i]=t,e.targets.push(i);}function k(t,e){q[t]=e,e.prototype.type=t;}function _(e){this.options={commandOpen:'<!--',commandClose:'-->',commandSyntax:/^\s*(\/)?([a-z]+)\s*(?::([\s\S]*))?$/,variableOpen:'${',variableClose:'}',defaultFilter:'html'},this.config(e),this.targets={},this.filters=t({},D);}function z(t,n){function i(){var t;if(d.length>0&&(t=d.join(''))){var e=new f(t,n);if(e.beforeAdd(c),l.top().addChild(e),d=[],n.options.strip&&c.current instanceof h)e.value=t.replace(/^[\x20\t\r]*\n/,'');c.current=e;}}var r,s=n.options.commandOpen,o=n.options.commandClose,a=n.options.commandSyntax,l=new e(),c={engine:n,targets:[],stack:l,target:null},d=[];return p(t,s,o,0,function(t){var e=a.exec(t);if(e&&(r=q[e[2].toLowerCase()])&&'function'==typeof r){i();var l=c.current;if(n.options.strip&&l instanceof f)l.value=l.value.replace(/\r?\n[\x20\t]*$/,'\n');if(e[1])l=u(c,r);else{if(l=new r(e[3],n),'function'==typeof l.beforeOpen)l.beforeOpen(c);l.open(c);}c.current=l;}else if(!/^\s*\/\//.test(t))d.push(s,t,o);r=null;},function(t){d.push(t);}),i(),u(c),c.targets;}e.prototype={push:function(t){this.raw[this.length++]=t;},pop:function(){if(this.length>0){var t=this.raw[--this.length];return this.raw.length=this.length,t;}},top:function(){return this.raw[this.length-1];},bottom:function(){return this.raw[0];},find:function(t){for(var e=this.length;e--;){var n=this.raw[e];if(t(n))return n;}}};var A=178245,C={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'},D={html:function(t){return t.replace(/[&<>"']/g,r);},url:encodeURIComponent,raw:function(t){return t;}},O='var r="";',P='r+=',B=';',I='return r;';if('undefined'!=typeof navigator&&/msie\s*([0-9]+)/i.test(navigator.userAgent)&&RegExp.$1-0<8)O='var r=[],ri=0;',P='r[ri++]=',I='return r.join("");';f.prototype={getRendererBody:function(){var t=this.value,e=this.engine.options;if(!t||e.strip&&/^\s*$/.test(t))return'';else return c(t,this.engine,1);},clone:function(){return this;}},h.prototype={addChild:function(t){this.children.push(t);},open:function(t){var e=t.stack.top();e&&e.addChild(this),t.stack.push(this);},close:function(t){if(t.stack.top()===this)t.stack.pop();},getRendererBody:function(){for(var t=[],e=this.children,n=0;n<e.length;n++)t.push(e[n].getRendererBody());return t.join('');},clone:function(){for(var t=new this.constructor(this.value,this.engine),e=0,n=this.children.length;n>e;e++)t.addChild(this.children[e].clone());for(var e=0,n=this.cloneProps.length;n>e;e++){var i=this.cloneProps[e];t[i]=this[i];}return t;}};var j='data=data||{};var v={},fs=engine.filters,hg=typeof data.get=="function",gv=function(n,ps){var p=ps[0],d=v[p];if(d==null){if(hg){return data.get(n);}d=data[p];}for(var i=1,l=ps.length;i<l;i++)if(d!=null)d = d[ps[i]];return d;},ts=function(s){if(typeof s==="string"){return s;}if(s==null){s="";}return ""+s;};';i(d,h),i(g,h),i(m,h),i(y,h),i(v,h),i($,h),i(b,h),i(R,h),i(x,R),i(w,R);var S={READING:1,READED:2,APPLIED:3,READY:4};m.prototype.applyMaster=d.prototype.applyMaster=function(t){function e(t){var i=t.children;if(i instanceof Array)for(var r=0,s=i.length;s>r;r++){var o=i[r];if(o instanceof g&&n[o.name])o=i[r]=n[o.name];e(o);}}if(this.state>=S.APPLIED)return 1;var n=this.blocks,i=this.engine.targets[t];if(i&&i.applyMaster(i.master))return this.children=i.clone().children,e(this),this.state=S.APPLIED,1;else return void 0;},d.prototype.isReady=function(){function t(i){for(var r=0,s=i.children.length;s>r;r++){var o=i.children[r];if(o instanceof m){var a=e.targets[o.name];n=n&&a&&a.isReady(e);}else if(o instanceof h)t(o);}}if(this.state>=S.READY)return 1;var e=this.engine,n=1;if(this.applyMaster(this.master))return t(this),n&&(this.state=S.READY),n;else return void 0;},d.prototype.getRenderer=function(){if(this.renderer)return this.renderer;if(this.isReady()){var t=new Function('data','engine',[j,O,this.getRendererBody(),I].join('\n')),e=this.engine;return this.renderer=function(n){return t(n,e);},this.renderer;}return null;},d.prototype.open=function(t){u(t),h.prototype.open.call(this,t),this.state=S.READING,E(this,t);},y.prototype.open=$.prototype.open=function(t){t.stack.top().addChild(this);},g.prototype.open=function(t){h.prototype.open.call(this,t),(t.imp||t.target).blocks[this.name]=this;},x.prototype.open=function(t){var e=new w();e.open(t);var n=u(t,R);n.addChild(this),t.stack.push(this);},w.prototype.open=function(t){var e=u(t,R);e.addChild(this),t.stack.push(this);},m.prototype.open=function(t){this.parent=t.stack.top(),this.target=t.target,h.prototype.open.call(this,t),this.state=S.READING,t.imp=this;},$.prototype.close=y.prototype.close=function(){},m.prototype.close=function(t){h.prototype.close.call(this,t),this.state=S.READED,t.imp=null;},d.prototype.close=function(t){h.prototype.close.call(this,t),this.state=this.master?S.READED:S.APPLIED,t.target=null;},m.prototype.autoClose=function(t){var e=this.parent.children;e.push.apply(e,this.children),this.children.length=0;for(var n in this.blocks)this.target.blocks[n]=this.blocks[n];this.blocks={},this.close(t);},$.prototype.beforeOpen=m.prototype.beforeOpen=y.prototype.beforeOpen=b.prototype.beforeOpen=v.prototype.beforeOpen=g.prototype.beforeOpen=R.prototype.beforeOpen=f.prototype.beforeAdd=function(t){if(!t.stack.bottom()){var e=new d(n(),t.engine);e.open(t);}},m.prototype.getRendererBody=function(){return this.applyMaster(this.name),h.prototype.getRendererBody.call(this);},$.prototype.getRendererBody=function(){return a('{0}engine.render({2},{{3}}){1}',P,B,s(this.name),c(this.args,this.engine).replace(/(^|,)\s*([a-z0-9_]+)\s*=/gi,function(t,e,n){return(e||'')+s(n)+':';}));},y.prototype.getRendererBody=function(){if(this.expr)return a('v[{0}]={1};',s(this.name),c(this.expr,this.engine));else return'';},R.prototype.getRendererBody=function(){return a('if({0}){{1}}',c(this.value,this.engine),h.prototype.getRendererBody.call(this));},w.prototype.getRendererBody=function(){return a('}else{{0}',h.prototype.getRendererBody.call(this));},b.prototype.getRendererBody=function(){return a('var {0}={1};if({0} instanceof Array)for (var {4}=0,{5}={0}.length;{4}<{5};{4}++){v[{2}]={4};v[{3}]={0}[{4}];{6}}else if(typeof {0}==="object")for(var {4} in {0}){v[{2}]={4};v[{3}]={0}[{4}];{6}}',n(),c(this.list,this.engine),s(this.index||n()),s(this.item),n(),n(),h.prototype.getRendererBody.call(this));},v.prototype.getRendererBody=function(){var t=this.args;return a('{2}fs[{5}]((function(){{0}{4}{1}})(){6}){3}',O,I,P,B,h.prototype.getRendererBody.call(this),s(this.name),t?','+c(t,this.engine):'');};var q={};k('target',d),k('block',g),k('import',m),k('use',$),k('var',y),k('for',b),k('if',R),k('elif',x),k('else',w),k('filter',v),_.prototype.config=function(e){t(this.options,e);},_.prototype.compile=_.prototype.parse=function(t){if(t){var e=z(t,this);if(e.length)return this.targets[e[0]].getRenderer();}return new Function('return ""');},_.prototype.getRenderer=function(t){var e=this.targets[t];if(e)return e.getRenderer();else return void 0;},_.prototype.render=function(t,e){var n=this.getRenderer(t);if(n)return n(e);else return'';},_.prototype.addFilter=function(t,e){if('function'==typeof e)this.filters[t]=e;};var F=new _();return F.Engine=_,F;}),define('common/main/component/suggestion',['require','exports','module','cobble/util/etpl','common/store_a1a35b3dfc'],function(require,exports){'use strict';var t=require('cobble/util/etpl'),e=(require('common/store_a1a35b3dfc'),'<!-- if: ${item.level} == 2 && ${item.type} == 2 --><h6>在以下分类中搜索 <strong>${item.name|raw}</strong>\uFF1A</h6><!-- else --><h6><strong>${item.name|raw}</strong>分类下的科目\uFF1A</h6><!-- /if -->'),n='<div class="tag-list"><!-- for: ${item.cat} as ${cat} --><a class="tag ${cat.type}" href="<!-- if: ${isWWW} -->/st/${cat.title}-${cat.cid}.html<!-- else -->/${cityDomain}/st-${cat.title}-${cat.cid}.html<!-- /if -->">${cat.title}</a><!-- /for --></div>',i='<!-- if: ${item.level} == 2 && ${item.type} == 2 --><!-- var: q = ${item.title} --><!-- else --><!-- var: q = ${cat.title} --><!-- /if --><!-- for: ${item.cat} as ${cat} --><a class="sub-menu-item" href="<!-- if: ${isWWW} -->/st/${q}-${cat.cid}.html<!-- else -->/${cityDomain}/st-${q}-${cat.cid}.html<!-- /if -->">${cat.title}</a><!-- /for -->';exports.menu=t.compile('<!-- for: ${list} as ${item} --><!-- var: size = ${item.cat.length} --><div class="menu-item" data-size="${size}" data-level="${item.level}" data-type="${item.type}" data-text="${item.title}"><!-- if: ${size} > 0 -->${item.name|raw}<i class="icon icon-chevron-right"></i><!-- else -->${item.name|raw}<!-- /if --><div class="sub-menu"><!-- if: ${size} > 0 --><!-- if: ${item.level} == 1 && ${item.type} == 1 -->'+e+i+'<!-- elif: ${item.level} == 2 && ${item.type} == 1 -->'+e+n+'<!-- elif: ${item.level} == 2 && ${item.type} == 2 -->'+e+i+'<!-- /if --><!-- /if --></div></div><!-- /for -->'),exports.teacher=t.compile('<a class="menu-item teacher-item" data-url="${url}" data-text="${name}" href="${url}" target="_blank"><img class="thumbnail" src="${avatar}" /><span class="teacher-title"><span class="teacher-name" href="${url}">${name}</span><!-- if: ${organization.shortname} --><span class="org-label" data-url="${organization.url}">${organization.shortname}</span><!-- /if --><!-- for: ${medals} as ${item} --><i class="icon medal icon-medal-<!-- if: ${item.medal_type} == 11 -->valuegold<!-- elif: ${item.medal_type} == 12 -->valuesilver<!-- elif: ${item.medal_type} == 13 -->valuecopper<!-- elif: ${item.medal_type} == 21 -->populargold<!-- elif: ${item.medal_type} == 22 -->popularsilver<!-- elif: ${item.medal_type} == 23 -->popularcopper<!-- /if -->" title="${item.describe}"></i><!-- /for --></span><span class="teacher-slogan">${slogan}</span><span class="teacher-course"><i class="icon icon-book-o"></i><!-- if: ${id} == 98851 -->公共英语<!-- else -->${courses}<!-- /if --></span></a>'),exports.org=t.compile('<a class="menu-item org-item" data-url="${url}" data-text="${name}" href="${url}" target="_blank"><img class="thumbnail" src="${avatar}" /><span class="org-title"><span class="org-name" href="${url}">${shortname}</span></span><span class="org-slogan">${slogan}</span><span class="org-tags"><!-- for: ${tags} as ${tag} --><span class="label-default small">${tag}</span><!-- /for --></span><span class="dashboard"><span><i class="icon icon-user"></i>${teacher_count}位老师</span><!-- if: ${comment_count} > 0 --><span><i class="icon icon-comment"></i>${comment_count}条评论</span><!-- /if --></span></a>');});