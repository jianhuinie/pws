define('cobble/form/Select',['require','exports','module','../ui/ComboBox','../function/jquerify','../function/lifeCycle'],function(require){'use strict';function e(e){return i.init(this,e);}var t=require('../ui/ComboBox'),n=require('../function/jquerify'),i=require('../function/lifeCycle');return e.prototype={constructor:e,type:'Select',init:function(){var e=this,n=e.element,i='<input type="hidden" name="'+e.name+'"';if(null!=e.value)i+=' value="'+e.value+'"';if(n.attr('required'))i+=' required';i+=' />';var o=e.input=$(i);n.append(o),e.comboBox=new t({element:n,button:n.find(e.buttonSelector),menu:n.find(e.menuSelector),data:e.data,value:e.value,show:e.show,hide:e.hide,defaultText:e.defaultText,template:e.template,renderTemplate:e.renderTemplate,activeClass:e.activeClass,openClass:e.openClass,setText:$.proxy(e.setText,e),onChange:function(t,n){if(e.setValue(n.value),!e.silence)e.emit('change',n);},onAfterShow:function(){n.trigger('focusin');},onAfterHide:function(){n.trigger('focusout');}});},disable:function(){var e=this,t=e.element;t.find(e.buttonSelector).prop('disabled',!0);},enable:function(){var e=this,t=e.element;t.find(e.buttonSelector).prop('disabled',!1);},getValue:function(){return this.value;},setValue:function(e,t){var n=this;if(t=t||{},t.force||e!=n.value)n.value=e,n.input.val(null==e?'':e),n.silence=t.silence,n.comboBox.setValue(e),delete n.silence;},refresh:function(e){this.comboBox.refresh(e);},dispose:function(){var e=this;i.dispose(e),e.comboBox.dispose(),e.input=e.element=e.comboBox=null;}},n(e.prototype),e.defaultOptions={defaultText:'请选择',buttonSelector:'.btn-default',menuSelector:'.dropdown-menu',labelSelector:'.btn-default span',activeClass:'active',openClass:'open',renderTemplate:function(e){var t=[];return $.each(e,function(e,n){var i=[];$.each(n,function(e,t){if('text'!==e&&null!=t)i.push('data-'+e+'="'+t+'"');}),t.push('<li '+i.join(' ')+'>'+n.text+'</li>');}),t.join('');},setText:function(e){this.element.find(this.labelSelector).html(e);}},e;}),define('cobble/function/around',['require','exports','module'],function(){'use strict';return function(e,t,n,i){var o='string'===$.type(t),r=o?e[t]:e;if(!o)i=n,n=t;var u=function(){var e,t=arguments;if($.isFunction(n))e=n.apply(this,t);if(e!==!1){if($.isFunction(r))e=r.apply(this,t);if($.isFunction(i)){var o=i.apply(this,t);if('undefined'!==$.type(o))e=o;}return e;}};return o?e[t]=u:u;};}),define('cobble/function/autoScrollDown',['require','exports','module'],function(){'use strict';return function(e,t){var n=e.height(),i=e.scrollTop(),o=i+n,r=t.prop('offsetTop')+t.outerHeight(!0);if(i>r||r>o)e.scrollTop(r-n);};}),define('cobble/function/autoScrollUp',['require','exports','module'],function(){'use strict';return function(e,t){var n=e.scrollTop(),i=n+e.height(),o=t.prop('offsetTop');if(n>o||o>i)e.scrollTop(o);};}),define('cobble/function/call',['require','exports','module'],function(){'use strict';return function(e,t,n){if($.isFunction(e)){var i=$.isArray(n)?'apply':'call';return e[i](t,n);}};}),define('cobble/function/contains',['require','exports','module'],function(){'use strict';return function(e,t){if(e=e.jquery?e[0]:e,t=t.jquery?t[0]:t,!e||!t)return!1;if(e===t)return!0;else return $.contains(e,t);};}),define('cobble/function/isHidden',['require','exports','module'],function(){'use strict';return function(e){e.css('display');return'none'===e.css('display')||0==e.css('opacity')||'hidden'===e.css('visibility');};}),define('cobble/function/jquerify',['require','exports','module'],function(){'use strict';function e(e){return e.faker||e.element;}var t=$.prototype,n={on:function(){return t.on.apply(e(this),arguments),this;},off:function(){return t.off.apply(e(this),arguments),this;},emit:function(n,i){var o=this,r=e(o);if(r){if(!n[$.expando])n='string'===$.type(n)?$.Event(n):$.Event(null,n);n.cobble=o;var u=[n];if(i)u.push(i);var a=o[$.camelCase('on-'+n.type)];if($.isFunction(a)&&a.apply(o,u)===!1)n.preventDefault();if(!n.isPropagationStopped())t.trigger.apply(r,u);return n;}},before:function(t){e(this).before(t);},after:function(t){e(this).after(t);},appendTo:function(t){e(this).appendTo(t);},prependTo:function(t){e(this).prependTo(t);}};return function(e){$.each(n,function(t,n){if(null==e[t])e[t]=n;});};}),define('cobble/function/lifeCycle',['require','exports'],function(require,exports){'use strict';exports.init=function(e,t){var n=e.constructor,i='__cobble__'+n.prototype.type,o=t.element;if(o&&o.data(i))e=o.data(i);else if($.extend(e,n.defaultOptions,t),e.init(),o)o.data(i,e);return e;},exports.dispose=function(e){var t='__cobble__'+e.constructor.prototype.type,n=e.element;if(n)n.removeData(t);};}),define('cobble/function/split',['require','exports','module'],function(){'use strict';return function(e,t){var n=[];return $.each(e.split(t),function(e,t){if(t=$.trim(t))n.push(t);}),n;};}),define('cobble/function/timer',['require','exports','module'],function(){'use strict';return function(e,t,n){n='number'===$.type(n)?n:0;var i,o=function(){i=setTimeout(o,t),e();},r={start:function(){r.stop(),setTimeout(o,n);},stop:function(){if(i)clearTimeout(i),i=null;}};return r;};}),define('cobble/helper/Input',['require','exports','module','../function/around','../function/jquerify','../function/lifeCycle','../util/keyboard','../util/input','./Keyboard'],function(require){'use strict';function e(e){return n.init(this,e);}var t=(require('../function/around'),require('../function/jquerify')),n=require('../function/lifeCycle'),i=require('../util/keyboard'),o=require('../util/input'),r=require('./Keyboard');e.prototype={constructor:e,type:'Input',init:function(){var e=this,t=e.element;o.init(t);var n=e.action;if(n)$.each(n,function(t,i){n[t]=$.proxy(i,e);});var a,c;e.keyboard=new r({element:t,action:n,longPress:e.longPress,onKeyDown:function(t){e.emit(t);},onKeyUp:function(t){e.emit(t);},onBeforeLongPress:function(){a=t.val(),c=!0,e.emit('beforeLongPress');},onAfterLongPress:function(n){if(c=!1,e.emit('afterLongPress'),a!==t.val()&&(i.isCharKey(n.keyCode)||i.isDeleteKey()))e.emit('change');}}),t.on('input'+u,function(){if(!c||!e.smart)e.emit('change');});},autoWidth:function(){var e=this,t=e.element;e.on('change',function(){if(t.scrollLeft()>0)t.width(t.prop('scrollWidth'));});},autoHeight:function(){var e=this,t=e.element;if('hidden'!==t.css('overflow-y'))t.css('overflow-y','hidden');var n,i=t.height(),o=i,r=parseInt(t.css('font-size'),10),u=t.innerHeight()-i;e.on('change',function(){if(o!==i)o=i,t.height(i);if(n=t.prop('scrollHeight')-u,Math.abs(n-o)>r)t.height(n),o=n;});},dispose:function(){var e=this;n.dispose(e);var t=e.element;o.dispose(t),t.off(u),e.keyboard.dispose(),e.element=e.keyboard=null;}},t(e.prototype),e.defaultOptions={smart:!0,longPress:!1};var u='.cobble_helper_input';return e;}),define('cobble/helper/Iterator',['require','exports','module','./Keyboard','../function/timer','../function/jquerify'],function(require){'use strict';function e(t){$.extend(this,e.defaultOptions,t),this.init();}var t=require('./Keyboard'),n=require('../function/timer'),i=require('../function/jquerify');return e.prototype={constructor:e,init:function(){var e=this;e.setData(e.data);var i=function(){e.prev(),e.timer=u;},o=function(){e.next(),e.timer=a;},r=e.delay,u=n(i,r,r),a=n(o,r,r),c={};c[e.prevKey]=i,c[e.nextKey]=o,e.keyboard=new t({element:e.element,longPress:!1,onBeforeLongPress:$.proxy(e.start,e),onAfterLongPress:$.proxy(e.pause,e),action:c});},start:function(){var e=this.timer;if(e)e.start();},pause:function(){var e=this.timer;if(e)e.stop(),this.timer=null;},stop:function(){var e=this;e.pause(),e.index=e.startIndex;},getData:function(){return this.data;},setData:function(e){var t=this;if(t.stop(),$.isArray(e))t.data=e,t.maxIndex=e.length-1;},to:function(e,t){var n=this,i=n.index;if(t=t||{},t.force||i!==e)if(n.index=e,!t.silence)n.emit('change',{from:i,to:e,action:t.action||'to'});},prev:function(){var e=this,t=e.index-1;if(t<e.minIndex)t=e.loop?e.maxIndex:e.minIndex;e.to(t,{action:'prev'});},next:function(){var e=this,t=e.index+1;if(t>e.maxIndex)t=e.loop?e.minIndex:e.maxIndex;e.to(t,{action:'next'});},dispose:function(){var e=this;e.stop(),e.keyboard.dispose(),e.element=e.keyboard=null;}},i(e.prototype),e.defaultOptions={delay:60,loop:!0,minIndex:0,startIndex:-1,prevKey:'up',nextKey:'down'},e;}),define('cobble/helper/Keyboard',['require','exports','module','../function/call','../function/split','../function/jquerify','../util/keyboard'],function(require){'use strict';function e(t){$.extend(this,e.defaultOptions,t),this.init();}function t(e){var t=[];return $.each(e,function(e,n){var i=[],o='plus',u=r(e.replace(/\$\+/g,o),'+');if($.each(a.combinationKey,function(e){if($.inArray(e,u)<0)u.push('!'+e);}),$.each(u,function(e,t){var n=0===t.indexOf('!');if(n)t=t.substr(1);if(t===o)t='$+';if(a.combinationKey[t])i.push((n?'!':'')+'e.'+t+'Key');else if(a[t])i.push('e.keyCode==='+a[t]);else return i.length=0,!1;}),i.length>0)t.push({test:new Function('e','return '+i.join('&')),handler:n});}),t;}function n(e){var t=e.data,n=e.keyCode,i=t.cache,r=i.counter;if(i.keyCode===n&&r>0){if(1===r)t.emit({type:'beforeLongPress',keyCode:n});r++;}else i.keyCode=n,r=1;if(i.counter=r,t.longPress||1===r)$.each(i.action,function(n,i){if(i.test(e))o(i.handler,t,e);});e.type='keyDown',t.emit(e);}function i(e){var t=e.data,n=t.cache;if(n.keyCode=null,n.counter>1)t.emit({type:'afterLongPress',keyCode:e.keyCode}),n.counter=0;e.type='keyUp',t.emit(e);}var o=require('../function/call'),r=require('../function/split'),u=require('../function/jquerify'),a=require('../util/keyboard');e.prototype={constructor:e,type:'Keyboard',init:function(){var e=this;e.cache={counter:0,action:t(e.action||{})},e.element.on('keydown'+c,e,n).on('keyup'+c,e,i);},dispose:function(){var e=this;e.element.off(c),e.element=e.cache=null;}},u(e.prototype),e.defaultOptions={longPress:!1};var c='.cobble_helper_keyboard';return e;}),define('cobble/helper/Popup',['require','exports','module','../function/split','../function/isHidden','../function/contains','../function/jquerify','../function/lifeCycle','../util/instance'],function(require){'use strict';function e(e){return k.init(this,e);}function t(e,t){$.each(e.showConfigList,function(n,i){i[t](e);});}function n(e,t){$.each(e.hideConfigList,function(n,i){i[t](e);});}function i(e,t){if(e)e.type=t;else e=t;return e;}function o(e){var t=e.currentTarget;return t&&'HTML'===t.tagName?null:t;}function r(e,t){return e.emit(i(t,'beforeShow'));}function u(e,i){return e.layer.data(P,o(i)),t(e,'off'),n(e,'on'),e.emit('afterShow');}function a(e,t){return e.emit(i(t,'beforeHide'));}function c(e){return e.layer.removeData(P),n(e,'off'),t(e,'on'),e.emit('afterHide');}function f(){return $.now();}function l(e){return'__'+e+'Handler__';}function s(e,t){return null==e[t];}function d(e,t){return e.layer.data(P)!==o(t);}function p(e,t,n){return!t||t(e,n);}function m(e,t){return t-e[q]>50;}function h(t,n){return function(i){var o=i.data,r=f(i);if(s(o,_)&&d(o,i)&&p(o,n,i))o[q]=r,y({popup:o,delay:o.show.delay,toggle:e.trigger.show[t].delay,timer:_,success:function(){var e=function(){o.open(i);},t=o[S];if(t)t.done(e);else e();}});};}function v(t,n){return function(i){var o=i.data,r=f(i);if(s(o,I)&&p(o,n,i)&&m(o,r))o[q]=r,o[S]=$.Deferred(),y({popup:o,delay:o.hide.delay,toggle:e.trigger.hide[t].delay,timer:I,success:function(){o.close(i),o[S].resolve();},fail:function(){o[S]=null;}});};}function y(e){var t=e.delay,n=e.success;if(t>0){var i=e.popup,o=e.timer,r=e.toggle||{},u=r.on||$.noop,a=r.off||$.noop,c=e.fail||$.noop,f=function(){clearTimeout(i[o]),a(i,l),i[o]=null;},l=function(e){var t=i[o];if(t)f();if(t&&e===q)n();else c();};u(i,l),i[o]=setTimeout(function(){l(q);},t);}else n();}function g(e){var t=this,n=t.type,i=t.handler,o=l(n);if(e[o]!==i)e.element.on(n,e.selector,e,i),e[o]=i;}function b(e){var t=this;if(!e.selector){var n=t.type;e.element.off(n,t.handler),e[l(n)]=null;}}var x=require('../function/split'),C=require('../function/isHidden'),w=require('../function/contains'),T=require('../function/jquerify'),k=require('../function/lifeCycle'),D=require('../util/instance');e.prototype={constructor:e,type:'Popup',init:function(){var i=this,o=i.showConfigList=[],r=i.hideConfigList=[],u=i.show.trigger,a=i.hide.trigger;if(u)$.each(x(u,','),function(t,n){var i=e.trigger.show[n];if(i)o.push(i);});if(a)$.each(x(i.hide.trigger,','),function(t,n){var i=e.trigger.hide[n];if(i)r.push(i);});if(i.hidden=C(i.layer))t(i,'on');else n(i,'on');},open:function(){var e=this,t=arguments[0];if(!t)e[q]=f();if(t=r(e,t),!t.isDefaultPrevented()){var n=e.layer,i=e.show.animation;if($.isFunction(i))i.call(e,n);else n.show();e.hidden=!1,u(e,t);}},close:function(){var e=this;if(!e.hidden){var t=arguments[0];if(!t)e[q]=f();if(t=a(e,t),!t.isDefaultPrevented()){var n=e.layer,i=e.hide.animation;if($.isFunction(i))i.call(e,n);else n.hide();e.hidden=!0,c(e);}}},dispose:function(){var e=this;k.dispose(e),e.close(),t(e,'off'),e.element=e.layer=null;}},T(e.prototype),e.defaultOptions={show:{trigger:'click'},hide:{trigger:'click'}};var S='__hidePromise__',_='__showTimer__',I='__hideTimer__',q='__lastTriggerTime__',P='__sourceElement__',A=function(e,t){if(!t)return!1;else return w(e.layer,t);};return e.trigger={show:{focus:{type:'focusin',handler:h('focus'),on:g,off:b},click:{type:'click',handler:h('click'),on:g,off:b},over:{type:'mouseenter',handler:h('over'),on:g,off:b,delay:{on:function(e,t){e.element.on('mouseleave',e.selector,t);},off:function(e,t){e.element.off('mouseleave',t);}}},context:{type:'contextmenu',handler:h('context'),on:g,off:b}},hide:{blur:{type:'focusout',handler:v('blur'),on:g,off:b},click:{type:'click',handler:function(){return v(this.type,function(e,t){return!A(e,t.target);});},on:function(e){var t=this;D.document.on(t.type,e,e.clickHandler=t.handler());},off:function(e){D.document.off(this.type,e.clickHandler);}},out:{type:'mouseleave',handler:v('out'),on:function(e){var t=this.type,n=this.handler;e.layer.on(t,e,n),e.element.on(t,e.selector,e,n);},off:function(e){var t=this.type,n=this.handler;e.element.off(t,n),e.layer.off(t,n);},delay:{on:function(e,t){e.element.on('mouseenter',e.selector,t),e.layer.on('mouseenter',t);},off:function(e,t){e.element.off('mouseenter',t),e.layer.off('mouseenter',t);}}},context:{type:'contextmenu',handler:function(){return v('context',function(e,t){return!A(e,t.target);});},on:function(e){var t=this;D.document.on(t.type,e,e.contextHandler=t.handler());},off:function(e){D.document.off(this.type,e.contextHandler);}}}},e;}),define('cobble/ui/AutoComplete',['require','exports','module','../function/timer','../function/jquerify','../function/lifeCycle','../function/autoScrollUp','../function/autoScrollDown','../helper/Input','../helper/Popup','../helper/Iterator'],function(require){'use strict';function e(e){return o.init(this,e);}function t(e){var t=e.element,i=e.show,o=e.hide;if(!i.trigger)i.trigger='focus';if(!o.trigger)o.trigger='click';var r=i.animation;if($.isFunction(r))i.animation=$.proxy(r,e);if(r=o.animation,$.isFunction(r))o.animation=$.proxy(r,e);return new c({element:t,layer:e.menu,show:i,hide:o,onBeforeShow:function(t){if('eventPhase'in t)return n(e),!1;else return void 0;},onBeforeHide:function(n){var i;if('eventPhase'in n)i=n.target!==t[0];if(i)e.iterator.stop();return i;}});}function n(e){var t=e.cache,n=$.trim(e.element.val()),i=t[n];if(i)e.render(i);else e.load(n,function(i){t[n]=i,e.render(i);});}var i=(require('../function/timer'),require('../function/jquerify')),o=require('../function/lifeCycle'),r=require('../function/autoScrollUp'),u=require('../function/autoScrollDown'),a=require('../helper/Input'),c=require('../helper/Popup'),f=require('../helper/Iterator');e.prototype={constructor:e,type:'AutoComplete',init:function(){var e,i,o=this,c=o.menu,d=o.element,p=o.activeClass;o.cache={};var m=[{element:d,data:{text:d.val()}}],h=o.iterator=new f({element:d,startIndex:0,minIndex:o.includeInput?0:1,data:m,delay:o.delay,onChange:function(t,n){var a=n.to,f=(n.from,n.action),l=this.data[a];if(i)i.removeClass(p);if(i=l.element,o.autoScroll){var s='prev'===f?r:u;s(c,i);}if(a>0)i.addClass(p);if(e=l.data,'render'!==f)d.val(e.text);o.emit('change',{index:a-1,data:e});}});o.input=new a({element:d,smart:!0,longPress:!1,action:{up:function(e){e.preventDefault();},enter:function(){if(o.popup.hidden)e=m[0].data;else o.close();o.emit('enter',e);}},onChange:function(){m[0].data.text=d.val(),n(o);}}),o.popup=t(o);var v,y=o.itemSelector,g=!1,b=function(){c.on('mouseleave'+l,y,function(){if(!g)h.to(h.startIndex),x();});},x=function(){c.off('mouseleave'+l);};c.on('scroll'+l,function(){if(v)clearTimeout(v);g=!0,v=setTimeout(function(){v=null,g=!1;},500);}).on('click'+l,y,function(){x();var t=$(this).data(s);h.to(t,{force:!0}),o.close(),o.emit('itemClick',e);}).on('mouseenter'+l,y,function(){if(!g){if(i)i.removeClass(p);i=$(this),i.addClass(p),h.index=i.data(s),b();}});},render:function(e){var t=this;if($.isArray(e)&&e.length>0){t.emit('beforeRender');var n=t.iterator;n.stop();var i=n.getData();i.length=1;var o=t.menu;o.html(t.renderTemplate(e,t.template)),o.find(t.itemSelector).each(function(){var e=$(this),t=e.data();if(null==t.text)t.text=e.html();var n=i.push({element:e,data:t});e.data(s,n-1);}),n.maxIndex=i.length-1;var r=o.find('.'+t.activeClass);if(1===r.length){var u=r.data(s);if('number'===$.type(u))n.to(u,{action:'render'});}t.emit('afterRender'),t.open();}else t.close();},open:function(){var e=this,t=e.popup;if(t.hidden)e.emit('beforeOpen'),t.open(),e.emit('afterOpen');},close:function(){var e=this,t=e.popup;if(!t.hidden)e.emit('beforeClose'),t.close(),e.emit('afterClose');},dispose:function(){var e=this;o.dispose(e),e.menu.off(l),e.input.dispose(),e.popup.dispose(),e.element=e.menu=e.data=e.items=e.cache=null;}},i(e.prototype),e.defaultOptions={delay:60,includeInput:!0,itemSelector:'li',show:{},hide:{}};var l='.cobble_ui_autocomplete',s='__index__';return e;}),define('cobble/ui/ComboBox',['require','exports','module','../function/jquerify','../function/lifeCycle','../helper/Popup'],function(require){'use strict';function e(e){return n.init(this,e);}var t=require('../function/jquerify'),n=require('../function/lifeCycle'),i=require('../helper/Popup');e.prototype={constructor:e,type:'ComboBox',init:function(){var e=this,t=e.button,n=e.menu,r=e.element||t,u=e.openClass,a=e.show,c=e.hide,f=a.animation;if($.isFunction(f))a.animation=$.proxy(f,e);if(f=c.animation,$.isFunction(f))c.animation=$.proxy(f,e);if(e.popup=new i({element:t,layer:n,show:a,hide:c,onBeforeShow:function(t){e.emit(t);},onBeforeHide:function(t){e.emit(t);},onAfterShow:function(t){if(u)r.addClass(u);e.emit(t);},onAfterHide:function(t){if(u)r.removeClass(u);e.emit(t);}}),null==e.value){var l=n.find('.'+e.activeClass);if(1===l.length)e.value=l.data('value');}if(e.data)n.html(e.renderTemplate(e.data,e.template));if(null!=e.value)e.setValue(e.value,{force:!0,silence:!0});n.on('click'+o,'[data-value]',function(){e.setValue($(this).data('value')),e.close();});},getValue:function(){return this.value;},setValue:function(e,t){var n,i=this,o=i.menu,r=o.find('[data-value="'+e+'"]');if(1===r.length){if(n=r.data(),null==n.text)n.text=r.html();}else n={};if(t=t||{},t.force||e!=i.value){var u=i.activeClass;if(u)o.find('.'+u).removeClass(u);if(1===r.length){if(i.value=e,u)r.addClass(u);}else i.value=null;if(!t.silence)i.emit('change',n);}if($.isFunction(i.setText))i.setText(n.text||i.defaultText);},refresh:function(e){var t=this,n=t.value,i={};if(e){var o=e.data;if(o)t.menu.html(t.renderTemplate(o,t.template));if('value'in e)n=e.value,i.force=!0;}t.setValue(n,i);},open:function(){this.popup.open();},close:function(){this.popup.close();},dispose:function(){var e=this;n.dispose(e),e.menu.off(o),e.popup.dispose(),e.popup=e.element=e.button=e.menu=null;}},t(e.prototype),e.defaultOptions={show:{trigger:'click'},hide:{trigger:'click'}};var o='.cobble_ui_combobox';return e;}),define('cobble/util/cookie',['require','exports','module'],function(require,exports){'use strict';function e(e){if(0===e.indexOf('"'))e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');var t={};try{e=decodeURIComponent(e.replace(/\+/g,' ')),$.each(e.split(';'),function(e,n){var i=n.split('='),o=$.trim(i[0]),r=$.trim(i[1]);if(o)t[o]=r;});}catch(n){}return t;}function t(e,t,i){var o=i.expires;if($.isNumeric(o)){var r=o;o=new Date(),o.setTime(o.getTime()+r*n);}document.cookie=[encodeURIComponent(e),'=',encodeURIComponent(t),o?';expires='+o.toUTCString():'',i.path?';path='+i.path:'',i.domain?';domain='+i.domain:'',i.secure?';secure':''].join('');}var n=3600000;exports.get=function(t){var n=e(document.cookie);return'string'===$.type(t)?n[t]:n;},exports.set=function(e,n,i){if($.isPlainObject(e))i=n,n=null;if(i=$.extend({},exports.defaultOptions,i),null===n)$.each(e,function(e,n){t(e,n,i);});else t(e,n,i);},exports.remove=function(e,n){if(null!=e)n=n||{},n.expires=-1,t(e,'',$.extend({},exports.defaultOptions,n));},exports.defaultOptions={path:'/'};}),define('cobble/util/date',['require','exports','module'],function(require,exports){'use strict';exports.parse=function(e,t,n){var i=!1;if($.isNumeric(e)&&$.isNumeric(t)&&$.isNumeric(n))i=!0;else if(1===arguments.length)if(i=!0,$.isPlainObject(e))n=e.date,t=e.month,e=e.year;else if('string'===$.type(e)){var o=e.split('-');e=o[0],t=o[1],n=o[2];}if(i)if(t>=1&&12>=t&&n>=1&&31>=n)return new Date(e,t-1,n);},exports.stringify=function(e){if('number'===$.type(e))e=new Date(e);var t=e.getFullYear(),n=e.getMonth()+1,e=e.getDate();if(10>n)n='0'+n;if(10>e)e='0'+e;return[t,n,e].join('-');},exports.simplify=function(e){if('number'===$.type(e))e=new Date(e);return{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate(),day:e.getDay()};},exports.getWeekFirstDay=function(e,t){if('number'===$.type(e))e=new Date(e);var n=e.getDay();return n=n>=t?n:n+7,new Date(e.getTime()-(n-t)*exports.DAY);},exports.getWeekLastDay=function(e,t){return e=exports.getWeekFirstDay(e,t),e.setTime(e.getTime()+6*exports.DAY),e;},exports.getMonthFirstDay=function(e){var t='number'===$.type(e)?e:e.getTime();return e=new Date(t),e.setDate(1),e;},exports.getMonthLastDay=function(e){var t='number'===$.type(e)?e:e.getTime();return e=new Date(t),e.setDate(1),e.setMonth(e.getMonth()+1),e.setDate(0),e;},exports.prevMonth=function(e){var t='number'===$.type(e)?e:e.getTime();return e=new Date(t),e.setDate(1),e.setTime(e.getTime()-exports.WEEK),e;},exports.nextMonth=function(e){var t='number'===$.type(e)?e:e.getTime();return e=new Date(t),e.setDate(28),e.setTime(e.getTime()+exports.WEEK),e;},exports.prevWeek=function(e){return exports.subtract(e,7);},exports.nextWeek=function(e){return exports.add(e,7);},exports.add=function(e,t){if('date'===$.type(e))e=e.getTime();return new Date(e+t*exports.DAY);},exports.subtract=function(e,t){if('date'===$.type(e))e=e.getTime();return new Date(e-t*exports.DAY);},exports.DAY=86400000,exports.WEEK=7*exports.DAY;}),define('cobble/util/input',['require','exports','module','../function/around'],function(require,exports){'use strict';function e(){}function t(e){var t=e.val(),i=!1;e.on('propertychange'+r,function(n){if(i)return void(i=!1);if('value'===n.originalEvent.propertyName){var o=e.val();if(o!==t)e.trigger('input'),t=o;}}),n(e,'val',function(){if(0!==arguments.length)i=!0;});}var n=require('../function/around'),i=$('<input type="text" />')[0],o='oninput'in i;i=null;var r='.cobble_util_input';exports.init=o?e:t,exports.dispose=function(e){e.off(r);};}),define('cobble/util/instance',['require','exports','module'],function(require,exports){exports.window=$(window),exports.document=$(document),exports.html=$(document.documentElement),exports.body=$(document.body);}),define('cobble/util/keyboard',['require','exports','module'],function(require,exports){'use strict';function e(e){var t={};return $.each(e,function(e,n){t[n]=e;}),t;}var t={a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,'`':192,'-':173,'=':61,'[':219,']':221,'\\':220,';':59,"'":222,',':188,'.':190,'/':191,$0:96,$1:97,$2:98,$3:99,$4:100,$5:101,$6:102,$7:103,$8:104,$9:105,'$.':110,'$+':107,'$-':109,'$*':106,'$/':111,space:32,tab:9},n={backspace:8,'delete':46},i={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,enter:13,esc:27,capslock:20,insert:45,home:36,end:35,pageup:33,pagedown:34,left:37,right:39,up:38,down:40},o={shift:16,ctrl:17,meta:91,alt:18};$.extend(exports,t,i,o),exports.charKey=t,exports.deleteKey=n,exports.functionKey=i,exports.combinationKey=o,exports.isCharKey=function(n){return n in e(t);},exports.isDeleteKey=function(t){return t in e(n);},exports.isFunctionKey=function(t){return t in e(i);},exports.isCombinationKey=function(t){return t in e(o);};}),define('common/component/RegionSelect_28068924d5',['require','cobble/form/Select','common/service_9c322508d3','common/store_a1a35b3dfc'],function(require){'use strict';function e(e){$.extend(this,e),this.init();}function t(e,t){setTimeout(function(){e.resolve(t);},0);}function n(){var e=$.Deferred();if(d)t(e,$.extend(!0,[],d));else f.getRegionList({filter:s}).done(function(n){d=n,t(e,$.extend(!0,[],n));});return e;}function i(e){var n=$.Deferred();if(!e)t(n,[]);else if(p[e])t(n,$.extend(!0,[],p[e]));else f.getRegionList({id:e,filter:s}).done(function(i){p[e]=i,t(n,$.extend(!0,[],i));});return n;}function o(e){var n=$.Deferred();if(!e)t(n,[]);else if(m[e])t(n,$.extend(!0,[],m[e]));else f.getRegionList({id:e,filter:s}).done(function(i){m[e]=i,t(n,$.extend(!0,[],i));});return n;}function r(e){var n=$.Deferred();if(!e)t(n,[]);else if(h[e])t(n,$.extend(!0,[],h[e]));else f.getRegionList({id:e,filter:s}).done(function(i){h[e]=i,t(n,$.extend(!0,[],i));});return n;}function u(e){return $.map(e||[],function(e){return{text:e.name,value:e.id};});}function a(e,t,n){e.refresh({data:u(t),value:null!=n?n:null});}var c=require('cobble/form/Select'),f=require('common/service_9c322508d3'),l=require('common/store_a1a35b3dfc'),s='';e.prototype={init:function(){var e=this,t=e.element;s=e.filter;var n=e.prefix||'';e.provinceSelect=new c({element:t.find('.province'),defaultText:e.provinceText||'- 省 -',name:n+'province',onChange:function(t,n){if(i(n.value).done(function(t){if('1'==l.get('user').globalDistrict)if(e.eachAll&&t.length>1)t.unshift({id:n.value,name:'全省'});a(e.citySelect,t,1===t.length?t[0].id:null);}),$.isFunction(e.onProvinceChange))e.onProvinceChange(n);}}),e.citySelect=new c({element:t.find('.city'),defaultText:e.cityText||'- 市 -',name:n+'city',onChange:function(t,n){if(o(n.value).done(function(t){if(e.eachAll)t.unshift({id:n.value,name:'全市'});a(e.areaSelect,t,null);}),$.isFunction(e.onCityChange))e.onCityChange(n);}}),e.areaSelect=new c({element:t.find('.area'),defaultText:e.areaText||'- 区 -',name:n+'area',onChange:function(t,n){if(r(n.value).done(function(t){if(e.eachAll)t.unshift({id:n.value,name:'全部'});a(e.countrySelect,t,null);}),$.isFunction(e.onAreaChange))e.onAreaChange(n);}}),e.countrySelect=new c({element:t.find('.country'),defaultText:e.countrySelect||'- 商圈 -',name:n+'country',onChange:function(t,n){if($.isFunction(e.onCountryChange))e.onCountryChange(n);}}),e.refresh();},refresh:function(e){var t=this;if(e)$.extend(t,e);var u=t.provinceSelect.onChange,c=t.citySelect.onChange,f=t.areaSelect.onChange,s=t.countrySelect.onChange;t.provinceSelect.onChange=t.citySelect.onChange=t.areaSelect.onChange=t.countrySelect.onChange=null,$.when(n(),i(t.provinceId),o(t.cityId),r(t.areaId)).done(function(e,n,i,o){if('1'==l.get('user').globalDistrict)if(t.eachAll)e.unshift({id:0,name:'全国'});if(a(t.provinceSelect,e,t.provinceId),a(t.citySelect,n,t.cityId),a(t.areaSelect,i,t.areaId),a(t.countrySelect,o,t.countryId),t.provinceSelect.onChange=u,t.citySelect.onChange=c,t.areaSelect.onChange=f,t.countrySelect.onChange=s,$.isFunction(t.callback))t.callback();});}};var d=null,p={},m={},h={};return e;}),define('common/main/changeCity_6102bfd054',['require','exports','common/component/RegionSelect_28068924d5','cobble/ui/AutoComplete','cobble/util/cookie','underscore','cobble/util/date','common/store_a1a35b3dfc'],function(require,exports){'use strict';var e=require('common/component/RegionSelect_28068924d5'),t=require('cobble/ui/AutoComplete'),n=require('cobble/util/cookie'),i=require('underscore'),o=require('cobble/util/date'),r=require('common/store_a1a35b3dfc'),u={test:'http://test.genshuixue.com/${domain}/',beta:'http://beta.genshuixue.com/${domain}/',www:'http://www.genshuixue.com/${domain}/'};exports.init=function(){var a=$('#main'),c=a.find('.city-select'),f=r.get('alphabetCities'),l=[],s=r.get('env'),d=function(e,t,i){if(e||0==e){var a=o.add(new Date(),30);if(n.set('CITY_ID',e,{domain:'.genshuixue.com',expires:a}),i)n.set('CITY_DOMAIN',i,{domain:'.genshuixue.com',expires:a});if(t)n.set('CITY_NAME',t,{domain:'.genshuixue.com',expires:a});var c=r.get('next_url');if(c)return location.href=c;var f=u[s]?u[s].replace(/\$\{domain\}/,i):u.www.replace(/\$\{domain\}/,i);if(r.get('sd'))f=f+'?sd='+r.get('sd');location.href=f;}};if(f)$.each(f,function(e,t){$.merge(l,t);});{var p,m,h;new e({element:c,provinceText:'请选择',cityText:'请选择',onCityChange:function(e){if(e.value)p=e.value,m=e.text;}});}a.on('click','.city-select .btn-comfirm',function(){if(p){var e=i.findWhere(l,{id:p.toString()});h=e?e.domain:'',d(p,m,h);}else alert('请选择城市');});var v=a.find('.search-input'),y=a.find('.search-suggestion');new t({element:v,menu:y,hoverClass:'item-hover',activeClass:'item-active',autoScroll:!0,renderTemplate:function(e){var t='';return $.each(e||[],function(e,n){var i=n.pinyin?n.pinyin.replace(/'/g,''):null;t=t+'<li '+(0===e?'class="item-active" ':'')+'data-id="'+n.id+'" data-text="'+n.name+'" data-domain="'+n.domain+'">'+n.name+(i?'<span class="pinyin">'+i+'</span>':'')+'</li>';}),t;},onItemClick:function(e,t){d(t.id,t.text,t.domain);},onEnter:function(e,t){v.val(t.text),d(t.id,t.text,t.domain);},load:function(e,t){var n=[];if(''==e||0===l.length)return t();else{for(var i,o=new RegExp(e),r=l.length-1;r>=0;r--)if(l[r].name){if(i=l[r].name.search(o),-1==i){var u=l[r].pinyin?l[r].pinyin.split("'"):null,a=u?u.join(''):null;if(u&&a)if(0==a.search(o))i=0;else if(0===u[0].search(o))i=0;}if(i>-1){var c={};c.searchIndex=i,$.extend(c,l[r]),n.push(c);}}else;if(n.length>0)n.sort(function(e,t){if(e.searchIndex>t.searchIndex)return 1;else if(e.searchIndex<t.searchIndex)return-1;else return 0;});return t(n);}}}),a.on('click','a',function(e){var t=$(e.currentTarget);return d(t.data('id'),t.text(),t.data('domain')),!1;}),a.on('click','.alphabet-index',function(e){var t=$(e.currentTarget),n=$(t.attr('href'));if(n.length>0){var i=n.offset().top;window.scrollTo(0,i);}return!1;});};});