define("cc/function/supportCanvas",["require","exports","module"],function(){"use strict";return function(){var e=document.createElement("canvas");return e&&e.getContext?!0:!1}}),define("cc/function/supportFlash",["require","exports","module"],function(){"use strict";return function(){var e,t=navigator.plugins;if(t&&t.length>0)e=t["Shockwave Flash"];else if(document.all)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(n){}return!!e}}),define("cc/function/supportInput",["require","exports","module"],function(){"use strict";return function(){var e=$('<input type="text" />')[0];return"oninput"in e}}),define("cc/function/supportLocalStorage",["require","exports","module"],function(){"use strict";return function(){return"undefined"!=typeof window.localStorage}}),define("cc/function/supportPlaceholder",["require","exports","module"],function(){"use strict";return function(){var e=$('<input type="text" />')[0];return"placeholder"in e}}),define("cc/function/supportWebSocket",["require","exports","module"],function(){"use strict";return function(){return"undefined"!=typeof window.WebSocket}}),define("cc/util/support",["require","exports","module","../function/supportWebSocket","../function/supportLocalStorage","../function/supportFlash","../function/supportCanvas","../function/supportPlaceholder","../function/supportInput"],function(require,exports){"use strict";function e(e){var t=e.charAt(0).toUpperCase()+e.slice(1),o=(e+" "+i.join(t+" ")+t).split(" "),r=!1;return $.each(o,function(e,t){if(t in n)return r=!0,!1;else return void 0}),r}var t=document.createElement("musicode"),n=t.style,i=["Webkit","Moz","O","ms"];exports.animation=function(){return e("animationName")},exports.boxShadow=function(){return e("boxShadow")},exports.flexbox=function(){return e("flexWrap")},exports.transform=function(){return e("transform")},exports.webSocket=require("../function/supportWebSocket"),exports.localStorage=require("../function/supportLocalStorage"),exports.flash=require("../function/supportFlash"),exports.canvas=require("../function/supportCanvas"),exports.placeholder=require("../function/supportPlaceholder"),exports.input=require("../function/supportInput")}),define("cobble/function/contains",["require","exports","module"],function(){"use strict";return function(e,t){if(e=e.jquery?e[0]:e,t=t.jquery?t[0]:t,!e||!t)return!1;if(e===t)return!0;else return $.contains(e,t)}}),define("cobble/function/debounce",["require","exports","module"],function(){"use strict";return function(e,t){t="number"===$.type(t)?t:50;var n;return function(){if(!n){var i=arguments;n=setTimeout(function(){n=null,e.apply(null,$.makeArray(i))},t)}}}}),define("cobble/function/decimalLength",["require","exports","module"],function(){"use strict";return function(e){var t=(""+e).split(".");return 2===t.length?t[1].length:0}}),define("cobble/function/disableSelection",["require","exports","module"],function(){"use strict";var e=$("<i></i>")[0],t="onselectstart"in e,n="MozUserSelect"in e.style;if(e=null,t)return function(e){e=e||document,e.onselectstart=function(){return!1}};if(n)return function(e){e=e||document.body,e.style.MozUserSelect="none"};else return $.noop}),define("cobble/function/divide",["require","exports","module","./decimalLength","./float2Int"],function(require){"use strict";var e=require("./decimalLength"),t=require("./float2Int");return function(n,i){var o=Math.max(e(n),e(i));return n=t(n,o),i=t(i,o),n/i}}),define("cobble/function/dragGlobal",["require","exports","module","../helper/Draggable","../util/instance","../util/dimension","./pin"],function(require){"use strict";{var e=require("../helper/Draggable"),t=require("../util/instance"),n=require("../util/dimension");require("./pin")}return function(i){return new e({element:i.element,container:t.body,draggingClass:i.draggingClass,handleSelector:i.handleSelector,cancelSelector:i.cancelSelector,rect:function(){var e=i.fixed,t=i.scrollable;return{x:e||t?0:n.getPageScrollLeft(),y:e||t?0:n.getPageScrollTop(),width:e||!t?n.getViewportWidth():n.getPageWidth(),height:e||!t?n.getViewportHeight():n.getPageHeight()}}})}}),define("cobble/function/enableSelection",["require","exports","module"],function(){"use strict";var e=$("<i></i>")[0],t="onselectstart"in e,n="MozUserSelect"in e.style;if(e=null,t)return function(e){e=e||document,e.onselectstart=null};if(n)return function(e){e=e||document.body,e.style.MozUserSelect=""};else return $.noop}),define("cobble/function/float2Int",["require","exports","module"],function(){"use strict";return function(e,t){var n,i=(""+e).split(".");if(t>=0);else t=0;if(1===i.length)n=e+new Array(t+1).join("0");else t=Math.max(0,t-i[1].length),n=i.join("")+new Array(t+1).join("0");return+n}}),define("cobble/function/innerOffset",["require","exports","module","./toNumber"],function(require){"use strict";var e=require("./toNumber");return function(t){var n=t.offset(),i=t.css("border-left-width"),o=t.css("border-top-width");return{left:n.left+e(i,0,"int"),top:n.top+e(o,0,"int")}}}),define("cobble/function/jquerify",["require","exports","module"],function(){"use strict";function e(e){return e.faker||e.element}var t=$.prototype,n={on:function(){return t.on.apply(e(this),arguments),this},off:function(){return t.off.apply(e(this),arguments),this},emit:function(n,i){var o=this,r=e(o);if(r){if(!n[$.expando])n="string"===$.type(n)?$.Event(n):$.Event(null,n);n.cobble=o;var u=[n];if(i)u.push(i);var c=o[$.camelCase("on-"+n.type)];if($.isFunction(c)&&c.apply(o,u)===!1)n.preventDefault();if(!n.isPropagationStopped())t.trigger.apply(r,u);return n}},before:function(t){e(this).before(t)},after:function(t){e(this).after(t)},appendTo:function(t){e(this).appendTo(t)},prependTo:function(t){e(this).prependTo(t)}};return function(e){$.each(n,function(t,n){if(null==e[t])e[t]=n})}}),define("cobble/function/lifeCycle",["require","exports"],function(require,exports){"use strict";exports.init=function(e,t){var n=e.constructor,i="__cobble__"+n.prototype.type,o=t.element;if(o&&o.data(i))e=o.data(i);else if($.extend(e,n.defaultOptions,t),e.init(),o)o.data(i,e);return e},exports.dispose=function(e){var t="__cobble__"+e.constructor.prototype.type,n=e.element;if(n)n.removeData(t)}}),define("cobble/function/offsetParent",["require","exports","module"],function(){"use strict";function e(e){return e.is("body")||"static"!==e.css("position")}return function(t){if(t.is("body"))return t;for(var n=t.parent();!e(n);)n=n.parent();return n}}),define("cobble/function/outerOffset",["require","exports","module","./toNumber"],function(require){"use strict";var e=require("./toNumber");return function(t){var n=t.offset(),i=e(t.css("margin-left"),0,"int"),o=e(t.css("margin-top"),0,"int");return{left:n.left-i,top:n.top-o}}}),define("cobble/function/page",["require","exports","module","../util/instance"],function(require){"use strict";var e=require("../util/instance");return function(){if(e.body.prop("clientHeight")<e.html.prop("clientHeight"))return e.html;else return e.body}}),define("cobble/function/pageHeight",["require","exports","module","./page"],function(require){"use strict";var e=require("./page");return function(){var t=e()[0];return Math.max(t.scrollHeight,t.clientHeight)}}),define("cobble/function/pageScrollLeft",["require","exports","module"],function(){"use strict";return function(){return Math.max(document.body.scrollLeft,document.documentElement.scrollLeft)}}),define("cobble/function/pageScrollTop",["require","exports","module"],function(){"use strict";return function(){return Math.max(document.body.scrollTop,document.documentElement.scrollTop)}}),define("cobble/function/pageWidth",["require","exports","module","./page"],function(require){"use strict";var e=require("./page");return function(){var t=e()[0];return Math.max(t.scrollWidth,t.clientWidth)}}),define("cobble/function/parsePercent",["require","exports","module","./divide"],function(require){"use strict";var e=require("./divide"),t=/(-?\d+(\.\d+)?)%/;return function(n){if(t.test(n))return e(RegExp.$1,100);else return void 0}}),define("cobble/function/pin",["require","exports","module","../util/instance","./parsePercent"],function(require){"use strict";function e(e){var t=o[e.x];if(null==t)t=e.x;if("string"===$.type(t)){var n=i(t);if(null!=n)t=n*(e.width||e.element.outerWidth())}return t}function t(e){var t=o[e.y];if(null==t)t=e.y;if("string"===$.type(t)){var n=i(t);if(null!=n)t=n*(e.height||e.element.outerHeight())}return t}var n=require("../util/instance"),i=require("./parsePercent"),o={left:0,top:0,center:"50%",middle:"50%",right:"100%",bottom:"100%"};return function(i){var o=i.element,r=i.attachment||{};if(!r.element)r.element=n.body;var u=r.element.offset(),c=u.left+e(r),a=u.top+t(r),s=c-e(i),f=a-t(i),l=i.offset;if(l){if("number"===$.type(l.x))s+=l.x;if("number"===$.type(l.y))f+=l.y}var p={left:s,top:f},d=o.css("position");if("absolute"!==d&&"fixed"!==d)p.position="absolute";if(i.silence)return p;else o.css(p)}}),define("cobble/function/pinGlobal",["require","exports","module","./pin","../util/dimension","../function/viewport"],function(require){"use strict";var e=require("./pin"),t=require("../util/dimension"),n=require("../function/viewport");return function(i){var o={silence:!0,element:i.element,x:"50%"===i.x?"50%":0,y:"50%"===i.y?"50%":0,attachment:{element:n(),width:t.getViewportWidth(),height:t.getViewportHeight(),x:i.x,y:i.y}};if(!i.fixed)o.offset={x:t.getPageScrollLeft(),y:t.getPageScrollTop()};return e(o)}}),define("cobble/function/position",["require","exports","module","./offsetParent"],function(require){"use strict";var e=require("./offsetParent");return function(t){var n=e(t),i=t.css("position"),o=parseInt(t.css("left"),10),r=parseInt(t.css("top"),10),u=isNaN(o),c=isNaN(r);if(u||c)if(1===n.length){var a=t.offset(),s=n.offset();if(u)o=a.left-s.left-(parseInt(n.css("border-left-width"),10)||0);if(c)r=a.top-s.top-(parseInt(n.css("border-top-width"),10)||0)}else o=r=0;if(!i||"static"===i)i="absolute";return{position:i,left:o,top:r}}}),define("cobble/function/restrain",["require","exports","module"],function(){"use strict";return function(e,t,n){if(t>e)e=t;else if(e>n)e=n;return e}}),define("cobble/function/toNumber",["require","exports","module"],function(){"use strict";var e={"int":parseInt,"float":parseFloat};return function(t,n,i){if("number"!==$.type(t)){var o=e[i];if(t=o?o(t,10):+t,isNaN(t))t=n}return t}}),define("cobble/function/viewport",["require","exports","module","../util/instance"],function(require){"use strict";var e=require("../util/instance");return function(){if(e.body.prop("clientHeight")>e.html.prop("clientHeight"))return e.html;else return e.body}}),define("cobble/function/viewportHeight",["require","exports","module"],function(){"use strict";return function(){return window.innerHeight||document.documentElement.clientHeight}}),define("cobble/function/viewportWidth",["require","exports","module"],function(){"use strict";return function(){return window.innerWidth||document.documentElement.clientWidth}}),define("cobble/helper/Draggable",["require","exports","module","../function/page","../function/toNumber","../function/restrain","../function/position","../function/contains","../function/jquerify","../function/lifeCycle","../function/innerOffset","../function/outerOffset","../function/pageScrollLeft","../function/pageScrollTop","../function/enableSelection","../function/disableSelection","../util/instance","../util/mouse"],function(require){"use strict";function e(e){return s.init(this,e)}function t(e){var t=v(e),n=y(e);if(S.left!==t||S.top!==n){S.left=t,S.top=n;var i=e.data;if(1===++x){var o=i.draggingClass;if(o)i.element.addClass(o);i.emit("beforeDrag")}if(!i.silence)i.element.css(S);i.emit("drag",S)}}function n(e){m(),g.document.off(w);var t=e.data,n=t.draggingClass;if(n)t.element.removeClass(n);if(x>0)t.emit("afterDrag",S);x=v=y=null}function i(e,t,n){var i=!1;if($.isArray(t))t=t.join(",");return e.find(t).each(function(){if(i=c(this,n))return!1;else return void 0}),i}var o=require("../function/page"),r=(require("../function/toNumber"),require("../function/restrain")),u=require("../function/position"),c=require("../function/contains"),a=require("../function/jquerify"),s=require("../function/lifeCycle"),f=require("../function/innerOffset"),l=require("../function/outerOffset"),p=require("../function/pageScrollLeft"),d=require("../function/pageScrollTop"),m=require("../function/enableSelection"),h=require("../function/disableSelection"),g=require("../util/instance"),b=require("../util/mouse");e.prototype={constructor:e,type:"Draggable",init:function(){var e=this,r=e.element;if(!e.container)e.container=o();r.css(u(r)),$.each(b,function(o,a){if(a.support)r.on(a.mousedown+w,function(s){var p=s.target,d=e.handleSelector,m=e.cancelSelector;if(!(d&&!i(r,d,p)||m&&i(r,m,p))){var b=q[o],$=l(r),O=b.absoluteX(s)-$.left,j=b.absoluteY(s)-$.top,k=e.container;if(c(k,r)){var N=f(k);O+=N.left,j+=N.top}var H=u(r),W=H.position;S.left=H.left,S.top=H.top;var I=e.axis,P=e.getRectange(!0);v="y"===I?C.constant(S.left):C.change(b[W+"X"],O,P.x,P.x+P.width),y="x"===I?C.constant(S.top):C.change(b[W+"Y"],j,P.y,P.y+P.height),x=0,h(),g.document.on(a.mousemove+w,e,t).on(a.mouseup+w,e,n)}})})},getRectange:function(e){var t=this,n=t.rect;if($.isFunction(n))n=t.rect();if(e){var i=t.element,o=n.width-i.outerWidth(!0),r=n.height-i.outerHeight(!0);n.width=Math.max(0,o),n.height=Math.max(0,r)}return n},setRectange:function(e){this.rect=e},dispose:function(){var e=this;s.dispose(e),e.element.off(w),e.element=e.container=null}},a(e.prototype),e.defaultOptions={rect:function(){var e=this,t=e.container,n={x:0,y:0,width:t.innerWidth(),height:t.innerHeight()};if(!c(t,e.element)){var i=f(t);n.x=i.left,n.y=i.top}return n}};var v,y,x,w=".cobble_helper_draggable",S={},C={constant:function(e){return function(){return e}},change:function(e,t,n,i){return function(o){return r(e(o)-t,n,i)}}},q={};return $.each(b,function(e,t){if(t.support)q[e]={absoluteX:function(e){return t.clientX(e)+p()},absoluteY:function(e){return t.clientY(e)+d()},fixedX:function(e){return t.clientX(e)},fixedY:function(e){return t.clientY(e)}}}),e}),define("cobble/ui/Dialog",["require","exports","module","../util/instance","../util/dimension","../function/jquerify","../function/lifeCycle","../function/offsetParent","../function/debounce","../function/pinGlobal","../function/dragGlobal"],function(require){"use strict";function e(e){return o.init(this,e)}var t=require("../util/instance"),n=require("../util/dimension"),i=require("../function/jquerify"),o=require("../function/lifeCycle"),r=require("../function/offsetParent"),u=require("../function/debounce"),c=require("../function/pinGlobal"),a=require("../function/dragGlobal");e.prototype={constructor:e,type:"Dialog",init:function(){var e=this,n=e.element||(e.element=$(e.template)),i=[],o=e.skinClass;if(o)i.push(o);var u=e.draggableClass;if(e.draggable&&u)i.push(u);if(i.length>0)n.addClass(i.join(" "));var c=e.removeOnEmpty,a=e.title;if(a)n.find(e.titleSelector).html(a);else if(c)n.find(e.headerSelector).remove();var f=e.content,l=n.find(e.bodySelector);if(f)l.html(f);else if(c)l.remove();var p=e.closeSelector,d=$.proxy(e.hide,e);if(p)n.on("click"+s,p,d);var m={};if(e.width)m.width=e.width;var h=e.fixed?"fixed":"absolute";if(n.css("position")!==h)m.position=h;if(!r(n).is("body"))t.body.append(n);if(e.modal){var g=e.mask||(e.mask=$(e.maskTemplate));if(n.before(g),e.hideOnClickMask)g.on("click"+s,d);var b="zIndex",v=e[b];if(!$.isNumeric(v))if(v=g.css(b),!$.isNumeric(v))v="auto";var y={overflow:"hidden"};y[b]=v,g.css(y),m[b]=v}if(n.css(m),!e.hidden)e.hidden=!0,e.show()},show:function(){var e=this;if(e.hidden!==!1){var n=e.emit("beforeShow");if(!n.isDefaultPrevented()){var i=e.element,o=e.scrollable;if(e.draggable)e.drager=a({element:i,handleSelector:e.draggableHandleSelector,cancelSelector:e.draggableCancelSelector,draggingClass:e.draggingClass,fixed:e.fixed,scrollable:o});if(e.refresh(),e.showAnimation(),e.mask)e.showMaskAnimation();e.hidden=!1,t.window.resize(e.resizer=u(function(){e.refresh(!0)},50)),e.emit("afterShow")}}},hide:function(){var e=this;if(e.hidden!==!0){var n=e.emit("beforeHide");if(!n.isDefaultPrevented()){if(e.resizer)t.window.off("resize",e.resizer),e.resizer=null;if(e.drager)e.drager.dispose(),e.drager=null;if(e.hideAnimation(),e.mask)e.hideMaskAnimation();if(e.hidden=!0,e.emit("afterHide"),e.disposeOnHide)e.dispose()}}},refresh:function(){var e=this,t=arguments[0];if(!t||e.positionOnResize){var i=e.element,o=c({element:i,x:e.x,y:e.y,fixed:e.fixed});if(t)e.resizeAnimation(o);else i.css(o)}var r=e.mask;if(r)r.css({width:n.getPageWidth(),height:n.getPageHeight()})},dispose:function(){var e=this;if(o.dispose(e),!e.hidden)e.disposeOnHide=!1,e.hide();var t=e.element,n=e.mask;if(t.off(s),n)n.off(s);if(e.removeOnDispose)if(t.remove(),n)n.remove();e.element=e.mask=null}},i(e.prototype),e.defaultOptions={x:"50%",y:"50%",modal:!0,fixed:!0,hidden:!1,draggable:!0,scrollable:!0,removeOnEmpty:!0,disposeOnHide:!0,removeOnDispose:!0,hideOnClickMask:!1,positionOnResize:!0,draggableClass:"draggable",draggableHandleSelector:".dialog-header",draggableCancelSelector:[".dialog-header h1",".dialog-close"],headerSelector:".dialog-header",titleSelector:".dialog-header h1",closeSelector:".dialog-close",bodySelector:".dialog-body",template:'<div class="dialog"><i class="dialog-close">&times;</i><div class="dialog-header"><h1></h1></div><div class="dialog-body"></div></div>',maskTemplate:'<div class="dialog-mask"></div>',showAnimation:function(){this.element.show()},hideAnimation:function(){this.element.hide()},showMaskAnimation:function(){this.mask.show()},hideMaskAnimation:function(){this.mask.hide()},resizeAnimation:function(e){this.element.css(e)}};{var s=".cobble_ui_dialog";t.html.css("overflow"),t.body.css("overflow")}return e}),define("cobble/util/dimension",["require","exports","module","../function/pageScrollTop","../function/pageScrollLeft","../function/pageWidth","../function/pageHeight","../function/viewportWidth","../function/viewportHeight"],function(require,exports){"use strict";var e=require("../function/pageScrollTop"),t=require("../function/pageScrollLeft"),n=require("../function/pageWidth"),i=require("../function/pageHeight"),o=require("../function/viewportWidth"),r=require("../function/viewportHeight");exports.getPageScrollTop=e,exports.getPageScrollLeft=t,exports.getPageWidth=n,exports.getPageHeight=i,exports.getViewportWidth=o,exports.getViewportHeight=r}),define("cobble/util/instance",["require","exports","module"],function(require,exports){exports.window=$(window),exports.document=$(document),exports.html=$(document.documentElement),exports.body=$(document.body)}),define("cobble/util/json",["require","exports","module"],function(require,exports,module){if("object"!=typeof JSON)JSON={};return function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,o,r,u,c=gap,a=t[e];if(a&&"object"==typeof a&&"function"==typeof a.toJSON)a=a.toJSON(e);if("function"==typeof rep)a=rep.call(t,e,a);switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(a)){for(r=a.length,n=0;r>n;n+=1)u[n]=str(n,a)||"null";return o=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+c+"]":"["+u.join(",")+"]",gap=c,o}if(rep&&"object"==typeof rep){for(r=rep.length,n=0;r>n;n+=1)if("string"==typeof rep[n])if(i=rep[n],o=str(i,a))u.push(quote(i)+(gap?": ":":")+o)}else for(i in a)if(Object.prototype.hasOwnProperty.call(a,i))if(o=str(i,a))u.push(quote(i)+(gap?": ":":")+o);return o=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+c+"}":"{"+u.join(",")+"}",gap=c,o}}if("function"!=typeof Date.prototype.toJSON)Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var cx,escapable,gap,indent,meta,rep;if("function"!=typeof JSON.stringify)escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else if("string"==typeof n)indent=n;if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})};if("function"!=typeof JSON.parse)cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(e,t){var n,i,o=e[t];if(o&&"object"==typeof o)for(n in o)if(Object.prototype.hasOwnProperty.call(o,n))if(i=walk(o,n),void 0!==i)o[n]=i;else delete o[n];return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text))text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}(),JSON}),define("cobble/util/mouse",["require","exports","module"],function(){"use strict";function e(e){return e.originalEvent.changedTouches[0]}var t=document.createElement("div"),n={support:"ontouchend"in t,click:"touchstart",mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend",pageX:function(t){return e(t).pageX},pageY:function(t){return e(t).pageY},clientX:function(t){return e(t).clientX},clientY:function(t){return e(t).clientY}},i={support:"onclick"in t,click:"click",mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup",pageX:function(e){return e.pageX},pageY:function(e){return e.pageY},clientX:function(e){return e.clientX},clientY:function(e){return e.clientY}};return t=null,{touch:n,mouse:i}}),define("imageCrop/imageCrop",["require","cobble/util/json"],function(require){"use strict";function e(t){$.extend(this,e.defaultOptions,t),this.init()}if(window.ImageCrop)return window.ImageCrop;var t=require("cobble/util/json");e.prototype={constructor:e,init:function(){var t=this;t.movieName="_ImageCrop_"+n++,e.instances[t.movieName]=t;var i=$(t.getFlashHTML());t.element.replaceWith(i),t.swf=i[0]},getFlashHTML:function(){var e=this,t=e.flashUrl;return['<object id="',e.movieName,'" type="application/x-shockwave-flash" data="',t,'" width="',e.width,'" height="',e.height,'" class="imagecrop">','<param name="wmode" value="transparent" />','<param name="movie" value="',t,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value=\''+e.getFlashVars()+"' />","</object>"].join("")},getFlashVars:function(){var e=this;return["movieName="+encodeURIComponent(e.movieName),"action="+encodeURIComponent(e.action),"accept="+encodeURIComponent(e.accept),"adaptive="+encodeURIComponent(e.adaptive),"original="+encodeURIComponent(e.original),"encoder="+encodeURIComponent(e.encoder),"header="+(e.header?encodeURIComponent(t.stringify(e.header)):""),"button="+(e.button?encodeURIComponent(t.stringify(e.button)):""),"minSize="+("number"===$.type(e.minSize)?e.minSize:""),"maxSize="+("number"===$.type(e.maxSize)?e.maxSize:""),"minWidth="+("number"===$.type(e.minWidth)?e.minWidth:""),"maxWidth="+("number"===$.type(e.maxWidth)?e.maxWidth:""),"minHeight="+("number"===$.type(e.minHeight)?e.minHeight:""),"maxHeight="+("number"===$.type(e.maxHeight)?e.maxHeight:""),"src="+encodeURIComponent(t.stringify(e.src)),"dest="+encodeURIComponent(t.stringify(e.dest))].join("&amp;")},upload:function(){var e=this.swf;if(e.upload)e.upload()},leftRotate:function(){var e=this.swf;if(e.leftRotate)e.leftRotate()},rightRotate:function(){var e=this.swf;if(e.rightRotate)e.rightRotate()},isReady:function(){var e=this.swf;if(e.isReady)return e.isReady();else return void 0},dispose:function(){var t=this,n=t.swf;if(n.dispose)n.dispose();t.swf=t.element=window[this.movieName]=e.instances[t.movieName]=null}},e.defaultOptions={flashUrl:require.toUrl("./imageCrop.swf"),original:!0,encoder:"jpg"},e.instances={},e.version="0.0.1";var n=0;return window.ImageCrop=e,e}),define("common/component/AvatarCropDialog",["require","cobble/ui/Dialog","imageCrop","cc/util/support"],function(require){"use strict";function e(e){$.extend(this,e),this.init()}var t=require("cobble/ui/Dialog"),n=require("imageCrop"),i=require("cc/util/support");return e.prototype={init:function(){var e=this,o=700,r=410,u="";if(i.flash())u='<div style="width: '+o+"px;height: "+r+'px;"><div class="image-crop"></div></div><div class="hint" style="font-size: 13px; color: #6d6d6e;"><p class="text-primary" style="margin: 10px auto;"><i class="icon icon-info-circle"></i>&nbsp;美观、清晰的头像能够提高36%的访问量哦！</p><p>1. 请选择适合圆形和方形两种裁剪方式的头像图片，以保证头像正常展示</p><p>2. 保证五官清晰可见，给学生留下良好的印象</p><p>3. 使用真实的照片，是通过审核的必要条件</p></div>';else u='<div style="width: '+o+"px;height: "+r+'px;"><div class="image-crop"></div></div><div class="hint" style="font-size: 13px; color: #6d6d6e;"><p class="text-primary" style="margin: 10px auto;"><a style="float: right;" href="http://jingyan.baidu.com/article/148a1921bb9dc04d71c3b1dd.html" target="_blank" class="text-error">点击查看《Flash插件安装指南》</a><i class="icon icon-info-circle"></i>&nbsp;美观、清晰的头像能够提高36%的访问量哦！</p><p>1. 请选择适合圆形和方形两种裁剪方式的头像图片，以保证头像正常展示</p><p>2. 保证五官清晰可见，给学生留下良好的印象</p><p>3. 使用真实的照片，是通过审核的必要条件</p></div>';e.dialog=new t({title:"上传头像",content:u});{var c=e.dialog.element;new n({element:c.find(".image-crop"),adaptive:!0,width:o,height:r,action:"/user/previewBinaryImage",accept:"png,jpg,jpeg,gif",minSize:1,maxSize:10485760,button:{select:{x:180,y:370,width:80,height:36,text:"选择图片"},upload:{x:270,y:370,width:80,height:36,text:"确认使用"},rightRotate:{x:0,y:370,width:88,height:36,text:"调整方向 ↻"}},src:{x:0,y:0,width:350,height:350},dest:[{x:400,y:0,width:150,height:150,text:"方形 150X150"},{x:590,y:70,width:80,height:80,text:"方形 80X80"},{x:400,y:183,radius:75,text:"圆形 150X150"},{x:590,y:253,radius:40,text:"圆形 80X80"}],onValidateError:function(e){console.log(e)},onUploadComplete:function(t){var n=t.data;if("string"===$.type(n))n=$.parseJSON(n);if(0!==n.code&&n.msg)alert(n.msg);if($.isFunction(e.onUploadComplete))e.onUploadComplete(n)}})}},hide:function(){this.dialog.hide()}},e});