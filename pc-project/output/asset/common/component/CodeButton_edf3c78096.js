define('common/component/CodeButton_edf3c78096',['require'],function(){'use strict';function n(n){$.extend(this,n),this.init();}return n.prototype={init:function(){var n=this,e=n.element;n.isCounting=!1,n.origin=e.html();var i=function(){n.sendCode();};if(n.container)n.container.on('click',function(n){if(n.target===e[0])i();});else e.click(i);},countDown:function(n){var e=this,i=this.element;e.isCounting=!0;var t=function(n){if(i.html(n+' 秒后再次发送'),$.isFunction(e.onTextChange))e.onTextChange();};i.prop('disabled',!0),e.timer=setInterval(function(){if(n--,n>0)t(n);else e.reset();},1000),t(n);},reset:function(){var n=this;n.isCounting=!1;var e=n.element;if(clearInterval(n.timer),e.html(n.origin),e.prop('disabled',!1),$.isFunction(n.onTextChange))n.onTextChange();if($.isFunction(n.onFinish))n.onFinish();},dispose:function(){if(this.element.off(),this.timer)clearInterval(this.timer);},sendCode:function(){var n=this,e=n.element;e.prop('disabled',!0);var i=n.send();if(i)i.done(function(i){if(0===i.code)n.countDown(60);else e.prop('disabled',!1);});else e.prop('disabled',!1);return i;}},n;});