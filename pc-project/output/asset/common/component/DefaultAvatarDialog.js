define("cobble/function/contains",["require","exports","module"],function(){"use strict";return function(e,t){if(e=e.jquery?e[0]:e,t=t.jquery?t[0]:t,!e||!t)return!1;if(e===t)return!0;else return $.contains(e,t)}}),define("cobble/function/debounce",["require","exports","module"],function(){"use strict";return function(e,t){t="number"===$.type(t)?t:50;var i;return function(){if(!i){var n=arguments;i=setTimeout(function(){i=null,e.apply(null,$.makeArray(n))},t)}}}}),define("cobble/function/decimalLength",["require","exports","module"],function(){"use strict";return function(e){var t=(""+e).split(".");return 2===t.length?t[1].length:0}}),define("cobble/function/disableSelection",["require","exports","module"],function(){"use strict";var e=$("<i></i>")[0],t="onselectstart"in e,i="MozUserSelect"in e.style;if(e=null,t)return function(e){e=e||document,e.onselectstart=function(){return!1}};if(i)return function(e){e=e||document.body,e.style.MozUserSelect="none"};else return $.noop}),define("cobble/function/divide",["require","exports","module","./decimalLength","./float2Int"],function(require){"use strict";var e=require("./decimalLength"),t=require("./float2Int");return function(i,n){var o=Math.max(e(i),e(n));return i=t(i,o),n=t(n,o),i/n}}),define("cobble/function/dragGlobal",["require","exports","module","../helper/Draggable","../util/instance","../util/dimension","./pin"],function(require){"use strict";{var e=require("../helper/Draggable"),t=require("../util/instance"),i=require("../util/dimension");require("./pin")}return function(n){return new e({element:n.element,container:t.body,draggingClass:n.draggingClass,handleSelector:n.handleSelector,cancelSelector:n.cancelSelector,rect:function(){var e=n.fixed,t=n.scrollable;return{x:e||t?0:i.getPageScrollLeft(),y:e||t?0:i.getPageScrollTop(),width:e||!t?i.getViewportWidth():i.getPageWidth(),height:e||!t?i.getViewportHeight():i.getPageHeight()}}})}}),define("cobble/function/enableSelection",["require","exports","module"],function(){"use strict";var e=$("<i></i>")[0],t="onselectstart"in e,i="MozUserSelect"in e.style;if(e=null,t)return function(e){e=e||document,e.onselectstart=null};if(i)return function(e){e=e||document.body,e.style.MozUserSelect=""};else return $.noop}),define("cobble/function/float2Int",["require","exports","module"],function(){"use strict";return function(e,t){var i,n=(""+e).split(".");if(t>=0);else t=0;if(1===n.length)i=e+new Array(t+1).join("0");else t=Math.max(0,t-n[1].length),i=n.join("")+new Array(t+1).join("0");return+i}}),define("cobble/function/innerOffset",["require","exports","module","./toNumber"],function(require){"use strict";var e=require("./toNumber");return function(t){var i=t.offset(),n=t.css("border-left-width"),o=t.css("border-top-width");return{left:i.left+e(n,0,"int"),top:i.top+e(o,0,"int")}}}),define("cobble/function/jquerify",["require","exports","module"],function(){"use strict";function e(e){return e.faker||e.element}var t=$.prototype,i={on:function(){return t.on.apply(e(this),arguments),this},off:function(){return t.off.apply(e(this),arguments),this},emit:function(i,n){var o=this,r=e(o);if(r){if(!i[$.expando])i="string"===$.type(i)?$.Event(i):$.Event(null,i);i.cobble=o;var a=[i];if(n)a.push(n);var c=o[$.camelCase("on-"+i.type)];if($.isFunction(c)&&c.apply(o,a)===!1)i.preventDefault();if(!i.isPropagationStopped())t.trigger.apply(r,a);return i}},before:function(t){e(this).before(t)},after:function(t){e(this).after(t)},appendTo:function(t){e(this).appendTo(t)},prependTo:function(t){e(this).prependTo(t)}};return function(e){$.each(i,function(t,i){if(null==e[t])e[t]=i})}}),define("cobble/function/lifeCycle",["require","exports"],function(require,exports){"use strict";exports.init=function(e,t){var i=e.constructor,n="__cobble__"+i.prototype.type,o=t.element;if(o&&o.data(n))e=o.data(n);else if($.extend(e,i.defaultOptions,t),e.init(),o)o.data(n,e);return e},exports.dispose=function(e){var t="__cobble__"+e.constructor.prototype.type,i=e.element;if(i)i.removeData(t)}}),define("cobble/function/offsetParent",["require","exports","module"],function(){"use strict";function e(e){return e.is("body")||"static"!==e.css("position")}return function(t){if(t.is("body"))return t;for(var i=t.parent();!e(i);)i=i.parent();return i}}),define("cobble/function/outerOffset",["require","exports","module","./toNumber"],function(require){"use strict";var e=require("./toNumber");return function(t){var i=t.offset(),n=e(t.css("margin-left"),0,"int"),o=e(t.css("margin-top"),0,"int");return{left:i.left-n,top:i.top-o}}}),define("cobble/function/page",["require","exports","module","../util/instance"],function(require){"use strict";var e=require("../util/instance");return function(){if(e.body.prop("clientHeight")<e.html.prop("clientHeight"))return e.html;else return e.body}}),define("cobble/function/pageHeight",["require","exports","module","./page"],function(require){"use strict";var e=require("./page");return function(){var t=e()[0];return Math.max(t.scrollHeight,t.clientHeight)}}),define("cobble/function/pageScrollLeft",["require","exports","module"],function(){"use strict";return function(){return Math.max(document.body.scrollLeft,document.documentElement.scrollLeft)}}),define("cobble/function/pageScrollTop",["require","exports","module"],function(){"use strict";return function(){return Math.max(document.body.scrollTop,document.documentElement.scrollTop)}}),define("cobble/function/pageWidth",["require","exports","module","./page"],function(require){"use strict";var e=require("./page");return function(){var t=e()[0];return Math.max(t.scrollWidth,t.clientWidth)}}),define("cobble/function/parsePercent",["require","exports","module","./divide"],function(require){"use strict";var e=require("./divide"),t=/(-?\d+(\.\d+)?)%/;return function(i){if(t.test(i))return e(RegExp.$1,100);else return void 0}}),define("cobble/function/pin",["require","exports","module","../util/instance","./parsePercent"],function(require){"use strict";function e(e){var t=o[e.x];if(null==t)t=e.x;if("string"===$.type(t)){var i=n(t);if(null!=i)t=i*(e.width||e.element.outerWidth())}return t}function t(e){var t=o[e.y];if(null==t)t=e.y;if("string"===$.type(t)){var i=n(t);if(null!=i)t=i*(e.height||e.element.outerHeight())}return t}var i=require("../util/instance"),n=require("./parsePercent"),o={left:0,top:0,center:"50%",middle:"50%",right:"100%",bottom:"100%"};return function(n){var o=n.element,r=n.attachment||{};if(!r.element)r.element=i.body;var a=r.element.offset(),c=a.left+e(r),s=a.top+t(r),u=c-e(n),l=s-t(n),f=n.offset;if(f){if("number"===$.type(f.x))u+=f.x;if("number"===$.type(f.y))l+=f.y}var d={left:u,top:l},p=o.css("position");if("absolute"!==p&&"fixed"!==p)d.position="absolute";if(n.silence)return d;else o.css(d)}}),define("cobble/function/pinGlobal",["require","exports","module","./pin","../util/dimension","../function/viewport"],function(require){"use strict";var e=require("./pin"),t=require("../util/dimension"),i=require("../function/viewport");return function(n){var o={silence:!0,element:n.element,x:"50%"===n.x?"50%":0,y:"50%"===n.y?"50%":0,attachment:{element:i(),width:t.getViewportWidth(),height:t.getViewportHeight(),x:n.x,y:n.y}};if(!n.fixed)o.offset={x:t.getPageScrollLeft(),y:t.getPageScrollTop()};return e(o)}}),define("cobble/function/position",["require","exports","module","./offsetParent"],function(require){"use strict";var e=require("./offsetParent");return function(t){var i=e(t),n=t.css("position"),o=parseInt(t.css("left"),10),r=parseInt(t.css("top"),10),a=isNaN(o),c=isNaN(r);if(a||c)if(1===i.length){var s=t.offset(),u=i.offset();if(a)o=s.left-u.left-(parseInt(i.css("border-left-width"),10)||0);if(c)r=s.top-u.top-(parseInt(i.css("border-top-width"),10)||0)}else o=r=0;if(!n||"static"===n)n="absolute";return{position:n,left:o,top:r}}}),define("cobble/function/restrain",["require","exports","module"],function(){"use strict";return function(e,t,i){if(t>e)e=t;else if(e>i)e=i;return e}}),define("cobble/function/toNumber",["require","exports","module"],function(){"use strict";var e={"int":parseInt,"float":parseFloat};return function(t,i,n){if("number"!==$.type(t)){var o=e[n];if(t=o?o(t,10):+t,isNaN(t))t=i}return t}}),define("cobble/function/viewport",["require","exports","module","../util/instance"],function(require){"use strict";var e=require("../util/instance");return function(){if(e.body.prop("clientHeight")>e.html.prop("clientHeight"))return e.html;else return e.body}}),define("cobble/function/viewportHeight",["require","exports","module"],function(){"use strict";return function(){return window.innerHeight||document.documentElement.clientHeight}}),define("cobble/function/viewportWidth",["require","exports","module"],function(){"use strict";return function(){return window.innerWidth||document.documentElement.clientWidth}}),define("cobble/helper/Draggable",["require","exports","module","../function/page","../function/toNumber","../function/restrain","../function/position","../function/contains","../function/jquerify","../function/lifeCycle","../function/innerOffset","../function/outerOffset","../function/pageScrollLeft","../function/pageScrollTop","../function/enableSelection","../function/disableSelection","../util/instance","../util/mouse"],function(require){"use strict";function e(e){return u.init(this,e)}function t(e){var t=b(e),i=x(e);if(_.left!==t||_.top!==i){_.left=t,_.top=i;var n=e.data;if(1===++y){var o=n.draggingClass;if(o)n.element.addClass(o);n.emit("beforeDrag")}if(!n.silence)n.element.css(_);n.emit("drag",_)}}function i(e){m(),h.document.off(w);var t=e.data,i=t.draggingClass;if(i)t.element.removeClass(i);if(y>0)t.emit("afterDrag",_);y=b=x=null}function n(e,t,i){var n=!1;if($.isArray(t))t=t.join(",");return e.find(t).each(function(){if(n=c(this,i))return!1;else return void 0}),n}var o=require("../function/page"),r=(require("../function/toNumber"),require("../function/restrain")),a=require("../function/position"),c=require("../function/contains"),s=require("../function/jquerify"),u=require("../function/lifeCycle"),l=require("../function/innerOffset"),f=require("../function/outerOffset"),d=require("../function/pageScrollLeft"),p=require("../function/pageScrollTop"),m=require("../function/enableSelection"),g=require("../function/disableSelection"),h=require("../util/instance"),v=require("../util/mouse");e.prototype={constructor:e,type:"Draggable",init:function(){var e=this,r=e.element;if(!e.container)e.container=o();r.css(a(r)),$.each(v,function(o,s){if(s.support)r.on(s.mousedown+w,function(u){var d=u.target,p=e.handleSelector,m=e.cancelSelector;if(!(p&&!n(r,p,d)||m&&n(r,m,d))){var v=j[o],q=f(r),k=v.absoluteX(u)-q.left,$=v.absoluteY(u)-q.top,H=e.container;if(c(H,r)){var P=l(H);k+=P.left,$+=P.top}var C=a(r),O=C.position;_.left=C.left,_.top=C.top;var W=e.axis,D=e.getRectange(!0);b="y"===W?S.constant(_.left):S.change(v[O+"X"],k,D.x,D.x+D.width),x="x"===W?S.constant(_.top):S.change(v[O+"Y"],$,D.y,D.y+D.height),y=0,g(),h.document.on(s.mousemove+w,e,t).on(s.mouseup+w,e,i)}})})},getRectange:function(e){var t=this,i=t.rect;if($.isFunction(i))i=t.rect();if(e){var n=t.element,o=i.width-n.outerWidth(!0),r=i.height-n.outerHeight(!0);i.width=Math.max(0,o),i.height=Math.max(0,r)}return i},setRectange:function(e){this.rect=e},dispose:function(){var e=this;u.dispose(e),e.element.off(w),e.element=e.container=null}},s(e.prototype),e.defaultOptions={rect:function(){var e=this,t=e.container,i={x:0,y:0,width:t.innerWidth(),height:t.innerHeight()};if(!c(t,e.element)){var n=l(t);i.x=n.left,i.y=n.top}return i}};var b,x,y,w=".cobble_helper_draggable",_={},S={constant:function(e){return function(){return e}},change:function(e,t,i,n){return function(o){return r(e(o)-t,i,n)}}},j={};return $.each(v,function(e,t){if(t.support)j[e]={absoluteX:function(e){return t.clientX(e)+d()},absoluteY:function(e){return t.clientY(e)+p()},fixedX:function(e){return t.clientX(e)},fixedY:function(e){return t.clientY(e)}}}),e}),define("cobble/ui/Dialog",["require","exports","module","../util/instance","../util/dimension","../function/jquerify","../function/lifeCycle","../function/offsetParent","../function/debounce","../function/pinGlobal","../function/dragGlobal"],function(require){"use strict";function e(e){return o.init(this,e)}var t=require("../util/instance"),i=require("../util/dimension"),n=require("../function/jquerify"),o=require("../function/lifeCycle"),r=require("../function/offsetParent"),a=require("../function/debounce"),c=require("../function/pinGlobal"),s=require("../function/dragGlobal");e.prototype={constructor:e,type:"Dialog",init:function(){var e=this,i=e.element||(e.element=$(e.template)),n=[],o=e.skinClass;if(o)n.push(o);var a=e.draggableClass;if(e.draggable&&a)n.push(a);if(n.length>0)i.addClass(n.join(" "));var c=e.removeOnEmpty,s=e.title;if(s)i.find(e.titleSelector).html(s);else if(c)i.find(e.headerSelector).remove();var l=e.content,f=i.find(e.bodySelector);if(l)f.html(l);else if(c)f.remove();var d=e.closeSelector,p=$.proxy(e.hide,e);if(d)i.on("click"+u,d,p);var m={};if(e.width)m.width=e.width;var g=e.fixed?"fixed":"absolute";if(i.css("position")!==g)m.position=g;if(!r(i).is("body"))t.body.append(i);if(e.modal){var h=e.mask||(e.mask=$(e.maskTemplate));if(i.before(h),e.hideOnClickMask)h.on("click"+u,p);var v="zIndex",b=e[v];if(!$.isNumeric(b))if(b=h.css(v),!$.isNumeric(b))b="auto";var x={overflow:"hidden"};x[v]=b,h.css(x),m[v]=b}if(i.css(m),!e.hidden)e.hidden=!0,e.show()},show:function(){var e=this;if(e.hidden!==!1){var i=e.emit("beforeShow");if(!i.isDefaultPrevented()){var n=e.element,o=e.scrollable;if(e.draggable)e.drager=s({element:n,handleSelector:e.draggableHandleSelector,cancelSelector:e.draggableCancelSelector,draggingClass:e.draggingClass,fixed:e.fixed,scrollable:o});if(e.refresh(),e.showAnimation(),e.mask)e.showMaskAnimation();e.hidden=!1,t.window.resize(e.resizer=a(function(){e.refresh(!0)},50)),e.emit("afterShow")}}},hide:function(){var e=this;if(e.hidden!==!0){var i=e.emit("beforeHide");if(!i.isDefaultPrevented()){if(e.resizer)t.window.off("resize",e.resizer),e.resizer=null;if(e.drager)e.drager.dispose(),e.drager=null;if(e.hideAnimation(),e.mask)e.hideMaskAnimation();if(e.hidden=!0,e.emit("afterHide"),e.disposeOnHide)e.dispose()}}},refresh:function(){var e=this,t=arguments[0];if(!t||e.positionOnResize){var n=e.element,o=c({element:n,x:e.x,y:e.y,fixed:e.fixed});if(t)e.resizeAnimation(o);else n.css(o)}var r=e.mask;if(r)r.css({width:i.getPageWidth(),height:i.getPageHeight()})},dispose:function(){var e=this;if(o.dispose(e),!e.hidden)e.disposeOnHide=!1,e.hide();var t=e.element,i=e.mask;if(t.off(u),i)i.off(u);if(e.removeOnDispose)if(t.remove(),i)i.remove();e.element=e.mask=null}},n(e.prototype),e.defaultOptions={x:"50%",y:"50%",modal:!0,fixed:!0,hidden:!1,draggable:!0,scrollable:!0,removeOnEmpty:!0,disposeOnHide:!0,removeOnDispose:!0,hideOnClickMask:!1,positionOnResize:!0,draggableClass:"draggable",draggableHandleSelector:".dialog-header",draggableCancelSelector:[".dialog-header h1",".dialog-close"],headerSelector:".dialog-header",titleSelector:".dialog-header h1",closeSelector:".dialog-close",bodySelector:".dialog-body",template:'<div class="dialog"><i class="dialog-close">&times;</i><div class="dialog-header"><h1></h1></div><div class="dialog-body"></div></div>',maskTemplate:'<div class="dialog-mask"></div>',showAnimation:function(){this.element.show()},hideAnimation:function(){this.element.hide()},showMaskAnimation:function(){this.mask.show()},hideMaskAnimation:function(){this.mask.hide()},resizeAnimation:function(e){this.element.css(e)}};{var u=".cobble_ui_dialog";t.html.css("overflow"),t.body.css("overflow")}return e}),define("cobble/util/dimension",["require","exports","module","../function/pageScrollTop","../function/pageScrollLeft","../function/pageWidth","../function/pageHeight","../function/viewportWidth","../function/viewportHeight"],function(require,exports){"use strict";var e=require("../function/pageScrollTop"),t=require("../function/pageScrollLeft"),i=require("../function/pageWidth"),n=require("../function/pageHeight"),o=require("../function/viewportWidth"),r=require("../function/viewportHeight");exports.getPageScrollTop=e,exports.getPageScrollLeft=t,exports.getPageWidth=i,exports.getPageHeight=n,exports.getViewportWidth=o,exports.getViewportHeight=r}),define("cobble/util/instance",["require","exports","module"],function(require,exports){exports.window=$(window),exports.document=$(document),exports.html=$(document.documentElement),exports.body=$(document.body)}),define("cobble/util/mouse",["require","exports","module"],function(){"use strict";function e(e){return e.originalEvent.changedTouches[0]}var t=document.createElement("div"),i={support:"ontouchend"in t,click:"touchstart",mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend",pageX:function(t){return e(t).pageX},pageY:function(t){return e(t).pageY},clientX:function(t){return e(t).clientX},clientY:function(t){return e(t).clientY}},n={support:"onclick"in t,click:"click",mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup",pageX:function(e){return e.pageX},pageY:function(e){return e.pageY},clientX:function(e){return e.clientX},clientY:function(e){return e.clientY}};return t=null,{touch:i,mouse:n}}),define("common/component/DefaultAvatarDialog",["require","cobble/function/jquerify","cobble/ui/Dialog"],function(require){"use strict";function e(e){$.extend(this,e),this.init()}var t=require("cobble/function/jquerify"),i=require("cobble/ui/Dialog");return e.prototype={init:function(){var e=this,t=this.dialog=new i({title:"选择默认头像",content:'<div style="width: 378px; max-height: 326px; overflow-y: auto"><div class="avatar-container male-avatar-container"><div class="default-avatar" data-avatar-name="headpic_man.png"><img src="http://img.gsxservice.com/headpic_man.png"/><div class="active"><div class="mask"></div><div class="icon icon-check-circle"></div></div></div><div class="default-avatar" data-avatar-name="headpic_man_01.jpg"><img src="http://img.gsxservice.com/headpic_man_01.jpg"/></div><div class="default-avatar" data-avatar-name="headpic_man_02.jpg"><img src="http://img.gsxservice.com/headpic_man_02.jpg"/></div><div class="default-avatar" data-avatar-name="headpic_man_03.jpg"><img src="http://img.gsxservice.com/headpic_man_03.jpg"/></div><div class="default-avatar" data-avatar-name="headpic_man_04.jpg"><img src="http://img.gsxservice.com/headpic_man_04.jpg"/></div><div class="default-avatar" data-avatar-name="headpic_man_05.jpg"><img src="http://img.gsxservice.com/headpic_man_05.jpg"/></div><div class="default-avatar" data-avatar-name="headpic_man_06.jpg"><img src="http://img.gsxservice.com/headpic_man_06.jpg"/></div><div class="default-avatar" data-avatar-name="headpic_man_07.jpg"><img src="http://img.gsxservice.com/headpic_man_07.jpg"/></div><div class="default-avatar" data-avatar-name="headpic_man_08.jpg"><img src="http://img.gsxservice.com/headpic_man_08.jpg"/></div></div><div class="avatar-container female-avatar-container"><div class="default-avatar" data-avatar-name="headpic_woman.png"><img src="http://img.gsxservice.com/headpic_woman.png"/></div><div class="default-avatar" data-avatar-name="headpic_woman_01.jpg"><img src="http://img.gsxservice.com/headpic_woman_01.jpg"/></div><div class="default-avatar" data-avatar-name="headpic_woman_02.jpg"><img src="http://img.gsxservice.com/headpic_woman_02.jpg"/></div><div class="default-avatar" data-avatar-name="headpic_woman_03.jpg"><img src="http://img.gsxservice.com/headpic_woman_03.jpg"/></div><div class="default-avatar" data-avatar-name="headpic_woman_04.jpg"><img src="http://img.gsxservice.com/headpic_woman_04.jpg"/></div><div class="default-avatar" data-avatar-name="headpic_woman_05.jpg"><img src="http://img.gsxservice.com/headpic_woman_05.jpg"/></div><div class="default-avatar" data-avatar-name="headpic_woman_06.jpg"><img src="http://img.gsxservice.com/headpic_woman_06.jpg"/></div><div class="default-avatar" data-avatar-name="headpic_woman_07.jpg"><img src="http://img.gsxservice.com/headpic_woman_07.jpg"/></div><div class="default-avatar" data-avatar-name="headpic_woman_08.jpg"><img src="http://img.gsxservice.com/headpic_woman_08.jpg"/></div></div></div><div class="button-container"><button class="btn btn-primary">确认选择</button></div><div class="no-find-my-favor">没有找到合适的默认头像？<a class="text-info" href="http://www.genshuixue.com/guide/feedback?a=feedback" target="_blank">马上告诉我们</a>你需要什么头像吧>></div>',skinClass:"default-avatar-dialog"}),n=t.element.find(".active");if(t.element.on("click",".default-avatar",function(){if(n.parent()[0]!==this)$(this).append(n)}).on("click",".btn-primary",function(){e.emit("selectdefaultavatar",{avatarPath:n.prev().attr("src"),avatarName:n.parent().data("avatar-name")})}),""+this.type=="0")t.element.find(".male-avatar-container").hide();if(""+this.type=="1")t.element.find(".female-avatar-container").hide();if(this.avatar)t.element.find('.default-avatar[data-avatar-name="'+this.avatar+'"]').append(n)},hide:function(){this.dialog.hide()}},t(e.prototype),e});