define('common/map/baidu_b4abd6bbd1',['require'],function(require){'use strict';function e(e,n,a){e='.'+e;var o={offset:new BMap.Size(20,-30)},r=new BMap.Label(a,o);r.setStyle({color:'#3d3d3d',fontSize:'12px',height:'26px',lineHeight:'26px',borderColor:'#ff9900',paddingLeft:'5px',paddingRight:'5px',fontFamily:'微软雅黑'});var i=$(e);i.find('.BMap_Marker label').remove(),n.setLabel(r);var t=n.getPosition();i.find('input[name="lng"]').val(t.lng),i.find('input[name="lat"]').val(t.lat);var l=new BMap.Geocoder();l.getLocation(t,function(e){var n=e.addressComponents;i.find('input[name="bd_area_name"]').val(n.district);});}function n(e,n,o){function r(){var r=n.getPosition(),i=$('.new-address'),t=new BMap.Geocoder();if(t.getLocation(r,function(n){var a=n.addressComponents,o=a.city,r=i.find('.city .btn-default span').text();if(-1==o.indexOf(r))if('big-map'==e)$('.big-map').find('.btn-initial').click();else i.find('.btn-initial').click();}),a(e,n,r.lng,r.lat),o)$('.map-oper').show(),$('.map-oper').find('.btn-initial').show();}n.addEventListener('dragend',r);}function a(n,a,o,r){var i=new BMap.Point(o,r),t=new BMap.Geocoder();t.getLocation(i,function(o){var r=o.addressComponents,i=r.province;if(r.province!=r.city)i+=r.city;i+=r.district+r.street+r.streetNumber,e(n,a,i);});}var o,exports=$({});exports.init=function(e){if('undefined'==typeof BMap){if(!o)o=[],require(['js!http://api.map.baidu.com/api?v=2.0&ak=EMB0bKIvMeOd70lyyG92BZlu'],function(){$.each(o,function(e,n){n();}),o=null;});o.push(e);}else setTimeout(e);};var r={};return exports.getExistedMap=function(){return r;},exports.search=function(e,n,a,o){var i;if(null==a)a=116.404;if(null==o)o=39.915;if(r[e])i=r[e];else{var i=new BMap.Map(e);i.centerAndZoom(new BMap.Point(a,o),16);var t=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_ZOOM});i.addControl(t),i.enableScrollWheelZoom(),r[e]=i;}var l=!1,d=new BMap.LocalSearch(i,{renderOptions:{map:i,selectFirstResult:!1},pageCapacity:1,onSearchComplete:function(e){var a=e.getNumPois();if(1>a){var o=n.split('-');if(!l&&o[0]&&o[0]!=n)l=!0,d.search(o[0]);else return i.clearOverlays(),i.reset(),!1;}}});d.search(n);},exports.areaCenter=function(e,n){var a;if(r[e])a=r[e],a.centerAndZoom(n,16);else{var a=new BMap.Map(e);a.centerAndZoom(n,16);var o=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_ZOOM});a.addControl(o),a.enableScrollWheelZoom(),r[e]=a;}},exports.addrResolution=function(a,o,i){var t;if(r[a]){t=r[a];var l=new BMap.Geocoder();t.clearOverlays(),l.getPoint(o,function(r){if(r){t.centerAndZoom(r,16);var i=new BMap.Marker(r);e(a,i,o),n(a,i,!1),t.addOverlay(i),i.enableDragging();}},'北京市');}else{var t=new BMap.Map(a),l=new BMap.Geocoder();t.clearOverlays(),l.getPoint(o,function(r){if(r){t.centerAndZoom(r,16);var i=new BMap.Marker(r);e(a,i,o),n(a,i,!1),t.addOverlay(i),i.enableDragging();}},'北京市');var d=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_ZOOM});if(t.addControl(d),i)t.enableScrollWheelZoom();else t.disableScrollWheelZoom();r[a]=t;}},exports.addrReso=function(a,o,i,t){var l,d,c=$('.set-address-dialog');if(c.length)d=c.find('.'+a);else d=$('.'+a+':visible');var s,p=d.find('.location-addr'),f=p.closest('.form-group'),v=p.find('.error'),u=p.find('.message-primary');if(r[a])l=r[a];else{var l=new BMap.Map(a),m=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_ZOOM});l.addControl(m),l.enableScrollWheelZoom(),r[a]=l;}var M=new BMap.Geocoder();l.clearOverlays();var g='http://api.map.baidu.com/geocoder/v2/';if($.ajax(g,{async:!1,dataType:'jsonp',data:{output:'json',ak:'EMB0bKIvMeOd70lyyG92BZlu',address:o},success:function(e){if(0===e.status)if(s=e.result.confidence,60>s)f.addClass('has-error'),u.show(),v.hide();else f.removeClass('has-error'),u.hide();}}),exports.getConfidence=function(){return s;},i&&t){var O=new BMap.Point(i,t);l.centerAndZoom(O,16),M.getLocation(O,function(o){var r=o.addressComponents,i=r.province;if(r.province!=r.city)i+=r.city;i+=r.district+r.street+r.streetNumber;var t=new BMap.Marker(O);e(a,t,i),n(a,t,!0),l.addOverlay(t),t.enableDragging(),l.panTo(O);});}else M.getPoint(o,function(r){if(r){l.centerAndZoom(r,16);var i=new BMap.Marker(r);e(a,i,o),n(a,i,!0),l.addOverlay(i),i.enableDragging();}},'北京市');d.find('.amplify').show(),d.find('.map-oper').show();},exports.makeMarker=function(a,o){var i;if(r[a])i=r[a];else var i=new BMap.Map(a);var t=new BMap.Geocoder();i.clearOverlays(),t.getPoint(o,function(r){if(r){i.centerAndZoom(r,16);var t=new BMap.Marker(r);e(a,t,o),n(a,t,!0),i.addOverlay(t),t.enableDragging();}},'北京市');},exports.reAddress=function(e,n,a){if(null==n)n=116.404;if(null==a)a=39.915495;var o=new BMap.Point(n,a),r=new BMap.Geocoder();r.getLocation(o,function(n){var a=n.addressComponents,o=a.province+a.city+a.district+a.street+a.streetNumber;exports.addrResolution(e,o);});},exports.modifiedAddress=function(a,o,i,t){if(null==o)o=116.404;if(null==i)i=39.915495;var l=new BMap.Point(o,i),d=new BMap.Geocoder();d.getLocation(l,function(o){var i=o.addressComponents,d=i.province;if(i.province!=i.city)d+=i.city;d+=i.district+i.street+i.streetNumber;var c=new BMap.Marker(l);e(a,c,d),n(a,c,!1);var s=null;if(r[a])s=r[a],s.clearOverlays();else{s=new BMap.Map(a),s.clearOverlays(),s.centerAndZoom(l,16);var p=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_ZOOM});if(s.addControl(p),t)s.enableScrollWheelZoom();else s.disableScrollWheelZoom();}s.addOverlay(c),c.enableDragging(),s.panTo(l);});},exports;}),define('teacher/newDetail/residence_1113529d75',['require','exports','common/store_a1a35b3dfc','common/map/baidu_b4abd6bbd1'],function(require,exports){'use strict';var e=require('common/store_a1a35b3dfc'),n=require('common/map/baidu_b4abd6bbd1');exports.init=function(){if($('#map')[0]){n.modifiedAddress('map',e.get('lng'),e.get('lat'));var a=$('#teacher-residence');a.on('click','.amplify',function(){a.addClass('max'),n.modifiedAddress('map',e.get('lng'),e.get('lat'));}).on('click','.reduce',function(){a.removeClass('max'),n.modifiedAddress('map',e.get('lng'),e.get('lat'));});}};});