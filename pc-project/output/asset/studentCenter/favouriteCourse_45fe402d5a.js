define('studentCenter/favouriteCourse_45fe402d5a',['require','exports','common/service_9c322508d3'],function(require,exports){'use strict';function e(e,n,o){var a={};t.html(''),i.html(''),a={type:n,page:e},c.getFavorList(a).done(function(e){if(0==e.code){var c=e.data.tpl.collections,n=$(c).find('ul.course-list'),a=$(c).find('.pager-block'),r=$(c).find('.no-data');if(n.length)t.html(n),i.html(a);else t.html(r);if($.isFunction(o))o();}});}var c=require('common/service_9c322508d3'),n=$('#content'),t=n.find('.data-container'),i=n.find('.page-container');exports.init=function(){e(1,'course'),n.on('mouseover','.course-list li',function(e){var c=$(e.currentTarget),n=c.find('.batch-confirm'),t=c.find('.action-del');if(n.is(':hidden'))t.show();}).on('mouseleave','.course-list li',function(e){var c=$(e.currentTarget),n=c.find('.action-del');n.hide();}).on('click','.action-del',function(e){var c=$(e.currentTarget),n=c.closest('li');n.find('.del-confirm').show(),c.hide();}).on('click','.del-confirm .btn-primary',function(e){var n=$(e.currentTarget),t=n.closest('.del-confirm'),i=n.closest('li');t.hide(),c.deleteFavor({type:i.data('type'),number:i.data('number')}).done(function(e){if(0===e.code)success('取消收藏成功',function(){location.reload();});});}).on('click','.del-confirm .btn-default',function(e){{var c=$(e.currentTarget),n=c.closest('.del-confirm');c.closest('li');}n.hide();}).on('click','.batch-option',function(e){var c=$(e.currentTarget),t=c.next('.batch');c.hide(),t.show(),n.find('.batch-confirm').each(function(e,c){$(c).show();});}).on('click','.batch-confirm',function(e){var c=$(e.currentTarget),n=c.closest('li');n.data('checked','1'),c.find('.icon-check-o').toggle(),c.find('.icon-check-circle').toggle();}).on('click','input[id="select-all"]',function(e){var c=$(e.currentTarget);if(c.prop('checked'))n.find('.course-item').each(function(e,c){$(c).data('checked','1'),$(c).find('.batch-confirm .icon-check-o').hide(),$(c).find('.batch-confirm .icon-check-circle').show();});else n.find('.course-item').each(function(e,c){$(c).data('checked','0'),$(c).find('.batch-confirm .icon-check-o').show(),$(c).find('.batch-confirm .icon-check-circle').hide();});}).on('click','.delete-all',function(){var e=0,t=[],i=[];if(n.find('.course-item').each(function(c,n){if(1==$(n).data('checked'))if(e++,'class_course'==$(n).data('type'))t.push($(n).data('number'));else if('video_course'==$(n).data('type'))i.push($(n).data('number'));}),0==e)return alert('亲\uFF0C请先选择要删除的课程\uFF01'),!1;else return void confirm({content:'确认删除\uFF1F',title:'温馨提示',width:335}).done(function(){c.deleteFavor({type:'course',classCourse:t.join(','),videoCourse:i.join(',')}).done(function(e){if(0===e.code)success('取消收藏成功',function(){location.reload();});});});}).on('click','.cancel-batch-option',function(e){var c=$(e.currentTarget),t=c.closest('.batch'),i=t.prev('.batch-option');t.hide(),i.show(),n.find('.batch-confirm').each(function(e,c){$(c).hide();});}).on('click','#all-course',function(e){var o=$(e.currentTarget);if(o.hasClass('active'))return!1;else return void c.getFavorList({type:'course',page:1}).done(function(e){if(0===e.code){var c=e.data.tpl.collections,a=$(c).find('ul.course-list'),r=$(c).find('.pager-block'),s=$(c).find('.no-data');if(o.addClass('active'),n.find('#nav-class-course').removeClass('active'),n.find('#nav-video-course').removeClass('active'),a.length)t.html(a),i.html(r);else t.html(s);}});}).on('click','#nav-class-course',function(e){var o=$(e.currentTarget);if(o.hasClass('active'))return!1;else return void c.getFavorList({type:'class_course',page:1}).done(function(e){if(0===e.code){var c=e.data.tpl.collections,a=$(c).find('ul.course-list'),r=$(c).find('.pager-block'),s=$(c).find('.no-data');if(o.addClass('active'),n.find('#all-course').removeClass('active'),n.find('#nav-video-course').removeClass('active'),a.length)t.html(a),i.html(r);else t.html(s);}});}).on('click','#nav-video-course',function(e){var o=$(e.currentTarget);if(o.hasClass('active'))return!1;else return void c.getFavorList({type:'video_course',page:1}).done(function(e){if(0===e.code){var c=e.data.tpl.collections,a=$(c).find('ul.course-list'),r=$(c).find('.pager-block'),s=$(c).find('.no-data');if(o.addClass('active'),n.find('#nav-class-course').removeClass('active'),n.find('#all-course').removeClass('active'),a.length)t.html(a),i.html(r);else t.html(s);}});}).on('click','.pager [data-page]',function(){var c,t=$(this).data('page');return n.find('.tab-nav .nav-item').each(function(e,n){if($(n).hasClass('active'))c=$(n).data('type');}),e(t,c),!1;});};});