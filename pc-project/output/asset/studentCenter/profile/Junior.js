define('cobble/form/Select',['require','exports','module','../ui/ComboBox','../function/jquerify','../function/lifeCycle'],function(require){'use strict';function e(e){return i.init(this,e);}var t=require('../ui/ComboBox'),n=require('../function/jquerify'),i=require('../function/lifeCycle');return e.prototype={constructor:e,type:'Select',init:function(){var e=this,n=e.element,i='<input type="hidden" name="'+e.name+'"';if(null!=e.value)i+=' value="'+e.value+'"';if(n.attr('required'))i+=' required';i+=' />';var o=e.input=$(i);n.append(o),e.comboBox=new t({element:n,button:n.find(e.buttonSelector),menu:n.find(e.menuSelector),data:e.data,value:e.value,show:e.show,hide:e.hide,defaultText:e.defaultText,template:e.template,renderTemplate:e.renderTemplate,activeClass:e.activeClass,openClass:e.openClass,setText:$.proxy(e.setText,e),onChange:function(t,n){if(e.setValue(n.value),!e.silence)e.emit('change',n);},onAfterShow:function(){n.trigger('focusin');},onAfterHide:function(){n.trigger('focusout');}});},disable:function(){var e=this,t=e.element;t.find(e.buttonSelector).prop('disabled',!0);},enable:function(){var e=this,t=e.element;t.find(e.buttonSelector).prop('disabled',!1);},getValue:function(){return this.value;},setValue:function(e,t){var n=this;if(t=t||{},t.force||e!=n.value)n.value=e,n.input.val(null==e?'':e),n.silence=t.silence,n.comboBox.setValue(e),delete n.silence;},refresh:function(e){this.comboBox.refresh(e);},dispose:function(){var e=this;i.dispose(e),e.comboBox.dispose(),e.input=e.element=e.comboBox=null;}},n(e.prototype),e.defaultOptions={defaultText:'请选择',buttonSelector:'.btn-default',menuSelector:'.dropdown-menu',labelSelector:'.btn-default span',activeClass:'active',openClass:'open',renderTemplate:function(e){var t=[];return $.each(e,function(e,n){var i=[];$.each(n,function(e,t){if('text'!==e&&null!=t)i.push('data-'+e+'="'+t+'"');}),t.push('<li '+i.join(' ')+'>'+n.text+'</li>');}),t.join('');},setText:function(e){this.element.find(this.labelSelector).html(e);}},e;}),define('cobble/form/Validator',['require','exports','module','../function/jquerify','../function/lifeCycle'],function(require){'use strict';function e(e){return o.init(this,e);}function t(e,t){if(e.length>0){var n=e[0].element;if(n.is(':hidden'))n=n.parent();var i=n.offset().top;if(t>0)i-=t;window.scrollTo(window.scrollX,i);}}function n(e){var t=$.Deferred();return $.when.apply($,e).done(function(){t.resolve(arguments);}),t;}var i=require('../function/jquerify'),o=require('../function/lifeCycle');e.prototype={constructor:e,type:'Validator',init:function(){var t=this,n=t.element,i='FORM'===n.prop('tagName')?n:n.find('form');if(i.length>0)i.attr('novalidate','novalidate').on('submit'+a,$.proxy(t.validate,t));$.each(t.fields,function(t,i){var o=n.find('[name="'+t+'"]'),a=i.type;if(!a)a=i.type=o.attr('type')||'text';var u=i.rules;if(!u)u=i.rules={};var l=e.type[a]||[];$.each(l,function(e,t){if(null==u[t]){var n=r[t];if($.isFunction(n))u[t]=n(o,i);}});});var o=t.groupSelector;if(n.on('focusin'+a,function(e){var n=$(e.target).closest(o),i=[t.successClass,t.errorClass,t.requiredClass].join(' ');n.removeClass($.trim(i));}),t.realtime)n.on('focusout'+a,function(e){var n=$(e.target),i=n.prop('name');if(!i)n=n.find('[name]'),i=n.prop('name');if(i)t.validate(i);});},validate:function(e,i){var o=this,r=o.emit('beforeValidate');if(!r.isDefaultPrevented()){var a,u=o.element,l=o.groupSelector;if('string'===$.type(e))e=[e];if($.isArray(e))a=$.map(e,function(e){return u.find('[name="'+e+'"]').closest(l);});else if(a=u.find(l),'boolean'===$.type(e))i=e;var s=[],c=[];$.each(a,function(e,t){var n=o.validateGroup($(t));if(n){if(n.promise)c.push(n),n=n.data;$.merge(s,n);}});var e=[],f=[],d=function(){if($.each(s,function(t,n){if(n.error)f.push(n);e.push(n.element.prop('name'));}),i)t(f,o.scrollGap);o.emit('afterValidate',{fields:e,errors:f});};if(c.length>0)return n(c).done(d);else return d(),0===f.length;}},validateGroup:function(t){if(t.is(':visible')){var i=this,o=[],r=[],a=[];if(t.find('[name]').each(function(t){var n,u,l=this,s=l.name,c=l.value,f=l.disabled,d=$(l);if(!f){var m=i.fields[s];if(m){n=!0,m=$.extend(!0,{},m),m.form=i.element,m.value=$.trim(c);var p;if($.each(e.type[m.type]||[],function(t,n){var i=e.rule[n](m);if(i===!1)return p=n,!1;else if(''===m.value&&'required'===n)return!1;}),p){var h=m.errors;if(h)u=h[p];if(!u)throw new Error(s+' 字段 '+p+' 类型错误信息未定义');}else if($.isFunction(m.custom)){var g=$.Deferred(),v=m.custom(d,function(e){g.resolve(e);});u=null==v||v.done?g:v;}}}if(n)if(t=o.push({element:d,error:u}),u&&u.promise)r.push(u),a.push(t-1);}),r.length>0){var u=n(r).done(function(e){$.each(e,function(e,t){o[a[e]].error=t;}),i.refreshGroup(t,o);});return u.data=o,u;}else return i.refreshGroup(t,o),o;}},refreshGroup:function(e,t){var n=this,i=n.successClass,o=n.errorClass;$.each(t,function(t,r){var a,u=r.element,l=r.error,s=n.errorSelector;if(s)a=e.find(s).eq(t);if(l&&'string'===$.type(l)){if(e.removeClass(i).addClass(o),a){var c=n.renderTemplate;if($.isFunction(c))l=c({text:l},n.errorTemplate);a.html(l).show();var f=n.errorPlacement;if($.isFunction(f))f(u,a);}}else if(r.error='',e.removeClass(o).addClass(i),a)a.html('').hide();});},dispose:function(){var e=this;o.dispose(e),e.element.off(a),e.element=null;}},i(e.prototype),e.defaultOptions={realtime:!1,scrollGap:100,groupSelector:'.form-group',successClass:'has-success',errorClass:'has-error',errorSelector:'.error',errorTemplate:'<i class="icon icon-times-circle"></i>&nbsp;${text}',requiredClass:'has-required',requiredSelector:'.required',requiredTemplate:'${text}',renderTemplate:function(e,t){return t.replace(/\${(\w+)}/g,function(t,n){return e[n]||'';});},errorPlacement:function(e,t){if('hidden'===e.prop('type'))e=e.parent();t.css({position:'static',width:'auto'});var n=t.outerWidth(!0)+5;t.css({position:'absolute',width:n});var i=e.parent();if(i.is('.placeholder-wrapper'))e=i;var o=e.position();t.css({left:o.left+e.outerWidth()-37,top:o.top-t.outerHeight()+8});}},e.type={text:['required','pattern','min','max','minlength','maxlength'],hidden:['required'],password:['required','pattern','minlength','maxlength','equals'],number:['required','pattern','min','max','step'],range:['required','pattern','min','max','step'],tel:['required','pattern'],url:['required','pattern'],email:['required','pattern'],mobile:['required','pattern'],money:['required','pattern','min','max'],idcard:['required','pattern'],'int':['required','pattern','min','max'],internationalMobile:['required','pattern']},e.rule={required:function(e){if(e.value.length>0)return!0;else if(e.rules.required)return!1;},pattern:function(e){var t=e.rules.pattern;if(t)return t.test(e.value);else return void 0;},minlength:function(e){var t=e.rules.minlength;if($.isNumeric(t))return e.value.length>=+t;else return void 0;},maxlength:function(e){var t=e.rules.maxlength;if($.isNumeric(t))return e.value.length<=+t;else return void 0;},min:function(e){var t=e.rules.min;if($.isNumeric(t))return e.value>=+t;else return void 0;},max:function(e){var t=e.rules.max;if($.isNumeric(t))return e.value<=+t;else return void 0;},step:function(e){var t=e.rules.step;if($.isNumeric(t)){var n=e.rules.min||1;return(e.value-n)%t===0;}},equals:function(e){var t=e.rules.equals;if(t){var n=e.form.find('[name="'+t+'"]');return e.value===$.trim(n.val());}}},e.pattern={number:/^[\d.]*$/,'int':/^\d+$/,url:/^(?:(?:0\d{2,3}[- ]?[1-9]\d{6,7})|(?:[48]00[- ]?[1-9]\d{6}))$/,tel:/^(?:(?:0\d{2,3}[- ]?[1-9]\d{6,7})|(?:[48]00[- ]?[1-9]\d{6}))$/,mobile:/^1[3-9]\d{9}$/,email:/^(?:[a-z0-9]+[_\-+.]+)*[a-z0-9]+@(?:([a-z0-9]+-?)*[a-z0-9]+.)+([a-z]{2,})+$/i,money:/^[\d.]*$/,idcard:/(^\d{15}$)|(^\d{17}([0-9]|X)$)/i,internationalMobile:/^\d{7,20}$/};var r={required:function(e){return'required'===e.attr('required');},pattern:function(t,n){var i=t.attr('pattern')||e.pattern[n.type];if('string'===$.type(i))i=new RegExp(i);return i;},minlength:function(e){return e.attr('minlength');},maxlength:function(e){return e.attr('maxlength');},min:function(e){return e.attr('min');},max:function(e){return e.attr('max');},step:function(e){return e.attr('step');},equals:function(e){return e.attr('equals');}},a='.cobble_form_validator';return e;}),define('cobble/function/contains',['require','exports','module'],function(){'use strict';return function(e,t){if(e=e.jquery?e[0]:e,t=t.jquery?t[0]:t,!e||!t)return!1;if(e===t)return!0;else return $.contains(e,t);};}),define('cobble/function/debounce',['require','exports','module'],function(){'use strict';return function(e,t){t='number'===$.type(t)?t:50;var n;return function(){if(!n){var i=arguments;n=setTimeout(function(){n=null,e.apply(null,$.makeArray(i));},t);}};};}),define('cobble/function/decimalLength',['require','exports','module'],function(){'use strict';return function(e){var t=(''+e).split('.');return 2===t.length?t[1].length:0;};}),define('cobble/function/disableSelection',['require','exports','module'],function(){'use strict';var e=$('<i></i>')[0],t='onselectstart'in e,n='MozUserSelect'in e.style;if(e=null,t)return function(e){e=e||document,e.onselectstart=function(){return!1;};};if(n)return function(e){e=e||document.body,e.style.MozUserSelect='none';};else return $.noop;}),define('cobble/function/divide',['require','exports','module','./decimalLength','./float2Int'],function(require){'use strict';var e=require('./decimalLength'),t=require('./float2Int');return function(n,i){var o=Math.max(e(n),e(i));return n=t(n,o),i=t(i,o),n/ i;};}),define('cobble/function/dragGlobal',['require','exports','module','../helper/Draggable','../util/instance','../util/dimension','./pin'],function(require){'use strict';{var e=require('../helper/Draggable'),t=require('../util/instance'),n=require('../util/dimension');require('./pin');}return function(i){return new e({element:i.element,container:t.body,draggingClass:i.draggingClass,handleSelector:i.handleSelector,cancelSelector:i.cancelSelector,rect:function(){var e=i.fixed,t=i.scrollable;return{x:e||t?0:n.getPageScrollLeft(),y:e||t?0:n.getPageScrollTop(),width:e||!t?n.getViewportWidth():n.getPageWidth(),height:e||!t?n.getViewportHeight():n.getPageHeight()};}});};}),define('cobble/function/enableSelection',['require','exports','module'],function(){'use strict';var e=$('<i></i>')[0],t='onselectstart'in e,n='MozUserSelect'in e.style;if(e=null,t)return function(e){e=e||document,e.onselectstart=null;};if(n)return function(e){e=e||document.body,e.style.MozUserSelect='';};else return $.noop;}),define('cobble/function/float2Int',['require','exports','module'],function(){'use strict';return function(e,t){var n,i=(''+e).split('.');if(t>=0);else t=0;if(1===i.length)n=e+new Array(t+1).join('0');else t=Math.max(0,t-i[1].length),n=i.join('')+new Array(t+1).join('0');return+n;};}),define('cobble/function/init',['require','exports','module'],function(){'use strict';return function(e){return function(t,n){var i=[];return t.each(function(){i.push(new e($.extend({element:$(this)},n)));}),i;};};}),define('cobble/function/innerOffset',['require','exports','module','./toNumber'],function(require){'use strict';var e=require('./toNumber');return function(t){var n=t.offset(),i=t.css('border-left-width'),o=t.css('border-top-width');return{left:n.left+e(i,0,'int'),top:n.top+e(o,0,'int')};};}),define('cobble/function/isHidden',['require','exports','module'],function(){'use strict';return function(e){e.css('display');return'none'===e.css('display')||0==e.css('opacity')||'hidden'===e.css('visibility');};}),define('cobble/function/jquerify',['require','exports','module'],function(){'use strict';function e(e){return e.faker||e.element;}var t=$.prototype,n={on:function(){return t.on.apply(e(this),arguments),this;},off:function(){return t.off.apply(e(this),arguments),this;},emit:function(n,i){var o=this,r=e(o);if(r){if(!n[$.expando])n='string'===$.type(n)?$.Event(n):$.Event(null,n);n.cobble=o;var a=[n];if(i)a.push(i);var u=o[$.camelCase('on-'+n.type)];if($.isFunction(u)&&u.apply(o,a)===!1)n.preventDefault();if(!n.isPropagationStopped())t.trigger.apply(r,a);return n;}},before:function(t){e(this).before(t);},after:function(t){e(this).after(t);},appendTo:function(t){e(this).appendTo(t);},prependTo:function(t){e(this).prependTo(t);}};return function(e){$.each(n,function(t,n){if(null==e[t])e[t]=n;});};}),define('cobble/function/lifeCycle',['require','exports'],function(require,exports){'use strict';exports.init=function(e,t){var n=e.constructor,i='__cobble__'+n.prototype.type,o=t.element;if(o&&o.data(i))e=o.data(i);else if($.extend(e,n.defaultOptions,t),e.init(),o)o.data(i,e);return e;},exports.dispose=function(e){var t='__cobble__'+e.constructor.prototype.type,n=e.element;if(n)n.removeData(t);};}),define('cobble/function/offsetParent',['require','exports','module'],function(){'use strict';function e(e){return e.is('body')||'static'!==e.css('position');}return function(t){if(t.is('body'))return t;for(var n=t.parent();!e(n);)n=n.parent();return n;};}),define('cobble/function/outerOffset',['require','exports','module','./toNumber'],function(require){'use strict';var e=require('./toNumber');return function(t){var n=t.offset(),i=e(t.css('margin-left'),0,'int'),o=e(t.css('margin-top'),0,'int');return{left:n.left-i,top:n.top-o};};}),define('cobble/function/page',['require','exports','module','../util/instance'],function(require){'use strict';var e=require('../util/instance');return function(){if(e.body.prop('clientHeight')<e.html.prop('clientHeight'))return e.html;else return e.body;};}),define('cobble/function/pageHeight',['require','exports','module','./page'],function(require){'use strict';var e=require('./page');return function(){var t=e()[0];return Math.max(t.scrollHeight,t.clientHeight);};}),define('cobble/function/pageScrollLeft',['require','exports','module'],function(){'use strict';return function(){return Math.max(document.body.scrollLeft,document.documentElement.scrollLeft);};}),define('cobble/function/pageScrollTop',['require','exports','module'],function(){'use strict';return function(){return Math.max(document.body.scrollTop,document.documentElement.scrollTop);};}),define('cobble/function/pageWidth',['require','exports','module','./page'],function(require){'use strict';var e=require('./page');return function(){var t=e()[0];return Math.max(t.scrollWidth,t.clientWidth);};}),define('cobble/function/parsePercent',['require','exports','module','./divide'],function(require){'use strict';var e=require('./divide'),t=/(-?\d+(\.\d+)?)%/;return function(n){if(t.test(n))return e(RegExp.$1,100);else return void 0;};}),define('cobble/function/pin',['require','exports','module','../util/instance','./parsePercent'],function(require){'use strict';function e(e){var t=o[e.x];if(null==t)t=e.x;if('string'===$.type(t)){var n=i(t);if(null!=n)t=n*(e.width||e.element.outerWidth());}return t;}function t(e){var t=o[e.y];if(null==t)t=e.y;if('string'===$.type(t)){var n=i(t);if(null!=n)t=n*(e.height||e.element.outerHeight());}return t;}var n=require('../util/instance'),i=require('./parsePercent'),o={left:0,top:0,center:'50%',middle:'50%',right:'100%',bottom:'100%'};return function(i){var o=i.element,r=i.attachment||{};if(!r.element)r.element=n.body;var a=r.element.offset(),u=a.left+e(r),l=a.top+t(r),s=u-e(i),c=l-t(i),f=i.offset;if(f){if('number'===$.type(f.x))s+=f.x;if('number'===$.type(f.y))c+=f.y;}var d={left:s,top:c},m=o.css('position');if('absolute'!==m&&'fixed'!==m)d.position='absolute';if(i.silence)return d;else o.css(d);};}),define('cobble/function/pinGlobal',['require','exports','module','./pin','../util/dimension','../function/viewport'],function(require){'use strict';var e=require('./pin'),t=require('../util/dimension'),n=require('../function/viewport');return function(i){var o={silence:!0,element:i.element,x:'50%'===i.x?'50%':0,y:'50%'===i.y?'50%':0,attachment:{element:n(),width:t.getViewportWidth(),height:t.getViewportHeight(),x:i.x,y:i.y}};if(!i.fixed)o.offset={x:t.getPageScrollLeft(),y:t.getPageScrollTop()};return e(o);};}),define('cobble/function/position',['require','exports','module','./offsetParent'],function(require){'use strict';var e=require('./offsetParent');return function(t){var n=e(t),i=t.css('position'),o=parseInt(t.css('left'),10),r=parseInt(t.css('top'),10),a=isNaN(o),u=isNaN(r);if(a||u)if(1===n.length){var l=t.offset(),s=n.offset();if(a)o=l.left-s.left-(parseInt(n.css('border-left-width'),10)||0);if(u)r=l.top-s.top-(parseInt(n.css('border-top-width'),10)||0);}else o=r=0;if(!i||'static'===i)i='absolute';return{position:i,left:o,top:r};};}),define('cobble/function/restrain',['require','exports','module'],function(){'use strict';return function(e,t,n){if(t>e)e=t;else if(e>n)e=n;return e;};}),define('cobble/function/split',['require','exports','module'],function(){'use strict';return function(e,t){var n=[];return $.each(e.split(t),function(e,t){if(t=$.trim(t))n.push(t);}),n;};}),define('cobble/function/toNumber',['require','exports','module'],function(){'use strict';var e={'int':parseInt,'float':parseFloat};return function(t,n,i){if('number'!==$.type(t)){var o=e[i];if(t=o?o(t,10):+t,isNaN(t))t=n;}return t;};}),define('cobble/function/viewport',['require','exports','module','../util/instance'],function(require){'use strict';var e=require('../util/instance');return function(){if(e.body.prop('clientHeight')>e.html.prop('clientHeight'))return e.html;else return e.body;};}),define('cobble/function/viewportHeight',['require','exports','module'],function(){'use strict';return function(){return window.innerHeight||document.documentElement.clientHeight;};}),define('cobble/function/viewportWidth',['require','exports','module'],function(){'use strict';return function(){return window.innerWidth||document.documentElement.clientWidth;};}),define('cobble/helper/Draggable',['require','exports','module','../function/page','../function/toNumber','../function/restrain','../function/position','../function/contains','../function/jquerify','../function/lifeCycle','../function/innerOffset','../function/outerOffset','../function/pageScrollLeft','../function/pageScrollTop','../function/enableSelection','../function/disableSelection','../util/instance','../util/mouse'],function(require){'use strict';function e(e){return s.init(this,e);}function t(e){var t=y(e),n=b(e);if(C.left!==t||C.top!==n){C.left=t,C.top=n;var i=e.data;if(1===++x){var o=i.draggingClass;if(o)i.element.addClass(o);i.emit('beforeDrag');}if(!i.silence)i.element.css(C);i.emit('drag',C);}}function n(e){p(),g.document.off(w);var t=e.data,n=t.draggingClass;if(n)t.element.removeClass(n);if(x>0)t.emit('afterDrag',C);x=y=b=null;}function i(e,t,n){var i=!1;if($.isArray(t))t=t.join(',');return e.find(t).each(function(){if(i=u(this,n))return!1;else return void 0;}),i;}var o=require('../function/page'),r=(require('../function/toNumber'),require('../function/restrain')),a=require('../function/position'),u=require('../function/contains'),l=require('../function/jquerify'),s=require('../function/lifeCycle'),c=require('../function/innerOffset'),f=require('../function/outerOffset'),d=require('../function/pageScrollLeft'),m=require('../function/pageScrollTop'),p=require('../function/enableSelection'),h=require('../function/disableSelection'),g=require('../util/instance'),v=require('../util/mouse');e.prototype={constructor:e,type:'Draggable',init:function(){var e=this,r=e.element;if(!e.container)e.container=o();r.css(a(r)),$.each(v,function(o,l){if(l.support)r.on(l.mousedown+w,function(s){var d=s.target,m=e.handleSelector,p=e.cancelSelector;if(!(m&&!i(r,m,d)||p&&i(r,p,d))){var v=q[o],$=f(r),T=v.absoluteX(s)-$.left,D=v.absoluteY(s)-$.top,L=e.container;if(u(L,r)){var k=c(L);T+=k.left,D+=k.top;}var _=a(r),H=_.position;C.left=_.left,C.top=_.top;var Y=e.axis,P=e.getRectange(!0);y='y'===Y?S.constant(C.left):S.change(v[H+'X'],T,P.x,P.x+P.width),b='x'===Y?S.constant(C.top):S.change(v[H+'Y'],D,P.y,P.y+P.height),x=0,h(),g.document.on(l.mousemove+w,e,t).on(l.mouseup+w,e,n);}});});},getRectange:function(e){var t=this,n=t.rect;if($.isFunction(n))n=t.rect();if(e){var i=t.element,o=n.width-i.outerWidth(!0),r=n.height-i.outerHeight(!0);n.width=Math.max(0,o),n.height=Math.max(0,r);}return n;},setRectange:function(e){this.rect=e;},dispose:function(){var e=this;s.dispose(e),e.element.off(w),e.element=e.container=null;}},l(e.prototype),e.defaultOptions={rect:function(){var e=this,t=e.container,n={x:0,y:0,width:t.innerWidth(),height:t.innerHeight()};if(!u(t,e.element)){var i=c(t);n.x=i.left,n.y=i.top;}return n;}};var y,b,x,w='.cobble_helper_draggable',C={},S={constant:function(e){return function(){return e;};},change:function(e,t,n,i){return function(o){return r(e(o)-t,n,i);};}},q={};return $.each(v,function(e,t){if(t.support)q[e]={absoluteX:function(e){return t.clientX(e)+d();},absoluteY:function(e){return t.clientY(e)+m();},fixedX:function(e){return t.clientX(e);},fixedY:function(e){return t.clientY(e);}};}),e;}),define('cobble/helper/Popup',['require','exports','module','../function/split','../function/isHidden','../function/contains','../function/jquerify','../function/lifeCycle','../util/instance'],function(require){'use strict';function e(e){return q.init(this,e);}function t(e,t){$.each(e.showConfigList,function(n,i){i[t](e);});}function n(e,t){$.each(e.hideConfigList,function(n,i){i[t](e);});}function i(e,t){if(e)e.type=t;else e=t;return e;}function o(e){var t=e.currentTarget;return t&&'HTML'===t.tagName?null:t;}function r(e,t){return e.emit(i(t,'beforeShow'));}function a(e,i){return e.layer.data(H,o(i)),t(e,'off'),n(e,'on'),e.emit('afterShow');}function u(e,t){return e.emit(i(t,'beforeHide'));}function l(e){return e.layer.removeData(H),n(e,'off'),t(e,'on'),e.emit('afterHide');}function s(){return $.now();}function c(e){return'__'+e+'Handler__';}function f(e,t){return null==e[t];}function d(e,t){return e.layer.data(H)!==o(t);}function m(e,t,n){return!t||t(e,n);}function p(e,t){return t-e[_]>50;}function h(t,n){return function(i){var o=i.data,r=s(i);if(f(o,L)&&d(o,i)&&m(o,n,i))o[_]=r,v({popup:o,delay:o.show.delay,toggle:e.trigger.show[t].delay,timer:L,success:function(){var e=function(){o.open(i);},t=o[D];if(t)t.done(e);else e();}});};}function g(t,n){return function(i){var o=i.data,r=s(i);if(f(o,k)&&m(o,n,i)&&p(o,r))o[_]=r,o[D]=$.Deferred(),v({popup:o,delay:o.hide.delay,toggle:e.trigger.hide[t].delay,timer:k,success:function(){o.close(i),o[D].resolve();},fail:function(){o[D]=null;}});};}function v(e){var t=e.delay,n=e.success;if(t>0){var i=e.popup,o=e.timer,r=e.toggle||{},a=r.on||$.noop,u=r.off||$.noop,l=e.fail||$.noop,s=function(){clearTimeout(i[o]),u(i,c),i[o]=null;},c=function(e){var t=i[o];if(t)s();if(t&&e===_)n();else l();};a(i,c),i[o]=setTimeout(function(){c(_);},t);}else n();}function y(e){var t=this,n=t.type,i=t.handler,o=c(n);if(e[o]!==i)e.element.on(n,e.selector,e,i),e[o]=i;}function b(e){var t=this;if(!e.selector){var n=t.type;e.element.off(n,t.handler),e[c(n)]=null;}}var x=require('../function/split'),w=require('../function/isHidden'),C=require('../function/contains'),S=require('../function/jquerify'),q=require('../function/lifeCycle'),T=require('../util/instance');e.prototype={constructor:e,type:'Popup',init:function(){var i=this,o=i.showConfigList=[],r=i.hideConfigList=[],a=i.show.trigger,u=i.hide.trigger;if(a)$.each(x(a,','),function(t,n){var i=e.trigger.show[n];if(i)o.push(i);});if(u)$.each(x(i.hide.trigger,','),function(t,n){var i=e.trigger.hide[n];if(i)r.push(i);});if(i.hidden=w(i.layer))t(i,'on');else n(i,'on');},open:function(){var e=this,t=arguments[0];if(!t)e[_]=s();if(t=r(e,t),!t.isDefaultPrevented()){var n=e.layer,i=e.show.animation;if($.isFunction(i))i.call(e,n);else n.show();e.hidden=!1,a(e,t);}},close:function(){var e=this;if(!e.hidden){var t=arguments[0];if(!t)e[_]=s();if(t=u(e,t),!t.isDefaultPrevented()){var n=e.layer,i=e.hide.animation;if($.isFunction(i))i.call(e,n);else n.hide();e.hidden=!0,l(e);}}},dispose:function(){var e=this;q.dispose(e),e.close(),t(e,'off'),e.element=e.layer=null;}},S(e.prototype),e.defaultOptions={show:{trigger:'click'},hide:{trigger:'click'}};var D='__hidePromise__',L='__showTimer__',k='__hideTimer__',_='__lastTriggerTime__',H='__sourceElement__',Y=function(e,t){if(!t)return!1;else return C(e.layer,t);};return e.trigger={show:{focus:{type:'focusin',handler:h('focus'),on:y,off:b},click:{type:'click',handler:h('click'),on:y,off:b},over:{type:'mouseenter',handler:h('over'),on:y,off:b,delay:{on:function(e,t){e.element.on('mouseleave',e.selector,t);},off:function(e,t){e.element.off('mouseleave',t);}}},context:{type:'contextmenu',handler:h('context'),on:y,off:b}},hide:{blur:{type:'focusout',handler:g('blur'),on:y,off:b},click:{type:'click',handler:function(){return g(this.type,function(e,t){return!Y(e,t.target);});},on:function(e){var t=this;T.document.on(t.type,e,e.clickHandler=t.handler());},off:function(e){T.document.off(this.type,e.clickHandler);}},out:{type:'mouseleave',handler:g('out'),on:function(e){var t=this.type,n=this.handler;e.layer.on(t,e,n),e.element.on(t,e.selector,e,n);},off:function(e){var t=this.type,n=this.handler;e.element.off(t,n),e.layer.off(t,n);},delay:{on:function(e,t){e.element.on('mouseenter',e.selector,t),e.layer.on('mouseenter',t);},off:function(e,t){e.element.off('mouseenter',t),e.layer.off('mouseenter',t);}}},context:{type:'contextmenu',handler:function(){return g('context',function(e,t){return!Y(e,t.target);});},on:function(e){var t=this;T.document.on(t.type,e,e.contextHandler=t.handler());},off:function(e){T.document.off(this.type,e.contextHandler);}}}},e;}),define('cobble/ui/ComboBox',['require','exports','module','../function/jquerify','../function/lifeCycle','../helper/Popup'],function(require){'use strict';function e(e){return n.init(this,e);}var t=require('../function/jquerify'),n=require('../function/lifeCycle'),i=require('../helper/Popup');e.prototype={constructor:e,type:'ComboBox',init:function(){var e=this,t=e.button,n=e.menu,r=e.element||t,a=e.openClass,u=e.show,l=e.hide,s=u.animation;if($.isFunction(s))u.animation=$.proxy(s,e);if(s=l.animation,$.isFunction(s))l.animation=$.proxy(s,e);if(e.popup=new i({element:t,layer:n,show:u,hide:l,onBeforeShow:function(t){e.emit(t);},onBeforeHide:function(t){e.emit(t);},onAfterShow:function(t){if(a)r.addClass(a);e.emit(t);},onAfterHide:function(t){if(a)r.removeClass(a);e.emit(t);}}),null==e.value){var c=n.find('.'+e.activeClass);if(1===c.length)e.value=c.data('value');}if(e.data)n.html(e.renderTemplate(e.data,e.template));if(null!=e.value)e.setValue(e.value,{force:!0,silence:!0});n.on('click'+o,'[data-value]',function(){e.setValue($(this).data('value')),e.close();});},getValue:function(){return this.value;},setValue:function(e,t){var n,i=this,o=i.menu,r=o.find('[data-value="'+e+'"]');if(1===r.length){if(n=r.data(),null==n.text)n.text=r.html();}else n={};if(t=t||{},t.force||e!=i.value){var a=i.activeClass;if(a)o.find('.'+a).removeClass(a);if(1===r.length){if(i.value=e,a)r.addClass(a);}else i.value=null;if(!t.silence)i.emit('change',n);}if($.isFunction(i.setText))i.setText(n.text||i.defaultText);},refresh:function(e){var t=this,n=t.value,i={};if(e){var o=e.data;if(o)t.menu.html(t.renderTemplate(o,t.template));if('value'in e)n=e.value,i.force=!0;}t.setValue(n,i);},open:function(){this.popup.open();},close:function(){this.popup.close();},dispose:function(){var e=this;n.dispose(e),e.menu.off(o),e.popup.dispose(),e.popup=e.element=e.button=e.menu=null;}},t(e.prototype),e.defaultOptions={show:{trigger:'click'},hide:{trigger:'click'}};var o='.cobble_ui_combobox';return e;}),define('cobble/ui/Dialog',['require','exports','module','../util/instance','../util/dimension','../function/jquerify','../function/lifeCycle','../function/offsetParent','../function/debounce','../function/pinGlobal','../function/dragGlobal'],function(require){'use strict';function e(e){return o.init(this,e);}var t=require('../util/instance'),n=require('../util/dimension'),i=require('../function/jquerify'),o=require('../function/lifeCycle'),r=require('../function/offsetParent'),a=require('../function/debounce'),u=require('../function/pinGlobal'),l=require('../function/dragGlobal');e.prototype={constructor:e,type:'Dialog',init:function(){var e=this,n=e.element||(e.element=$(e.template)),i=[],o=e.skinClass;if(o)i.push(o);var a=e.draggableClass;if(e.draggable&&a)i.push(a);if(i.length>0)n.addClass(i.join(' '));var u=e.removeOnEmpty,l=e.title;if(l)n.find(e.titleSelector).html(l);else if(u)n.find(e.headerSelector).remove();var c=e.content,f=n.find(e.bodySelector);if(c)f.html(c);else if(u)f.remove();var d=e.closeSelector,m=$.proxy(e.hide,e);if(d)n.on('click'+s,d,m);var p={};if(e.width)p.width=e.width;var h=e.fixed?'fixed':'absolute';if(n.css('position')!==h)p.position=h;if(!r(n).is('body'))t.body.append(n);if(e.modal){var g=e.mask||(e.mask=$(e.maskTemplate));if(n.before(g),e.hideOnClickMask)g.on('click'+s,m);var v='zIndex',y=e[v];if(!$.isNumeric(y))if(y=g.css(v),!$.isNumeric(y))y='auto';var b={overflow:'hidden'};b[v]=y,g.css(b),p[v]=y;}if(n.css(p),!e.hidden)e.hidden=!0,e.show();},show:function(){var e=this;if(e.hidden!==!1){var n=e.emit('beforeShow');if(!n.isDefaultPrevented()){var i=e.element,o=e.scrollable;if(e.draggable)e.drager=l({element:i,handleSelector:e.draggableHandleSelector,cancelSelector:e.draggableCancelSelector,draggingClass:e.draggingClass,fixed:e.fixed,scrollable:o});if(e.refresh(),e.showAnimation(),e.mask)e.showMaskAnimation();e.hidden=!1,t.window.resize(e.resizer=a(function(){e.refresh(!0);},50)),e.emit('afterShow');}}},hide:function(){var e=this;if(e.hidden!==!0){var n=e.emit('beforeHide');if(!n.isDefaultPrevented()){if(e.resizer)t.window.off('resize',e.resizer),e.resizer=null;if(e.drager)e.drager.dispose(),e.drager=null;if(e.hideAnimation(),e.mask)e.hideMaskAnimation();if(e.hidden=!0,e.emit('afterHide'),e.disposeOnHide)e.dispose();}}},refresh:function(){var e=this,t=arguments[0];if(!t||e.positionOnResize){var i=e.element,o=u({element:i,x:e.x,y:e.y,fixed:e.fixed});if(t)e.resizeAnimation(o);else i.css(o);}var r=e.mask;if(r)r.css({width:n.getPageWidth(),height:n.getPageHeight()});},dispose:function(){var e=this;if(o.dispose(e),!e.hidden)e.disposeOnHide=!1,e.hide();var t=e.element,n=e.mask;if(t.off(s),n)n.off(s);if(e.removeOnDispose)if(t.remove(),n)n.remove();e.element=e.mask=null;}},i(e.prototype),e.defaultOptions={x:'50%',y:'50%',modal:!0,fixed:!0,hidden:!1,draggable:!0,scrollable:!0,removeOnEmpty:!0,disposeOnHide:!0,removeOnDispose:!0,hideOnClickMask:!1,positionOnResize:!0,draggableClass:'draggable',draggableHandleSelector:'.dialog-header',draggableCancelSelector:['.dialog-header h1','.dialog-close'],headerSelector:'.dialog-header',titleSelector:'.dialog-header h1',closeSelector:'.dialog-close',bodySelector:'.dialog-body',template:'<div class="dialog"><i class="dialog-close">&times;</i><div class="dialog-header"><h1></h1></div><div class="dialog-body"></div></div>',maskTemplate:'<div class="dialog-mask"></div>',showAnimation:function(){this.element.show();},hideAnimation:function(){this.element.hide();},showMaskAnimation:function(){this.mask.show();},hideMaskAnimation:function(){this.mask.hide();},resizeAnimation:function(e){this.element.css(e);}};{var s='.cobble_ui_dialog';t.html.css('overflow'),t.body.css('overflow');}return e;}),define('cobble/ui/Tooltip',['require','exports','module','../function/init','../function/split','../util/position','../function/debounce','../function/jquerify','../function/lifeCycle','../function/pageWidth','../function/pageHeight','../function/offsetParent','../helper/Popup','../util/instance'],function(require){'use strict';function e(e){return f.init(this,e);}function t(){return this.sourceElement.offset().left>this.layer.outerWidth();}function n(){var e=this.sourceElement;return d()>e.offset().left+e.outerWidth()+this.layer.outerWidth();}function i(){return this.sourceElement.offset().top>this.layer.outerHeight();}function o(){var e=this.sourceElement;return m()>e.offset().top+e.outerHeight()+this.layer.outerHeight();}function r(e){var t=[];return $.each(u(e,','),function(e,n){if(v[n])t.push(n);else return $.each(v,function(e){if($.inArray(e,t)<0)t.push(e);}),!1;}),t;}var a=require('../function/init'),u=require('../function/split'),l=require('../util/position'),s=require('../function/debounce'),c=require('../function/jquerify'),f=require('../function/lifeCycle'),d=require('../function/pageWidth'),m=require('../function/pageHeight'),p=require('../function/offsetParent'),h=require('../helper/Popup'),g=require('../util/instance');e.prototype={constructor:e,type:'Tooltip',init:function(){var e=this,t=e.element,n=e.layer;if(!n){var i=e.template;if(n=y[i],!n)n=y[i]=$(i);e.layer=n;}if(!p(n).is('body'))g.body.append(n);var o=e.show,a=e.hide;if(!o.trigger)o.trigger='over';if(!a.trigger)a.trigger='out,click';var u=o.animation;if($.isFunction(u))o.animation=$.proxy(u,e);if(u=a.animation,$.isFunction(u))a.animation=$.proxy(u,e);e.popup=new h({element:t,layer:n,selector:e.selector,show:o,hide:a,onAfterShow:function(t){e.emit(t);},onBeforeHide:function(t){e.emit(t);},onAfterHide:function(t){if(e.resizer)g.window.off('resize',e.resizer),e.resizer=null;e.emit(t);},onBeforeShow:function(t){var i,o=e.sourceElement;if(o)i=o.attr('data-skin');o=e.sourceElement=$(t.currentTarget);var a=r(o.attr('data-placement')||e.placement),u=1===a.length&&a[0];if(!u)if($.each(a,function(t,n){for(var i=v[n].test,o=0,r=i.length;r>o;o++)if(!i[o].call(e))return;return u=n,!1;}),!u)return!1;if(i)n.removeClass(i);if(i=o.attr('data-skin'))n.addClass(i);var l=e.updateContent(),c=function(){e.updatePlacement(u);var i=o.data('width')||e.width;if(i)n.css('max-width',i);if(e.emit(t),t.isDefaultPrevented())return!1;else return e.pin(u),void g.window.resize(e.resizer=s(function(){if(e.popup)e.pin(u);},50));};if(l&&$.isFunction(l.done))l.done(c);else c();}});},open:function(){this.popup.open();},close:function(){this.popup.close();},getSourceElement:function(){return this.sourceElement;},pin:function(e){var t=this,n=t.layer,i=n.data(b);if(i)n.removeClass(i),n.removeData(b);if(i=t.placementClass,i&&(i=i[e]))n.addClass(i),n.data(b,i);var o=t.gap,r={element:t.layer,attachment:t.sourceElement,offsetX:'number'===$.type(o.x)?o.x:0,offsetY:'number'===$.type(o.y)?o.y:0},a=v[e];if($.isFunction(a.gap))a.gap(r);var u=t.offset[e];if(u){if('number'===$.type(u.x))r.offsetX+=u.x;if('number'===$.type(u.y))r.offsetY+=u.y;}l[a.name](r);},dispose:function(){var e=this;f.dispose(e),e.popup.dispose(),e.element=e.sourceElement=e.layer=e.popup=null;}},c(e.prototype),e.defaultOptions={placement:'auto',template:'<div class="tooltip tooltip-inverted"></div>',placementClass:{top:'tooltip-top',right:'tooltip-right',bottom:'tooltip-bottom',left:'tooltip-left',topLeft:'tooltip-top-left',topRight:'tooltip-top-right',bottomLeft:'tooltip-bottom-left',bottomRight:'tooltip-bottom-right'},show:{trigger:'over',delay:100},hide:{trigger:'out',delay:100},gap:{x:10,y:10},offset:{},updateContent:function(){var e=this.layer;e.html(this.getSourceElement().attr('data-title'));},updatePlacement:$.noop},e.init=a(e);var v={bottom:{name:'bottomCenter',test:[o],gap:function(e){e.offsetX=0;}},top:{name:'topCenter',test:[i],gap:function(e){e.offsetY*=-1,e.offsetX=0;}},right:{name:'middleRight',test:[n],gap:function(e){e.offsetY=0;}},left:{name:'middleLeft',test:[t],gap:function(e){e.offsetX*=-1,e.offsetY=0;}},bottomLeft:{name:'bottomLeft',test:[o,t],gap:function(e){e.offsetX*=-1;}},bottomRight:{name:'bottomRight',test:[o,n]},topLeft:{name:'topLeft',test:[i,t],gap:function(e){e.offsetX*=-1,e.offsetY*=-1;}},topRight:{name:'topRight',test:[i,n],gap:function(e){e.offsetY*=-1;}}},y={},b='__placement__';return e;}),define('cobble/util/date',['require','exports','module'],function(require,exports){'use strict';exports.parse=function(e,t,n){var i=!1;if($.isNumeric(e)&&$.isNumeric(t)&&$.isNumeric(n))i=!0;else if(1===arguments.length)if(i=!0,$.isPlainObject(e))n=e.date,t=e.month,e=e.year;else if('string'===$.type(e)){var o=e.split('-');e=o[0],t=o[1],n=o[2];}if(i)if(t>=1&&12>=t&&n>=1&&31>=n)return new Date(e,t-1,n);},exports.stringify=function(e){if('number'===$.type(e))e=new Date(e);var t=e.getFullYear(),n=e.getMonth()+1,e=e.getDate();if(10>n)n='0'+n;if(10>e)e='0'+e;return[t,n,e].join('-');},exports.simplify=function(e){if('number'===$.type(e))e=new Date(e);return{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate(),day:e.getDay()};},exports.getWeekFirstDay=function(e,t){if('number'===$.type(e))e=new Date(e);var n=e.getDay();return n=n>=t?n:n+7,new Date(e.getTime()-(n-t)*exports.DAY);},exports.getWeekLastDay=function(e,t){return e=exports.getWeekFirstDay(e,t),e.setTime(e.getTime()+6*exports.DAY),e;},exports.getMonthFirstDay=function(e){var t='number'===$.type(e)?e:e.getTime();return e=new Date(t),e.setDate(1),e;},exports.getMonthLastDay=function(e){var t='number'===$.type(e)?e:e.getTime();return e=new Date(t),e.setDate(1),e.setMonth(e.getMonth()+1),e.setDate(0),e;},exports.prevMonth=function(e){var t='number'===$.type(e)?e:e.getTime();return e=new Date(t),e.setDate(1),e.setTime(e.getTime()-exports.WEEK),e;},exports.nextMonth=function(e){var t='number'===$.type(e)?e:e.getTime();return e=new Date(t),e.setDate(28),e.setTime(e.getTime()+exports.WEEK),e;},exports.prevWeek=function(e){return exports.subtract(e,7);},exports.nextWeek=function(e){return exports.add(e,7);},exports.add=function(e,t){if('date'===$.type(e))e=e.getTime();return new Date(e+t*exports.DAY);},exports.subtract=function(e,t){if('date'===$.type(e))e=e.getTime();return new Date(e-t*exports.DAY);},exports.DAY=86400000,exports.WEEK=7*exports.DAY;}),define('cobble/util/dimension',['require','exports','module','../function/pageScrollTop','../function/pageScrollLeft','../function/pageWidth','../function/pageHeight','../function/viewportWidth','../function/viewportHeight'],function(require,exports){'use strict';var e=require('../function/pageScrollTop'),t=require('../function/pageScrollLeft'),n=require('../function/pageWidth'),i=require('../function/pageHeight'),o=require('../function/viewportWidth'),r=require('../function/viewportHeight');exports.getPageScrollTop=e,exports.getPageScrollLeft=t,exports.getPageWidth=n,exports.getPageHeight=i,exports.getViewportWidth=o,exports.getViewportHeight=r;}),define('cobble/util/instance',['require','exports','module'],function(require,exports){exports.window=$(window),exports.document=$(document),exports.html=$(document.documentElement),exports.body=$(document.body);}),define('cobble/util/mouse',['require','exports','module'],function(){'use strict';function e(e){return e.originalEvent.changedTouches[0];}var t=document.createElement('div'),n={support:'ontouchend'in t,click:'touchstart',mousedown:'touchstart',mousemove:'touchmove',mouseup:'touchend',pageX:function(t){return e(t).pageX;},pageY:function(t){return e(t).pageY;},clientX:function(t){return e(t).clientX;},clientY:function(t){return e(t).clientY;}},i={support:'onclick'in t,click:'click',mousedown:'mousedown',mousemove:'mousemove',mouseup:'mouseup',pageX:function(e){return e.pageX;},pageY:function(e){return e.pageY;},clientX:function(e){return e.clientX;},clientY:function(e){return e.clientY;}};return t=null,{touch:n,mouse:i};}),define('cobble/util/position',['require','exports','module','../function/pin'],function(require,exports){'use strict';var e=require('../function/pin');exports.pin=e,exports.topLeft=function(t){e({element:t.element,x:'right',y:'bottom',attachment:{element:t.attachment,x:'left',y:'top'},offset:{x:t.offsetX,y:t.offsetY}});},exports.topCenter=function(t){e({element:t.element,x:'center',y:'bottom',attachment:{element:t.attachment,x:'center',y:'top'},offset:{x:t.offsetX,y:t.offsetY}});},exports.topRight=function(t){e({element:t.element,x:'left',y:'bottom',attachment:{element:t.attachment,x:'right',y:'top'},offset:{x:t.offsetX,y:t.offsetY}});},exports.middleLeft=function(t){e({element:t.element,x:'right',y:'middle',attachment:{element:t.attachment,x:'left',y:'middle'},offset:{x:t.offsetX,y:t.offsetY}});},exports.middleCenter=function(t){e({element:t.element,x:'center',y:'middle',attachment:{element:t.attachment,x:'center',y:'middle'},offset:{x:t.offsetX,y:t.offsetY}});},exports.middleRight=function(t){e({element:t.element,x:'left',y:'middle',attachment:{element:t.attachment,x:'right',y:'middle'},offset:{x:t.offsetX,y:t.offsetY}});},exports.bottomLeft=function(t){e({element:t.element,x:'right',y:'top',attachment:{element:t.attachment,x:'left',y:'bottom'},offset:{x:t.offsetX,y:t.offsetY}});},exports.bottomCenter=function(t){e({element:t.element,x:'center',y:'top',attachment:{element:t.attachment,x:'center',y:'bottom'},offset:{x:t.offsetX,y:t.offsetY}});},exports.bottomRight=function(t){e({element:t.element,x:'left',y:'top',attachment:{element:t.attachment,x:'right',y:'bottom'},offset:{x:t.offsetX,y:t.offsetY}});};}),define('common/center/dealSchoolList_104d126278',['require','exports','common/store_a1a35b3dfc','common/service_9c322508d3','cobble/ui/Tooltip'],function(require,exports){'use strict';{var e=(require('common/store_a1a35b3dfc'),require('common/service_9c322508d3'));require('cobble/ui/Tooltip');}exports.init=function(){var t=$('.school-list-dialog'),n=$('input[name="school_type"]').val();t.on('click','.country-item',function(t){var i=$(t.currentTarget),o=i.data('id');e.getSchoolList({pid:o,type:n}).done(function(e){if(0===e.code){var t=e.data,n=t.provinces,o=t.citys,r=t.areas,a=t.schools,u=$('.province-list'),l=$('.city-list'),s=$('.area-list'),c=$('.school-list');if(n&&n.length)u.html(exports.getProvinceList(n)).show();else u.html('').hide();if(o&&o.length)l.html(exports.getCityList(o)).show();else l.html('').hide();if(r&&r.length)s.html(exports.getAreaList(r)).show();else s.html('').hide();if(a&&a.length)c.html(exports.getSchoolList(a)).show();else c.html('').show();var f=$('.country-list');f.find('.country-item').each(function(){if($(this).hasClass('active'))return void $(this).removeClass('active');else return void 0;}),i.addClass('active');}});}).on('click','.province-item',function(t){var i=$(t.currentTarget),o=i.data('id');e.getSchoolList({pid:o,type:n}).done(function(e){if(0===e.code){var t=e.data,n=t.citys,o=t.areas,r=t.schools,a=$('.city-list'),u=$('.area-list'),l=$('.school-list');if(n&&n.length)a.html(exports.getCityList(n)).show();else a.html('').hide();if(o&&o.length)u.html(exports.getAreaList(o)).show();else u.html('').hide();if(r&&r.length)l.html(exports.getSchoolList(r)).show();else l.html('').show();var s=$('.province-list');s.find('.province-item').each(function(){if($(this).hasClass('active'))return void $(this).removeClass('active');else return void 0;}),i.addClass('active');}});}).on('click','.city-item',function(t){var i=$(t.currentTarget),o=i.data('id');e.getSchoolList({pid:o,type:n}).done(function(e){if(0===e.code){var t=e.data,n=t.areas,o=t.schools,r=$('.area-list'),a=$('.school-list');if(n&&n.length)r.html(exports.getAreaList(n)).show();else r.html('').hide();if(o&&o.length)a.html(exports.getSchoolList(o)).show();else a.html('').show();var u=$('.city-list');u.find('.city-item').each(function(){if($(this).hasClass('active'))return void $(this).removeClass('active');else return void 0;}),i.addClass('active');}});}).on('click','.area-item',function(t){var i=$(t.currentTarget),o=i.data('id');e.getSchoolList({pid:o,type:n}).done(function(e){if(0===e.code){var t=e.data,n=t.schools,o=$('.school-list');if(n&&n.length)o.html(exports.getSchoolList(n)).show();else o.html('').show();var r=$('.area-list');r.find('.area-item').each(function(){if($(this).hasClass('active'))return void $(this).removeClass('active');else return void 0;}),i.addClass('active');}});});},exports.getCountryList=function(e){for(var t='',n=0;n<e.length;n++)t+='<li class="item country-item" data-id="'+e[n].id+'"><span>'+e[n].name+'</span></li>';return t;},exports.getProvinceList=function(e){for(var t='',n=0;n<e.length;n++)t+='<li class="item province-item" data-id="'+e[n].id+'"><span>'+e[n].name+'</span></li>';return t;},exports.getCityList=function(e){for(var t='',n=0;n<e.length;n++)t+='<li class="item city-item" data-id="'+e[n].id+'"><span>'+e[n].name+'</span></li>';return t;},exports.getAreaList=function(e){for(var t='',n=0;n<e.length;n++)t+='<li class="item area-item" data-id="'+e[n].id+'"><span>'+e[n].name+'</span></li>';return t;},exports.getSchoolList=function(e){for(var t='',n=0;n<e.length;n++)t+='<li class="item school-item" data-id="'+e[n].id+'"><span>'+e[n].name+'</span></li>';return t;};}),define('common/component/DateSelect_cb48f2f0b4',['require','cobble/form/Select','cobble/util/date'],function(require){'use strict';function e(t){$.extend(this,e.defaultOptions,t),this.init();}function t(e,t){if(e.setValue(null),null!=t)e.setValue(t);}function n(e,t,n){var i=[];if(n)i.push({text:'至今',value:-1});for(var o=t;o>=e;o--)i.push({text:o,value:o});return i;}function i(){for(var e=[],t=1;12>=t;t++)e.push({text:t,value:t});return e;}function o(e,t){for(var n=a.parse({year:e,month:t,date:1}),i=a.getMonthLastDay(n),o=i.getDate(),r=[],u=1;o>=u;u++)r.push({text:u,value:u});return r;}var r=require('cobble/form/Select'),a=require('cobble/util/date');return e.prototype={init:function(){var e=this,t=this.element,a=e.prefix||'',u=e.defaultYearText||'- 年 -',l=e.defaultMonthText||'- 月 -',s=e.defaultDateText||'- 日 -',c=e.yearSelect=new r({element:t.find('.year'),defaultText:u,name:a+'year',onChange:function(){if(f.refresh({data:i(),value:e.month}),$.isFunction(e.onYearChange))e.onYearChange();}}),f=e.monthSelect=new r({element:t.find('.month'),defaultText:l,name:a+'month',onChange:function(){var t=c.getValue(),n=f.getValue(),i=n?o(t,n):[];if(d.refresh({data:i,value:e.date}),$.isFunction(e.onMonthChange))e.onMonthChange();}}),d=e.dateSelect=new r({element:t.find('.date'),defaultText:s,name:'date',onChange:function(){if($.isFunction(e.onDateChange))e.onDateChange();}});c.refresh({data:n(e.startYear,e.endYear,e.sofar)}),e.refresh();},refresh:function(e){var n=this;if(e)$.extend(n,e);t(n.dateSelect,n.date),t(n.monthSelect,n.month),t(n.yearSelect,n.year);}},e.defaultOptions={startYear:1914,endYear:2016},e.createYearData=n,e.createMonthData=i,e.createDateData=o,e;}),define('common/component/SchoolListDialog_ae369b4f47',['require','cobble/ui/Dialog','common/store_a1a35b3dfc'],function(require){'use strict';function e(t){$.extend(this,e.defaultOptions,t),this.init();}{var t=require('cobble/ui/Dialog');require('common/store_a1a35b3dfc');}return e.prototype={init:function(){var e=this;e.dialog=new t({title:'选择学校',content:$('#school-list-dialog').html(),width:e.width,skinClass:e.skinClass});var n=e.dialog.element;n.on('click','.school-item',function(t){var n=$(t.currentTarget),i={id:n.data('id'),name:n.find('span').text()};e.dialog.hide(),e.outputSchoolInfo(i);});}},e.defaultOptions={title:'选择学校',width:770,onSuccess:$.noop,skinClass:'school-list-dialog',disposeOnHide:!0},e;}),define('common/form_2ef59f4d41',['require','exports','cobble/form/Validator'],function(require,exports){'use strict';function e(e){var t={},n=e.find('[name]');return n.each(function(){var e=this.name,n=this.value,i='radio'===this.type||'checkbox'===this.type;if(i){if(this.checked)t[e]=n;}else{var o=t[e];if(null==o)t[e]=n;else o=t[e]=[o],o.push(n);}}),$.each(t,function(e,n){t[e]=$.isArray(n)?n.join(','):$.trim(n);}),t;}function t(e,t){$.each(t,function(t,i){if(i){var o=e.find('[name="'+t+'"]'),r=o.closest('.form-group');r.removeClass('has-success').addClass('has-error');var a=r.find('.error');a.html(i),n.defaultOptions.errorPlacement(o,a);}});}var n=require('cobble/form/Validator');exports.parse=function(t){return e(t);},exports.get=function(n,i){return $.ajax({url:i,type:'get',dataType:'json',data:n.jquery?e(n):n}).done(function(e){if(e.code){var i=e.data;if(i)t(n,i);}return e;});},exports.post=function(n,i){return $.ajax({url:i,type:'post',dataType:'json',data:n.jquery?e(n):n}).done(function(e){if(e.code){var i=e.data;if(i)t(n,i);}return e;});};}),define('studentCenter/profile/Junior',['require','exports','common/component/DateSelect_cb48f2f0b4','cobble/form/Select','common/service_9c322508d3','common/component/SchoolListDialog_ae369b4f47','common/center/dealSchoolList_104d126278','common/form_2ef59f4d41'],function(require){'use strict';function e(e){$.extend(this,e),this.init();}var t=require('common/component/DateSelect_cb48f2f0b4'),n=(require('cobble/form/Select'),require('common/service_9c322508d3')),i=require('common/component/SchoolListDialog_ae369b4f47'),o=require('common/center/dealSchoolList_104d126278'),r=require('common/form_2ef59f4d41');return e.prototype={init:function(){var e=this,r=e.element;if(!e.data)e.data={};if(e.setIndex(e.index),e.enterSchoolSelect=new t({element:r.find('.enter-school'),year:e.data.enter_school,defaultYearText:'- 入学年份 -'}),r.on('click','input[name="junior"]',function(e){var t=$(e.currentTarget),r=t.next('input[name="junior_id"]');n.getSchoolList({type:2}).done(function(e){if(0===e.code){var n=e.data;new i({outputSchoolInfo:function(e){t.val(e.name),r.val(e.id);}});var a=n.provinces,u=n.citys,l=n.areas,s=n.schools,c=$('.province-list'),f=$('.city-list'),d=$('.area-list'),m=$('.school-list');if($('input[name="school_type"]').val(2),a&&a.length)c.html(o.getProvinceList(a)).show();if(u&&u.length)f.html(o.getCityList(u)).show();if(l&&l.length)d.html(o.getAreaList(l)).show();if(s&&s.length)m.html(o.getSchoolList(s)).show();o.init();}});}),$.isNumeric(e.data.id))e.refresh();},getData:function(){var e=this,t=r.parse(e.element),n={id:t.id,school_id:t.junior_id,school_name:t.junior,enter_school:t.year,type:2};return{data:n};},refresh:function(e){var t,n=this,i=n.element;if(e)t='';else t=n.data;i.find('[name="id"]').val(t.id),i.find('[name="junior_id"]').val(t.school_id),i.find('[name="junior"]').val(t.school_name);var o={year:t.enter_school||''};n.enterSchoolSelect.refresh(o);},setIndex:function(e){this.index=e,this.element.data('index',e);}},e;});