define('userCenter/common/map/baidu_dcd0a25f44',['require'],function(require){'use strict';function e(e,n,a){e='.'+e;var r={offset:new BMap.Size(20,-30)},o=new BMap.Label(a,r);o.setStyle({color:'#3d3d3d',fontSize:'12px',height:'26px',lineHeight:'26px',borderColor:'#ff9900',paddingLeft:'5px',paddingRight:'5px',fontFamily:'微软雅黑'});var i=$(e);i.find('.BMap_Marker label').remove(),n.setLabel(o);var t=n.getPosition();i.find('input[name="lng"]').val(t.lng),i.find('input[name="lat"]').val(t.lat);var l=new BMap.Geocoder();l.getLocation(t,function(e){var n=e.addressComponents;i.find('input[name="bd_area_name"]').val(n.district);});}function n(e,n,r){function o(){var o=n.getPosition(),i=$('.new-address'),t=new BMap.Geocoder();if(t.getLocation(o,function(n){var a=n.addressComponents,r=a.city,o=i.find('.city .btn-default span').text();if(-1==r.indexOf(o))if('big-map'==e)$('.big-map').find('.btn-initial').click();else i.find('.btn-initial').click();}),a(e,n,o.lng,o.lat),r)$('.map-oper').show(),$('.map-oper').find('.btn-initial').show();}n.addEventListener('dragend',o);}function a(n,a,r,o){var i=new BMap.Point(r,o),t=new BMap.Geocoder();t.getLocation(i,function(r){var o=r.addressComponents,i=o.province;if(o.province!=o.city)i+=o.city;i+=o.district+o.street+o.streetNumber,e(n,a,i);});}var r,exports=$({});exports.init=function(e){if('undefined'==typeof BMap){if(!r)r=[],require(['js!http://api.map.baidu.com/api?v=2.0&ak=EMB0bKIvMeOd70lyyG92BZlu'],function(){$.each(r,function(e,n){n();}),r=null;});r.push(e);}else setTimeout(e);};var o={};return exports.getExistedMap=function(){return o;},exports.search=function(e,n,a,r){var i;if(null==a)a=116.404;if(null==r)r=39.915;if(o[e])i=o[e];else{var i=new BMap.Map(e);i.centerAndZoom(new BMap.Point(a,r),16);var t=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_ZOOM});i.addControl(t),i.enableScrollWheelZoom(),o[e]=i;}var l=!1,d=new BMap.LocalSearch(i,{renderOptions:{map:i,selectFirstResult:!1},pageCapacity:1,onSearchComplete:function(e){var a=e.getNumPois();if(1>a){var r=n.split('-');if(!l&&r[0]&&r[0]!=n)l=!0,d.search(r[0]);else return i.clearOverlays(),i.reset(),!1;}}});d.search(n);},exports.areaCenter=function(e,n){var a;if(o[e])a=o[e],a.centerAndZoom(n,16);else{var a=new BMap.Map(e);a.centerAndZoom(n,16);var r=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_ZOOM});a.addControl(r),a.enableScrollWheelZoom(),o[e]=a;}},exports.addrResolution=function(a,r,i){var t;if(o[a]){t=o[a];var l=new BMap.Geocoder();t.clearOverlays(),l.getPoint(r,function(o){if(o){t.centerAndZoom(o,16);var i=new BMap.Marker(o);e(a,i,r),n(a,i,!1),t.addOverlay(i),i.enableDragging();}},'北京市');}else{var t=new BMap.Map(a),l=new BMap.Geocoder();t.clearOverlays(),l.getPoint(r,function(o){if(o){t.centerAndZoom(o,16);var i=new BMap.Marker(o);e(a,i,r),n(a,i,!1),t.addOverlay(i),i.enableDragging();}},'北京市');var d=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_ZOOM});if(t.addControl(d),i)t.enableScrollWheelZoom();else t.disableScrollWheelZoom();o[a]=t;}},exports.addrReso=function(a,r,i,t){var l,d,c=$('.set-address-dialog');if(c.length)d=c.find('.'+a);else d=$('.'+a+':visible');var s,p=c.find('.location-addr'),f=p.closest('.group'),v=f.find('.message.error'),u=f.find('.message.primary');if(o[a])l=o[a];else{var l=new BMap.Map(a),M=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_ZOOM});l.addControl(M),l.enableScrollWheelZoom(),o[a]=l;}var g=new BMap.Geocoder();l.clearOverlays();var m='http://api.map.baidu.com/geocoder/v2/';if($.ajax(m,{async:!1,dataType:'jsonp',data:{output:'json',ak:'EMB0bKIvMeOd70lyyG92BZlu',address:r},success:function(e){if(0===e.status)if(s=e.result.confidence,60>s)f.addClass('has-error'),u.show(),v.hide();else f.removeClass('has-error'),u.hide();}}),exports.getConfidence=function(){return s;},i&&t){var O=new BMap.Point(i,t);l.centerAndZoom(O,16),g.getLocation(O,function(r){var o=r.addressComponents,i=o.province;if(o.province!=o.city)i+=o.city;i+=o.district+o.street+o.streetNumber;var t=new BMap.Marker(O);e(a,t,i),n(a,t,!0),l.addOverlay(t),t.enableDragging(),l.panTo(O);});}else g.getPoint(r,function(o){if(o){l.centerAndZoom(o,16);var i=new BMap.Marker(o);e(a,i,r),n(a,i,!0),l.addOverlay(i),i.enableDragging();}},'北京市');d.find('.amplify').show(),d.find('.map-oper').show();},exports.makeMarker=function(a,r){var i;if(o[a])i=o[a];else var i=new BMap.Map(a);var t=new BMap.Geocoder();i.clearOverlays(),t.getPoint(r,function(o){if(o){i.centerAndZoom(o,16);var t=new BMap.Marker(o);e(a,t,r),n(a,t,!0),i.addOverlay(t),t.enableDragging();}},'北京市');},exports.reAddress=function(e,n,a){if(null==n)n=116.404;if(null==a)a=39.915495;var r=new BMap.Point(n,a),o=new BMap.Geocoder();o.getLocation(r,function(n){var a=n.addressComponents,r=a.province+a.city+a.district+a.street+a.streetNumber;exports.addrResolution(e,r);});},exports.modifiedAddress=function(a,r,i,t){if(null==r)r=116.404;if(null==i)i=39.915495;var l=new BMap.Point(r,i),d=new BMap.Geocoder();d.getLocation(l,function(r){var i=r.addressComponents,d=i.province;if(i.province!=i.city)d+=i.city;d+=i.district+i.street+i.streetNumber;var c=new BMap.Marker(l);e(a,c,d),n(a,c,!1);var s=null;if(o[a])s=o[a],s.clearOverlays();else{s=new BMap.Map(a),s.clearOverlays(),s.centerAndZoom(l,16);var p=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_ZOOM});if(s.addControl(p),t)s.enableScrollWheelZoom();else s.disableScrollWheelZoom();}s.addOverlay(c),c.enableDragging(),s.panTo(l);});},exports;});