define("userCenter/common/service",["require","exports","module"],function(require,exports){"use strict";function e(e,r){var t=e;if(r)t+=$.param(r);return t}function r(r,t,u){t=t||{},u=$.extend({},n,u);var a,f;if(i[r])f=e(r,t),a=o[f];var c=$.Deferred();if(a)if(!a.response)a.deferredList.push(c);else c.resolve(a.response);else{var d=userData.number||0;if(!s[r])t._user_number=d,$.extend(t,siteData.monkey);if($.ajax({url:r,data:t,method:"post",dataType:"json",timeout:u.timeout,async:u.sync?!1:!0}).then(function(e){if(i[r])a=o[f],a.response=e,$.each(a.deferredList,function(r,t){if(e&&0===e.code)t.resolve(e);else t.reject(e)}),a.deferredList.length=0;else if(e&&0===e.code)c.resolve(e);else{var t=e.msg;if(t&&!u.preventError)alert({title:"提示",content:t});c.reject(e)}},function(e,r){if("timeout"===r||"error"===r)c.reject({code:-1})}),i[r])o[f]={},o[f].deferredList=[c]}return c}function t(e,r){return $.ajax({url:e,data:r,dataType:"jsonp"})}var n={timeout:5e3,sync:!1,stringify:!1,preventError:!1},s={"/area/list":1,"/subject/getList":1},i={"/user/basicInfo":1},o={};exports.post=r,exports.jsonp=t,exports.getUserBasicInfo=function(e){var t;if(e&&null!=e.userId&&null!=e.userType)t={user_id:e.userId,user_type:e.userType};return r("/user/basicInfo",t)},exports.getCourseList=function(){return r("/lesson/list")},exports.getUserType=function(){return r("/user/roles")},exports.sendInviteCode=function(e){var t=$.extend(e.formData||{},{invite_code:e.inviteCode,role:e.role});return r("/user/switch_role_ajax",t)},exports.getCDNSpeedTestUrls=function(){return r("/video/getSpeedTestUrl")}});