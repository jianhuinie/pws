define('userCenter/common/component/BaiduMap_html',function(){return'<div class="baidu-map" id="{{id}}"></div>';}),define('userCenter/common/component/BaiduMap_719bf83100',['require','exports','module','./BaiduMap_html'],function(require){'use strict';function e(){return'map'+n++;}var n=0;return Ractive.extend({template:require('./BaiduMap_html'),data:function(){return{options:{address:'',lng:null,lat:null,needMarker:!0}};},oninit:function(){this.set('id',e());},onrender:function(){var e=this,n=e.map=new BMap.Map(e.get('id'));n.addControl(new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_ZOOM})),n.enableScrollWheelZoom();var t=e.get('options.needMarker'),o=function(n){if(t)e.addMarker(n);},a=function(){var n=e.get('options.address');if(n!==e.address)if(n)e.searchByAddress(n).then(o);},r=function(){var n=e.get('options.lng'),t=e.get('options.lat');if(n!==e.lng||t!==e.lat)if(null!=n&&null!=t)o(e.searchByGeo(n,t));},s=e.get('options.address');if(s)a();else r();e.observe('options.address',a),e.observe('options.lng + options.lat',r);},searchByAddress:function(e){var n=$.Deferred(),t=this,o=new BMap.Geocoder();return o.getPoint(e,function(o){if(o)t.saveGeo(o.lng,o.lat),t.saveAddress(e),t.map.centerAndZoom(o,16),n.resolve(o);else n.reject();},'北京市'),n;},searchByGeo:function(e,n){this.saveGeo(e,n);var t=new BMap.Point(e,n);return this.map.centerAndZoom(t,16),t;},addMarker:function(e){var n=this,t=n.map;t.clearOverlays();var o=new BMap.Marker(e);t.addOverlay(o),o.enableDragging(),o.addEventListener('dragend',function(){var e=o.getPosition(),t=new BMap.Geocoder();t.getLocation(e,function(e){e=e||{};var t=e.point||{};n.saveGeo(t.lng,t.lat),n.saveAddress(e.address),n.set('options.detail',e.addressComponents);});});},saveGeo:function(e,n){var t={};this.lng=t['options.lng']=e,this.lat=t['options.lat']=n,this.set(t);},saveAddress:function(e){this.address=e,this.set('options.address',e);},onteardown:function(){}});});