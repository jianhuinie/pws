define('cobble/function/viewportHeight',['require','exports','module'],function(){'use strict';return function(){return window.innerHeight||document.documentElement.clientHeight;};}),define('cobble/util/instance',['require','exports','module'],function(require,exports){exports.window=$(window),exports.document=$(document),exports.html=$(document.documentElement),exports.body=$(document.body);}),define('common/bindScroll_f2ce0a166a',function(){'use strict';var t=function(t,e){return t===e.target||t===window&&e.target===document;},e=function(t){for(;t.length>1;)clearTimeout(t.shift());};return function(n,i,o,r){var c=[],a=null,s=$(n);if(n=s[0],isNaN(o)||0>o)if(r)a=i;else a=function(e){if(t(n,e))i(e);};else if(r)a=function(t){c.push(setTimeout(function(){e(c),i(t);},o));};else a=function(r){c.push(setTimeout(function(){if(e(c),t(n,r))i(r);},o));};s.scroll(a);};}),define('common/lazyImage_92160e3789',['require','common/bindScroll_f2ce0a166a','cobble/util/instance','cobble/function/viewportHeight'],function(require){'use strict';function t(t){if(!t.prop('loading'))t.prop('loading',!0).addClass('img-loading');}function e(t){for(var e=t.height();!e;)t=t.parent(),e=t.height();return e;}var n=require('common/bindScroll_f2ce0a166a'),i=require('cobble/util/instance'),o=require('cobble/function/viewportHeight'),r=i.window,c=i.body,a=0,s=null,exports={init:function(t){n(t||r,exports.scanning,a),exports.scanning(!0),setTimeout(function(){r.scroll();},0);},scanning:function(n,i){var a=o(),d=r.scrollTop(),u=d+a;if(n)i=i?$(i):c,s=i.find('img[data-src]');s.each(function(){var n=$(this),i=n.offset().top,o=e(n);if(u>=i-o-a&&i+o+a>=d){if(!n.prop('loaded'))n.prop('src',n.data('src')).prop('loaded',!0).removeAttr('data-src').removeClass('img-loading');}else t(n);});var m=i.find('iframe'),l=m.length;if(l)for(var f,g=0;l>g;g++){var h=m[g],p=$(h).offset();f=$(m[g].contentWindow.document).find('img[data-src]'),f.each(function(){var n=$(this),i=n.offset().top+p.top,o=e(n);if(u>=i&&i+o+a>=d){if(!n.prop('loaded'))n.prop('src',n.data('src')).prop('loaded',!0).removeAttr('data-src').removeClass('img-loading');}else t(n);});}}};return exports;}),define('userCenter/common/component/RichTextEditor',['require','exports','module','common/lazyImage_92160e3789'],function(require){'use strict';var t=require('common/lazyImage_92160e3789');return Ractive.extend({template:'<textarea class="rich-text-editor"></textarea>',data:function(){return{options:{content:'',initHeight:400,maxLength:1000,maxImageWidth:760,error:'',length:0}};},oncomplete:function(){var e=this,n=e.getElement(),i=new UE.ui.Editor({initialFrameHeight:e.get('options.initHeight'),initialFrameWidth:e.get('options.initWidth'),maximumWords:e.get('options.maxLength')});i.render(n),i.addListener('ready',function(){i.setContent(e.get('options.content')),t.init();});var o=function(){var t=i.iframe,n=t.contentDocument||t.contentWindow.document,c=!1;$('img',n).each(function(){var t=this,n=$(t);if(t.complete&&!n.hasClass('loadingclass')){if(t.width>r)c=!0;n.attr({width:t.width});}else e.timer=setTimeout(o);});var a={'options.content':i.getContent(),'options.length':i.getContentLength(!0),'options.error':c?'插入的图片宽度大于最大展现宽度 '+r+'px':''};e.set(a);},r=e.get('options.maxImageWidth');i.addListener('contentchange',o),e.editor=i;},onteardown:function(){if(this.editor.destroy(),this.timer)clearTimeout(this.timer),this.timer=null;}});});