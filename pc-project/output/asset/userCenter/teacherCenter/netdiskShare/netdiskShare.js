define('custom/ui/Dialog',['require','exports','module','cc/ui/Dialog'],function(require){'use strict';var e=require('cc/ui/Dialog');return e.defaultOptions={x:'50%',y:'50%',modal:!0,fixed:!0,hidden:!1,draggable:!0,removeOnEmpty:!1,disposeOnHide:!0,removeOnDispose:!0,positionOnResize:!0,hideOnClickMask:!1,draggableClass:'draggable',draggableIncludeSelector:'> .header',draggableExcludeSelector:['> .header > .title','> .close'],parentSelector:'body',headerSelector:'> .header',titleSelector:'> .header > .title',closeSelector:'> .close',contentSelector:'> .body',footerSelector:'> .footer',mainTemplate:'<div class="dialog"><div class="header"><div class="title"></div></div><span class="close">&times;</span><div class="body"></div><div class="footer"></div></div>',maskTemplate:'<div class="mask"></div>',showAnimation:function(e){if(e.mainElement.show(),e.maskElement)e.maskElement.show();},hideAnimation:function(e){if(e.mainElement.hide(),e.maskElement)e.maskElement.hide();},dragAnimation:function(e){e.mainElement.css(e.mainStyle);},refreshAnimation:function(e){e.mainElement.css(e.mainStyle);var t=e.maskElement;if(t)t.css(e.maskStyle);},resizeWindowAnimation:function(e){e.mainElement.css(e.mainStyle);var t=e.maskElement;if(t)t.css(e.maskStyle);}},e;}),define('custom/ui/Uploader',['require','exports','module','cc/ui/Uploader'],function(require){'use strict';var e=require('cc/ui/Uploader');return e.defaultOptions={},e;}),define('cc/function/around',['require','exports','module'],function(){'use strict';return function(e,t,i,n){var o='string'===$.type(t),s=o?e[t]:e;if(!o)n=i,i=t;var r=function(){var e,t=$.makeArray(arguments);if($.isFunction(i))e=i.apply(this,t);if(e!==!1){if($.isFunction(s))e=s.apply(this,t);if($.isFunction(n)){t.push(e);var o=n.apply(this,t);if('undefined'!==$.type(o))e=o;}return e;}};return o?e[t]=r:r;};}),define('cc/function/contains',['require','exports','module'],function(){'use strict';return function(e,t){if(e=e.jquery?e[0]:e,t=t.jquery?t[0]:t,!e||!t)return!1;if(e===t)return!0;else return $.contains(e,t);};}),define('cc/function/createEvent',['require','exports','module'],function(){'use strict';return function(e){if(e&&!e[$.expando])e='string'===$.type(e)||e.type?$.Event(e):$.Event(null,e);return e||$.Event();};}),define('cc/function/debounce',['require','exports','module'],function(){'use strict';return function(e,t,i){function n(i){s=setTimeout(function(){s=null,o=$.now(),e.apply(null,$.makeArray(i));},t);}t='number'===$.type(t)?t:50;var o,s;return function(){if(i&&o>0&&$.now()-o<t)clearTimeout(s),s=null;if(!s)n(arguments);};};}),define('cc/function/decimalLength',['require','exports','module'],function(){'use strict';return function(e){var t=(''+e).split('.');return 2===t.length?t[1].length:0;};}),define('cc/function/disableSelection',['require','exports','module'],function(){'use strict';if(document.selection)return function(){document.body.onselectstart=function(){return!1;};};else return $.noop;}),define('cc/function/divide',['require','exports','module','./decimalLength','./float2Int'],function(require){'use strict';var e=require('./decimalLength'),t=require('./float2Int');return function(i,n){var o=Math.max(e(i),e(n));return i=t(i,o),n=t(n,o),i/n;};}),define('cc/function/dragGlobal',['require','exports','module','../helper/Draggable','../util/instance'],function(require){'use strict';var e=require('../helper/Draggable'),t=require('../util/instance');return function(i){return new e({mainElement:i.element,containerElement:t.body,mainDraggingClass:i.draggingClass,includeSelector:i.includeSelector,excludeSelector:i.excludeSelector,dragAnimation:i.dragAnimation,init:function(e){var i=e.namespace;e.mainElement.on('mousedown'+i,function(n){if(e.downHandler(n))t.document.off(i).on('mousemove'+i,e.moveHandler).on('mouseup'+i,function(n){e.upHandler(n),t.document.off(i);});});}});};}),define('cc/function/enableSelection',['require','exports','module'],function(){'use strict';if(document.selection)return function(){document.body.onselectstart=null;};else return $.noop;}),define('cc/function/eventOffset',['require','exports','module'],function(){'use strict';return function(e){var t=e.offsetX,i=e.offsetY;if('number'!==$.type(t)){var n=e.target.getBoundingClientRect();t=e.clientX-n.left,i=e.clientY-n.top;}return{x:t,y:i};};}),define('cc/function/eventPage',['require','exports','module'],function(){'use strict';return function(e){var t=e.pageX,i=e.pageY;if('number'!==$.type(t)){var n=document.documentElement;t=e.clientX+n.scrollLeft,i=e.clientY+n.scrollTop;}return{x:t,y:i};};}),define('cc/function/extend',['require','exports','module'],function(){'use strict';return function(e,t){if($.isPlainObject(t))$.each(t,function(t,i){if(!(t in e))e[t]=i;});};}),define('cc/function/float2Int',['require','exports','module'],function(){'use strict';return function(e,t){var i,n=(''+e).split('.');if(t>=0);else t=0;if(1===n.length)i=e+new Array(t+1).join('0');else t=Math.max(0,t-n[1].length),i=n.join('')+new Array(t+1).join('0');return+i;};}),define('cc/function/guid',['require','exports','module'],function(){var e=0;return function(){return'cc_'+e++;};}),define('cc/function/innerOffset',['require','exports','module','./toNumber'],function(require){'use strict';var e=require('./toNumber');return function(t){var i=t.offset(),n=t.css('border-left-width'),o=t.css('border-top-width');return{x:i.left+e(n,0,'int'),y:i.top+e(o,0,'int')};};}),define('cc/function/multiply',['require','exports','module','./decimalLength','./float2Int'],function(require){'use strict';var e=require('./decimalLength'),t=require('./float2Int');return function(i,n){var o=Math.max(e(i),e(n));i=t(i,o),n=t(n,o);var s=Math.pow(10,o);return i*n/(s*s);};}),define('cc/function/nextTick',['require','exports','module'],function(){'use strict';return function(e){var t=setTimeout(e,0);return function(){clearTimeout(t);};};}),define('cc/function/offsetDate',['require','exports','module','./offsetHour'],function(require){'use strict';var e=require('./offsetHour');return function(t,i){return e(t,24*i);};}),define('cc/function/offsetHour',['require','exports','module','./offsetMinute'],function(require){'use strict';var e=require('./offsetMinute');return function(t,i){return e(t,60*i);};}),define('cc/function/offsetMinute',['require','exports','module','./offsetSecond'],function(require){'use strict';var e=require('./offsetSecond');return function(t,i){return e(t,60*i);};}),define('cc/function/offsetParent',['require','exports','module'],function(){'use strict';function e(e){return e.is('body')||'static'!==e.css('position');}return function(t){if(t.is('body'))return t;for(var i=t.parent();!e(i);)i=i.parent();return i;};}),define('cc/function/offsetSecond',['require','exports','module'],function(){'use strict';return function(e,t){if('date'===$.type(e))e=e.getTime();return new Date(e+1000*t);};}),define('cc/function/outerOffset',['require','exports','module','./toNumber'],function(require){'use strict';var e=require('./toNumber');return function(t){var i=t.offset(),n=e(t.css('margin-left'),0,'int'),o=e(t.css('margin-top'),0,'int');return{x:i.left-n,y:i.top-o};};}),define('cc/function/page',['require','exports','module','../util/instance'],function(require){'use strict';var e=require('../util/instance');return function(){if(e.body.prop('clientHeight')<e.html.prop('clientHeight'))return e.html;else return e.body;};}),define('cc/function/pageHeight',['require','exports','module','./page'],function(require){'use strict';var e=require('./page');return function(){var t=e()[0];return Math.max(t.scrollHeight,t.clientHeight);};}),define('cc/function/pageScrollLeft',['require','exports','module'],function(){'use strict';return function(){return Math.max(document.body.scrollLeft,document.documentElement.scrollLeft);};}),define('cc/function/pageScrollTop',['require','exports','module'],function(){'use strict';return function(){return Math.max(document.body.scrollTop,document.documentElement.scrollTop);};}),define('cc/function/pageWidth',['require','exports','module','./page'],function(require){'use strict';var e=require('./page');return function(){var t=e()[0];return Math.max(t.scrollWidth,t.clientWidth);};}),define('cc/function/parsePercent',['require','exports','module','./divide'],function(require){'use strict';var e=require('./divide'),t=/(-?\d+(\.\d+)?)%/;return function(i){if(t.test(i))return e(RegExp.$1,100);else return void 0;};}),define('cc/function/pin',['require','exports','module','../util/instance','./parsePercent'],function(require){'use strict';function e(e){var t=o[e.x];if(null==t)t=e.x;if('string'===$.type(t)){var i=n(t);if(null!=i)t=i*(e.width||e.element.outerWidth());}return t;}function t(e){var t=o[e.y];if(null==t)t=e.y;if('string'===$.type(t)){var i=n(t);if(null!=i)t=i*(e.height||e.element.outerHeight());}return t;}var i=require('../util/instance'),n=require('./parsePercent'),o={left:0,top:0,center:'50%',middle:'50%',right:'100%',bottom:'100%'};return function(n){var o=n.element,s=n.attachment||{};if(!s.element)s.element=i.body;var r=s.element.offset(),a=r.left+e(s),c=r.top+t(s),l=a-e(n),u=c-t(n),d=n.offset;if(d){if('number'===$.type(d.x))l+=d.x;if('number'===$.type(d.y))u+=d.y;}var f={left:l,top:u},p=o.css('position');if('absolute'!==p&&'fixed'!==p)f.position='absolute';if(n.silent)return f;else o.css(f);};}),define('cc/function/pinGlobal',['require','exports','module','./pin','./viewport','./viewportWidth','./viewportHeight','./pageScrollLeft','./pageScrollTop'],function(require){'use strict';var e=require('./pin'),t=require('./viewport'),i=require('./viewportWidth'),n=require('./viewportHeight'),o=require('./pageScrollLeft'),s=require('./pageScrollTop');return function(r){var a={silent:!0,element:r.element,x:'50%'===r.x?'50%':0,y:'50%'===r.y?'50%':0,attachment:{element:t(),width:i(),height:n(),x:r.x,y:r.y}};if(!r.fixed)a.offset={x:o(),y:s()};return e(a);};}),define('cc/function/position',['require','exports','module','./offsetParent'],function(require){'use strict';var e=require('./offsetParent');return function(t){var i=e(t),n=t.css('position'),o=parseInt(t.css('left'),10),s=parseInt(t.css('top'),10),r=isNaN(o),a=isNaN(s);if(r||a)if(1===i.length){var c=t.offset(),l=i.offset();if(r)o=c.left-l.left-(parseInt(i.css('border-left-width'),10)||0);if(a)s=c.top-l.top-(parseInt(i.css('border-top-width'),10)||0);}else o=s=0;if(!n||'static'===n)n='absolute';return{position:n,left:o,top:s};};}),define('cc/function/ratio',['require','exports','module'],function(){'use strict';return function(e,t){if(e>=0&&t>0)return e/t;else return 0;};}),define('cc/function/replaceWith',['require'],function(){'use strict';return function(e,t){e=e[0],t=t[0],e.parentNode.replaceChild(t,e);};}),define('cc/function/restrain',['require','exports','module'],function(){'use strict';return function(e,t,i){if(t>e)e=t;else if(e>i)e=i;return e;};}),define('cc/function/split',['require','exports','module'],function(){'use strict';return function(e,t){var i=[];if('number'===$.type(e))e=''+e;if(e&&'string'===$.type(e))$.each(e.split(t),function(e,t){if(t=$.trim(t))i.push(t);});return i;};}),define('cc/function/testTarget',['require','exports','module','../util/instance','./contains'],function(require){'use strict';var e=require('../util/instance'),t=require('./contains');return function(i,n,o){var s=!1;if($.isArray(n))n=n.join(',');if(!o)o=e.document;return o.find(n).each(function(){if(s=t(this,i))return!1;else return void 0;}),s;};}),define('cc/function/toBoolean',['require','exports','module'],function(){'use strict';return function(e,t){if('boolean'!==$.type(e)){if(1===arguments.length)t=!!e;e=t;}return e;};}),define('cc/function/toNumber',['require','exports','module'],function(){'use strict';var e={'int':parseInt,'float':parseFloat};return function(t,i,n){if('number'!==$.type(t)){var o=e[n];if(o)t=o(t,10);else if($.isNumeric(t))t=+t;else t=0/0;}return isNaN(t)?i:t;};}),define('cc/function/ucFirst',['require','exports','module'],function(){'use strict';return function(e){return e.charAt(0).toUpperCase()+e.slice(1);};}),define('cc/function/viewport',['require','exports','module','../util/instance'],function(require){'use strict';var e=require('../util/instance');return function(){if(e.body.prop('clientHeight')>e.html.prop('clientHeight'))return e.html;else return e.body;};}),define('cc/function/viewportHeight',['require','exports','module'],function(){'use strict';return function(){return window.innerHeight||document.documentElement.clientHeight;};}),define('cc/function/viewportWidth',['require','exports','module'],function(){'use strict';return function(){return window.innerWidth||document.documentElement.clientWidth;};}),define('cc/helper/AjaxUploader',['require','exports','module','../function/ratio','../function/restrain','../function/nextTick','../util/life','../util/event','../util/mimeType'],function(require){'use strict';function e(e){c.init(this,e);}function t(e){var t=e.xhr;if(t)$.each(f,function(e,i){t['on'+i.type]=null;}),$.each(p,function(e,i){t.upload['on'+i.type]=null;}),delete e.xhr;var i=e.options;if(i)delete e.options;e.emit('uploadcomplete',{fileItem:e.toPlainObject()}),e.off();}function i(t){var i=this;if($.extend(i,t),null==i.file)i.file=o(i.nativeFile);if(null==i.status)i.status=e.STATUS_WAITING;}function n(e){var t=[];return $.each(e,function(e,i){if(u[i])t.push(u[i]);}),$.unique(t).join(',');}function o(e){var t=e.name,i=t.split('.'),n=i.length>1?i.pop().toLowerCase():'';return{name:t,type:n,size:e.size};}var s=require('../function/ratio'),r=require('../function/restrain'),a=require('../function/nextTick'),c=require('../util/life'),l=require('../util/event'),u=require('../util/mimeType'),d=e.prototype;d.type='AjaxUploader',d.init=function(){var e=this,t=e.option('mainElement');if(!t.is('input[type="file"]'))e.error('AjaxUploader mainElement must be <input type="file" />.');var o=$('<form></form>');t.replaceWith(o),o.append(t);var s={};if(e.option('accept'))s.accept=n(e.option('accept'));if(e.option('multiple'))s.multiple=!0;t.prop(s).on('change'+e.namespace(),function(){$.each(e.getFiles(),function(e,t){t.dispose();}),e.inner('files',$.map(t.prop('files'),function(e,t){return new i({nativeFile:e,index:t});})),e.emit('filechange');}),e.inner({main:o,file:t,files:[]}),e.set({action:e.option('action'),data:e.option('data')}),e.emit('ready');},d.getFiles=function(){return this.inner('files');},d.reset=function(){this.inner('main')[0].reset();},d.upload=function(e,t){var n=this;if(!t)t=n.getFiles()[e];else t=new i(t),n.getFiles()[e]=t;if(t)if(t.upload({action:n.get('action'),data:n.get('data'),fileName:n.option('fileName'),header:n.option('header'),useChunk:n.option('useChunk'),chunkSize:n.option('chunkSize')})){var o=function(e,t){n.emit(e,t);};t.on('uploadstart',o).on('uploadprogress',o).on('uploadsuccess',o).on('uploaderror',o).on('uploadcomplete',o).on('chunkuploadsuccess',o);}},d.stop=function(e){var t=this.getFiles()[e];if(t)t.cancel();},d.enable=function(){this.inner('file').prop('disabled',!1);},d.disable=function(){this.inner('file').prop('disabled',!0);},d.dispose=function(){var e=this;c.dispose(e),e.stop(),e.inner('file').off(e.namespace());},c.extend(d,['getFiles','setAction','setData']),e.supportChunk='undefined'!=typeof FileReader,e.STATUS_WAITING=0,e.STATUS_UPLOADING=1,e.STATUS_UPLOAD_SUCCESS=2,e.STATUS_UPLOAD_ERROR=3,e.ERROR_CANCEL=0,e.ERROR_CHUNK_SIZE=-1;var f={uploadStart:{type:'loadstart',handler:function(t){t.status=e.STATUS_UPLOADING,t.emit('uploadstart',{fileItem:t.toPlainObject()});}},uploadSuccess:{type:'load',handler:function(i){var n={responseText:i.xhr.responseText},o=i.chunk;if(o){var s=i.file.size;if(o.uploaded<s){n.fileItem=i.toPlainObject();var r=i.emit('chunkuploadsuccess',n);if(!r.isDefaultPrevented())if(o.index++,o.uploaded+=o.uploading,o.uploaded<s)return void i.upload();}}i.status=e.STATUS_UPLOAD_SUCCESS,n.fileItem=i.toPlainObject(),i.emit('uploadsuccess',n),t(i);}},uploadError:{type:'error',handler:function(i,n,o){i.status=e.STATUS_UPLOAD_ERROR,i.emit('uploaderror',{fileItem:i.toPlainObject(),errorCode:o}),t(i);}},uploadStop:{type:'abort',handler:function(t,i){f.uploadError.handler(t,i,e.ERROR_CANCEL);}}},p={uploadProgress:{type:'progress',handler:function(e,t){var i=e.file.size,n=t.loaded,o=e.chunk;if(o)n+=o.uploaded;e.emit('uploadprogress',{fileItem:e.toPlainObject(),uploaded:n,total:i,percent:(100*r(s(n,i),0,1)).toFixed(2)+'%'});}}},m=i.prototype;return m.upload=function(t){var i=this;if(!t)t=i.options;else i.options=t;var n=t.useChunk?e.STATUS_UPLOADING:e.STATUS_WAITING;if(!(i.status>n)){var o=new XMLHttpRequest();return i.xhr=o,$.each(f,function(e,t){o['on'+t.type]=function(e){t.handler(i,e);};}),$.each(p,function(e,t){o.upload['on'+t.type]=function(e){t.handler(i,e);};}),o.open('post',t.action,!0),a(function(){if(t.useChunk)i.uploadFileChunk(t);else i.uploadFile(t);}),!0;}},m.uploadFile=function(e){var t=this,i=new FormData();if(e.data)$.each(e.data,function(e,t){i.append(e,t);});i.append(e.fileName,t.nativeFile);var n=t.xhr;if(e.header)$.each(e.header,function(e,t){n.setRequestHeader(e,t);});n.send(i);},m.uploadFileChunk=function(t){var i=this,n=i.nativeFile,o=i.file.size,s=i.chunk;if(!s)s=i.chunk={index:0,uploaded:0};var r=s.index,c=t.chunkSize,l=c*r,u=c*(r+1);if(u>o)u=o;if(s.uploading=u-l,s.uploading<=0)return void a(function(){f.uploadError.handler(i,{},e.ERROR_CHUNK_SIZE);});var d=i.xhr,p={'Content-Type':'',X_FILENAME:encodeURIComponent(n.name),'Content-Range':'bytes '+(l+1)+'-'+u+'/'+o};if(t.header)$.extend(p,t.header);$.each(p,function(e,t){d.setRequestHeader(e,t);}),d.send(n.slice(l,u));},m.cancel=function(){var t=this;if(t.status===e.STATUS_UPLOADING)t.xhr.abort();},m.toPlainObject=function(){var e=this,t={index:e.index,file:e.file,nativeFile:e.nativeFile,status:e.status};if(e.chunk)t.chunk=e.chunk;return t;},m.dispose=function(){var e=this;e.cancel(),e.off();},l.extend(m),e;}),define('cc/helper/Draggable',['require','exports','module','../function/page','../function/restrain','../function/position','../function/contains','../function/testTarget','../function/innerOffset','../function/outerOffset','../function/pageScrollLeft','../function/pageScrollTop','../function/viewportWidth','../function/viewportHeight','../function/enableSelection','../function/disableSelection','../util/life','../util/touch','../util/instance'],function(require){'use strict';function e(e){m.init(this,e);}var t=require('../function/page'),i=require('../function/restrain'),n=require('../function/position'),o=require('../function/contains'),s=require('../function/testTarget'),r=require('../function/innerOffset'),a=require('../function/outerOffset'),c=require('../function/pageScrollLeft'),l=require('../function/pageScrollTop'),u=require('../function/viewportWidth'),d=require('../function/viewportHeight'),f=require('../function/enableSelection'),p=require('../function/disableSelection'),m=require('../util/life'),h=require('../util/touch'),g=require('../util/instance').body,v=e.prototype;v.type='Draggable',v.init=function(){var e=this,m=e.option('mainElement'),h=e.option('mainSelector');e.inner({main:m});var v=e.option('containerElement');if(!v)v=t();var w,O=e.option('draggingClass'),_=e.option('containerDraggingClass'),A=e.option('bodyDraggingClass')||'dragging',D=function(t){var f;S=h?$(t.currentTarget):m;var p=t[$.expando];if(p){var g=e.option('includeSelector'),O=e.option('excludeSelector'),_=t.target;if(g&&!s(_,g,S)||O&&s(_,O,S))return;$.each(T,function(e,i){if(0===t.type.indexOf(e))return f=i,!1;else return void 0;});}else if(t.type)f=T[t.type];if(!f)f=T.mouse;e.emit('pick',{mainElement:S}),w=n(S),k.left=w.left,k.top=w.top;var A=v.is('html,body'),D=!0;if(!A)D=o(v,S);var E,C,R=a(S),F=r(v);if(p)E=f.absoluteX(t)-R.x,C=f.absoluteY(t)-R.y;else E=t.offsetX,C=t.offsetY;if(D){if(!A)E-=v.scrollLeft(),C-=v.scrollTop();E+=F.x,C+=F.y;}var N,L,P,j,I=u(),q=d(),z=l(),B=c(),H=B+I,M=z+q,Y='fixed'===w.position;if(Y)if(A)N=0,L=0;else N=i(F.x,B,H),L=i(F.y,z,M);else if(A)N=-1*F.x,L=-1*F.y;else if(D)N=0,L=0;else N=F.x,L=F.y;if(null==P)if(!A&&D)P=v.prop('scrollWidth'),j=v.prop('scrollHeight');else P=v.innerWidth(),j=v.innerHeight();if(A){if(I>P)P=I;if(q>j)j=q;}if(Y){if(N+P>H)P=H-N;if(L+j>M)j=M-L;}P=Math.max(0,P-S.outerWidth(!0)),j=Math.max(0,j-S.outerHeight(!0));var W=e.option('axis');return x='y'===W?U.constant(w.left):U.variable(f[Y?'fixedX':'absoluteX'],E,N,N+P),y='x'===W?U.constant(w.top):U.variable(f[Y?'fixedY':'absoluteY'],C,L,L+j),b=0,!0;},E=function(t){if(null!=b){k.left=x(t),k.top=y(t);var i;if(0===b){if(w)S.css(w),w=null;if(i=e.emit('beforedrag',$.extend({},k)),i.isDefaultPrevented())return;if(p(),O)S.addClass(O);if(_)v.addClass(_);if(A)g.addClass(A);}if(b++,i=e.emit('drag',$.extend({},k)),!i.isDefaultPrevented())e.execute('dragAnimation',{mainElement:S,mainStyle:k});}},C=function(){if(null!=b){if(b>0){if(f(),O)S.removeClass(O);if(_)v.removeClass(_);if(A)g.removeClass(A);e.emit('afterdrag',$.extend({},k));}e.emit('drop',{mainElement:S}),b=x=y=w=S=null;}};e.execute('init',{mainElement:m,mainSelector:h,namespace:e.namespace(),downHandler:D,moveHandler:E,upHandler:C});},v.dispose=function(){m.dispose(this);},m.extend(v);var x,y,b,S,k={},U={constant:function(e){return function(){return e;};},variable:function(e,t,n,o){return function(s){return i(e(s)-t,n,o);};}},T={};return $.each(h,function(e,t){if(t.support)T[e]={absoluteX:function(e){return t.client(e).x+c();},absoluteY:function(e){return t.client(e).y+l();},fixedX:function(e){return t.client(e).x;},fixedY:function(e){return t.client(e).y;}};}),e;}),define('cc/helper/FlashUploader',['require','exports','module','../function/ucFirst','../function/ratio','../util/life','../util/supload/supload'],function(require){'use strict';function e(e){n.init(this,e);}var t=require('../function/ucFirst'),i=require('../function/ratio'),n=require('../util/life');require('../util/supload/supload');var o=window.Supload,s=e.prototype;s.type='FlashUploader',s.init=function(){var e=this,i=e.option('mainElement'),n=e.option('action'),s=e.option('data'),a={element:i[0],flashUrl:e.option('flashUrl'),action:s,accept:e.option('accept'),multiple:e.option('multiple'),data:s,header:e.option('header'),fileName:e.option('fileName'),customSettings:{uploader:e}};$.each(r,function(e,i){a['on'+t(e)]=i;});var c=new o(a);e.inner({supload:c,watchSync:{action:function(e){c.setAction(e);},data:function(e){c.setData(e);}}}),e.set({action:n,data:s});},s.getFiles=function(){return this.inner('supload').getFiles();},s.reset=function(){this.inner('supload').reset();},s.upload=function(e){this.inner('supload').upload(e);},s.stop=function(e){this.inner('supload').cancel(e);},s.enable=function(){this.inner('supload').enable();},s.disable=function(){this.inner('supload').disable();},s.dispose=function(){var e=this;n.dispose(e),e.inner('supload').dispose();},n.extend(s,['getFiles','setAction','setData']),e.STATUS_WAITING=o.STATUS_WAITING,e.STATUS_UPLOADING=o.STATUS_UPLOADING,e.STATUS_UPLOAD_SUCCESS=o.STATUS_UPLOAD_SUCCESS,e.STATUS_UPLOAD_ERROR=o.STATUS_UPLOAD_ERROR,e.ERROR_CANCEL=o.ERROR_CANCEL,e.ERROR_SECURITY=o.ERROR_SECURITY,e.ERROR_IO=o.ERROR_IO;var r={ready:function(){var e=this.customSettings.uploader;e.emit('ready');},fileChange:function(){var e=this.customSettings.uploader;e.emit('filechange');},uploadStart:function(e){var t=this.customSettings.uploader;t.emit('uploadstart',e);},uploadProgress:function(e){var t=this.customSettings.uploader;e.percent=(100*i(e.uploaded,e.total)).toFixed(2)+'%',t.emit('uploadprogress',e);},uploadSuccess:function(e){var t=this.customSettings.uploader;t.emit('uploadsuccess',e);},uploadError:function(e){var t=this.customSettings.uploader;t.emit('uploaderror',e);},uploadComplete:function(e){var t=this.customSettings.uploader;t.emit('uploadcomplete',e);}};return e;}),define('cc/ui/Dialog',['require','exports','module','../function/contains','../function/debounce','../function/pageWidth','../function/pageHeight','../function/pinGlobal','../function/dragGlobal','../util/life','../util/instance'],function(require){'use strict';function e(e){a.init(this,e);}var t=require('../function/contains'),i=require('../function/debounce'),n=require('../function/pageWidth'),o=require('../function/pageHeight'),s=require('../function/pinGlobal'),r=require('../function/dragGlobal'),a=require('../util/life'),c=require('../util/instance').window,l=e.prototype;return l.type='Dialog',l.init=function(){var e=this;e.initStruct();var i=e.option('mainElement'),n=e.option('maskElement');if(e.option('modal')){if(!n)n=$(e.option('maskTemplate'));if(!t(n,i))i.before(n);}else if(n)n=null;var o=[],s=e.option('skinClass');if(s)o.push(s);var r=e.option('draggableClass');if(e.option('draggable')&&r)o.push(r);if(o.length>0)i.addClass(o.join(' '));var a=e.option('removeOnEmpty');$.each(['content','footer'],function(t,n){var o=e.option(n),s=e.option(n+'Selector');if(o)i.find(s).html(o);else if(a)i.find(s).remove();});var c=e.option('title');if(c)i.find(e.option('titleSelector')).html(c);else if(a)i.find(e.option('headerSelector')).remove();var l=e.option('closeSelector');if(e.option('removeClose'))i.find(l).remove();var u={},d=e.option('width');switch($.type(d)){case'string':case'number':u.width=d;}var f=e.option('fixed')?'fixed':'absolute';if(i.css('position')!==f)u.position=f;if(n){var p='z-index',m=e.option('zIndex');if(!$.isNumeric(m))if(m=n.css(p),!$.isNumeric(m))m='auto';n.css(p,m),u[p]=m;}i.css(u);var h='click'+e.namespace();if(l)i.on(h,l,$.proxy(e.hide,e));if(e.option('disposeOnHide'))e.on('statechange',function(t,i){var n=i.hidden;if(n&&n.newValue===!0&&n.oldValue===!1)e.dispose();});if(n){if(e.option('hideOnClickMask'))n.on(h,function(n){if(!t(i,n.target))e.hide();});if(e.option('removeOnDispose'))e.after('dispose',function(){n.remove();});}e.inner({main:i,mask:n});var g=e.option('hidden');if(g)e.hide();else e.show();},l.show=function(){this.state('hidden',!1);},l._show=function(){if(this.is('hidden')===!1)return!1;else return void 0;},l.hide=function(){this.state('hidden',!0);},l._hide=function(){if(this.is('hidden')===!0)return!1;else return void 0;},l.refresh=function(){var e=this,t={},i=e.inner('main');t.mainElement=i,t.mainStyle=s({element:i,x:e.option('x'),y:e.option('y'),fixed:e.option('fixed')});var r=e.inner('mask');if(r)t.maskElement=r,t.maskStyle={width:n(),height:o()};e.execute(arguments[0]?'resizeWindowAnimation':'refreshAnimation',t);},l.dispose=function(){var e=this;if(a.dispose(e),!e.is('hidden'))e.hide();var t=e.inner('mask');if(t)t.off(e.namespace());},a.extend(l),e.stateUpdater={hidden:function(e){var t=this,n=t.namespace();c.off(n);var o=t.inner('dragger');if(o)o.dispose(),o=null;var s=t.inner('main'),a=t.inner('mask'),l={mainElement:s};if(a)l.maskElement=a;if(e)t.execute('hideAnimation',l);else{if(c.on('resize'+n,i(function(){t.refresh(!0);},50)),t.option('draggable'))o=r({element:s,includeSelector:t.option('draggableIncludeSelector'),excludeSelector:t.option('draggableExcludeSelector'),draggingClass:t.option('draggingClass'),dragAnimation:t.option('dragAnimation')});t.execute('showAnimation',l),t.refresh();}t.inner('dragger',o);}},e;}),define('cc/ui/Uploader',['require','exports','module','../helper/AjaxUploader','../helper/FlashUploader'],function(require){'use strict';function e(){return'files'in $('<input type="file" />')[0];}function t(){if(!XMLHttpRequest)return!1;var e=new XMLHttpRequest();return'upload'in e&&'onprogress'in e.upload;}return e()&&t()?require('../helper/AjaxUploader'):require('../helper/FlashUploader');}),define('cc/util/cookie',['require','exports','module','../function/split','../function/offsetDate'],function(require,exports){'use strict';function e(e){if(0===e.indexOf('"'))e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');var t={};try{e=decodeURIComponent(e.replace(/\+/g,' ')),$.each(i(e,';'),function(e,n){var o=i(n,'='),s=o[0],r=o[1];if(s)t[s]=r;});}catch(n){}return t;}function t(e,t,i){var o=i.expires;if($.isNumeric(o))o=n(new Date(),o);document.cookie=[encodeURIComponent(e),'=',encodeURIComponent(t),o?';expires='+o.toUTCString():'',i.path?';path='+i.path:'',i.domain?';domain='+i.domain:'',i.secure?';secure':''].join('');}var i=require('../function/split'),n=require('../function/offsetDate');exports.get=function(t){var i=e(document.cookie);return'string'===$.type(t)?i[t]:i;},exports.set=function(e,i,n){if($.isPlainObject(e))n=i,i=null;if(n=$.extend({},exports.defaultOptions,n),null===i)$.each(e,function(e,i){t(e,i,n);});else t(e,i,n);},exports.remove=function(e,i){i=i||{},i.expires=-1,t(e,'',$.extend({},exports.defaultOptions,i));},exports.defaultOptions={};}),define('cc/util/event',['require','exports','module','../function/extend','../function/createEvent'],function(require,exports){'use strict';var e=require('../function/extend'),t=require('../function/createEvent'),i={get$:function(){var e=this;if(!e.$)e.$=$({});return e.$;},on:function(e,t,i){return this.get$().on(e,t,i),this;},once:function(e,t,i){return this.get$().one(e,t,i),this;},off:function(e,t){return this.get$().off(e,t),this;},emit:function(e,i){return e=t(e),this.get$().trigger(e,i),e;}};exports.extend=function(t){e(t,i);};}),define('cc/util/instance',['require','exports','module'],function(require,exports){exports.window=$(window),exports.document=$(document),exports.html=$(document.documentElement),exports.body=$(document.body);}),define('cc/util/json',['require','exports','module'],function(require,exports,module){if('object'!=typeof JSON)JSON={};return function(){'use strict';function f(e){return 10>e?'0'+e:e;}function this_value(){return this.valueOf();}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return'string'==typeof t?t:'\\u'+('0000'+e.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+e+'"';}function str(e,t){var i,n,o,s,r,a=gap,c=t[e];if(c&&'object'==typeof c&&'function'==typeof c.toJSON)c=c.toJSON(e);if('function'==typeof rep)c=rep.call(t,e,c);switch(typeof c){case'string':return quote(c);case'number':return isFinite(c)?String(c):'null';case'boolean':case'null':return String(c);case'object':if(!c)return'null';if(gap+=indent,r=[],'[object Array]'===Object.prototype.toString.apply(c)){for(s=c.length,i=0;s>i;i+=1)r[i]=str(i,c)||'null';return o=0===r.length?'[]':gap?'[\n'+gap+r.join(',\n'+gap)+'\n'+a+']':'['+r.join(',')+']',gap=a,o;}if(rep&&'object'==typeof rep){for(s=rep.length,i=0;s>i;i+=1)if('string'==typeof rep[i])if(n=rep[i],o=str(n,c))r.push(quote(n)+(gap?': ':':')+o);}else for(n in c)if(Object.prototype.hasOwnProperty.call(c,n))if(o=str(n,c))r.push(quote(n)+(gap?': ':':')+o);return o=0===r.length?'{}':gap?'{\n'+gap+r.join(',\n'+gap)+'\n'+a+'}':'{'+r.join(',')+'}',gap=a,o;}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;if('function'!=typeof Date.prototype.toJSON)Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+f(this.getUTCMonth()+1)+'-'+f(this.getUTCDate())+'T'+f(this.getUTCHours())+':'+f(this.getUTCMinutes())+':'+f(this.getUTCSeconds())+'Z':null;},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value;var gap,indent,meta,rep;if('function'!=typeof JSON.stringify)meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},JSON.stringify=function(e,t,i){var n;if(gap='',indent='','number'==typeof i)for(n=0;i>n;n+=1)indent+=' ';else if('string'==typeof i)indent=i;if(rep=t,t&&'function'!=typeof t&&('object'!=typeof t||'number'!=typeof t.length))throw new Error('JSON.stringify');return str('',{'':e});};if('function'!=typeof JSON.parse)JSON.parse=function(text,reviver){function walk(e,t){var i,n,o=e[t];if(o&&'object'==typeof o)for(i in o)if(Object.prototype.hasOwnProperty.call(o,i))if(n=walk(o,i),void 0!==n)o[i]=n;else delete o[i];return reviver.call(e,t,o);}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text))text=text.replace(rx_dangerous,function(e){return'\\u'+('0000'+e.charCodeAt(0).toString(16)).slice(-4);});if(rx_one.test(text.replace(rx_two,'@').replace(rx_three,']').replace(rx_four,'')))return j=eval('('+text+')'),'function'==typeof reviver?walk({'':j},''):j;throw new SyntaxError('JSON.parse');};}(),JSON;}),define('cc/util/life',['require','exports','module','../function/guid','../function/around','../function/extend','../function/ucFirst','../function/nextTick','../function/toBoolean','../function/createEvent','../function/replaceWith','../function/offsetParent','./event'],function(require,exports){'use strict';function e(e,t,i,n,o){return function(a,c,l){var u=this;if($.isPlainObject(a))return l=c,void $.each(a,function(e,t){u[i](e,t,l);});l=l||{};var d=u[n](a),p=u.constructor[e+'Validator'];if(p)if($.isFunction(p[a]))c=p[a].call(u,c,l);if($.isFunction(o))c=o(u,c,l);if(d!==c||l.force)if(u[t][a]=c,!l.silent){var m={};s(m,l),m.newValue=c,m.oldValue=d;var h={};h[a]=m;var g=function(e){if(e&&e[a])u.execute(e[a],[c,d,m]);};if(g(u.inner('watchSync')),g(u.option('watchSync')),l.sync)return g(u.constructor[e+'Updater']),g(u.option('watch')),void u.emit(e+'change',h);var v=u.inner(e+'Changes');if(!v)v={},u.inner(e+'Changes',v);if($.extend(v,h),!u.inner(f))u.inner(f,r(function(){u.sync(f);}));}};}function t(){this.error('initStruct() can just call one time.');}function i(e,t,i,n,o){var s,r='before'===n?'_'+t:t+'_',a=e[r];if($.isFunction(a))if(s=a.apply(e,i),s!==!1&&!$.isPlainObject(s))s=null;if(s===!1)return!1;var c=!1;if(s&&s.dispatch)c=!0,delete s.dispatch;if(o=$.Event(o),o.type=n+t,e.emit(o,s),c)e.dispatch(o,s);if(o.isDefaultPrevented())return!1;else return void 0;}var n=require('../function/guid'),o=require('../function/around'),s=require('../function/extend'),r=(require('../function/ucFirst'),require('../function/nextTick')),a=require('../function/toBoolean'),c=require('../function/createEvent'),l=require('../function/replaceWith'),u=(require('../function/offsetParent'),require('./event')),d={},f='__update_async__',p={},m={initStruct:function(){var e=this,i=e.option('mainElement'),n=e.option('mainTemplate');if('string'===$.type(n)){var o=e.option('share'),s=e.type+n;if(o)i=p[s];var r;if(!i){if(r=$(n),o)p[s]=r;}else if(e.option('replace'))l(i,r=$(n));else i.html(n);if(r)i=r,e.option('mainElement',i);}var a=e.option('parentSelector');if(a&&!i.parent().is(a))i.appendTo(a);e.initStruct=t;},warn:function(e){if('undefined'!=typeof console)console.warn(['[CC warn]',this.type,e].join(' '));},error:function(e){throw new Error(['[CC error]',this.type,e].join(' '));},live:function(e,t,i){var n=this,o=n.inner('main');if(o)o.on(e+n.namespace(),t,i);return n;},emit:function(e,t){var i=this,n=i.option('context')||i;e=c(e),e.cc=n;var o=[e];if($.isPlainObject(t))o.push(t);e.type=e.type.toLowerCase();var s=n.get$();s.trigger.apply(s,o);var r='on'+e.type;if(!e.isPropagationStopped()&&n.execute(r,o)===!1)e.preventDefault(),e.stopPropagation();return n.execute(r+'_',o),e;},dispatch:function(e,t){if(!e.isPropagationStopped()){if(!e.originalEvent)e.originalEvent={preventDefault:$.noop,stopPropagation:$.noop};var i=$.Event(e);if(i.type='dispatch',this.emit(i,t),i.isPropagationStopped())e.preventDefault(),e.stopPropagation();}},before:function(e,t){return this.on('before'+e.toLowerCase(),t);},after:function(e,t){return this.on('after'+e.toLowerCase(),t);},find:function(e){var t=this.inner('main');if(t){var i=t.find(e);if(i.length)return i;}},appendTo:function(e){var t=this.inner('main');if(t)t.appendTo(e);},prependTo:function(e){var t=this.inner('main');if(t)t.prependTo(e);},execute:function(e,t){var i=this,n=e;if('string'===$.type(e))n=i.option(e);if($.isFunction(n)){var o=i.option('context')||i;if($.isArray(t))return n.apply(o,t);else return n.call(o,t);}},renderWith:function(e,t,i){var n=this;if(!t)if(t=n.option('renderTemplate'),!t)t=n.option('mainTemplate');if(!i)i=n.option('mainElement');var o=n.option('renderSelector');if(o)i=i.find(o);var s;if($.isPlainObject(e)||$.isArray(e))s=n.execute('render',[e,t]);else if('string'===$.type(e))s=e;i.html(s);},namespace:function(){return'.'+this.guid;},option:function(e,t){var i=this;if(1===arguments.length&&'string'===$.type(e))return i.options[e];else{if($.isPlainObject(e))return void $.each(e,function(e,t){i.option(e,t);});i.options[e]=t;}},inner:function(e,t){var i=this,n=i.inners||{};if(1===arguments.length&&'string'===$.type(e))return n[e];else{if($.isPlainObject(e))return void $.each(e,function(e,t){i.inner(e,t);});n[e]=t;}},is:function(e){return this.states[e];},state:e('state','states','state','is',function(e,t){return a(t,!1);}),get:function(e){return this.properties[e];},set:e('property','properties','set','get')},h={sync:function(){var e=this,t=function(t,i,n){$.each(t,function(o,s){return e.execute(i[o],[s.newValue,s.oldValue,n?t:s]);});};if($.each(['property','state'],function(i,n){var o=e.inner(n+'Changes');if(o){e.inner(n+'Changes',null);var s=e.constructor[n+'Updater'];if(s)t(o,s,!0);var r=e.option('watch');if(r)t(o,r);e.emit(n+'change',o);}}),arguments[0]!==f)e.execute(e.inner(f));e.inner(f,!1);},_sync:function(){if(!this.inner(f))return!1;else return void 0;},_init:function(){var e='initCalled';if(this.is(e))return!1;else return void this.state(e,!0);},_dispose:function(){var e='disposeCalled';if(this.is(e))return!1;else return void this.state(e,!0);}};exports.extend=function(e,t){s(e,h),$.each(e,function(n,s){var r=n.indexOf('_');if($.isFunction(s)&&0!==r&&r!==n.length-1)if(!($.isArray(t)&&$.inArray(n,t)>=0)){var a=function(e){return i(this,n,arguments,'before',e);},c=function(e){var t=this,o=arguments,r=function(){return i(t,n,o,'after',e);};if(s.length+1===o.length){var a=o[o.length-1];if(a&&$.isFunction(a.then))return void a.then(r);}r();};o(e,n,a,c);}}),s(e,m),u.extend(e);},exports.init=function(e,t){if(!t)t={};return s(t,e.constructor.defaultOptions),t.onafterinit_=function(){e.state('inited',!0);},t.onafterdispose_=function(){e.state('disposed',!0),e.off();var t=e.inner('main');if(e.option('removeOnDispose')&&t)t.remove();r(function(){delete d[e.guid],e.properties=e.options=e.changes=e.states=e.inners=e.guid=null;});},d[e.guid=n()]=e,e.properties={},e.options=t,e.states={},e.inners={},e.init(),e;},exports.dispose=function(e){e.sync();var t=e.inner('main')||e.option('mainElement');if(t)t.off(e.namespace());};}),define('cc/util/mimeType',['require','exports','module'],function(){'use strict';return{html:'text/html',htm:'text/html',shtml:'text/html',xml:'text/xml',css:'text/css',js:'application/x-javascript',json:'application/json',atom:'application/atom+xml',rss:'application/rss+xml',mml:'text/mathml',txt:'text/plain',jad:'text/vnd.sun.j2me.app-descriptor',wml:'text/vnd.wap.wml',htc:'text/x-component',jpg:'image/jpeg',jpeg:'image/jpeg',png:'image/png',gif:'image/gif',tif:'image/tiff',tiff:'image/tiff',wbmp:'image/vnd.wap.wbmp',ico:'image/x-icon',jng:'image/x-jng',bmp:'image/x-ms-bmp',svg:'image/svg+xml',svgz:'image/svg+xml',webp:'image/webp',mp3:'audio/mpeg',wma:'audio/x-ms-wma',wav:'audio/x-wav',mid:'audio/midi',midd:'audio/midi',kar:'audio/midi',ogg:'audio/ogg',m4a:'audio/x-m4a',ra:'audio/x-realaudio',ram:'audio/x-pn-realaudio',mod:'audio/mod','3gp':'video/3gpp','3gpp':'video/3gpp',mp4:'video/mp4',mpeg:'video/mpeg',mpg:'video/mpeg',mov:'video/quicktime',webm:'video/webm',flv:'video/x-flv',m4v:'video/x-m4v',mng:'video/x-mng',asx:'video/x-ms-asf',asf:'video/x-ms-asf',wmv:'video/x-ms-wmv',avi:'video/x-msvideo',rm:'video/vnd.rn-realvideo',rmvb:'video/vnd.rn-realvideo',ts:'video/MP2T',dv:'video/x-dv',mkv:'video/x-matroska',jar:'application/java-archive',war:'application/java-archive',ear:'application/java-archive',hqx:'application/mac-binhex40',pdf:'application/pdf',ps:'application/postscript',eps:'application/postscript',ai:'application/postscript',rtf:'application/rtf',wmlc:'application/vnd.wap.wmlc',kml:'application/vnd.google-earth.kml+xml',kmz:'application/vnd.google-earth.kmz','7z':'application/x-7z-compressed',cco:'application/x-cocoa',jardiff:'application/x-java-archive-diff',jnlp:'application/x-java-jnlp-file',run:'application/x-makeself',pl:'application/x-perl',pm:'application/x-perl',prc:'application/x-pilot',pdb:'application/x-pilot',rar:'application/x-rar-compressed',rpm:'application/x-redhat-package-manager',sea:'application/x-sea',swf:'application/x-shockwave-flash',sit:'application/x-stuffit',tcl:'application/x-tcl',tk:'application/x-tcl',der:'application/x-x509-ca-cert',pem:'application/x-x509-ca-cert',crt:'application/x-x509-ca-cert',xpi:'application/x-xpinstall',xhtml:'application/xhtml+xml',zip:'application/zip',bin:'application/octet-stream',exe:'application/octet-stream',dll:'application/octet-stream',deb:'application/octet-stream',dmg:'application/octet-stream',eot:'application/octet-stream',iso:'application/octet-stream',img:'application/octet-stream',msi:'application/octet-stream',msp:'application/octet-stream',msm:'application/octet-stream',doc:'application/msword',xls:'application/vnd.ms-excel',ppt:'application/vnd.ms-powerpoint',docx:'application/vnd.openxmlformats-officedocument.wordprocessingml.document',xlsx:'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',pptx:'application/vnd.openxmlformats-officedocument.presentationml.presentation'};}),define('cc/util/supload/supload',['require','exports','module','../cookie','../json'],function(require){function e(e){$.extend(this,e),this.init();}function t(){return'_Supload_'+o++;}if(window.Supload===e)return window.Supload;var i=require('../cookie'),n=require('../json');e.prototype={constructor:e,init:function(){var n=t();this.movieName=n;var o=this.element;if('string'===$.type(o))o=document.getElementById(o);var s=this.data||(this.data={});$.each(i.get(),function(e,t){if('undefined'===$.type(s[e]))s[e]=t;});var r=e.createSWF(n,this.flashUrl,this.getFlashVars());o.parentNode.replaceChild(r,o),this.element=r,e.instances[n]=this;},getFlashVars:function(){var t=this,i=[];return $.each(['movieName','action','accept','multiple','fileName','data','header'],function(e,o){var s=t[o];if(null!=s){if($.isPlainObject(s))s=n.stringify(s);else if($.isArray(s))s=s.join(',');i.push(o+'='+encodeURIComponent(s));}}),i.push('projectName='+e.projectName),i.join('&amp;');},getFiles:function(){return this.element.getFiles&&this.element.getFiles()||[];},setAction:function(e){this.element.setAction&&this.element.setAction(e);},setData:function(e){this.element.setData&&this.element.setData(e);},reset:function(){this.element.reset&&this.element.reset();},upload:function(e){this.element.upload&&this.element.upload(e);},cancel:function(e){this.element.cancel&&this.element.cancel(e);},enable:function(){this.element.enable&&this.element.enable();},disable:function(){this.element.disable&&this.element.disable();},dispose:function(){this.element.dispose&&this.element.dispose(),e.instances[this.movieName]=null,window[this.movieName]=null;}},e.projectName='Supload',e.createSWF=function(t,i,n){var o='<object id="'+t+'" class="'+e.projectName.toLowerCase()+'" type="application/x-shockwave-flash" data="'+i+'"><param name="movie" value="'+i+'" /><param name="allowscriptaccess" value="always" /><param name="wmode" value="transparent" /><param name="flashvars" value="'+n+'" /></object>';return $(o)[0];},e.instances={},e.STATUS_WAITING=0,e.STATUS_UPLOADING=1,e.STATUS_UPLOAD_SUCCESS=2,e.STATUS_UPLOAD_ERROR=3,e.ERROR_CANCEL=0,e.ERROR_SECURITY=1,e.ERROR_IO=2;var o=178245;return window.Supload=e,e;}),define('cc/util/touch',['require','exports','module','../function/eventPage','../function/eventOffset'],function(require){'use strict';function t(e){return e.originalEvent.changedTouches[0];}var i=require('../function/eventPage'),n=require('../function/eventOffset'),o=document.createElement('div'),s={support:'ontouchend'in o,click:'touchstart',down:'touchstart',move:'touchmove',up:'touchend',page:function(e){var i=t(e);return{x:i.pageX,y:i.pageY};},client:function(e){var i=t(e);return{x:i.clientX,y:i.clientY};},offset:function(e){var i=t(e);return{x:i.offsetX,y:i.offsetY};}},r={support:'onclick'in o,click:'click',down:'mousedown',move:'mousemove',up:'mouseup',page:function(e){return i(e);},client:function(e){return{x:e.clientX,y:e.clientY};},offset:function(){return n(e);}};return o=null,{touch:s,mouse:r};}),define('userCenter/common/function/ractiveDialog_e00233834c',['require','exports','module','custom/ui/Dialog'],function(require){'use strict';var e=require('custom/ui/Dialog');return function(t,i,n){var o,s;if(!$.isPlainObject(i))i={};var r=i.onbeforedispose;if(i.onbeforedispose=function(){if($.isFunction(r))r.apply(this,arguments);s.teardown();},$.isFunction(t))i.content=' ',i.removeOnEmpty=!0,o=new e(i),s=new Ractive({el:o.find('> .body')[0],data:{options:n},template:'<DialogBodyComponent options="{{options}}" />',components:{DialogBodyComponent:t}}),s=s.findComponent('DialogBodyComponent');else if($.isPlainObject(t)){var a=t.template,c=$(a);i.mainElement=c,i.mainTemplate=null,o=new e(i);var l=a.indexOf('>'),u=a.lastIndexOf('<');t.template=a.substring(l+1,u),t.el=c[0],s=new Ractive(t);}return s.getElement=function(){return s.el;},s.closeDialog=function(){o.hide();},o.ractive=s,o;};}),define('userCenter/common/service_1288b24a55',['require','exports','module'],function(require,exports){'use strict';function e(e,t){var i=e;if(t)i+=$.param(t);return i;}function t(t,i,a){i=i||{},a=$.extend({},n,a);var c,l;if(s[t])l=e(t,i),c=r[l];var u=$.Deferred();if(c)if(!c.response)c.deferredList.push(u);else u.resolve(c.response);else{var d=userData.number||0;if(!o[t])i._user_number=d,$.extend(i,siteData.monkey);if($.ajax({url:t,data:i,method:'post',dataType:'json',timeout:a.timeout,async:a.sync?!1:!0}).then(function(e){if(s[t])c=r[l],c.response=e,$.each(c.deferredList,function(t,i){if(e&&0===e.code)i.resolve(e);else i.reject(e);}),c.deferredList.length=0;else if(e&&0===e.code)u.resolve(e);else{var i=e.msg;if(i&&!a.preventError)alert({title:'提示',content:i});u.reject(e);}},function(e,t){if('timeout'===t||'error'===t)u.reject({code:-1});}),s[t])r[l]={},r[l].deferredList=[u];}return u;}function i(e,t){return $.ajax({url:e,data:t,dataType:'jsonp'});}var n={timeout:5000,sync:!1,stringify:!1,preventError:!1},o={'/area/list':1,'/subject/getList':1},s={'/user/basicInfo':1},r={};exports.post=t,exports.jsonp=i,exports.getUserBasicInfo=function(e){var i;if(e&&null!=e.userId&&null!=e.userType)i={user_id:e.userId,user_type:e.userType};return t('/user/basicInfo',i);},exports.getCourseList=function(){return t('/lesson/list');},exports.getUserType=function(){return t('/user/roles');},exports.sendInviteCode=function(e){var i=$.extend(e.formData||{},{invite_code:e.inviteCode,role:e.role});return t('/user/switch_role_ajax',i);},exports.getCDNSpeedTestUrls=function(){return t('/video/getSpeedTestUrl');};}),define('userCenter/teacherCenter/netdiskShare/ShareInfo_html',function(){return'<div class="netdisk-share-info">{{#if !options.isFromNetdisk}}<div class="inline muted">文件添加到\uFF1A资料库目录</div><div class="help info texts"><i class="text primary icon-help-o"></i><span class="text"data-title="严禁利用跟谁学网站上传和传播暴力恐怖\u3001色情及其他违法信息\uFF0C一经发现将严格按照法律法规处理"data-skin="primary"data-placement="bottomLeft"data-offset-x="80"data-max-width="30em">上传须知</span></div><div class="button text small upload-wrapper primary {{#if !canShare}} disabled{{/if}}" ><input type="file">本地上传</div>{{else}}<div class="texts crumbs"><span class="info text" on-click="changeDirectory()">我的资料库</span>{{#if !truncateCrumbs}}{{#each crumbs:index}}<span class="text">></span><span class="text" on-click="changeDirectory(this, index)">{{{cutString(name, 20)}}}</span>{{/each}}{{else}}{{#each crumbs:index}}{{#if index < 1 || index == crumbs.length - 1 || index == crumbs.length - 2}}<span class="text">></span><span class="text" on-click="changeDirectory(this, index)">{{{cutString(name, 20)}}}</span>{{/if}}{{#if index == crumbs.length - 3}}<span class="text">></span><span class="text">...</span>{{/if}}{{/each}}{{/if}}</div>{{/if}}<div class="items-list">{{#each options.files:index}}<div class="item"><span class="texts">{{#if status == UPLOADER_STATUS_SUCCESS}}<i class="text success icon-check-circle"></i>{{elseif status == UPLOADER_STATUS_ERROR || status == UPLOADER_STATUS_CANCELED || status == UPLOADER_STATUS_COPYNAME}}<i class="text error icon-info-circle"></i>{{/if}}<span class="text file-name">{{{cutString(file.name, 60)}}}</span></span><br><span class="status {{#if status == UPLOADER_STATUS_ERROR || status == UPLOADER_STATUS_CANCELED || status == UPLOADER_STATUS_COPYNAME}} error{{else}} muted{{/if}}">{{#if status == UPLOADER_STATUS_SUCCESS}}恭喜您\uFF0C上传成功{{elseif status == UPLOADER_STATUS_UPLOADING}}{{#if progress != \'100%\'}}<div class="progress-wrapper"><div class="label" style="width: {{progress}}"></div><span class="progress-span">{{progress}}</span></div><span class="button cancel" on-click="cancelUpload(index)">取消</span><div class="arguments texts"><span class="text">已上传\uFF1A{{formateSize(uploaded)}}</span><span class="text">速度\uFF1A{{formatSpeed(speed)}}</span><span class="text">剩余时间\uFF1A{{formatRestTime(restTime)}} s</span></div>{{else}}正在上传到服务器...{{/if}}{{elseif status == UPLOADER_STATUS_ERROR}}对不起\uFF0C上传失败{{elseif status == UPLOADER_STATUS_CANCELED}}已取消上传{{elseif status == UPLOADER_STATUS_COPYNAME}}文件重名上传失败{{/if}}</span></div>{{/each}}</div>{{#if options.isFromNetdisk}}<div class="items-list-from-netdisk"><div class="item item-header"><div class="item-name"><input class="checked-all" type="checkbox" checked="{{checkedAll}}"><span class="checkspan"><i class="icon icon-unchecked"></i><i class="icon icon-checked info"></i></span>文件名称</div><div class="item-size">文件大小</div><div class="item-status">状态</div></div>{{#if netDiskFiles.length > 0}}<div class="item-list">{{#each netDiskFiles}}<div class="item"><div class="item-name {{#if hasSubDirectory}} has-sub{{/if}}" on-click="intoSubDirectory(this)">{{#if !hasSubDirectory}}<label class="label checkbox fluid">{{#if !hasShare}}<input type="checkbox" checked="{{checked}}"><span class="checkspan"><i class="icon icon-unchecked"></i><i class="icon icon-checked info"></i></span>{{else}}<div class="solid"></div>{{/if}}{{#if type == \'jpg\' || type == \'png\' || type == \'jpeg\' || type == \'svg\' || type == \'gif\'}}<img class="image-icon" src="{{rootUrl}}/s-img.png">{{elseif type == \'audio\'}}<img class="image-icon" src="{{rootUrl}}/s-audio.png">{{elseif type == \'excel\' || type == \'xlsx\' || type == \'xls\'}}<img class="image-icon" src="{{rootUrl}}/s-excel.png">{{elseif type == \'pdf\'}}<img class="image-icon" src="{{rootUrl}}/s-pdf.png">{{elseif type == \'ppt\' || type == \'pptx\'}}<img class="image-icon" src="{{rootUrl}}/s-ppt.png">{{elseif type == \'txt\'}}<img class="image-icon" src="{{rootUrl}}/s-txt.png">{{elseif type == \'video\'}}<img class="image-icon" src="{{rootUrl}}/s-video.png">{{elseif type == \'doc\' || type == \'docx\'}}<img class="image-icon" src="{{rootUrl}}/s-word.png">{{elseif type == \'zip\' || type == \'rar\'}}<img class="image-icon" src="{{rootUrl}}/s-zip.png">{{elseif type == \'\'}}<img class="image-icon" src="{{rootUrl}}/s-folder.png">{{else}}<img class="image-icon" src="{{rootUrl}}/s-unknown.png">{{/if}}{{{cutString(name, 20)}}}</label>{{else}}{{#if type == \'\'}}<img class="image-icon" src="{{rootUrl}}/s-folder.png">{{else}}<img class="image-icon" src="{{rootUrl}}/s-unknown.png">{{/if}}{{{cutString(name, 20)}}}{{/if}}</div><div class="item-size">{{#if !hasSubDirectory}}{{size}}{{else}}-{{/if}}</div><div class="item-status{{#if hasShare}} success{{/if}}">{{#if !hasSubDirectory}}{{#if hasShare}}已共享{{else}}未共享{{/if}}{{else}}-{{/if}}</div></div>{{/each}}</div>{{elseif netDiskFiles == null}}<div class="list-body">资料库中还没有文件\uFF0C试试<span class="link info" on-click="uploadFromLocal()">本地上传</span></div>{{else}}<div class="list-body">正在加载...</div>{{/if}}</div>{{/if}}<div class="footer"><span class="primary">资料设置</span><div class="choose"><label class="label checkbox"><input type="checkbox" checked="{{canDownload}}" {{#if !cancel}} disabled{{/if}}>允许学生下载</label><label class="label checkbox"><input type="checkbox" checked="{{isOpen}}">公开资料</label></div><div class="error">{{#if downloadTips}}{{downloadTips}}{{/if}}</div><div class="button primary{{#if !canShare}} disabled{{/if}} submit-button" on-click="shareComplete()">完成</div></div><style>{{style}}</style></div>';}),define('userCenter/teacherCenter/netdiskShare/ShareInfo_dc4a231594',['require','exports','custom/ui/Uploader','./service_5ad69e082e','cc/function/divide','cc/function/multiply','cc/util/json','./config_c8f4d9ae8d','./ShareInfo_html','./ShareInfo_css'],function(require){'use strict';var e=!1,t=require('custom/ui/Uploader'),i=require('./service_5ad69e082e'),n=(require('cc/function/divide'),require('cc/function/multiply'),require('cc/util/json')),o=require('./config_c8f4d9ae8d'),s=200,r=1048576,a=48,c=['pdf','doc','docx','xls','xlsx','ppt','pptx','jpg','jpeg','png','txt','zip','rar'],l=['xml','gif','bmp','svg','ps','ai','rar','swf','zip'],u='';if('test'==siteData.env)u='/tcenter/courses/files/upload';else u='http://upload-file.genshuixue.com/tcenter/courses/files/upload';var d=!0;return Ractive.extend({template:require('./ShareInfo_html'),data:function(){return{style:require('./ShareInfo_css'),formateSize:function(e){if(null==e)e=0;var t=0;if(e>r)t=(e/r).toFixed(2)+'MB';else if(e>1024)t=(e/1024).toFixed(2)+'KB';else t=e.toFixed(2)+'B';return t;},formatSpeed:function(e){if(null==e)e=0;var t=0;if(null==e)e=0;if(e>r)t=(e/r).toFixed(2)+'MB/s';else if(e>1024)t=(e/1024).toFixed(2)+'KB/s';else t=e.toFixed(2)+'B/s';return t;},formatRestTime:function(e){if(null==e)e=0;if(0>e)return 0;else return e.toFixed(2);},UPLOADER_STATUS_UPLOADING:o.UPLOADER_STATUS_UPLOADING,UPLOADER_STATUS_SUCCESS:o.UPLOADER_STATUS_SUCCESS,UPLOADER_STATUS_ERROR:o.UPLOADER_STATUS_ERROR,UPLOADER_STATUS_CANCELED:o.UPLOADER_STATUS_CANCELED,UPLOADER_STATUS_COPYNAME:o.UPLOADER_STATUS_COPYNAME,M_SIZE:r,rootUrl:siteData.source+'/userCenter/teacherCenter/netdiskShare/img',netDiskFiles:[],crumbs:[],truncateCrumbs:!1,canDownload:!0,isOpen:!1,moveIndexs:[],options:{isFromNetdisk:!1,files:[],courseNumber:'',courseType:'',close:$.noop,uploadFromLocal:$.noop,stop:$.noop,fileCount:0,refresh:$.noop},canShare:!0,cancel:!0,downloadTips:''};},computed:{checkedAll:{get:function(){return this.get('checkedFiles').length===this.get('totalFiles').length&&0!=this.get('successUplodeFiles').length;},set:function(e){var t={},i=this.get('netDiskFiles');$.each(i,function(i,n){if(!n.hasSubDirectory&&!n.hasShare)t['netDiskFiles.'+i+'.checked']=e;}),this.set(t);}},checkedFiles:function(){var e=[];return $.each(this.get('netDiskFiles'),function(t,i){if(i.checked&&!i.hasSubDirectory&&!i.hasShare)e.push(i);}),e;},totalFiles:function(){var e=[];return $.each(this.get('netDiskFiles'),function(t,i){if(!i.hasSubDirectory&&!i.hasShare)e.push(i);}),e;}},onrender:function(){var i=this,d=$(i.getElement());if(e=i.get('options.isFromNetdisk')){i.getNetdiskData();var f,p,m,h,g,v,x=[],y='';d.on('mousedown',d.find('.item-list'),function(e){var t={netDiskFiles:i.get('netDiskFiles')};f=e.clientY;var n=$(e.target).closest('.item');if(g=n.index(),g>=0)v=t.netDiskFiles[g].checked;}).on('mouseup',d.find('.item-list'),function(e){if(f=y='',x=[],m&&h){var t=$(e.target).closest('.item'),n=t.index(),o=n;if(g>o){var s=g;g=o,o=s;}var r=i.get('netDiskFiles');$.each(r,function(e,t){if(e>=g&&o>=e)t.checked=!v;}),i.set({netDiskFiles:r,moveIndexs:[]}),m=h='';}}).mousemove(function(e){if(f)if(p=f>e.clientY?f-e.clientY:e.clientY-f,m=f>e.clientY?'up':'down',p>a){var t=$(e.target).closest('.item'),n=t.index();if(n>0&&-1==x.indexOf(n)){if(0==x.length)return void x.push(g);{x.pop();}if('up'==m)x=[n,g];else x=[g,n];}i.set('moveIndexs',x),h=Math.ceil(p/a);}else if(x)x=[g,g],i.set('moveIndexs',x);}),i.observe('moveIndexs',function(e){if(0!=e.length){var t={},n=i.get('netDiskFiles');$.each(n,function(i){if(e[0]<=i&&i<=e[1])t['netDiskFiles.'+i+'.checked']=!v;});var o='up'==m;if(!y)o?y=e[0]:y=e[1];if(o)if(e[0]>y)t['netDiskFiles.'+y+'.checked']=!1,y=e[0];else y=e[0];else if(e[1]<y||!e[1])t['netDiskFiles.'+y+'.checked']=!1,y=e[1];else y=e[1];i.set(t);}}),i.observe('netDiskFiles.*.checked',function(){var e=i.get('netDiskFiles'),t={},n=0,o=[];if($.each(e,function(e,t){if(t.checked){if(-1!=l.indexOf(t.fileType)&&-1==o.indexOf(t.fileType))o.push(t.fileType);n++;}}),o.length>0)t.cancel=!1,t.canDownload=!0,t.downloadTips='包含无法在线观看的文件类型\uFF08'+o.join('\uFF0C')+'\uFF09\uFF0C只能允许学生下载';else t.downloadTips='',t.cancel=!0;if(0==n)t.canShare=!1;else t.canShare=!0;i.set(t);}),i.observe('crumbs',function(){var e=i.get('crumbs');if(e.length>0){var t=34,n=0;if($.each(e,function(e,t){if(t.name.length>10)n+=10;else n+=t.name.length;}),n>t)i.set('truncateCrumbs',!0);}});}else{i.observe('options.files',function(){var e=i.get('options.files'),t={},n=!0,s=[];$.each(e,function(e,t){if(t.status==o.UPLOADER_STATUS_UPLOADING)n=!1;if(t.status==o.UPLOADER_STATUS_SUCCESS)if(-1!=l.indexOf(t.file.type))s.push(t.file.type);}),t.downloadTips=s.length>0?'包含无法在线观看的文件类型\uFF08'+s.join('\uFF0C')+'\uFF09\uFF0C只能允许学生下载':'',t.canDownload=!0,t.cancel=s.length>0?!1:!0,t.canShare=n?!0:!1,i.set('options.files',e),i.set(t);});var b=function(e,t){var n={},o='options.files.'+e+'.';$.each(t,function(e,t){n[o+e]=t;}),i.set(n);},S=function(e){b(e.index,{status:e.status});},k=function(e,t){b(e.index,{fid:t.data.fid});};i.uploader=new t({mainElement:d.find('input[type="file"]'),multiple:!0,ignoreError:!0,action:u,data:{user_number:userData.number},fileName:'Filedata',onfilechange:function(){var e,t=i.uploader.getFiles(),n=[],a=0;if($.each(t,function(e,t){if(a+=t.file.size,$.inArray(t.file.type,c)<0&&-1==n.indexOf(t.file.type))n.push(t.file.type);}),i.get('options.fileCount')+t.length>30)e='每节课的资料文件不能超过30个\uFF0C若您的文件过多\uFF0C建议采用压缩包上传';if(n.length>0)e=n.join('\uFF0C')+'为不可上传的文件\uFF0C请勿上传';if(a>s*r)e='资料库上传资料不能超过 200 MB';if(e)return void alert({title:'温馨提示',content:e});var l=i.get('options.files'),u=[];$.each(l,function(e,t){if(t.status==o.UPLOADER_STATUS_SUCCESS)u.push(t.file.name);});var d=[];$.each(t,function(e,n){{var s;t[e];}if(-1!=u.indexOf(n.file.name))s=o.UPLOADER_STATUS_COPYNAME;else{i.uploader.upload(e);var s=n.status;}d.push({index:n.index,file:n.file,status:s,progress:0});}),l=d.concat(l),i.set('options.files',l);},onuploadstart:function(e,t){S(t.fileItem),b(t.fileItem.index,{startTime:$.now()});},onuploadprogress:function(e,t){var n=t.fileItem,o=i.get('options.files.'+n.index+'.startTime'),s=t.uploaded/(0.001*($.now()-o)),r=(t.total-t.uploaded)/s;b(n.index,{progress:t.percent,uploaded:t.uploaded,speed:s,restTime:r});},onuploadsuccess:function(e,t){var s=n.parse(t.responseText);if(0!=s.code)return i.set('options.files.'+t.fileItem.index+'.status',o.UPLOADER_STATUS_ERROR),void alert({title:'温馨提示',content:s.msg});else return S(t.fileItem),void k(t.fileItem,s);},onuploaderror:function(e,n){if(n.errorCode===t.ERROR_CANCEL)i.set('options.files.'+n.fileItem.index+'.status',o.UPLOADER_STATUS_CANCELED);else S(n.fileItem);},onuploadcomplete:function(){i.uploader.reset();}}),i.observe('canShare',function(e){if(!e)i.uploader.disable();else i.uploader.enable();});}},onteardown:function(){if(this.uploader)this.uploader.dispose();},uploadFromLocal:function(){var e=this;e.get('options').uploadFromLocal();},intoSubDirectory:function(e){var t=this;if(e.hasSubDirectory&&d){var i=e.path,n=e.name,o=e.fid,s={},r=t.get('crumbs');r.push({name:n,path:i,fid:o}),s.crumbs=r,t.getNetdiskData(i),t.set(s);}},changeDirectory:function(e,t){var i=this,n=i.get('crumbs');if(n.length!=t+1){var o={};o.crumbs=n.slice(0,t+1);var s=e?e.path:'';i.getNetdiskData(s),i.set(o);}},getNetdiskData:function(e){var t=this,n=[];d=!1,i.getDataFromNetdisk({path:e,courseNumber:t.get('options.courseNumber'),courseType:t.get('options.courseType')}).then(function(e){if(e.data.objects.length>0)$.each(e.data.objects,function(e,t){var i=t.path,o=!1;if('/'==i.charAt(i.length-1))o=!0;var s=!1;if(t.has_share)s=!0;var a=t.size;if(a>r)a=(a/r).toFixed(1)+'M';else if(a>1024)a=(a/1024).toFixed(2)+'KB';else a=a.toFixed(2)+'B';n.push({fid:t.fid,type:t.file_type,name:t.name,fileType:t.file_type,size:a,path:t.path,hasSubDirectory:o,hasShare:s,checked:!1});}),t.set({netDiskFiles:n}),t.get('options').refresh();else t.set({netDiskFiles:null}),t.get('options').refresh();d=!0;});},shareComplete:function(){var t=this;if(t.get('canShare')){var i=[],n=[],s=0,r=t.get('canDownload'),a=t.get('isOpen'),c=!1,u=[];if(e&&t.get('netDiskFiles'))$.each(t.get('netDiskFiles'),function(e,t){if(!t.hasSubDirectory&&t.checked){if(t.canDownload=r,t.isOpen=a,-1!=l.indexOf(t.fileType)&&-1==u.indexOf(t.fileType))u.push(t.fileType),c=!0;i.push(t),n.push(t.fid);}});else $.each(t.get('options.files'),function(e,t){if(t.canDownload=r,t.isOpen=a,t.status==o.UPLOADER_STATUS_ERROR||t.status==o.UPLOADER_STATUS_CANCELED||t.status==o.UPLOADER_STATUS_COPYNAME)s++;if(-1!=l.indexOf(t.file.type)&&-1==u.indexOf(t.file.type))if(u.push(t.file.type),t.status==o.UPLOADER_STATUS_SUCCESS)c=!0;i.push(t),n.push(t.fid);});if(c&&!r)return void alert({title:'温馨提示',content:'所选文件包含无法在线观看的文件类型\uFF08'+u.join('\uFF0C')+'\uFF09\uFF0C请选择允许学生下载'});var d={canDownload:r,isOpen:a,fids:n.join(',')};if(s)return void alert({title:'温馨提示',width:320,content:'有'+s+'个文件上传失败\uFF0C确定要舍弃上传失败的文件\uFF1F',buttons:[{text:'确定',type:'primary',action:function(){this.hide(),t.get('options').close(i,d);}},{text:'取消',type:'secondary',action:function(){this.hide();}}]});else return void t.get('options').close(i,d);}},cancelUpload:function(e){var t=this;t.uploader.stop(e),t.get('options').stop(e);},uploadAgain:function(e){this.uploader.upload(e);}});}),define('userCenter/teacherCenter/netdiskShare/ShareInfo_css',function(){return'.add-file-dialog{width:700px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;}.add-file-dialog > .header{background-color:#fd9126;-webkit-border-radius:8px 8px 0 0;-moz-border-radius:8px 8px 0 0;border-radius:8px 8px 0 0;color:#fff;text-align:center;height:42px}.add-file-dialog > .close{color:#c66808}.add-file-dialog .items-list{margin-top:20px;border:1px solid #ccc;overflow-y:auto;height:300px;}.add-file-dialog .items-list .item{background:#f7f9fa;padding:5px 10px;border-bottom:1px solid #cdcdce;height:74px;overflow:hidden;position:relative;}.add-file-dialog .items-list .item .file-name{margin-left:40px}.add-file-dialog .items-list .item .icon-info-circle,.add-file-dialog .items-list .item .icon-check-circle{font-size:16px;position:absolute;top:14px}.add-file-dialog .items-list .item > .status{margin-left:40px;width:400px;height:16px;position:relative;display:inline-block;}.add-file-dialog .items-list .item > .status .progress-wrapper{height:8px;margin:5px 0;background-color:#e7f3ea;}.add-file-dialog .items-list .item > .status .progress-wrapper > .label{background-color:#5bca7e;height:8px;padding:0 !important;position:relative;top:-8px}.add-file-dialog .items-list .item > .status .progress-wrapper .progress-span{position:absolute;right:-65px;color:#000;background:transparent;border:none;top:-2px;padding-left:10px;color:#6d6d6e}.add-file-dialog .items-list .item > .status .cancel{position:absolute;right:-187px;top:-5px}.add-file-dialog .upload-wrapper{float:right;margin-right:20px;margin-top:-4px}.add-from-netdisk-dialog{width:700px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;}.add-from-netdisk-dialog > .header{background-color:#fd9126;-webkit-border-radius:8px 8px 0 0;-moz-border-radius:8px 8px 0 0;border-radius:8px 8px 0 0;color:#fff;text-align:center;height:42px}.add-from-netdisk-dialog > .close{color:#c66808}.add-from-netdisk-dialog .body{padding:10px 15px}.add-from-netdisk-dialog .items-list-from-netdisk{border:1px solid #ccc;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;}.add-from-netdisk-dialog .items-list-from-netdisk .item-list{height:300px;overflow-y:auto;}.add-from-netdisk-dialog .items-list-from-netdisk .item-list input[type="checkbox"]{display:none}.add-from-netdisk-dialog .items-list-from-netdisk .item-list .checkspan{width:15px;height:15px;-webkit-border-radius:10%;-moz-border-radius:10%;border-radius:10%;display:inline-block;}.add-from-netdisk-dialog .items-list-from-netdisk .item-list .checkspan .icon-checked{display:none}.add-from-netdisk-dialog .items-list-from-netdisk .item-list .checkspan .icon-unchecked{display:inline-block}.add-from-netdisk-dialog .items-list-from-netdisk .item-list input[type="checkbox"]:checked + .checkspan .icon-checked{display:inline-block}.add-from-netdisk-dialog .items-list-from-netdisk .item-list input[type="checkbox"]:checked + .checkspan .icon-unchecked{display:none}.add-from-netdisk-dialog .items-list-from-netdisk .list-body{height:200px;width:100%;text-align:center;line-height:200px}.add-from-netdisk-dialog .items-list-from-netdisk .item{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:12px;height:48px;overflow:hidden;line-height:48px;border-bottom:#f8f8f8 solid 1px;}.add-from-netdisk-dialog .items-list-from-netdisk .item > div{display:inline-block}.add-from-netdisk-dialog .items-list-from-netdisk .item .item-name{width:50%;overflow:hidden;}.add-from-netdisk-dialog .items-list-from-netdisk .item .item-name.has-sub{cursor:pointer}.add-from-netdisk-dialog .items-list-from-netdisk .item .item-name .solid{width:15px;display:inline-block}.add-from-netdisk-dialog .items-list-from-netdisk .item .item-size{width:25%;vertical-align:top;padding-left:10px}.add-from-netdisk-dialog .items-list-from-netdisk .item .item-status{width:22%;vertical-align:top;padding-left:5px}.add-from-netdisk-dialog .items-list-from-netdisk .item-header{background-color:#f8f8f8;border-bottom:1px solid #ccc;height:36px;line-height:36px;-webkit-border-radius:10px 10px 0 0;-moz-border-radius:10px 10px 0 0;border-radius:10px 10px 0 0;background-color:#e5e5e5;color:#3d3d3e;font-size:13px;}.add-from-netdisk-dialog .items-list-from-netdisk .item-header input[type="checkbox"]{opacity:0;margin:0;position:relative;left:0;top:0;z-index:9}.add-from-netdisk-dialog .items-list-from-netdisk .item-header .checkspan{width:15px;height:15px;-webkit-border-radius:10%;-moz-border-radius:10%;border-radius:10%;display:inline-block;margin-right:10px;position:relative;left:-11px;top:2px;}.add-from-netdisk-dialog .items-list-from-netdisk .item-header .checkspan .icon-checked{display:none}.add-from-netdisk-dialog .items-list-from-netdisk .item-header .checkspan .icon-unchecked{display:inline-block}.add-from-netdisk-dialog .items-list-from-netdisk .item-header input[type="checkbox"]:checked + .checkspan .icon-checked{display:inline-block}.add-from-netdisk-dialog .items-list-from-netdisk .item-header input[type="checkbox"]:checked + .checkspan .icon-unchecked{display:none}.add-from-netdisk-dialog .items-list-from-netdisk .item-header .item-name{padding-left:15px}.add-from-netdisk-dialog .items-list-from-netdisk .item-header .checked-all{margin:0 15px}.add-from-netdisk-dialog .items-list-from-netdisk .item-header .item-size{padding-left:0}.add-from-netdisk-dialog .items-list-from-netdisk .item-header .item-status{padding-left:0}.netdisk-share-info .help{float:right;display:inline-block}.netdisk-share-info .inline{display:inline-block}.netdisk-share-info .image-icon{width:auto;vertical-align:middle;padding:0 8px;padding-left:13px}.netdisk-share-info .crumbs{overflow:hidden;height:30px;}.netdisk-share-info .crumbs > .text{cursor:pointer}.footer{margin-top:20px;}.footer .choose{display:inline-block}.footer .error{display:inline-block;width:610px}.footer .submit-button{width:108px;height:34px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.footer > .button{float:right;position:relative;top:-20px;right:0}';}),define('userCenter/teacherCenter/netdiskShare/config_c8f4d9ae8d',['require','exports','cc/ui/Uploader'],function(require,exports){'use strict';var e=require('cc/ui/Uploader');exports.UPLOADER_STATUS_WAITING=e.STATUS_WAITING,exports.UPLOADER_STATUS_UPLOADING=e.STATUS_UPLOADING,exports.UPLOADER_STATUS_SUCCESS=e.STATUS_UPLOAD_SUCCESS,exports.UPLOADER_STATUS_ERROR=e.STATUS_UPLOAD_ERROR,exports.UPLOADER_STATUS_CANCELED=10,exports.UPLOADER_STATUS_COPYNAME=11;}),define('userCenter/teacherCenter/netdiskShare/netdiskShare_html',function(){return'<div class="netdish-wrapper card"><div class="netdish-header"><span class="help texts" data-title="<ul><li>1. 您共享的资料将会展示在您的课程主页\u3001学生的课程学习页面\u3002</li><li>2. 您可以从资料库中挑选文件作为共享资料\uFF0C也可以直接上传文件来共享\u3002本地上传的文件将会保存在资料库的初始目录下\u3002</li><li>3. 资料可以设置为公开\uFF0C也可以仅允许本班课的学生查看\u3002建议您将资料共享设置为公开\uFF0C因为这会帮助您获得更多的学生访问和学生信任\uFF01</li><li>4. 您可以选择是否允许文件被同学们下载\uFF0C但有一些不能在线浏览的文件类型\uFF0C则必须要允许学生下载哦\u3002</li><li>5. 资料大厅会汇总展示平台老师的公开资料\uFF0C将课件公开会同步展示在资料大厅\uFF0C可被更多学生看到并赢得更多生源\uFF0C您可在资料中附上自己跟谁学课程的相关链接\u3002</li></ul>" data-skin="primary" data-placement="bottomLeft" data-offset-x="100" data-max-width="65em"><i class="text primary icon-help-o"></i><span class="text">帮助信息</span></span><span class="title">资料共享&nbsp;&nbsp;&nbsp;|</span><span class="course-name">{{courseName}}</span></div><div class="netdish-buttons">{{#if checkedFiles.length}}<div class="button secondary" on-click="updateStatus(this, \'open\')">{{#if isOpenButton}}仅本班课{{else}}公开{{/if}}</div><div class="button secondary" on-click="updateStatus(this, \'download\')">{{#if canDownloadButton}}禁止下载{{else}}允许下载{{/if}}</div><div class="button secondary" on-click="removeChecked()">删除资料</div>{{/if}}<div class="button primary add-file-button" on-click="addFromfiles()">+ 从资料库添加</div><div class="button info upload-wrapper add-file-button"><input type="file">+ 本地上传</div></div><div class="netdish-body"><div class="netdish-table"><table class="table col-bordered"><thead><tr><th style="width: 40%"><label class="label checkbox fluid"><input type="checkbox" checked="{{checkedAll}}"><span class="checkspan"><i class="icon icon-unchecked"></i><i class="icon icon-checked info"></i></span>班课的共享文件</label></th><th style="width: 22%">统计</th><th style="width: 22%">权限设置</th><th style="width: 22%">下载设置</th></tr></thead>{{#if successUplodeFiles}}<tbody class="tbody">{{#each successUplodeFiles:index}}<tr class="{{#if checked}} checked{{/if}}"><td><label class="label checkbox fluid name"><input type="checkbox" checked="{{checked}}"><span class="checkspan"><i class="icon icon-unchecked"></i><i class="icon icon-checked info"></i></span>{{#if type == \'jpg\' || type == \'png\' || type == \'jpeg\' || type == \'svg\' || type == \'gif\'}}<img class="icon-image" src="{{rootUrl}}/img.png">{{elseif type == \'audio\'}}<img class="icon-image" src="{{rootUrl}}/audio.png">{{elseif type == \'excel\' || type == \'xlsx\' || type == \'xls\'}}<img class="icon-image" src="{{rootUrl}}/excel.png">{{elseif type == \'pdf\'}}<img class="icon-image" src="{{rootUrl}}/pdf.png">{{elseif type == \'ppt\' || type == \'pptx\'}}<img class="icon-image" src="{{rootUrl}}/ppt.png">{{elseif type == \'txt\'}}<img class="icon-image" src="{{rootUrl}}/txt.png">{{elseif type == \'video\'}}<img class="icon-image" src="{{rootUrl}}/video.png">{{elseif type == \'doc\' || type == \'docx\'}}<img class="icon-image" src="{{rootUrl}}/word.png">{{elseif type == \'zip\' || type == \'rar\'}}<img class="icon-image" src="{{rootUrl}}/zip.png">{{elseif type == \'\'}}<img class="icon-image" src="{{rootUrl}}/folder.png">{{else}}<img class="icon-image" src="{{rootUrl}}/unknown.png">{{/if}}{{{cutString(name, 20)}}}</label></td><td>{{viewCount}}次浏览<br>{{downloadCount}}次下载</td><td><span class="texts">{{#if isOpen}}<span class="text">公开</span><i class="text button-icon icon-lock" on-click="updateStatusBasedIndex(this, index, \'open\')" data-title="点击切换为仅本班课"></i>{{else}}<span class="text">仅本班课</span><i class="text button-icon icon-lock-open" on-click="updateStatusBasedIndex(this, index, \'open\')" data-title="点击切换为公开"></i>{{/if}}</span></td><td><span class="texts">{{#if canDownload}}<span class="text">允许下载</span><i class="text button-icon icon-download-down" on-click="updateStatusBasedIndex(this, index, \'download\')" data-title="点击切换为禁止下载"></i>{{else}}<span class="text">禁止下载</span><i class="text button-icon icon-download" on-click="updateStatusBasedIndex(this, index, \'download\')" data-title="点击切换为允许下载"></i>{{/if}}</span></td><span class="button-close" on-click="remove(this, index)"><i class="icon-close"></i></span></tr>{{/each}}</tbody>{{else}}<div class="no-data">您共享的资料将会展示在您的课程主页和学生的课程学习页面\uFF0C只有您设置了访问权限的学生可见\u3002<br>公开的资料会同步展示到资料大厅\uFF0C可被更多学生看到并赢得更多生源\uFF01</div>{{/if}}</table></div></div></div>';}),define('userCenter/teacherCenter/netdiskShare/netdiskShare',['require','exports','module','custom/ui/Uploader','./ShareInfo_dc4a231594','userCenter/common/function/ractiveDialog_e00233834c','./service_5ad69e082e','./config_c8f4d9ae8d','cc/util/json','./netdiskShare_html'],function(require,exports){'use strict';function e(e){var t=[];return $.each(e,function(e,i){var n={fid:i.fid,name:i.name,type:i.file_type,viewCount:i.view_count,downloadCount:i.download_count,isOpen:i.is_open,canDownload:i.can_download,checked:!1,shareCourses:i.share_courses};t.push(n);}),t;}var t=require('custom/ui/Uploader'),i=require('./ShareInfo_dc4a231594'),n=require('userCenter/common/function/ractiveDialog_e00233834c'),o=require('./service_5ad69e082e'),s=require('./config_c8f4d9ae8d'),r=require('cc/util/json'),a=200,c=1048576,l=['pdf','doc','docx','xls','xlsx','ppt','pptx','jpg','jpeg','png','txt','zip','rar'],u=['xml','gif','bmp','svg','ps','ai','rar','swf','zip'],d='';if('test'==siteData.env)d='/tcenter/courses/files/upload';else d='http://upload-file.genshuixue.com/tcenter/courses/files/upload';var f=70;exports.init=function(p){new Ractive({el:'#container',template:require('./netdiskShare_html'),data:{courseName:p.course_name,courseType:p.course_type,courseNumber:p.course_number,successUplodeFiles:e(p.file_list),moveIndexs:[],isOpenButton:!1,canDownloadButton:!1,canDeleteButton:!1,quotaTotal:p.quota_total,quotaUsed:p.quota_used,UPLOADER_STATUS_UPLOADING:s.UPLOADER_STATUS_UPLOADING,UPLOADER_STATUS_SUCCESS:s.UPLOADER_STATUS_SUCCESS,UPLOADER_STATUS_ERROR:s.UPLOADER_STATUS_ERROR,UPLOADER_STATUS_CANCELED:s.UPLOADER_STATUS_CANCELED,rootUrl:siteData.source+'/userCenter/teacherCenter/netdiskShare/img'},computed:{checkedAll:{get:function(){return this.get('checkedFiles').length===this.get('successUplodeFiles').length&&0!=this.get('successUplodeFiles').length;},set:function(e){var t={},i=this.get('successUplodeFiles');$.each(i,function(i){t['successUplodeFiles.'+i+'.checked']=e;}),this.set(t);}},checkedFiles:function(){var e=[];return $.each(this.get('successUplodeFiles'),function(t,i){if(i.checked)e.push(i);}),e;}},onrender:function(){var e,a,c,l,u,p,m=this,h=$(m.getElement()),g=[],v='';h.on('mousedown','.tbody',function(t){var i=m.get('successUplodeFiles');e=t.clientY;var n=$(t.target).closest('tr');if(u=n.index(),u>=0)p=i[u].checked;}).on('mouseup','.tbody',function(t){if(e=v='',c&&l){var i=$(t.target).closest('tr'),n=i.index();if(u>n){var o=u;u=n,n=o;}var s=m.get('successUplodeFiles');$.each(s,function(e,t){if(e>=u&&n>=e)t.checked=!p;}),m.set({successUplodeFiles:s}),c=l='';}}).mousemove(function(t){if(e)if(a=e>t.clientY?e-t.clientY:t.clientY-e,c=e>t.clientY?'up':'down',a>f){var i=$(t.target).closest('tr'),n=i.index();if(n>0&&-1==g.indexOf(n)){if(0==g.length)return void g.push(u);if(g.length>0){{g.pop();}if('up'==c)g=[n,u];else g=[u,n];}}m.set('moveIndexs',g),l=Math.ceil(a/f);}else if(g)g=[u,u],m.set('moveIndexs',g);}),m.observe('moveIndexs',function(e){if(0!=e.length){var t={},i=m.get('successUplodeFiles');if(!e[1])e[1]=e[0];if($.each(i,function(i){if(e[0]<=i&&i<=e[1])t['successUplodeFiles.'+i+'.checked']=!p;}),v)if(console.log(v),'up'==c){if(e[0]>v)t['successUplodeFiles.'+v+'.checked']=!1;v=e[0];}else{if(e[1]<v||!e[1])t['successUplodeFiles.'+v+'.checked']=!1;v=e[1];}m.set(t);}}),m.observe('successUplodeFiles.*.checked',function(e){if('boolean'==$.type(e)){var t=m.get('checkedFiles')[0];if(t)m.set({isOpenButton:t?t.isOpen:!1,canDownloadButton:t?t.canDownload:!1,canDeleteButton:t?!0:!1});}});var x,y=function(e,t){var i={},n='options.files.'+e+'.';$.each(t,function(e,t){i[n+e]=t;}),x.set(i);},b=function(e){y(e.index,{status:e.status});},S=function(e,t){y(e.index,{fid:t.data.fid});};m.uploader=new t({mainElement:h.find('input[type="file"]'),multiple:!0,ignoreError:!0,action:d,data:{user_number:userData.number},fileName:'Filedata',onfilechange:function(){var e=m.uploader.getFiles(),t=m.validateFiles(e);if(1==t){$.each(e,function(t){e[t];m.uploader.upload(t);});var r=n(i,{title:'上传文件至资料共享',skinClass:'add-file-dialog'},{files:$.map(e,function(e){return{index:e.index,file:e.file,status:e.status,progress:0,uploaded:0,startTime:0,speed:0,restTime:0};}),fileCount:m.get('successUplodeFiles').length+e.length,stop:function(e){m.uploader.stop(e);},close:function(e,t){if(r.hide(),t.fids)o.updateDataStatus({fids:t.fids,courseNumber:m.get('courseNumber'),courseType:m.get('courseType'),canDownload:t.canDownload?1:0,isOpen:t.isOpen?1:0}).then(function(t){if(0==t.code){var i={};tip({content:'共享成功',type:'success'});var n=[];$.each(e,function(e,t){if(t.status==s.UPLOADER_STATUS_SUCCESS){var i={fid:t.fid,name:t.file.name,type:t.file.type,checked:!1,viewCount:0,downloadCount:0,isOpen:t.isOpen,canDownload:t.canDownload};n.push(i);}}),n=n.concat(m.get('successUplodeFiles')),i.successUplodeFiles=n,m.set(i);}});}});x=r.ractive;}},onuploadstart:function(e,t){var i=t.fileItem;b(i),y(i.index,{startTime:$.now()});},onuploadprogress:function(e,t){var i=t.fileItem,n=x.get('options.files.'+i.index+'.startTime'),o=t.uploaded/(0.001*($.now()-n)),s=(t.total-t.uploaded)/o;y(i.index,{progress:t.percent,uploaded:t.uploaded,speed:o,restTime:s});},onuploadsuccess:function(e,t){var i=r.parse(t.responseText);if(0!==i.code)return x.set('options.files.'+t.fileItem.index+'.status',s.UPLOADER_STATUS_ERROR),void alert({title:'温馨提示',content:i.msg});else return b(t.fileItem),void S(t.fileItem,i);},onuploaderror:function(e,i){var n=i.fileItem;if(i.errorCode===t.ERROR_CANCEL)x.set('options.files.'+n.index+'.status',s.UPLOADER_STATUS_CANCELED);else b(n);},onuploadcomplete:function(){m.uploader.reset();}});},validateFiles:function(e){var t,i=this,n=0,o=+i.get('quotaUsed'),s=i.get('quotaTotal')-o,r=[];if($.each(e,function(e,t){if(n+=t.file.size,$.inArray(t.file.type,l)<0&&-1==r.indexOf(t.file.type))r.push(t.file.type);}),0>s)return t='抱歉\uFF01存储空间不足\uFF0C请前往资料库管理您的文件\u3002',void alert({title:'温馨提示',content:t,buttons:[{text:'立即前往',type:'primary',action:function(){location.href='/teacher_center/netdisk';}},{text:'知道了',type:'',action:function(){this.hide();}}]});if(e.length+i.get('successUplodeFiles').length>30)t='每节课的资料文件不能超过30个\uFF0C若您的文件过多\uFF0C建议采用压缩包上传';if(n>s)t='抱歉\uFF0C资料库存储空间不足\uFF0C所选文件超出'+((n-s)/c).toFixed(1)+'MB\u3002您可以在资料库中管理您的文件和存储空间';if(n>a*c)t='资料库上传资料不能超过 200 MB';if(r.length>0)t=r.join('\uFF0C')+'为不可上传的文件\uFF0C请勿上传';if(t)return alert({title:'温馨提示',width:320,content:t}),!1;else return!0;},onteardown:function(){this.uploader.dispose();},addFromfiles:function(){var e=this,t=$(e.getElement()),s=n(i,{title:'资料库添加',skinClass:'add-from-netdisk-dialog'},{isFromNetdisk:!0,files:null,courseNumber:e.get('courseNumber'),courseType:e.get('courseType'),uploadFromLocal:function(){s.hide(),t.find('input[type="file"]').click();},refresh:function(){s.refresh();},close:function(t,i){if(s.hide(),i.fids)o.updateDataStatus({fids:i.fids,courseNumber:e.get('courseNumber'),courseType:e.get('courseType'),canDownload:i.canDownload?1:0,isOpen:i.isOpen?1:0}).then(function(){var i={successUplodeFiles:e.get('successUplodeFiles')};tip({content:'共享成功',type:'success'});var n=[];$.each(t,function(e,t){var i={fid:t.fid,name:t.name,checked:!1,viewCount:0,downloadCount:0,isOpen:t.isOpen,canDownload:t.canDownload,type:t.fileType};n.push(i);}),n=n.concat(e.get('successUplodeFiles')),i.successUplodeFiles=n,e.set(i);});}});},findCheckedIndex:function(){var e=this,t=e.get('successUplodeFiles'),i=[],n=[];return $.each(t,function(e,t){if(t.checked)i.push(e),n.push(t.fid);}),{indexs:i,fids:n.join(',')};},updateStatus:function(e,t){var i=this,n='download'==t?!i.get('canDownloadButton'):i.get('canDownloadButton'),s='open'==t?!i.get('isOpenButton'):i.get('isOpenButton'),r=i.findCheckedIndex().indexs,a=i.get('successUplodeFiles'),c=!0,l=[];if($.each(r,function(e,t){var i=a[t].type;if(-1!=u.indexOf(i)&&-1==l.indexOf(i))l.push(i),c=!1;}),!c&&'open'!=t)return void alert({title:'温馨提示',content:'包含无法在线观看的文件类型\uFF08 '+l.join('\uFF0C')+'\uFF09\uFF0C 只能允许学生下载'});else return void o.updateDataStatus({fids:i.findCheckedIndex().fids,courseNumber:i.get('courseNumber'),courseType:i.get('courseType'),canDownload:n?1:0,isOpen:s?1:0}).then(function(){var e=i.get('isOpenButton'),n=i.get('canDownloadButton');if($.each(r,function(i,o){if('open'==t)a[o].isOpen=!e;else a[o].canDownload=!n;}),'open'==t)p.isOpenButton=!e;else p.canDownloadButton=!n;p.successUplodeFiles=a,i.set(p);},function(e){if(0!=e.code)alert({title:'温馨提示',content:e.msg});});},updateStatusBasedIndex:function(e,t,i){var n=this,s={};if(-1!=u.indexOf(e.type)&&'open'!=i)return void alert({title:'温馨提示',content:'包含无法在线观看的文件类型\uFF08'+e.type+'\uFF09\uFF0C只能允许学生下载'});var r='open'==i?!e.isOpen:e.isOpen,a='download'==i?!e.canDownload:e.canDownload;o.updateDataStatus({fids:e.fid,courseNumber:n.get('courseNumber'),courseType:n.get('courseType'),canDownload:a?1:0,isOpen:r?1:0}).then(function(){if('open'==i)s['successUplodeFiles.'+t+'.isOpen']=!e.isOpen;else s['successUplodeFiles.'+t+'.canDownload']=!e.canDownload;n.set(s);},function(e){if(0!=e.code)alert({title:'温馨提示',content:e.msg});});},remove:function(e,t){var i=this;if(e.shareCourses)alert({title:'温馨提示',content:e.shareCourses,buttons:[{text:'取消',type:'',action:function(){this.hide();}},{text:'确定',type:'primary',action:function(){var e=i.get('successUplodeFiles');o.removeData({fids:e[t].fid,courseNumber:i.get('courseNumber'),courseType:i.get('courseType')}).then(function(){e.splice(t,1);}),i.set('successUplodeFiles',e),this.hide();}}]});else alert({title:'温馨提示',content:'确认将从共享资料中移除该文件?',buttons:[{text:'取消',type:'',action:function(){this.hide();}},{text:'确定',type:'primary',action:function(){var e=i.get('successUplodeFiles');o.removeData({fids:e[t].fid,courseNumber:i.get('courseNumber'),courseType:i.get('courseType')}).then(function(){e.splice(t,1),i.set('successUplodeFiles',e);}),this.hide();}}]});},removeChecked:function(){var e=this;alert({title:'温馨提示',content:'确认将从共享资料中移除该文件?',buttons:[{text:'取消',type:'',action:function(){this.hide();}},{text:'确定',type:'primary',action:function(){var t=e.findCheckedIndex().indexs,i=e.get('successUplodeFiles');o.removeData({fids:e.findCheckedIndex().fids,courseNumber:e.get('courseNumber'),courseType:e.get('courseType')}).then(function(){t=t.reverse(),$.each(t,function(e,t){i.splice(t,1);}),e.set('successUplodeFiles',i);}),this.hide();}}]});}});};}),define('userCenter/teacherCenter/netdiskShare/service_5ad69e082e',['require','exports','module','../../common/service_1288b24a55'],function(require,exports){'use strict';var e=require('../../common/service_1288b24a55');exports.getDataFromNetdisk=function(t){return e.post('/tcenter/courses/files/netdisk',{path:t.path,course_number:t.courseNumber,course_type:t.courseType});},exports.updateDataStatus=function(t){return e.post('/tcenter/courses/files/update-status',{course_number:t.courseNumber,course_type:t.courseType,can_download:t.canDownload,is_open:t.isOpen,fids:t.fids});},exports.removeData=function(t){return e.post('/tcenter/courses/files/remove',{course_number:t.courseNumber,course_type:t.courseType,fids:t.fids});};});