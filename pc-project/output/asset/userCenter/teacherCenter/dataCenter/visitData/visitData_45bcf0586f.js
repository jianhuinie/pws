define('cc/function/decimalLength',['require','exports','module'],function(){'use strict';return function(e){var t=(''+e).split('.');return 2===t.length?t[1].length:0;};}),define('cc/function/float2Int',['require','exports','module'],function(){'use strict';return function(e,t){var i,r=(''+e).split('.');if(t>=0);else t=0;if(1===r.length)i=e+new Array(t+1).join('0');else t=Math.max(0,t-r[1].length),i=r.join('')+new Array(t+1).join('0');return+i;};}),define('cc/function/minus',['require','exports','module','./decimalLength','./float2Int'],function(require){'use strict';var e=require('./decimalLength'),t=require('./float2Int');return function(i,r){var a=Math.max(e(i),e(r));return i=t(i,a),r=t(r,a),(i-r)/Math.pow(10,a);};}),define('cc/function/plus',['require','exports','module','./decimalLength','./float2Int'],function(require){'use strict';var e=require('./decimalLength'),t=require('./float2Int');return function(i,r){var a=Math.max(e(i),e(r));return i=t(i,a),r=t(r,a),(i+r)/Math.pow(10,a);};}),define('cc/function/toNumber',['require','exports','module'],function(){'use strict';var e={'int':parseInt,'float':parseFloat};return function(t,i,r){if('number'!==$.type(t)){var a=e[r];if(a)t=a(t,10);else if($.isNumeric(t))t=+t;else t=0/0;}return isNaN(t)?i:t;};}),define('userCenter/common/service_1288b24a55',['require','exports','module'],function(require,exports){'use strict';function e(e,t){var i=e;if(t)i+=$.param(t);return i;}function t(t,i,c){i=i||{},c=$.extend({},r,c);var o,l;if(n[t])l=e(t,i),o=s[l];var d=$.Deferred();if(o)if(!o.response)o.deferredList.push(d);else d.resolve(o.response);else{var u=userData.number||0;if(!a[t])i._user_number=u,$.extend(i,siteData.monkey);if($.ajax({url:t,data:i,method:'post',dataType:'json',timeout:c.timeout,async:c.sync?!1:!0}).then(function(e){if(n[t])o=s[l],o.response=e,$.each(o.deferredList,function(t,i){if(e&&0===e.code)i.resolve(e);else i.reject(e);}),o.deferredList.length=0;else if(e&&0===e.code)d.resolve(e);else{var i=e.msg;if(i&&!c.preventError)alert({title:'提示',content:i});d.reject(e);}},function(e,t){if('timeout'===t||'error'===t)d.reject({code:-1});}),n[t])s[l]={},s[l].deferredList=[d];}return d;}function i(e,t){return $.ajax({url:e,data:t,dataType:'jsonp'});}var r={timeout:5000,sync:!1,stringify:!1,preventError:!1},a={'/area/list':1,'/subject/getList':1},n={'/user/basicInfo':1},s={};exports.post=t,exports.jsonp=i,exports.getUserBasicInfo=function(e){var i;if(e&&null!=e.userId&&null!=e.userType)i={user_id:e.userId,user_type:e.userType};return t('/user/basicInfo',i);},exports.getCourseList=function(){return t('/lesson/list');},exports.getUserType=function(){return t('/user/roles');},exports.sendInviteCode=function(e){var i=$.extend(e.formData||{},{invite_code:e.inviteCode,role:e.role});return t('/user/switch_role_ajax',i);},exports.getCDNSpeedTestUrls=function(){return t('/video/getSpeedTestUrl');};}),define('userCenter/teacherCenter/dataCenter/header_html',function(){return'<ul class="data-center-header"><li class="data-center-header-item visit"><a rel="nofollow" class="link" href="/teacher_center/visit_data">流量分析</a></li><li class="data-center-header-item transaction"><a rel="nofollow" class="link" href="/teacher_center/transaction_data">转化统计</a></li><li class="data-center-header-item sysnthetic"><a rel="nofollow" class="link" href="/teacher_center/sysnthetic_sort">排名解析</a></li><li class="data-center-header-item RecordPoints"><a rel="nofollow" class="link" href="/teacher_center/deductList">扣分记录</a></li></ul>';}),define('userCenter/teacherCenter/dataCenter/service_25f2d330c1',['require','exports','module','../../common/service_1288b24a55'],function(require,exports){'use strict';var e=require('../../common/service_1288b24a55');exports.deductAppeal=function(t){return e.post('/teacher/deductAppeal',{deduct_id:t.deduct_id,reason:t.reason,attach_photos:t.photoList});},exports.deductDetail=function(t){return e.post('/teacher/deductAppealDetail',{deduct_id:t.deduct_id});},exports.getVistdate=function(t){return e.post('/teacher_center/visit_data_ajax',{range:t.range});},exports.getUserBasicInfo=function(t){var i;if(t&&null!=t.userId&&null!=t.userType)i={user_id:t.userId,user_type:t.userType};return e.post('/user/basicInfo',i);};}),define('userCenter/teacherCenter/dataCenter/visitData/visitData_html',function(){return'<div id="content" class="card"><div id="content-header"></div><div class="visit-data"><div class="datas week"><span class="datas-times">昨日浏览量\uFF1A<span> {{yesterday}} </span></span><span class="datas-times nearly-seven">{{viewDisc}}浏览量:<span> {{views}} </span></span></div><div class="dates"><div class="dates-times{{#if checked_tab_index == 0}} checked{{/if}}" on-click="changeItem(0)">近7天</div><div class="dates-times{{#if checked_tab_index == 1}} checked{{/if}}" on-click="changeItem(1)">近30天</div><div class="dates-times{{#if checked_tab_index == 2}} checked{{/if}}" on-click="changeItem(2)">近90天</div></div></div><div class="charts-line"></div><div class="title">数据来源</div><div class="data-source">{{#if vipLevel}}<div class="course-left"><div class="data-pie"></div>{{#if origin}}<div class="data-source-items">{{#each origin.origin:index}}<div class="source-item"><div class="item-name">{{origin.origin[index]}}</div><div class="gsx-percent">{{origin.order_rate[index]}}</div></div>{{/each}}</div>{{/if}}</div><div class="course-right"><div class="visit-number">{{sum_pv}}</div><div class="visit-descrip">{{viewDisc}}访客数</div></div>{{else}}<div class="not-source">{{#if org}}流量来源数据仅会员用户可见\uFF0C 请联系机构开通会员{{else}}流量来源数据仅会员用户可见\uFF0C<a href="https://www.genshuixue.com/pay/vip">开通会员</a>随时看哦{{/if}}<div class="button"><a href="/teacher_center/vip_center" target="_blank">了解会员特权</a></div></div>{{/if}}</div>{{#if vipLevel}}<div class="data-source-sug">分享主页\u3001课程\u3001文章\uFF0C获得更多浏览</div>{{/if}}</div>';}),define('userCenter/teacherCenter/dataCenter/visitData/visitData_45bcf0586f',['require','exports','cc/function/toNumber','cc/function/plus','cc/function/minus','echarts','../service_25f2d330c1','echarts/chart/line','echarts/chart/pie','underscore','./visitData_html','./../header_html'],function(require,exports){'use strict';function e(e,t,i){return{value:e,origin:t,order_rate:i};}function t(e,t){n.setOption({tooltip:{trigger:'axis'},grid:{x:50,y:10,x2:40,y2:30},xAxis:[{type:'category',boundaryGap:!1,data:e.date}],yAxis:[{type:'value'}],series:[{name:t,type:'line',itemStyle:{normal:{color:'#3dca6d',lineStyle:{color:'#3dca6d',shadowColor:'#3dca6d'},areaStyle:{type:'default',color:'#c2f5c6'}}},data:e.value}]});}function i(e){s.setOption({tooltip:{trigger:'item',formatter:'{b}:{d}%'},series:[{type:'pie',radius:['50%','70%'],itemStyle:{normal:{label:{show:!1},labelLine:{show:!1}}},data:[{value:e.value[0],name:e.origin[0],itemStyle:{normal:{color:'#ff5850'}}},{value:e.value[1],name:e.origin[1],itemStyle:{normal:{color:'#FC6C21'}}},{value:e.value[2],name:e.origin[2],itemStyle:{normal:{color:'#FDB840'}}},{value:e.value[3],name:e.origin[3],itemStyle:{normal:{color:'#43B244'}}},{value:e.value[4],name:e.origin[4],itemStyle:{normal:{color:'#64B5F6'}}},{value:e.value[5],name:e.origin[5],itemStyle:{normal:{color:'rgba(255,61,58,0.5)'}}},{value:e.value[6],name:e.origin[6],itemStyle:{normal:{color:'rgba(255,85,0,0.5)'}}},{value:e.value[7],name:e.origin[7],itemStyle:{normal:{color:'rgba(255,173,13,0.5)'}}},{value:e.value[8],name:e.origin[8],itemStyle:{normal:{color:'rgba(48,171,40,0.5)'}}},{value:e.value[9],name:e.origin[9],itemStyle:{normal:{color:'rgba(76,161,251,0.5)'}}}]}]});}var r=(require('cc/function/toNumber'),require('cc/function/plus'),require('cc/function/minus'),require('echarts')),a=require('../service_25f2d330c1');require('echarts/chart/line'),require('echarts/chart/pie');var n,s,c=(require('underscore'),require.toUrl('./image/nono.jpg'));exports.init=function(o){userData.vip_level;new Ractive({el:'#container',template:require('./visitData_html'),data:{vipLevel:userData.vip_level,checked_tab_index:'',data:o,yesterday:'',views:'',org:'',sum_pv:'',viewDisc:'近7天',origin:''},getVisit:function(){var o=this,l=[7,30,90];a.getVistdate({range:l[o.get('checked_tab_index')]}).then(function(a){var l=$('#content'),d=a.data,u=d.pv;if(u)n=r.init(l.find('.charts-line')[0],'shine'),t(u.data,'浏览量'),o.set('yesterday',u.yesterday),o.set('views',u.total);else o.set('yesterday',0),o.set('views',0);var v=d.origin_analysis;if(o.get('vipLevel')){s=r.init(l.find('.data-pie')[0],'pie');var d=e(v.value,v.origin,v.uv_rate);if(0!=v.order_rate.length){i(d);var f=l.find('.data-pie div').attr('style'),m=f.replace('hidden','none');l.find('.data-pie div').attr('style',m);}else l.find('.data-pie').html('<img src='+c+'>');o.set('sum_pv',v.total),o.set('origin',d);}});},changeItem:function(e){var t=this;t.set('checked_tab_index',e);var i=['近7天','近30天','近90天'];t.set('viewDisc',i[e]),t.getVisit();},oncomplete:function(){var e=this;a.getUserBasicInfo().then(function(t){var i=t.data;e.set('org',i.org_id?!0:!1);}),e.getVisit();}}),new Ractive({el:'#content-header',template:require('./../header_html')});};});