define('custom/form/Select',['require','exports','module','cc/form/Select'],function(require){'use strict';var e=require('cc/form/Select');return e.defaultOptions={buttonSelector:'> .button',menuSelector:'> .menu',labelSelector:'> .button > .text',itemSelector:'li',itemActiveClass:'active',textAttribute:'data-text',valueAttribute:'data-value',defaultText:'- 请选择 -',menuActiveClass:'opened',showMenuTrigger:'click',hideMenuTrigger:'click',showMenuAnimation:function(e){e.menuElement.show();},hideMenuAnimation:function(e){e.menuElement.hide();},render:function(e){var t=[];return $.each(e,function(e,n){var i=[];$.each(n,function(e,t){if('text'!==e&&null!=t)i.push('data-'+e+'="'+t+'"');});var r=i.join(' ');if(r)r=' '+r;t.push('<li class="item"'+r+'>'+n.text+'</li>');}),t.join('');}},e;}),define('cc/form/Select',['require','exports','module','../ui/ComboBox','../util/life','./common'],function(require){'use strict';function e(e){n.init(this,e);}var t=require('../ui/ComboBox'),n=require('../util/life'),i=require('./common'),r=e.prototype;return r.type='Select',r.init=function(){var e=this;e.initStruct();var n=e.option('mainElement'),r=new t({mainElement:n,data:e.option('data'),value:e.option('value'),defaultText:e.option('defaultText'),buttonElement:n.find(e.option('buttonSelector')),menuElement:n.find(e.option('menuSelector')),menuTemplate:e.option('menuTemplate'),renderSelector:e.option('renderSelector'),renderTemplate:e.option('renderTemplate'),showMenuTrigger:e.option('showMenuTrigger'),showMenuDelay:e.option('showMenuDelay'),hideMenuTrigger:e.option('hideMenuTrigger'),hideMenuDelay:e.option('hideMenuDelay'),itemSelector:e.option('itemSelector'),itemActiveClass:e.option('itemActiveClass'),menuActiveClass:e.option('menuActiveClass'),textAttribute:e.option('textAttribute'),valueAttribute:e.option('valueAttribute'),showMenuAnimation:function(t){e.execute('showMenuAnimation',t);},hideMenuAnimation:function(t){e.execute('hideMenuAnimation',t);},render:function(t,n){return e.execute('render',[t,n]);},setText:function(t){var i=e.option('labelSelector');n.find(i).html(t.text);}});e.once('aftersync',function(){r.option('watchSync',{value:function(t){e.set('value',t);},opened:function(t){e.state('opened',t);}}),r.set('value',e.get('value')),e.state('opened',r.is('opened'));});var o=i.findNative(e,'input[type="hidden"]');r.on('dispatch',function(t,n){var i=t.originalEvent;switch(i.type){case'afteropen':o.trigger('focusin');break;case'afterclose':o.trigger('focusout');}e.dispatch(e.emit(i,n),n);}),e.inner({main:n,'native':o,combobox:r}),e.set({data:e.option('data'),name:e.option('name'),value:e.option('value')});},r.open=function(){this.state('opened',!0);},r.close=function(){this.state('opened',!1);},r.dispose=function(){n.dispose(this),this.inner('combobox').dispose();},n.extend(r,['open','close']),e.propertyUpdater={name:function(e){i.prop(this,'name',e);}},e.propertyUpdater.data=e.propertyUpdater.value=function(e,t,n){var r=this,o={},a=n.value;if(a){var s=a.newValue;i.prop(r,'value',s),o.value=s;}var u=n.data;if(u)o.data=u.newValue;return r.inner('combobox').set(o),!1;},e.propertyValidator={name:function(e){return i.validateName(this,e);},value:function(e){return i.validateValue(this,e);}},e.stateUpdater={opened:function(e){var t=this.inner('combobox');if(e)t.open();else t.close();}},e;}),define('cc/form/common',['require','exports','module'],function(require,exports){'use strict';exports.prop=function(e,t,n){if($.isPlainObject(t))$.each(t,function(t,n){exports.prop(e,t,n);});else{var i=e.inner('native');if(2===arguments.length)return i.prop(t);else{if(i.prop(t)!==n)i.prop(t,n);if('value'===t)i.trigger('change');}}},exports.setClass=function(e,t,n){var i=e.option(t);if(i)e.option('mainElement')[n+'Class'](i);},exports.findNative=function(e,t){var n=e.option('mainElement').find(t);if(0===n.length)e.error('form/'+e.type+' 必须包含一个 ['+t+'].');return n.eq(0);},exports.validateName=function(e,t){if('string'!==$.type(t))if(t=exports.prop(e,'name'),!t||'string'!==$.type(t))e.error('name attribute is missing.');return t;},exports.validateValue=function(e,t){var n=$.type(t);if('number'===n)t=''+t;else if('string'!==n)t=exports.prop(e,'value')||'';return t;};}),define('cc/function/around',['require','exports','module'],function(){'use strict';return function(e,t,n,i){var r='string'===$.type(t),o=r?e[t]:e;if(!r)i=n,n=t;var a=function(){var e,t=$.makeArray(arguments);if($.isFunction(n))e=n.apply(this,t);if(e!==!1){if($.isFunction(o))e=o.apply(this,t);if($.isFunction(i)){t.push(e);var r=i.apply(this,t);if('undefined'!==$.type(r))e=r;}return e;}};return r?e[t]=a:a;};}),define('cc/function/autoScrollUp',['require','exports','module'],function(){'use strict';return function(e,t){var n=e.scrollTop(),i=n+e.height(),r=t.prop('offsetTop');if(n>r||r>i)e.scrollTop(r);};}),define('cc/function/contains',['require','exports','module'],function(){'use strict';return function(e,t){if(e=e.jquery?e[0]:e,t=t.jquery?t[0]:t,!e||!t)return!1;if(e===t)return!0;else return $.contains(e,t);};}),define('cc/function/createEvent',['require','exports','module'],function(){'use strict';return function(e){if(e&&!e[$.expando])e='string'===$.type(e)||e.type?$.Event(e):$.Event(null,e);return e||$.Event();};}),define('cc/function/extend',['require','exports','module'],function(){'use strict';return function(e,t){if($.isPlainObject(t))$.each(t,function(t,n){if(!(t in e))e[t]=n;});};}),define('cc/function/guid',['require','exports','module'],function(){var e=0;return function(){return'cc_'+e++;};}),define('cc/function/isHidden',['require','exports','module'],function(){'use strict';return function(e){e.css('display');return'none'===e.css('display')||0==e.css('opacity')||'hidden'===e.css('visibility');};}),define('cc/function/nextTick',['require','exports','module'],function(){'use strict';return function(e){var t=setTimeout(e,0);return function(){clearTimeout(t);};};}),define('cc/function/offsetParent',['require','exports','module'],function(){'use strict';function e(e){return e.is('body')||'static'!==e.css('position');}return function(t){if(t.is('body'))return t;for(var n=t.parent();!e(n);)n=n.parent();return n;};}),define('cc/function/replaceWith',['require'],function(){'use strict';return function(e,t){e=e[0],t=t[0],e.parentNode.replaceChild(t,e);};}),define('cc/function/split',['require','exports','module'],function(){'use strict';return function(e,t){var n=[];if('number'===$.type(e))e=''+e;if(e&&'string'===$.type(e))$.each(e.split(t),function(e,t){if(t=$.trim(t))n.push(t);});return n;};}),define('cc/function/toBoolean',['require','exports','module'],function(){'use strict';return function(e,t){if('boolean'!==$.type(e)){if(1===arguments.length)t=!!e;e=t;}return e;};}),define('cc/function/toNumber',['require','exports','module'],function(){'use strict';var e={'int':parseInt,'float':parseFloat};return function(t,n,i){if('number'!==$.type(t)){var r=e[i];if(r)t=r(t,10);else if($.isNumeric(t))t=+t;else t=0/0;}return isNaN(t)?n:t;};}),define('cc/function/toString',['require','exports','module'],function(){'use strict';return function(e,t){var n=$.type(e);if('number'===n)e=''+e;else if('string'!==n){if(1===arguments.length)t='';e=t;}return e;};}),define('cc/function/ucFirst',['require','exports','module'],function(){'use strict';return function(e){return e.charAt(0).toUpperCase()+e.slice(1);};}),define('cc/helper/Popup',['require','exports','module','../function/isHidden','../function/contains','../function/nextTick','../util/life','../util/trigger','../util/instance'],function(require){'use strict';function e(e){m.init(this,e);}function t(e,t){return function(n){var i=$(this);if('disabled'!==i.attr('disabled')){if($.isFunction(t))if(!t.call(this,n))return;e.open(n);}};}function n(e,t){return function(n){var i=$(this);if('disabled'!==i.attr('disabled')){if($.isFunction(t))if(!t.call(this,n))return;e.close(n);var r=e.inner(_);if(r)e.sync(),r.resolve();}};}function i(e,t,n,i){if(e)e.on(t,i,n);}function r(e,t,n){if(e)e.off(t,n);}function o(e,t){var n=e.option('triggerElement'),r=e.option('triggerSelector');if(n||r)i(n||g.body,t.type,t.handler,r);}function a(e,t){r(e.option('triggerElement')||g.body,t.type,t.handler);}function s(e,t){i(g.document,t.type,t.handler);}function u(e,t){r(g.document,t.type,t.handler);}function c(e){return n(e,function(t){return!p(e.inner('layer'),t.target);});}function l(e,t){var n=e.option('triggerElement'),i=e.option('triggerSelector');if(n&&!i)return n;if(t)return $(t.currentTarget);else return void 0;}function f(e,t){var n=e.option('layerElement');if(n&&n.jquery&&n.length)return n;if(t&&$.isFunction(n)){if(n=e.execute(n,t),n&&n.tagName)n=$(n);return n;}}var d=require('../function/isHidden'),p=require('../function/contains'),h=require('../function/nextTick'),m=require('../util/life'),v=require('../util/trigger'),g=require('../util/instance'),y=e.prototype;y.type='Popup',y.init=function(){var e=this,t=function(t,n){if($.isFunction(t[n]))return t[n](e);else return void 0;},n=v.parse(e.option('showLayerTrigger'),function(n){var i=S.show[n];return{delay:e.option('showLayerDelay'),startDelay:t(i,'startDelay'),endDelay:t(i,'endDelay'),handler:t(i,'handler'),beforeHandler:function(t){var n=function(){e.inner({trigger:l(e,t),layer:f(e,t)});};if(e.is('opened')){var i=$.Deferred();return i.then(n),e.inner(_,i),i;}else n();}};}),i=v.parse(e.option('hideLayerTrigger'),function(n){var i=S.hide[n];return{delay:e.option('hideLayerDelay'),startDelay:t(i,'startDelay'),endDelay:t(i,'endDelay'),handler:t(i,'handler')};}),r=function(t){$.each(n,function(n,i){S.show[n][t](e,i);});},o=function(t){$.each(i,function(n,i){S.hide[n][t](e,i);});},a=!1,s=!1,u=function(){if(!a)r('on'),a=!0;},c=function(){if(a)r('off'),a=!1;},d=function(){if(!s)o('on'),s=!0;},p=function(){if(s)o('off'),s=!1;},m=function(t,n){var i=n.opened;if(i)if(i.newValue){if(!e.option('triggerSelector'))c();h(d);}else p(),u();};e.before('dispose',function(){e.off('statechange',m),c(),p(),e.close();}).on('statechange',m),e.inner({trigger:l(e),layer:f(e)}),e.state({opened:e.option('opened')});},y.open=function(){this.state('opened',!0);},y._open=function(e){var t=this;if(t.is('opened')){var n=t.inner('layer'),i=t.inner('trigger'),r=n.data(b);if(i&&r&&i[0]!==r[0])n.data(x).close(),h(function(){if(t.guid)t.open(e);});return!1;}return{dispatch:!0};},y.open_=function(){var e=this,t=e.inner('layer');if(t){var n={};n[b]=e.inner('trigger'),n[x]=e,t.data(n);}return{dispatch:!0};},y.close=function(){this.state('opened',!1);},y._close=function(){if(!this.is('opened'))return!1;else return{dispatch:!0};},y.close_=function(){var e=this,t=e.inner('layer');if(t)t.removeData(x).removeData(b);return{dispatch:!0};},y.dispose=function(){m.dispose(this);},m.extend(y),e.stateUpdater={opened:function(e){var t=this.inner('layer');if(t)this.execute(e?'showLayerAnimation':'hideLayerAnimation',{layerElement:t});}},e.stateValidator={opened:function(e){if('boolean'!==$.type(e)){var t=this.inner('layer');if(t)e=!d(t);}return e;}};var x='__prev_popup__',b='__trigger_element__',_='__hide_promise__',w=v.enter.type,C=v.leave.type,S={show:{focus:{on:o,off:a,handler:t},click:{on:o,off:a,handler:t},enter:{on:o,off:a,handler:t,startDelay:function(e){return function(t){i(e.inner('trigger'),C,t);};},endDelay:function(e){return function(t){r(e.inner('trigger'),C,t);};}},context:{on:o,off:a,handler:t}},hide:{blur:{on:o,off:a,handler:n},click:{on:s,off:u,handler:c},leave:{on:function(e,t){i(e.inner('trigger'),t.type,t.handler),i(e.inner('layer'),t.type,t.handler);},off:function(e,t){r(e.inner('trigger'),t.type,t.handler),r(e.inner('layer'),t.type,t.handler);},handler:n,startDelay:function(e){return function(t){i(e.inner('trigger'),w,t),i(e.inner('layer'),w,t);};},endDelay:function(e){return function(t){r(e.inner('trigger'),w,t),r(e.inner('layer'),w,t);};}},context:{on:s,off:u,handler:c}}};return e;}),define('cc/ui/ComboBox',['require','exports','module','../function/toString','../helper/Popup','../util/life'],function(require){'use strict';function e(e){i.init(this,e);}var t=require('../function/toString'),n=require('../helper/Popup'),i=require('../util/life'),r=e.prototype;return r.type='ComboBox',r.init=function(){var e=this;e.initStruct();var t=e.option('buttonElement'),i=e.option('menuElement'),r=new n({triggerElement:t,layerElement:i,showLayerTrigger:e.option('showMenuTrigger'),showLayerDelay:e.option('showMenuDelay'),hideLayerTrigger:e.option('hideMenuTrigger'),hideLayerDelay:e.option('hideMenuDelay'),showLayerAnimation:function(){e.execute('showMenuAnimation',{menuElement:i});},hideLayerAnimation:function(){e.execute('hideMenuAnimation',{menuElement:i});},watchSync:{opened:function(t){e.state('opened',t);}}});r.on('dispatch',function(t,n){var i=e.emit(t.originalEvent,n);e.dispatch(i,n);});var o=e.option('mainElement'),a=e.option('menuActiveClass');if(a){var s=o||i;r.after('open',function(){s.addClass(a);}).after('close',function(){s.removeClass(a);});}var u=e.option('itemSelector'),c=e.option('valueAttribute');i.on('click'+e.namespace(),u,function(t){if(e.is('opened'))e.close(t);if(!t.isDefaultPrevented()){e.set('value',$(this).attr(c));var n=$.Event(t.originalEvent);n.type='select',e.dispatch(e.emit(n));}}),e.inner({main:o,popup:r}),e.set({data:e.option('data'),value:e.option('value')});},r.render=function(){var e=this;e.renderWith(e.get('data'),e.option('menuTemplate'),e.option('menuElement'));},r._render=function(){if(!this.get('data'))return!1;else return void 0;},r.open=function(){this.state('opened',!0);},r.close=function(){this.state('opened',!1);},r.dispose=function(){var e=this;i.dispose(e),e.inner('popup').dispose(),e.option('menuElement').off(e.namespace());},i.extend(r,['open','close']),e.propertyUpdater={},e.propertyUpdater.data=e.propertyUpdater.value=function(e,n,i){var r=this,o=r.option('menuElement'),a=r.option('itemActiveClass'),s=r.option('textAttribute'),u=r.option('valueAttribute');if(i.data)this.render();else if(i.value&&a)o.find('.'+a).removeClass(a);var c,l=t(r.get('value'),null);if(null!=l){var f=function(e){if(c=e.attr(s),null==c)c=e.html();return c;};if(''!==l){var d=o.find('['+u+'="'+l+'"]');switch(d.length){case 1:if(a)d.addClass(a);c=f(d);break;case 0:break;default:r.error('value repeated.');}}else o.find('['+u+']').each(function(){var e=$(this),t=e.attr(u);if(''===t)return c=f(e),!1;else return void 0;});}return r.execute('setText',{buttonElement:r.option('buttonElement'),text:c||r.option('defaultText')}),!1;},e.propertyValidator={value:function(e){var t=this,n=t.option('itemActiveClass');if(null==e&&n){var i=t.option('menuElement').find('.'+n);if(1===i.length)e=i.attr(t.option('valueAttribute'));}return e;}},e.stateUpdater={opened:function(e){var t=this.inner('popup');if(e)t.open();else t.close();}},e;}),define('cc/util/event',['require','exports','module','../function/extend','../function/createEvent'],function(require,exports){'use strict';var e=require('../function/extend'),t=require('../function/createEvent'),n={get$:function(){var e=this;if(!e.$)e.$=$({});return e.$;},on:function(e,t,n){return this.get$().on(e,t,n),this;},once:function(e,t,n){return this.get$().one(e,t,n),this;},off:function(e,t){return this.get$().off(e,t),this;},emit:function(e,n){return e=t(e),this.get$().trigger(e,n),e;}};exports.extend=function(t){e(t,n);};}),define('cc/util/instance',['require','exports','module'],function(require,exports){exports.window=$(window),exports.document=$(document),exports.html=$(document.documentElement),exports.body=$(document.body);}),define('cc/util/life',['require','exports','module','../function/guid','../function/around','../function/extend','../function/ucFirst','../function/nextTick','../function/toBoolean','../function/createEvent','../function/replaceWith','../function/offsetParent','./event'],function(require,exports){'use strict';function e(e,t,n,i,r){return function(s,u,c){var l=this;if($.isPlainObject(s))return c=u,void $.each(s,function(e,t){l[n](e,t,c);});c=c||{};var f=l[i](s),p=l.constructor[e+'Validator'];if(p)if($.isFunction(p[s]))u=p[s].call(l,u,c);if($.isFunction(r))u=r(l,u,c);if(f!==u||c.force)if(l[t][s]=u,!c.silent){var h={};o(h,c),h.newValue=u,h.oldValue=f;var m={};m[s]=h;var v=function(e){if(e&&e[s])l.execute(e[s],[u,f,h]);};if(v(l.inner('watchSync')),v(l.option('watchSync')),c.sync)return v(l.constructor[e+'Updater']),v(l.option('watch')),void l.emit(e+'change',m);var g=l.inner(e+'Changes');if(!g)g={},l.inner(e+'Changes',g);if($.extend(g,m),!l.inner(d))l.inner(d,a(function(){l.sync(d);}));}};}function t(){this.error('initStruct() can just call one time.');}function n(e,t,n,i,r){var o,a='before'===i?'_'+t:t+'_',s=e[a];if($.isFunction(s))if(o=s.apply(e,n),o!==!1&&!$.isPlainObject(o))o=null;if(o===!1)return!1;var u=!1;if(o&&o.dispatch)u=!0,delete o.dispatch;if(r=$.Event(r),r.type=i+t,e.emit(r,o),u)e.dispatch(r,o);if(r.isDefaultPrevented())return!1;else return void 0;}var i=require('../function/guid'),r=require('../function/around'),o=require('../function/extend'),a=(require('../function/ucFirst'),require('../function/nextTick')),s=require('../function/toBoolean'),u=require('../function/createEvent'),c=require('../function/replaceWith'),l=(require('../function/offsetParent'),require('./event')),f={},d='__update_async__',p={},h={initStruct:function(){var e=this,n=e.option('mainElement'),i=e.option('mainTemplate');if('string'===$.type(i)){var r=e.option('share'),o=e.type+i;if(r)n=p[o];var a;if(!n){if(a=$(i),r)p[o]=a;}else if(e.option('replace'))c(n,a=$(i));else n.html(i);if(a)n=a,e.option('mainElement',n);}var s=e.option('parentSelector');if(s&&!n.parent().is(s))n.appendTo(s);e.initStruct=t;},warn:function(e){if('undefined'!=typeof console)console.warn(['[CC warn]',this.type,e].join(' '));},error:function(e){throw new Error(['[CC error]',this.type,e].join(' '));},live:function(e,t,n){var i=this,r=i.inner('main');if(r)r.on(e+i.namespace(),t,n);return i;},emit:function(e,t){var n=this,i=n.option('context')||n;e=u(e),e.cc=i;var r=[e];if($.isPlainObject(t))r.push(t);e.type=e.type.toLowerCase();var o=i.get$();o.trigger.apply(o,r);var a='on'+e.type;if(!e.isPropagationStopped()&&i.execute(a,r)===!1)e.preventDefault(),e.stopPropagation();return i.execute(a+'_',r),e;},dispatch:function(e,t){if(!e.isPropagationStopped()){if(!e.originalEvent)e.originalEvent={preventDefault:$.noop,stopPropagation:$.noop};var n=$.Event(e);if(n.type='dispatch',this.emit(n,t),n.isPropagationStopped())e.preventDefault(),e.stopPropagation();}},before:function(e,t){return this.on('before'+e.toLowerCase(),t);},after:function(e,t){return this.on('after'+e.toLowerCase(),t);},find:function(e){var t=this.inner('main');if(t){var n=t.find(e);if(n.length)return n;}},appendTo:function(e){var t=this.inner('main');if(t)t.appendTo(e);},prependTo:function(e){var t=this.inner('main');if(t)t.prependTo(e);},execute:function(e,t){var n=this,i=e;if('string'===$.type(e))i=n.option(e);if($.isFunction(i)){var r=n.option('context')||n;if($.isArray(t))return i.apply(r,t);else return i.call(r,t);}},renderWith:function(e,t,n){var i=this;if(!t)if(t=i.option('renderTemplate'),!t)t=i.option('mainTemplate');if(!n)n=i.option('mainElement');var r=i.option('renderSelector');if(r)n=n.find(r);var o;if($.isPlainObject(e)||$.isArray(e))o=i.execute('render',[e,t]);else if('string'===$.type(e))o=e;n.html(o);},namespace:function(){return'.'+this.guid;},option:function(e,t){var n=this;if(1===arguments.length&&'string'===$.type(e))return n.options[e];else{if($.isPlainObject(e))return void $.each(e,function(e,t){n.option(e,t);});n.options[e]=t;}},inner:function(e,t){var n=this,i=n.inners||{};if(1===arguments.length&&'string'===$.type(e))return i[e];else{if($.isPlainObject(e))return void $.each(e,function(e,t){n.inner(e,t);});i[e]=t;}},is:function(e){return this.states[e];},state:e('state','states','state','is',function(e,t){return s(t,!1);}),get:function(e){return this.properties[e];},set:e('property','properties','set','get')},m={sync:function(){var e=this,t=function(t,n,i){$.each(t,function(r,o){return e.execute(n[r],[o.newValue,o.oldValue,i?t:o]);});};if($.each(['property','state'],function(n,i){var r=e.inner(i+'Changes');if(r){e.inner(i+'Changes',null);var o=e.constructor[i+'Updater'];if(o)t(r,o,!0);var a=e.option('watch');if(a)t(r,a);e.emit(i+'change',r);}}),arguments[0]!==d)e.execute(e.inner(d));e.inner(d,!1);},_sync:function(){if(!this.inner(d))return!1;else return void 0;},_init:function(){var e='initCalled';if(this.is(e))return!1;else return void this.state(e,!0);},_dispose:function(){var e='disposeCalled';if(this.is(e))return!1;else return void this.state(e,!0);}};exports.extend=function(e,t){o(e,m),$.each(e,function(i,o){var a=i.indexOf('_');if($.isFunction(o)&&0!==a&&a!==i.length-1)if(!($.isArray(t)&&$.inArray(i,t)>=0)){var s=function(e){return n(this,i,arguments,'before',e);},u=function(e){var t=this,r=arguments,a=function(){return n(t,i,r,'after',e);};if(o.length+1===r.length){var s=r[r.length-1];if(s&&$.isFunction(s.then))return void s.then(a);}a();};r(e,i,s,u);}}),o(e,h),l.extend(e);},exports.init=function(e,t){if(!t)t={};return o(t,e.constructor.defaultOptions),t.onafterinit_=function(){e.state('inited',!0);},t.onafterdispose_=function(){e.state('disposed',!0),e.off();var t=e.inner('main');if(e.option('removeOnDispose')&&t)t.remove();a(function(){delete f[e.guid],e.properties=e.options=e.changes=e.states=e.inners=e.guid=null;});},f[e.guid=i()]=e,e.properties={},e.options=t,e.states={},e.inners={},e.init(),e;},exports.dispose=function(e){e.sync();var t=e.inner('main')||e.option('mainElement');if(t)t.off(e.namespace());};}),define('cc/util/trigger',['require','exports','module','../function/split'],function(require,exports){'use strict';function e(e){return function(t){var i=e.delay,r=e.startDelay,o=e.endDelay,a=function(){e.handler.call(t.currentTarget,t);},s=function(){if(i>0&&r&&o){var t=function(){e[n]=setTimeout(function(){u(n);},i);},s=function(){clearTimeout(e[n]),o(u,e),e[n]=null;},u=function(t){if(e[n])s();if(n===t)a();};if(!e[n])r(u,e),t();}else a();},u=e.beforeHandler;if($.isFunction(u)){var c=u.call(t.currentTarget,t);if(c===!1)return;else if(c&&$.isFunction(c.then))return void c.then(s);}s();};}var t=require('../function/split'),n='delayTimer';return exports={focus:{type:'focusin',handler:e},blur:{type:'focusout',handler:e},click:{type:'click',handler:e},enter:{type:'mouseenter',handler:e},leave:{type:'mouseleave',handler:e},context:{type:'contextmenu',handler:e}},exports.parse=function(e,n){var i={};if(e)$.each(t(e,','),function(e,t){var r=exports[t];if(r)i[t]={type:r.type,handler:r.handler(n(t))};});return i;},exports;}),define('common/function/compressImage_1539d29a96',function(){function e(e,n,i,r,o){var a=0.05;if(r/o/(i/n)>1+2*a)return'@1e_'+n+'w_1c_0i_1o_90Q_1x.'+e+'%7C0-'+a*n*o/r+'-'+n+'-'+i+'a.'+e.toLowerCase();else return t(e,n,i);}function t(e,t,n,i){return'@'+(i?0:1)+'e_'+t+'w_'+n+'h_1c_0i_1o_90Q_1x.'+e.toLowerCase();}return function(n){var i=n.url,r=i.split('.').pop();if('gif'===r)r='jpg';var o=n.width,a=n.height,s=n.rawWidth,u=n.rawHeight;if(o=Math.floor(o),a=Math.floor(a),null!=s&&null!=u)return s=Math.floor(s),u=Math.floor(u),i+e(r,o,a,s,u);else return i+t(r,o,a,n.noCrop);};}),define('userCenter/common/component/Select_html',function(){return'<div class="dropdown{{#if options.className}} {{options.className}}{{/if}}{{#if options.hidden}} hidden{{/if}}"><div class="button secondary"{{#if options.disabled}} disabled{{/if}}><i class="icon icon-caret-down"></i><span class="text">{{{options.defaultText}}}</span></div><ul class="menu"></ul><input type="hidden" name="{{options.name}}" /><div class="tooltip error right" data-error-for="{{options.name}}"></div></div>';}),define('userCenter/common/component/Select_fea6c25a54',['require','exports','module','custom/form/Select','cc/function/autoScrollUp','./Select_html'],function(require){'use strict';var e=require('custom/form/Select'),t=require('cc/function/autoScrollUp');return Ractive.extend({template:require('./Select_html'),data:function(){return{options:{name:'',className:'',defaultText:'请选择',data:null,value:'',disabled:!1,hidden:!1,onselect:$.noop}};},onrender:function(){var n=this,i=$(n.getElement()),r=n.select=new e({mainElement:i,data:n.get('options.data'),value:n.get('options.value'),defaultText:n.get('options.defaultText'),onselect:n.get('options.onselect'),watch:{value:function(e){if(e!=n.get('options.value'))n.set('options.value',e);},opened:function(e){if(e){var r=i.find('.menu');setTimeout(function(){t(r,r.find('.active'));},500);}else n.set('opened',!1);}}});n.observe('options.value',function(e){r.set('value',e);}),n.observe('options.data',function(e){r.set('data',e);});},onteardown:function(){this.select.dispose();}});}),define('userCenter/common/function/renderImage_b12a57d1e9',['require','exports','module','cc/function/toNumber','common/function/compressImage_1539d29a96'],function(require){'use strict';var e=require('cc/function/toNumber'),t=require('common/function/compressImage_1539d29a96');return function(n){'undefined'!=typeof window.devicePixelRatio?window.devicePixelRatio:1;$('img[data-src]',n).each(function(){var n=$(this),i=n.attr('data-src'),r=e(n.attr('data-width'),0),o=e(n.attr('data-height'),0),a=!e(n.attr('data-crop'),0);if(r>0&&o>0){var s=t({url:i,width:r,height:o,noCrop:a}),u=t({url:i,width:2*r,height:2*o,noCrop:a}),c=t({url:i,width:3*r,height:3*o,noCrop:a}),l=[u+' 2x',c+' 3x'];n.prop({src:s,srcset:l.join(',')}).removeAttr('data-src');}});};}),define('userCenter/common/service_1288b24a55',['require','exports','module'],function(require,exports){'use strict';function e(e,t){var n=e;if(t)n+=$.param(t);return n;}function t(t,n,s){n=n||{},s=$.extend({},i,s);var u,c;if(o[t])c=e(t,n),u=a[c];var l=$.Deferred();if(u)if(!u.response)u.deferredList.push(l);else l.resolve(u.response);else{var f=userData.number||0;if(!r[t])n._user_number=f,$.extend(n,siteData.monkey);if($.ajax({url:t,data:n,method:'post',dataType:'json',timeout:s.timeout,async:s.sync?!1:!0}).then(function(e){if(o[t])u=a[c],u.response=e,$.each(u.deferredList,function(t,n){if(e&&0===e.code)n.resolve(e);else n.reject(e);}),u.deferredList.length=0;else if(e&&0===e.code)l.resolve(e);else{var n=e.msg;if(n&&!s.preventError)alert({title:'提示',content:n});l.reject(e);}},function(e,t){if('timeout'===t||'error'===t)l.reject({code:-1});}),o[t])a[c]={},a[c].deferredList=[l];}return l;}function n(e,t){return $.ajax({url:e,data:t,dataType:'jsonp'});}var i={timeout:5000,sync:!1,stringify:!1,preventError:!1},r={'/area/list':1,'/subject/getList':1},o={'/user/basicInfo':1},a={};exports.post=t,exports.jsonp=n,exports.getUserBasicInfo=function(e){var n;if(e&&null!=e.userId&&null!=e.userType)n={user_id:e.userId,user_type:e.userType};return t('/user/basicInfo',n);},exports.getCourseList=function(){return t('/lesson/list');},exports.getUserType=function(){return t('/user/roles');},exports.sendInviteCode=function(e){var n=$.extend(e.formData||{},{invite_code:e.inviteCode,role:e.role});return t('/user/switch_role_ajax',n);},exports.getCDNSpeedTestUrls=function(){return t('/video/getSpeedTestUrl');};}),define('userCenter/teacherCenter/common/service_79853c6d3e',['require','exports','module','../../common/service_1288b24a55'],function(require,exports){'use strict';var e=require('../../common/service_1288b24a55');exports.overviewAudit=function(t){return e.post('/teacher_center/overview',t);},exports.getUserBasicInfo=function(t){var n;if(t&&null!=t.userId&&null!=t.userType)n={user_id:t.userId,user_type:t.userType};return e.post('/user/basicInfo',n);},exports.getCourseList=function(t){return e.post('/tcenter/courses/class-courses/list',t);},exports.doCourseActions=function(t){return e.post('/tcenter/courses/class-courses/do',t);};}),define('userCenter/teacherCenter/dataCenter/header_html',function(){return'<ul class="data-center-header"><li class="data-center-header-item visit"><a rel="nofollow" class="link" href="/teacher_center/visit_data">流量分析</a></li><li class="data-center-header-item transaction"><a rel="nofollow" class="link" href="/teacher_center/transaction_data">转化统计</a></li><li class="data-center-header-item sysnthetic"><a rel="nofollow" class="link" href="/teacher_center/sysnthetic_sort">排名解析</a></li><li class="data-center-header-item RecordPoints"><a rel="nofollow" class="link" href="/teacher_center/deductList">扣分记录</a></li></ul>';}),define('userCenter/teacherCenter/dataCenter/sysntheticSort/nocourse_html',function(){return'<div id="content" class="card"><div id="content-header"></div><div class="no-course">暂无排名信息</div></div>';}),define('userCenter/teacherCenter/dataCenter/sysntheticSort/sysntheticSort_html',function(){return'<div id="content" class="card"><div id="content-header"></div><div class="title"><div class="title-header">{{#if number}}当前在{{city}}&nbsp;<Select class="title-select" options="{{statusSelectOptions}}"/>&nbsp;中排名第<span class="number">{{number}}</span>\uFF0C打败了<span class="win">{{win}}</span>的同行老师{{else}}当前在{{city}}&nbsp;<Select class="title-select" options="{{statusSelectOptions}}"/>&nbsp;暂无排名{{/if}}<span class="info influreson" on-click="ranking()" target="_blank">{{influence}}</span></div><div class="title-descript {{#if number}}appear{{else}}hidden{{/if}}" >评分影响因素解读</div><div class="canvas-radar {{#if number}}appear{{else}}hidden{{/if}}"></div></div><div class="title {{#if number}}appear{{else}}hidden{{/if}}">排名解析</div><div class="data-source {{#if number}}appear{{else}}hidden{{/if}}"></div><div class="title">该行业TOP5老师</div><div class="teachers"></div></div>';}),define('userCenter/teacherCenter/dataCenter/sysntheticSort/sysntheticSort',['require','exports','echarts','echarts/chart/radar','../../common/service_79853c6d3e','underscore','userCenter/common/function/renderImage_b12a57d1e9','./nocourse_html','./sysntheticSort_html','./vipsort_html','./viptop_html','../../../common/component/Select_fea6c25a54','./../header_html'],function(require,exports){'use strict';function e(e){var t=[],i=[];$.each(e,function(n){t.push(e[n].score),i.push(e[n].name);}),n.setOption({tooltip:{trigger:'axis'},polar:[{indicator:[{text:i[0],max:100},{text:i[1],max:100},{text:i[2],max:100},{text:i[3],max:100},{text:i[4],max:100}],radius:150}],series:[{name:'综合排名',type:'radar',opacity:0.8,itemStyle:{normal:{color:'#4bb9f5',areaStyle:{type:'default',color:'#4bb9f5'}},axisPointer:{emphasis:{label:{show:!0,position:'center',textStyle:{fontSize:'30',fontWeight:'bold',color:'#000000'}}}}},data:[{value:t,name:''}]}]});}var t=require('echarts');require('echarts/chart/radar');var n,i=(require('../../common/service_79853c6d3e'),require('underscore')),r=require('userCenter/common/function/renderImage_b12a57d1e9');exports.init=function(o){var a=[],s=o.results;if(!o.results)new Ractive({el:'#container',template:require('./nocourse_html')});else{var u=(i.keys(o.results).length,[]),c=[],l=[];$.each(s,function(e,t){a.push({text:t.name,value:e}),u.push(t.rank),c.push(t.rank_rate),l.push(t.top_5);});var f=new Ractive({el:'#container',template:require('./sysntheticSort_html'),data:{statusSelectOptions:{name:'status',className:'course-select',data:a,value:i.keys(s)[0],onselect:function(){var t=this.properties.value,n=s[t].rank,i=s[t].rank_rate;if(f.set('number',n),''!=i)$('.title-header').find('.win').text(i+'%');if(''!=n)$('.title-header').find('.number').text(n);e(s[t].Obj),new Ractive({el:'.data-source',template:require('./vipsort_html'),data:{table:s[t].Obj}}),new Ractive({el:'.teachers',template:require('./viptop_html'),data:{teachers:s[t].top_5,getName:function(e){return e.length>5?e.substr(0,5)+'...':e;}}}),r($('.teachers'));}},city:o.city_name,data:o,number:u[0],win:c[0]+'%',influence:o.others.name,question:o.others,results:o.results},components:{Select:require('../../../common/component/Select_fea6c25a54')},ranking:function(){var e="<div class='qadialog' style='width: 370px'>";e+=this.get('question').question.Q1+'<br/>',e+=this.get('question').answer.A1+'<br/><br/>',e+=this.get('question').question.Q2+'<br/>',e+=this.get('question').answer.A2+'<br/>',e+='</div>',alert({title:'',content:e,buttons:[{text:'确定',type:'primary',action:function(){this.hide();}}]});}});new Ractive({el:'.teachers',template:require('./viptop_html'),data:{teachers:l[0],getName:function(e){return e.length>5?e.substr(0,5)+'...':e;}}}),r($('.teachers'));var d=[];for(var p in s)d.push(s[p].Obj);{$('#content');}n=t.init($('.canvas-radar')[0],'shine'),e(d[0]),new Ractive({el:'.data-source',template:require('./vipsort_html'),data:{table:d[0]}});}new Ractive({el:'#content-header',template:require('./../header_html')});};}),define('userCenter/teacherCenter/dataCenter/sysntheticSort/vipsort_html',function(){return'<div class="sortanalyse">{{#each table:idx}}<div class="source-item"><div class="source-left" style="line-height: {{factor.sub_factor.length*80}}px">{{name}}</div>{{#each factor.sub_factor:index}}<div class="source-right {{#if index ==0}} first {{/if}}"><a target="_blank" class="source-right-item"><span class="right-title">{{name}}</span><div class="right-back" data-title="{{content}}"><div class="progress radius {{#if idx == 0}} one{{elseif idx == 1}} two{{elseif idx == 2}} three{{elseif idx == 3}} four{{elseif idx == 4}} five{{/if}}">{{#if number != 0}}<div class="meter" style="width: {{number}}%"></div>{{/if}}</div></div><span class="right-descript">{{title}}</span></a><div class="bottom-descript">{{{cutString(content, 120)}}}<!-- <a href="{{url}}" target="_blank" class="detail info">{{url_title}}</a> --></div></div>{{/each}}</div>{{/each}}</div>';}),define('userCenter/teacherCenter/dataCenter/sysntheticSort/viptop_html',function(){return'{{ #each teachers }}<a target="_blank" href="{{homelink}}"><div class="top-teacher"><div class="teacher-img"><img class="image huge round" data-src="{{avatar}}" data-width="100" data-height="100"/><div class="rank {{#if rank<=3 }} active {{/if}}">{{rank}}</div></div><div class="teacher-name">{{getName(nickname)}}</div></div></a>{{ /each }}';});