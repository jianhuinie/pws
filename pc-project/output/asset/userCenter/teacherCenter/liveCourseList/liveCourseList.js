define('custom/form/Select',['require','exports','module','cc/form/Select'],function(require){'use strict';var e=require('cc/form/Select');return e.defaultOptions={buttonSelector:'> .button',menuSelector:'> .menu',labelSelector:'> .button > .text',itemSelector:'li',itemActiveClass:'active',textAttribute:'data-text',valueAttribute:'data-value',defaultText:'- 请选择 -',menuActiveClass:'opened',showMenuTrigger:'click',hideMenuTrigger:'click',showMenuAnimation:function(e){e.menuElement.show();},hideMenuAnimation:function(e){e.menuElement.hide();},render:function(e){var t=[];return $.each(e,function(e,n){var i=[];$.each(n,function(e,t){if('text'!==e&&null!=t)i.push('data-'+e+'="'+t+'"');});var o=i.join(' ');if(o)o=' '+o;t.push('<li class="item"'+o+'>'+n.text+'</li>');}),t.join('');}},e;}),define('custom/form/Text',['require','exports','module','cc/form/Text'],function(require){'use strict';var e=require('cc/form/Text');return e.defaultOptions={nativeFirst:!0,inputSelector:'input[type="text"],input[type="password"],textarea',labelSelector:'.placeholder',showPlaceholderAnimation:function(e){e.labelElement.fadeIn(500);},hidePlaceholderAnimation:function(e){e.labelElement.hide();}},e;}),define('custom/ui/Pager',['require','exports','module','cc/ui/Pager','cc/util/etpl'],function(require){'use strict';var e=require('cc/ui/Pager'),t=require('cc/util/etpl'),n={};return e.defaultOptions={hideOnSingle:!0,showCount:6,startCount:1,endCount:2,pageAttribute:'data-page',pageSelector:'[data-page]',prevTemplate:'<li class="item button<!-- if: ${active} === ${first} --> disabled"<!-- else --><!-- var: prev = ${active} - 1 -->"data-page="${prev}"<!-- /if -->><i class="icon icon-chevron-left"></i></li>',nextTemplate:'<li class="item button<!-- if: ${active} === ${last} --> disabled"<!-- else --><!-- var: next = ${active} + 1 -->" data-page="${next}"<!-- /if -->><i class="icon icon-chevron-right"></i></li>',pageTemplate:'<li class="item button<!-- if: ${active} === ${page} --> checked<!-- /if -->" data-page="${page}">${page}</li>',ellipsisTemplate:'<li class="item ellipsis">...</li>',render:function(e,i){var o=n[i];if(!o)o=n[i]=t.compile(i);return o(e);},showAnimation:function(e){e.mainElement.show();},hideAnimation:function(e){e.mainElement.hide();}},e;}),define('cc/form/Select',['require','exports','module','../ui/ComboBox','../util/life','./common'],function(require){'use strict';function e(e){n.init(this,e);}var t=require('../ui/ComboBox'),n=require('../util/life'),i=require('./common'),o=e.prototype;return o.type='Select',o.init=function(){var e=this;e.initStruct();var n=e.option('mainElement'),o=new t({mainElement:n,data:e.option('data'),value:e.option('value'),defaultText:e.option('defaultText'),buttonElement:n.find(e.option('buttonSelector')),menuElement:n.find(e.option('menuSelector')),menuTemplate:e.option('menuTemplate'),renderSelector:e.option('renderSelector'),renderTemplate:e.option('renderTemplate'),showMenuTrigger:e.option('showMenuTrigger'),showMenuDelay:e.option('showMenuDelay'),hideMenuTrigger:e.option('hideMenuTrigger'),hideMenuDelay:e.option('hideMenuDelay'),itemSelector:e.option('itemSelector'),itemActiveClass:e.option('itemActiveClass'),menuActiveClass:e.option('menuActiveClass'),textAttribute:e.option('textAttribute'),valueAttribute:e.option('valueAttribute'),showMenuAnimation:function(t){e.execute('showMenuAnimation',t);},hideMenuAnimation:function(t){e.execute('hideMenuAnimation',t);},render:function(t,n){return e.execute('render',[t,n]);},setText:function(t){var i=e.option('labelSelector');n.find(i).html(t.text);}});e.once('aftersync',function(){o.option('watchSync',{value:function(t){e.set('value',t);},opened:function(t){e.state('opened',t);}}),o.set('value',e.get('value')),e.state('opened',o.is('opened'));});var r=i.findNative(e,'input[type="hidden"]');o.on('dispatch',function(t,n){var i=t.originalEvent;switch(i.type){case'afteropen':r.trigger('focusin');break;case'afterclose':r.trigger('focusout');}e.dispatch(e.emit(i,n),n);}),e.inner({main:n,'native':r,combobox:o}),e.set({data:e.option('data'),name:e.option('name'),value:e.option('value')});},o.open=function(){this.state('opened',!0);},o.close=function(){this.state('opened',!1);},o.dispose=function(){n.dispose(this),this.inner('combobox').dispose();},n.extend(o,['open','close']),e.propertyUpdater={name:function(e){i.prop(this,'name',e);}},e.propertyUpdater.data=e.propertyUpdater.value=function(e,t,n){var o=this,r={},a=n.value;if(a){var s=a.newValue;i.prop(o,'value',s),r.value=s;}var c=n.data;if(c)r.data=c.newValue;return o.inner('combobox').set(r),!1;},e.propertyValidator={name:function(e){return i.validateName(this,e);},value:function(e){return i.validateValue(this,e);}},e.stateUpdater={opened:function(e){var t=this.inner('combobox');if(e)t.open();else t.close();}},e;}),define('cc/form/Text',['require','exports','../helper/Input','../helper/Placeholder','../util/life','./common'],function(require){'use strict';function e(e){i.init(this,e);}var t=require('../helper/Input'),n=require('../helper/Placeholder'),i=require('../util/life'),o=require('./common'),r=e.prototype;return r.type='Text',r.init=function(){var e=this;e.initStruct();var i=new n({mainElement:e.option('mainElement'),value:e.option('placeholder'),hidden:!0,autoTrim:e.option('autoTrim'),nativeFirst:e.option('nativeFirst'),inputSelector:e.option('inputSelector'),labelSelector:e.option('labelSelector'),showAnimation:e.option('showPlaceholderAnimation'),hideAnimation:e.option('hidePlaceholderAnimation')});i.sync();var o=i.inner('input'),r=new t({mainElement:o,shortcut:e.option('shortcut'),value:e.option('value')});r.sync(),i.option('watchSync',{value:function(t){e.set('placeholder',t);}}),r.option('watchSync',{value:function(t){e.set('value',t);}}),e.inner({main:i.inner('main'),'native':o,input:r,placeholder:i}),e.set({name:e.option('name'),value:r.get('value'),placeholder:i.get('value')});},r.dispose=function(){var e=this;i.dispose(e),e.inner('input').dispose(),e.inner('placeholder').dispose();},i.extend(r),e.propertyUpdater={name:function(e){o.prop(this,'name',e);},value:function(e){var t=this.inner('input');t.set('value',e),t.sync(),this.inner('placeholder').render();},placeholder:function(e){this.inner('placeholder').set('value',e);}},e.propertyValidator={name:function(e){return o.validateName(this,e);}},e;}),define('cc/form/common',['require','exports','module'],function(require,exports){'use strict';exports.prop=function(e,t,n){if($.isPlainObject(t))$.each(t,function(t,n){exports.prop(e,t,n);});else{var i=e.inner('native');if(2===arguments.length)return i.prop(t);else{if(i.prop(t)!==n)i.prop(t,n);if('value'===t)i.trigger('change');}}},exports.setClass=function(e,t,n){var i=e.option(t);if(i)e.option('mainElement')[n+'Class'](i);},exports.findNative=function(e,t){var n=e.option('mainElement').find(t);if(0===n.length)e.error('form/'+e.type+' 必须包含一个 ['+t+'].');return n.eq(0);},exports.validateName=function(e,t){if('string'!==$.type(t))if(t=exports.prop(e,'name'),!t||'string'!==$.type(t))e.error('name attribute is missing.');return t;},exports.validateValue=function(e,t){var n=$.type(t);if('number'===n)t=''+t;else if('string'!==n)t=exports.prop(e,'value')||'';return t;};}),define('cc/function/around',['require','exports','module'],function(){'use strict';return function(e,t,n,i){var o='string'===$.type(t),r=o?e[t]:e;if(!o)i=n,n=t;var a=function(){var e,t=$.makeArray(arguments);if($.isFunction(n))e=n.apply(this,t);if(e!==!1){if($.isFunction(r))e=r.apply(this,t);if($.isFunction(i)){t.push(e);var o=i.apply(this,t);if('undefined'!==$.type(o))e=o;}return e;}};return o?e[t]=a:a;};}),define('cc/function/autoScrollUp',['require','exports','module'],function(){'use strict';return function(e,t){var n=e.scrollTop(),i=n+e.height(),o=t.prop('offsetTop');if(n>o||o>i)e.scrollTop(o);};}),define('cc/function/contains',['require','exports','module'],function(){'use strict';return function(e,t){if(e=e.jquery?e[0]:e,t=t.jquery?t[0]:t,!e||!t)return!1;if(e===t)return!0;else return $.contains(e,t);};}),define('cc/function/createEvent',['require','exports','module'],function(){'use strict';return function(e){if(e&&!e[$.expando])e='string'===$.type(e)||e.type?$.Event(e):$.Event(null,e);return e||$.Event();};}),define('cc/function/debounce',['require','exports','module'],function(){'use strict';return function(e,t,n){function i(n){r=setTimeout(function(){r=null,o=$.now(),e.apply(null,$.makeArray(n));},t);}t='number'===$.type(t)?t:50;var o,r;return function(){if(n&&o>0&&$.now()-o<t)clearTimeout(r),r=null;if(!r)i(arguments);};};}),define('cc/function/extend',['require','exports','module'],function(){'use strict';return function(e,t){if($.isPlainObject(t))$.each(t,function(t,n){if(!(t in e))e[t]=n;});};}),define('cc/function/guid',['require','exports','module'],function(){var e=0;return function(){return'cc_'+e++;};}),define('cc/function/isHidden',['require','exports','module'],function(){'use strict';return function(e){e.css('display');return'none'===e.css('display')||0==e.css('opacity')||'hidden'===e.css('visibility');};}),define('cc/function/nextTick',['require','exports','module'],function(){'use strict';return function(e){var t=setTimeout(e,0);return function(){clearTimeout(t);};};}),define('cc/function/offsetParent',['require','exports','module'],function(){'use strict';function e(e){return e.is('body')||'static'!==e.css('position');}return function(t){if(t.is('body'))return t;for(var n=t.parent();!e(n);)n=n.parent();return n;};}),define('cc/function/replaceWith',['require'],function(){'use strict';return function(e,t){e=e[0],t=t[0],e.parentNode.replaceChild(t,e);};}),define('cc/function/split',['require','exports','module'],function(){'use strict';return function(e,t){var n=[];if('number'===$.type(e))e=''+e;if(e&&'string'===$.type(e))$.each(e.split(t),function(e,t){if(t=$.trim(t))n.push(t);});return n;};}),define('cc/function/supportInput',['require','exports','module'],function(){'use strict';return function(){var e=$('<input type="text" />')[0];return'oninput'in e;};}),define('cc/function/supportLocalStorage',['require','exports','module'],function(){'use strict';return function(){return'undefined'!=typeof window.localStorage;};}),define('cc/function/supportPlaceholder',['require','exports','module'],function(){'use strict';return function(){var e=$('<input type="text" />')[0];return'placeholder'in e;};}),define('cc/function/toBoolean',['require','exports','module'],function(){'use strict';return function(e,t){if('boolean'!==$.type(e)){if(1===arguments.length)t=!!e;e=t;}return e;};}),define('cc/function/toNumber',['require','exports','module'],function(){'use strict';var e={'int':parseInt,'float':parseFloat};return function(t,n,i){if('number'!==$.type(t)){var o=e[i];if(o)t=o(t,10);else if($.isNumeric(t))t=+t;else t=0/0;}return isNaN(t)?n:t;};}),define('cc/function/toString',['require','exports','module'],function(){'use strict';return function(e,t){var n=$.type(e);if('number'===n)e=''+e;else if('string'!==n){if(1===arguments.length)t='';e=t;}return e;};}),define('cc/function/ucFirst',['require','exports','module'],function(){'use strict';return function(e){return e.charAt(0).toUpperCase()+e.slice(1);};}),define('cc/helper/Input',['require','exports','module','../function/toString','../util/life','../util/input','../util/keyboard','./Keyboard'],function(require){'use strict';function e(e){n.init(this,e);}var t=require('../function/toString'),n=require('../util/life'),i=require('../util/input'),o=require('../util/keyboard'),r=require('./Keyboard'),a=e.prototype;return a.type='Input',a.init=function(){var e=this,t=e.option('mainElement');i.init(t);var n,a=new r({mainElement:t,shortcut:e.option('shortcut')}),s=function(n){if('string'!==$.type(n))n=t.val();e.set('value',n);};a.on('dispatch',function(i,r){var a=i.originalEvent;switch(a.type){case'beforelongpress':n=!0;break;case'afterlongpress':n=!1;var c=r.keyCode;if(o.isCharKey(c)||o.isDeleteKey()||t.is('textarea')&&c===o.enter)s();}e.dispatch(e.emit(a,r),r);});var c=e.namespace();t.on('blur'+c,s).on(i.INPUT+c,function(){if(!n||!e.option('silentOnLongPress'))s();}),e.inner({keyboard:a,main:t}),s(e.option('value'));},a.dispose=function(){var e=this;n.dispose(e),i.dispose(e.inner('main')),e.inner('keyboard').dispose();},n.extend(a),e.propertyUpdater={value:function(e,t,n){var i=this.inner('main');if(i.val()!==e||n.value.force)i.val(e);}},e.propertyValidator={value:function(e){return t(e);}},e;}),define('cc/helper/Keyboard',['require','exports','module','../function/split','../util/life','../util/keyboard'],function(require){'use strict';function e(e){i.init(this,e);}function t(e){var t=[];return $.each(e,function(e,i){var r=[],a='plus',s=n(e.replace(/\$\+/g,a),'+');if($.each(o.combinationKey,function(e){if($.inArray(e,s)<0)s.push('!'+e);}),$.each(s,function(e,t){var n=0===t.indexOf('!');if(n)t=t.substr(1);if(t===a)t='$+';if(o.combinationKey[t])r.push((n?'!':'')+'e.'+t+'Key');else if(o[t])r.push('e.keyCode==='+o[t]);else return r.length=0,!1;}),r.length>0)t.push({test:new Function('e','return '+r.join('&')),handler:i});}),t;}var n=require('../function/split'),i=require('../util/life'),o=require('../util/keyboard'),r=e.prototype;return r.type='Keyboard',r.init=function(){var e=this,n=e.option('shortcut');if($.isPlainObject(n))n=t(n);var i,o=0,r=1,a=function(){return o>r;},s=e.namespace();e.option('mainElement').on('keydown'+s,function(t){var s=t.keyCode;if(i===s&&o>0){if(o===r)e.emit('beforelongpress',{keyCode:s},!0);o++;}else i=s,o=1;if(e.dispatch(e.emit(t)),n){var c={isLongPress:a()},u=[t,c];$.each(n,function(n,i){if(i.test(t))e.execute(i.handler,u);});}}).on('keyup'+s,function(t){if(a())e.emit('afterlongpress',{keyCode:t.keyCode},!0);o=0,i=null,e.dispatch(e.emit(t));});},r.dispose=function(){i.dispose(this);},i.extend(r),e;}),define('cc/helper/Placeholder',['require','exports','module','../function/isHidden','../function/toString','../function/supportPlaceholder','../util/life','../util/input'],function(require){'use strict';function e(e){r.init(this,e);}function t(e,t){var n=e.inner('proxy'),i=n[t];if(i)return i(e);else return void 0;}var n=require('../function/isHidden'),i=require('../function/toString'),o=require('../function/supportPlaceholder')(),r=require('../util/life'),a=require('../util/input'),s=e.prototype;s.type='Placeholder',s.init=function(){var e=this;e.initStruct(),e.inner({proxy:e.option('nativeFirst')&&o?c:u}),t(e,'init'),e.set({value:e.option('value')}),e.state({hidden:e.option('hidden')});},s.show=function(){this.state('hidden',!1);},s._show=function(){if(!this.is('hidden'))return!1;else return void 0;},s.hide=function(){this.state('hidden',!0);},s._hide=function(){if(this.is('hidden'))return!1;else return void 0;},s.render=function(){t(this,'render');},s.dispose=function(){t(this,'dispose'),r.dispose(this);},r.extend(s),e.propertyUpdater={value:function(){this.render();}},e.propertyValidator={value:function(e){if(e=i(e,null),null==e)e=this.inner('input').attr('placeholder');return e||'';}},e.stateUpdater={hidden:function(e){t(this,e?'hide':'show');}},e.stateValidator={hidden:function(e){if('boolean'!==$.type(e))e=t(this,'isHidden');return e;}};var c={init:function(e){var t=e.option('mainElement'),n=e.option('inputSelector'),i=t.prop('tagName');e.inner({main:t,input:'INPUT'===i||'TEXTAREA'===i?t:t.find(n)});},render:function(e){e.inner('input').attr('placeholder',e.get('value'));},isHidden:function(e){return e.inner('input').val().length>0;}},u={init:function(e){var t=e.option('mainElement'),n=e.option('inputSelector'),i=e.option('labelSelector'),o=t.find(n),r=t.find(i);o.removeAttr('placeholder'),e.inner({main:t,input:o,label:r}),a.init(o);var s=$.proxy(e.render,e);s();var c=e.namespace();t.on('click'+c,i,function(){o.focus();}).on('change'+c,n,s).on(a.INPUT+c,n,s);},show:function(e){e.execute('showAnimation',{labelElement:e.inner('label')});},hide:function(e){e.execute('hideAnimation',{labelElement:e.inner('label')});},render:function(e){var t=e.inner('input');e.inner('label').html(e.get('value'));var n=t.val();if(e.option('autoTrim'))n=$.trim(n);if(n)e.hide();else e.show();},dispose:function(e){a.dispose(e.inner('input'));},isHidden:function(e){return n(e.inner('label'));}};return e;}),define('cc/helper/Popup',['require','exports','module','../function/isHidden','../function/contains','../function/nextTick','../util/life','../util/trigger','../util/instance'],function(require){'use strict';function e(e){m.init(this,e);}function t(e,t){return function(n){var i=$(this);if('disabled'!==i.attr('disabled')){if($.isFunction(t))if(!t.call(this,n))return;e.open(n);}};}function n(e,t){return function(n){var i=$(this);if('disabled'!==i.attr('disabled')){if($.isFunction(t))if(!t.call(this,n))return;e.close(n);var o=e.inner(x);if(o)e.sync(),o.resolve();}};}function i(e,t,n,i){if(e)e.on(t,i,n);}function o(e,t,n){if(e)e.off(t,n);}function r(e,t){var n=e.option('triggerElement'),o=e.option('triggerSelector');if(n||o)i(n||g.body,t.type,t.handler,o);}function a(e,t){o(e.option('triggerElement')||g.body,t.type,t.handler);}function s(e,t){i(g.document,t.type,t.handler);}function c(e,t){o(g.document,t.type,t.handler);}function u(e){return n(e,function(t){return!d(e.inner('layer'),t.target);});}function l(e,t){var n=e.option('triggerElement'),i=e.option('triggerSelector');if(n&&!i)return n;if(t)return $(t.currentTarget);else return void 0;}function f(e,t){var n=e.option('layerElement');if(n&&n.jquery&&n.length)return n;if(t&&$.isFunction(n)){if(n=e.execute(n,t),n&&n.tagName)n=$(n);return n;}}var p=require('../function/isHidden'),d=require('../function/contains'),h=require('../function/nextTick'),m=require('../util/life'),v=require('../util/trigger'),g=require('../util/instance'),y=e.prototype;y.type='Popup',y.init=function(){var e=this,t=function(t,n){if($.isFunction(t[n]))return t[n](e);else return void 0;},n=v.parse(e.option('showLayerTrigger'),function(n){var i=C.show[n];return{delay:e.option('showLayerDelay'),startDelay:t(i,'startDelay'),endDelay:t(i,'endDelay'),handler:t(i,'handler'),beforeHandler:function(t){var n=function(){e.inner({trigger:l(e,t),layer:f(e,t)});};if(e.is('opened')){var i=$.Deferred();return i.then(n),e.inner(x,i),i;}else n();}};}),i=v.parse(e.option('hideLayerTrigger'),function(n){var i=C.hide[n];return{delay:e.option('hideLayerDelay'),startDelay:t(i,'startDelay'),endDelay:t(i,'endDelay'),handler:t(i,'handler')};}),o=function(t){$.each(n,function(n,i){C.show[n][t](e,i);});},r=function(t){$.each(i,function(n,i){C.hide[n][t](e,i);});},a=!1,s=!1,c=function(){if(!a)o('on'),a=!0;},u=function(){if(a)o('off'),a=!1;},p=function(){if(!s)r('on'),s=!0;},d=function(){if(s)r('off'),s=!1;},m=function(t,n){var i=n.opened;if(i)if(i.newValue){if(!e.option('triggerSelector'))u();h(p);}else d(),c();};e.before('dispose',function(){e.off('statechange',m),u(),d(),e.close();}).on('statechange',m),e.inner({trigger:l(e),layer:f(e)}),e.state({opened:e.option('opened')});},y.open=function(){this.state('opened',!0);},y._open=function(e){var t=this;if(t.is('opened')){var n=t.inner('layer'),i=t.inner('trigger'),o=n.data(w);if(i&&o&&i[0]!==o[0])n.data(b).close(),h(function(){if(t.guid)t.open(e);});return!1;}return{dispatch:!0};},y.open_=function(){var e=this,t=e.inner('layer');if(t){var n={};n[w]=e.inner('trigger'),n[b]=e,t.data(n);}return{dispatch:!0};},y.close=function(){this.state('opened',!1);},y._close=function(){if(!this.is('opened'))return!1;else return{dispatch:!0};},y.close_=function(){var e=this,t=e.inner('layer');if(t)t.removeData(b).removeData(w);return{dispatch:!0};},y.dispose=function(){m.dispose(this);},m.extend(y),e.stateUpdater={opened:function(e){var t=this.inner('layer');if(t)this.execute(e?'showLayerAnimation':'hideLayerAnimation',{layerElement:t});}},e.stateValidator={opened:function(e){if('boolean'!==$.type(e)){var t=this.inner('layer');if(t)e=!p(t);}return e;}};var b='__prev_popup__',w='__trigger_element__',x='__hide_promise__',_=v.enter.type,A=v.leave.type,C={show:{focus:{on:r,off:a,handler:t},click:{on:r,off:a,handler:t},enter:{on:r,off:a,handler:t,startDelay:function(e){return function(t){i(e.inner('trigger'),A,t);};},endDelay:function(e){return function(t){o(e.inner('trigger'),A,t);};}},context:{on:r,off:a,handler:t}},hide:{blur:{on:r,off:a,handler:n},click:{on:s,off:c,handler:u},leave:{on:function(e,t){i(e.inner('trigger'),t.type,t.handler),i(e.inner('layer'),t.type,t.handler);},off:function(e,t){o(e.inner('trigger'),t.type,t.handler),o(e.inner('layer'),t.type,t.handler);},handler:n,startDelay:function(e){return function(t){i(e.inner('trigger'),_,t),i(e.inner('layer'),_,t);};},endDelay:function(e){return function(t){o(e.inner('trigger'),_,t),o(e.inner('layer'),_,t);};}},context:{on:s,off:c,handler:u}}};return e;}),define('cc/ui/ComboBox',['require','exports','module','../function/toString','../helper/Popup','../util/life'],function(require){'use strict';function e(e){i.init(this,e);}var t=require('../function/toString'),n=require('../helper/Popup'),i=require('../util/life'),o=e.prototype;return o.type='ComboBox',o.init=function(){var e=this;e.initStruct();var t=e.option('buttonElement'),i=e.option('menuElement'),o=new n({triggerElement:t,layerElement:i,showLayerTrigger:e.option('showMenuTrigger'),showLayerDelay:e.option('showMenuDelay'),hideLayerTrigger:e.option('hideMenuTrigger'),hideLayerDelay:e.option('hideMenuDelay'),showLayerAnimation:function(){e.execute('showMenuAnimation',{menuElement:i});},hideLayerAnimation:function(){e.execute('hideMenuAnimation',{menuElement:i});},watchSync:{opened:function(t){e.state('opened',t);}}});o.on('dispatch',function(t,n){var i=e.emit(t.originalEvent,n);e.dispatch(i,n);});var r=e.option('mainElement'),a=e.option('menuActiveClass');if(a){var s=r||i;o.after('open',function(){s.addClass(a);}).after('close',function(){s.removeClass(a);});}var c=e.option('itemSelector'),u=e.option('valueAttribute');i.on('click'+e.namespace(),c,function(t){if(e.is('opened'))e.close(t);if(!t.isDefaultPrevented()){e.set('value',$(this).attr(u));var n=$.Event(t.originalEvent);n.type='select',e.dispatch(e.emit(n));}}),e.inner({main:r,popup:o}),e.set({data:e.option('data'),value:e.option('value')});},o.render=function(){var e=this;e.renderWith(e.get('data'),e.option('menuTemplate'),e.option('menuElement'));},o._render=function(){if(!this.get('data'))return!1;else return void 0;},o.open=function(){this.state('opened',!0);},o.close=function(){this.state('opened',!1);},o.dispose=function(){var e=this;i.dispose(e),e.inner('popup').dispose(),e.option('menuElement').off(e.namespace());},i.extend(o,['open','close']),e.propertyUpdater={},e.propertyUpdater.data=e.propertyUpdater.value=function(e,n,i){var o=this,r=o.option('menuElement'),a=o.option('itemActiveClass'),s=o.option('textAttribute'),c=o.option('valueAttribute');if(i.data)this.render();else if(i.value&&a)r.find('.'+a).removeClass(a);var u,l=t(o.get('value'),null);if(null!=l){var f=function(e){if(u=e.attr(s),null==u)u=e.html();return u;};if(''!==l){var p=r.find('['+c+'="'+l+'"]');switch(p.length){case 1:if(a)p.addClass(a);u=f(p);break;case 0:break;default:o.error('value repeated.');}}else r.find('['+c+']').each(function(){var e=$(this),t=e.attr(c);if(''===t)return u=f(e),!1;else return void 0;});}return o.execute('setText',{buttonElement:o.option('buttonElement'),text:u||o.option('defaultText')}),!1;},e.propertyValidator={value:function(e){var t=this,n=t.option('itemActiveClass');if(null==e&&n){var i=t.option('menuElement').find('.'+n);if(1===i.length)e=i.attr(t.option('valueAttribute'));}return e;}},e.stateUpdater={opened:function(e){var t=this.inner('popup');if(e)t.open();else t.close();}},e;}),define('cc/ui/Pager',['require','exports','module','../function/toNumber','../util/life'],function(require){'use strict';function e(e){n.init(this,e);}var t=require('../function/toNumber'),n=require('../util/life'),i=e.prototype;i.type='Pager',i.init=function(){var e=this;e.initStruct();var t=e.option('mainElement'),n=e.option('pageSelector'),i=e.option('pageAttribute');if(n&&i)t.on('click'+e.namespace(),n,function(t){var n=$(this).attr(i);if(n>=o){e.set('page',n);var r=$.Event(t.originalEvent);r.type='select',e.dispatch(e.emit(r));}});e.inner({main:t}),e.set({page:e.option('page'),count:e.option('count')});},i.render=function(){var e=this,t=e.get('count');if(2>t&&e.option('hideOnSingle'))return void e.state('hidden',!0);var n=Math.min(e.get('page'),t),i=e.option('showCount'),r=e.option('startCount'),a=e.option('endCount'),s=e.option('pageTemplate'),c=e.option('prevTemplate'),u=e.option('nextTemplate'),l=e.option('ellipsisTemplate'),f=[],p=Math.max(o,n-Math.ceil(i/2)),d=Math.min(t,p+i-1);if(d===t&&i>d-p)p=Math.max(o,d-i+1);f.push({range:[p,d],tpl:s});var h;if(r>0&&p>o)if(h=p-r,h>1)f.unshift({range:[o,r],tpl:s},{tpl:l});else f.unshift({range:[o,p-1],tpl:s});if(a>0&&t>d)if(h=t-d-a,h>1)f.push({tpl:l},{range:[t-a+1,t],tpl:s});else f.push({range:[d+1,t],tpl:s});f.unshift({tpl:c}),f.push({tpl:u});var m=$.map(f,function(i){var r=i.tpl;if(r){var a='',s={first:o,last:t,active:n},c=function(){a+=e.execute('render',[s,r]);},u=i.range;if(u)for(var l=u[0],f=u[1];f>=l;l++)s.page=l,c();else c();return a;}}).join('');e.renderWith(m),e.state('hidden',!1);},i.prev=function(){this.set('page',this.get('page')-1);},i._prev=function(){if(this.get('page')>o);else return!1;},i.next=function(){this.set('page',this.get('page')+1);},i._next=function(){if(this.get('page')<this.get('count'));else return!1;},i.show=function(){this.state('hidden',!1);},i._show=function(){if(!this.is('hidden'))return!1;else return void 0;},i.hide=function(){this.state('hidden',!0);},i._hide=function(){if(this.is('hidden'))return!1;else return void 0;},i.dispose=function(){n.dispose(this);},n.extend(i),e.propertyUpdater={},e.propertyUpdater.page=e.propertyUpdater.count=function(){return this.render(),!1;},e.propertyValidator={page:function(e){return t(e,0);},count:function(e){return t(e,0);}},e.stateUpdater={hidden:function(e){this.execute(e?'hideAnimation':'showAnimation',{mainElement:this.inner('main')});}};var o=1;return e;}),define('cc/util/etpl',function(){function e(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n];return e;}function t(){this.raw=[],this.length=0;}function n(){return'___'+k++;}function i(e,t){var n=new Function();n.prototype=t.prototype,e.prototype=new n(),e.prototype.constructor=e;}function o(e){return D[e];}function r(e){return'"'+e.replace(/\x5C/g,'\\\\').replace(/"/g,'\\"').replace(/\x0A/g,'\\n').replace(/\x09/g,'\\t').replace(/\x0D/g,'\\r')+'"';}function a(e){return e.replace(/[\^\[\]\$\(\)\{\}\?\*\.\+]/g,function(e){return'\\'+e;});}function s(e){var t=arguments;return e.replace(/\{([0-9]+)\}/g,function(e,n){return t[n-0+1];});}function c(e){return e=e.replace(/^\s*\*/,''),s('gv({0},["{1}"])',r(e),e.replace(/\[['"]?([^'"]+)['"]?\]/g,function(e,t){return'.'+t;}).split('.').join('","'));}function u(e,t,n,i,o,r){for(var a=n.length,s=e.split(t),c=0,u=[],l=0,f=s.length;f>l;l++){var p=s[l];if(l){var d=1;for(c++;;){var h=p.indexOf(n);if(0>h){u.push(c>1&&d?t:'',p);break;}if(c=i?c-1:0,u.push(c>0&&d?t:'',p.slice(0,h),c>0?n:''),p=p.slice(h+a),d=0,0===c)break;}if(0===c)o(u.join('')),r(p),u=[];}else p&&r(p);}if(c>0&&u.length>0)r(t),r(u.join(''));}function l(e,t,n){var i,o=[],a=t.options,s='',f='',p='',d='';if(n)s='ts(',f=')',p=I,d=R,i=a.defaultFilter;return u(e,a.variableOpen,a.variableClose,1,function(e){if(n&&e.indexOf('|')<0&&i)e+='|'+i;var r=e.indexOf('|'),a=(r>0?e.slice(0,r):e).replace(/^\s+/,'').replace(/\s+$/,''),u=r>0?e.slice(r+1):'',h=0===a.indexOf('*'),m=[h?'':s,c(a),h?'':f];if(u){u=l(u,t);for(var v=u.split('|'),g=0,y=v.length;y>g;g++){var b=v[g];if(/^\s*([a-z0-9_-]+)(\((.*)\))?\s*$/i.test(b)){if(m.unshift('fs["'+RegExp.$1+'"]('),RegExp.$3)m.push(',',RegExp.$3);m.push(')');}}}o.push(p,m.join(''),d);},function(e){o.push(p,n?r(e):e,d);}),o.join('');}function f(e,t){this.value=e,this.engine=t;}function p(e,t){this.value=e,this.engine=t,this.children=[],this.cloneProps=[];}function d(e,t){var n=e.stack,i=t?n.find(function(e){return e instanceof t;}):n.bottom();if(i){for(var o;(o=n.top())!==i;){if(!o.autoClose)throw new Error(o.type+' must be closed manually: '+o.value);o.autoClose(e);}i.close(e);}return i;}function h(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*(\(\s*master\s*=\s*([a-z0-9\/_-]+)\s*\))?\s*/i.test(e))throw new Error('Invalid '+this.type+' syntax: '+e);this.master=RegExp.$3,this.name=RegExp.$1,p.call(this,e,t),this.blocks={};}function m(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(e))throw new Error('Invalid '+this.type+' syntax: '+e);this.name=RegExp.$1,p.call(this,e,t),this.cloneProps=['name'];}function v(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(e))throw new Error('Invalid '+this.type+' syntax: '+e);this.name=RegExp.$1,p.call(this,e,t),this.cloneProps=['name','state','blocks'],this.blocks={};}function g(e,t){if(!/^\s*([a-z0-9_]+)\s*=([\s\S]*)$/i.test(e))throw new Error('Invalid '+this.type+' syntax: '+e);this.name=RegExp.$1,this.expr=RegExp.$2,p.call(this,e,t),this.cloneProps=['name','expr'];}function y(e,t){if(!/^\s*([a-z0-9_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(e))throw new Error('Invalid '+this.type+' syntax: '+e);this.name=RegExp.$1,this.args=RegExp.$3,p.call(this,e,t),this.cloneProps=['name','args'];}function b(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(e))throw new Error('Invalid '+this.type+' syntax: '+e);this.name=RegExp.$1,this.args=RegExp.$3,p.call(this,e,t),this.cloneProps=['name','args'];}function w(e,t){var n=new RegExp(s('^\\s*({0}[\\s\\S]+{1})\\s+as\\s+{0}([0-9a-z_]+){1}\\s*(,\\s*{0}([0-9a-z_]+){1})?\\s*$',a(t.options.variableOpen),a(t.options.variableClose)),'i');if(!n.test(e))throw new Error('Invalid '+this.type+' syntax: '+e);this.list=RegExp.$1,this.item=RegExp.$2,this.index=RegExp.$4,p.call(this,e,t),this.cloneProps=['list','item','index'];}function x(e,t){p.call(this,e,t);}function _(e,t){x.call(this,e,t);}function $(e,t){p.call(this,e,t);}function A(e,t){t.target=e;var n=t.engine,i=e.name;if(n.targets[i])switch(n.options.namingConflict){case'override':n.targets[i]=e,t.targets.push(i);case'ignore':break;default:throw new Error('Target exists: '+i);}else n.targets[i]=e,t.targets.push(i);}function C(e,t){j[e]=t,t.prototype.type=e;}function E(t){this.options={commandOpen:'<!--',commandClose:'-->',commandSyntax:/^\s*(\/)?([a-z]+)\s*(?::([\s\S]*))?$/,variableOpen:'${',variableClose:'}',defaultFilter:'html'},this.config(t),this.targets={},this.filters=e({},T);}function S(e,n){function i(){var e;if(h.length>0&&(e=h.join(''))){var t=new f(e,n);if(t.beforeAdd(l),c.top().addChild(t),h=[],n.options.strip&&l.current instanceof p)t.value=e.replace(/^[\x20\t\r]*\n/,'');l.current=t;}}var o,r=n.options.commandOpen,a=n.options.commandClose,s=n.options.commandSyntax,c=new t(),l={engine:n,targets:[],stack:c,target:null},h=[];return u(e,r,a,0,function(e){var t=s.exec(e);if(t&&(o=j[t[2].toLowerCase()])&&'function'==typeof o){i();var c=l.current;if(n.options.strip&&c instanceof f)c.value=c.value.replace(/\r?\n[\x20\t]*$/,'\n');if(t[1])c=d(l,o);else{if(c=new o(t[3],n),'function'==typeof c.beforeOpen)c.beforeOpen(l);c.open(l);}l.current=c;}else if(!/^\s*\/\//.test(e))h.push(r,e,a);o=null;},function(e){h.push(e);}),i(),d(l),l.targets;}t.prototype={push:function(e){this.raw[this.length++]=e;},pop:function(){if(this.length>0){var e=this.raw[--this.length];return this.raw.length=this.length,e;}},top:function(){return this.raw[this.length-1];},bottom:function(){return this.raw[0];},find:function(e){for(var t=this.length;t--;){var n=this.raw[t];if(e(n))return n;}}};var k=178245,D={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'},T={html:function(e){return e.replace(/[&<>"']/g,o);},url:encodeURIComponent,raw:function(e){return e;}},P='var r="";',I='r+=',R=';',O='return r;';if('undefined'!=typeof navigator&&/msie\s*([0-9]+)/i.test(navigator.userAgent)&&RegExp.$1-0<8)P='var r=[],ri=0;',I='r[ri++]=',O='return r.join("");';f.prototype={getRendererBody:function(){var e=this.value,t=this.engine.options;if(!e||t.strip&&/^\s*$/.test(e))return'';else return l(e,this.engine,1);},clone:function(){return this;}},p.prototype={addChild:function(e){this.children.push(e);},open:function(e){var t=e.stack.top();t&&t.addChild(this),e.stack.push(this);},close:function(e){if(e.stack.top()===this)e.stack.pop();},getRendererBody:function(){for(var e=[],t=this.children,n=0;n<t.length;n++)e.push(t[n].getRendererBody());return e.join('');},clone:function(){for(var e=this.constructor,t=new e(this.value,this.engine),n=0,i=this.children.length;i>n;n++)t.addChild(this.children[n].clone());for(var n=0,i=this.cloneProps.length;i>n;n++){var o=this.cloneProps[n];t[o]=this[o];}return t;}};var L='data=data||{};var v={},fs=engine.filters,hg=typeof data.get=="function",gv=function(n,ps){var p=ps[0],d=v[p];if(d==null){if(hg){return data.get(n);}d=data[p];}for(var i=1,l=ps.length;i<l;i++)if(d!=null)d = d[ps[i]];return d;},ts=function(s){if(typeof s==="string"){return s;}if(s==null){s="";}return ""+s;};';i(h,p),i(m,p),i(v,p),i(g,p),i(y,p),i(b,p),i(w,p),i(x,p),i(_,x),i($,x);var q={READING:1,READED:2,APPLIED:3,READY:4};v.prototype.applyMaster=h.prototype.applyMaster=function(e){function t(e){var i=e.children;if(i instanceof Array)for(var o=0,r=i.length;r>o;o++){var a=i[o];if(a instanceof m&&n[a.name])a=i[o]=n[a.name];t(a);}}if(this.state>=q.APPLIED)return 1;var n=this.blocks,i=this.engine.targets[e];if(i&&i.applyMaster(i.master))return this.children=i.clone().children,t(this),this.state=q.APPLIED,1;else return void 0;},h.prototype.isReady=function(){function e(i){for(var o=0,r=i.children.length;r>o;o++){var a=i.children[o];if(a instanceof v){var s=t.targets[a.name];n=n&&s&&s.isReady(t);}else if(a instanceof p)e(a);}}if(this.state>=q.READY)return 1;var t=this.engine,n=1;if(this.applyMaster(this.master))return e(this),n&&(this.state=q.READY),n;else return void 0;},h.prototype.getRenderer=function(){if(this.renderer)return this.renderer;if(this.isReady()){var e=new Function('data','engine',[L,P,this.getRendererBody(),O].join('\n')),t=this.engine;return this.renderer=function(n){return e(n,t);},this.renderer;}return null;},h.prototype.open=function(e){d(e),p.prototype.open.call(this,e),this.state=q.READING,A(this,e);},g.prototype.open=b.prototype.open=function(e){e.stack.top().addChild(this);},m.prototype.open=function(e){p.prototype.open.call(this,e),e.stack.find(function(e){return e.blocks;}).blocks[this.name]=this;},_.prototype.open=function(e){var t=new $();t.open(e);var n=d(e,x);n.addChild(this),e.stack.push(this);},$.prototype.open=function(e){var t=d(e,x);t.addChild(this),e.stack.push(this);},v.prototype.open=function(e){this.parent=e.stack.top(),this.target=e.target,p.prototype.open.call(this,e),this.state=q.READING;},b.prototype.close=g.prototype.close=function(){},v.prototype.close=function(e){p.prototype.close.call(this,e),this.state=q.READED;},h.prototype.close=function(e){p.prototype.close.call(this,e),this.state=this.master?q.READED:q.APPLIED,e.target=null;},v.prototype.autoClose=function(e){var t=this.parent.children;t.push.apply(t,this.children),this.children.length=0;for(var n in this.blocks)this.target.blocks[n]=this.blocks[n];this.blocks={},this.close(e);},b.prototype.beforeOpen=v.prototype.beforeOpen=g.prototype.beforeOpen=w.prototype.beforeOpen=y.prototype.beforeOpen=m.prototype.beforeOpen=x.prototype.beforeOpen=f.prototype.beforeAdd=function(e){if(!e.stack.bottom()){var t=new h(n(),e.engine);t.open(e);}},v.prototype.getRendererBody=function(){return this.applyMaster(this.name),p.prototype.getRendererBody.call(this);},b.prototype.getRendererBody=function(){return s('{0}engine.render({2},{{3}}){1}',I,R,r(this.name),l(this.args,this.engine).replace(/(^|,)\s*([a-z0-9_]+)\s*=/gi,function(e,t,n){return(t||'')+r(n)+':';}));},g.prototype.getRendererBody=function(){if(this.expr)return s('v[{0}]={1};',r(this.name),l(this.expr,this.engine));else return'';},x.prototype.getRendererBody=function(){return s('if({0}){{1}}',l(this.value,this.engine),p.prototype.getRendererBody.call(this));},$.prototype.getRendererBody=function(){return s('}else{{0}',p.prototype.getRendererBody.call(this));},w.prototype.getRendererBody=function(){return s('var {0}={1};if({0} instanceof Array)for (var {4}=0,{5}={0}.length;{4}<{5};{4}++){v[{2}]={4};v[{3}]={0}[{4}];{6}}else if(typeof {0}==="object")for(var {4} in {0}){v[{2}]={4};v[{3}]={0}[{4}];{6}}',n(),l(this.list,this.engine),r(this.index||n()),r(this.item),n(),n(),p.prototype.getRendererBody.call(this));},y.prototype.getRendererBody=function(){var e=this.args;return s('{2}fs[{5}]((function(){{0}{4}{1}})(){6}){3}',P,O,I,R,p.prototype.getRendererBody.call(this),r(this.name),e?','+l(e,this.engine):'');};var j={};C('target',h),C('block',m),C('import',v),C('use',b),C('var',g),C('for',w),C('if',x),C('elif',_),C('else',$),C('filter',y),E.prototype.config=function(t){e(this.options,t);},E.prototype.compile=E.prototype.parse=function(e){if(e){var t=S(e,this);if(t.length)return this.targets[t[0]].getRenderer();}return new Function('return ""');},E.prototype.getRenderer=function(e){var t=this.targets[e];if(t)return t.getRenderer();else return void 0;},E.prototype.render=function(e,t){var n=this.getRenderer(e);if(n)return n(t);else return'';},E.prototype.addFilter=function(e,t){if('function'==typeof t)this.filters[e]=t;};var N=new E();return N.Engine=E,N;}),define('cc/util/event',['require','exports','module','../function/extend','../function/createEvent'],function(require,exports){'use strict';var e=require('../function/extend'),t=require('../function/createEvent'),n={get$:function(){var e=this;if(!e.$)e.$=$({});return e.$;},on:function(e,t,n){return this.get$().on(e,t,n),this;},once:function(e,t,n){return this.get$().one(e,t,n),this;},off:function(e,t){return this.get$().off(e,t),this;},emit:function(e,n){return e=t(e),this.get$().trigger(e,n),e;}};exports.extend=function(t){e(t,n);};}),define('cc/util/input',['require','exports','module','../function/guid','../function/around','../function/supportInput'],function(require,exports){'use strict';function e(e){var t='.'+n();e.data(r,t).on('input'+t,function(t){t.type=a,e.trigger(t);});}function t(e){var t=e.val(),o=!1,s='.'+n();e.data(r,s).on('propertychange'+s,function(n){if(o)return void(o=!1);if('value'===n.originalEvent.propertyName){var i=e.val();if(i!==t)if(n.type=a,e.trigger(n),!n.isDefaultPrevented())t=i;}}),i(e,'val',function(){if(0!==arguments.length)o=!0;});}var n=require('../function/guid'),i=require('../function/around'),o=require('../function/supportInput'),r='cc-util-input',a='cc-input';exports.INPUT=a,exports.init=o()?e:t,exports.dispose=function(e){var t=e.data(r);if(t)e.removeData(r).off(t);};}),define('cc/util/instance',['require','exports','module'],function(require,exports){exports.window=$(window),exports.document=$(document),exports.html=$(document.documentElement),exports.body=$(document.body);}),define('cc/util/keyboard',['require','exports','module'],function(require,exports){'use strict';function e(e){var t={};return $.each(e,function(e,n){t[n]=e;}),t;}var t={a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,'`':192,'-':173,'=':61,'[':219,']':221,'\\':220,';':59,"'":222,',':188,'.':190,'/':191,$0:96,$1:97,$2:98,$3:99,$4:100,$5:101,$6:102,$7:103,$8:104,$9:105,'$.':110,'$+':107,'$-':109,'$*':106,'$/':111,space:32,tab:9},n={backspace:8,'delete':46},i={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,enter:13,esc:27,capslock:20,insert:45,home:36,end:35,pageup:33,pagedown:34,left:37,right:39,up:38,down:40},o={shift:16,ctrl:17,meta:91,alt:18};$.extend(exports,t,n,i,o),exports.charKey=t,exports.deleteKey=n,exports.functionKey=i,exports.combinationKey=o,exports.isCharKey=function(n){return n in e(t);},exports.isDeleteKey=function(t){return t in e(n);},exports.isFunctionKey=function(t){return t in e(i);},exports.isCombinationKey=function(t){return t in e(o);};}),define('cc/util/life',['require','exports','module','../function/guid','../function/around','../function/extend','../function/ucFirst','../function/nextTick','../function/toBoolean','../function/createEvent','../function/replaceWith','../function/offsetParent','./event'],function(require,exports){'use strict';function e(e,t,n,i,o){return function(s,c,u){var l=this;if($.isPlainObject(s))return u=c,void $.each(s,function(e,t){l[n](e,t,u);});u=u||{};var f=l[i](s),d=l.constructor[e+'Validator'];if(d)if($.isFunction(d[s]))c=d[s].call(l,c,u);if($.isFunction(o))c=o(l,c,u);if(f!==c||u.force)if(l[t][s]=c,!u.silent){var h={};r(h,u),h.newValue=c,h.oldValue=f;var m={};m[s]=h;var v=function(e){if(e&&e[s])l.execute(e[s],[c,f,h]);};if(v(l.inner('watchSync')),v(l.option('watchSync')),u.sync)return v(l.constructor[e+'Updater']),v(l.option('watch')),void l.emit(e+'change',m);var g=l.inner(e+'Changes');if(!g)g={},l.inner(e+'Changes',g);if($.extend(g,m),!l.inner(p))l.inner(p,a(function(){l.sync(p);}));}};}function t(){this.error('initStruct() can just call one time.');}function n(e,t,n,i,o){var r,a='before'===i?'_'+t:t+'_',s=e[a];if($.isFunction(s))if(r=s.apply(e,n),r!==!1&&!$.isPlainObject(r))r=null;if(r===!1)return!1;var c=!1;if(r&&r.dispatch)c=!0,delete r.dispatch;if(o=$.Event(o),o.type=i+t,e.emit(o,r),c)e.dispatch(o,r);if(o.isDefaultPrevented())return!1;else return void 0;}var i=require('../function/guid'),o=require('../function/around'),r=require('../function/extend'),a=(require('../function/ucFirst'),require('../function/nextTick')),s=require('../function/toBoolean'),c=require('../function/createEvent'),u=require('../function/replaceWith'),l=(require('../function/offsetParent'),require('./event')),f={},p='__update_async__',d={},h={initStruct:function(){var e=this,n=e.option('mainElement'),i=e.option('mainTemplate');if('string'===$.type(i)){var o=e.option('share'),r=e.type+i;if(o)n=d[r];var a;if(!n){if(a=$(i),o)d[r]=a;}else if(e.option('replace'))u(n,a=$(i));else n.html(i);if(a)n=a,e.option('mainElement',n);}var s=e.option('parentSelector');if(s&&!n.parent().is(s))n.appendTo(s);e.initStruct=t;},warn:function(e){if('undefined'!=typeof console)console.warn(['[CC warn]',this.type,e].join(' '));},error:function(e){throw new Error(['[CC error]',this.type,e].join(' '));},live:function(e,t,n){var i=this,o=i.inner('main');if(o)o.on(e+i.namespace(),t,n);return i;},emit:function(e,t){var n=this,i=n.option('context')||n;e=c(e),e.cc=i;var o=[e];if($.isPlainObject(t))o.push(t);e.type=e.type.toLowerCase();var r=i.get$();r.trigger.apply(r,o);var a='on'+e.type;if(!e.isPropagationStopped()&&i.execute(a,o)===!1)e.preventDefault(),e.stopPropagation();return i.execute(a+'_',o),e;},dispatch:function(e,t){if(!e.isPropagationStopped()){if(!e.originalEvent)e.originalEvent={preventDefault:$.noop,stopPropagation:$.noop};var n=$.Event(e);if(n.type='dispatch',this.emit(n,t),n.isPropagationStopped())e.preventDefault(),e.stopPropagation();}},before:function(e,t){return this.on('before'+e.toLowerCase(),t);},after:function(e,t){return this.on('after'+e.toLowerCase(),t);},find:function(e){var t=this.inner('main');if(t){var n=t.find(e);if(n.length)return n;}},appendTo:function(e){var t=this.inner('main');if(t)t.appendTo(e);},prependTo:function(e){var t=this.inner('main');if(t)t.prependTo(e);},execute:function(e,t){var n=this,i=e;if('string'===$.type(e))i=n.option(e);if($.isFunction(i)){var o=n.option('context')||n;if($.isArray(t))return i.apply(o,t);else return i.call(o,t);}},renderWith:function(e,t,n){var i=this;if(!t)if(t=i.option('renderTemplate'),!t)t=i.option('mainTemplate');if(!n)n=i.option('mainElement');var o=i.option('renderSelector');if(o)n=n.find(o);var r;if($.isPlainObject(e)||$.isArray(e))r=i.execute('render',[e,t]);else if('string'===$.type(e))r=e;n.html(r);},namespace:function(){return'.'+this.guid;},option:function(e,t){var n=this;if(1===arguments.length&&'string'===$.type(e))return n.options[e];else{if($.isPlainObject(e))return void $.each(e,function(e,t){n.option(e,t);});n.options[e]=t;}},inner:function(e,t){var n=this,i=n.inners||{};if(1===arguments.length&&'string'===$.type(e))return i[e];else{if($.isPlainObject(e))return void $.each(e,function(e,t){n.inner(e,t);});i[e]=t;}},is:function(e){return this.states[e];},state:e('state','states','state','is',function(e,t){return s(t,!1);}),get:function(e){return this.properties[e];},set:e('property','properties','set','get')},m={sync:function(){var e=this,t=function(t,n,i){$.each(t,function(o,r){return e.execute(n[o],[r.newValue,r.oldValue,i?t:r]);});};if($.each(['property','state'],function(n,i){var o=e.inner(i+'Changes');if(o){e.inner(i+'Changes',null);var r=e.constructor[i+'Updater'];if(r)t(o,r,!0);var a=e.option('watch');if(a)t(o,a);e.emit(i+'change',o);}}),arguments[0]!==p)e.execute(e.inner(p));e.inner(p,!1);},_sync:function(){if(!this.inner(p))return!1;else return void 0;},_init:function(){var e='initCalled';if(this.is(e))return!1;else return void this.state(e,!0);},_dispose:function(){var e='disposeCalled';if(this.is(e))return!1;else return void this.state(e,!0);}};exports.extend=function(e,t){r(e,m),$.each(e,function(i,r){var a=i.indexOf('_');if($.isFunction(r)&&0!==a&&a!==i.length-1)if(!($.isArray(t)&&$.inArray(i,t)>=0)){var s=function(e){return n(this,i,arguments,'before',e);},c=function(e){var t=this,o=arguments,a=function(){return n(t,i,o,'after',e);};if(r.length+1===o.length){var s=o[o.length-1];if(s&&$.isFunction(s.then))return void s.then(a);}a();};o(e,i,s,c);}}),r(e,h),l.extend(e);},exports.init=function(e,t){if(!t)t={};return r(t,e.constructor.defaultOptions),t.onafterinit_=function(){e.state('inited',!0);},t.onafterdispose_=function(){e.state('disposed',!0),e.off();var t=e.inner('main');if(e.option('removeOnDispose')&&t)t.remove();a(function(){delete f[e.guid],e.properties=e.options=e.changes=e.states=e.inners=e.guid=null;});},f[e.guid=i()]=e,e.properties={},e.options=t,e.states={},e.inners={},e.init(),e;},exports.dispose=function(e){e.sync();var t=e.inner('main')||e.option('mainElement');if(t)t.off(e.namespace());};}),define('cc/util/localStorage',['require','exports','module','../function/supportLocalStorage'],function(require,exports){'use strict';function e(t,n){if($.isPlainObject(t))$.each(t,e);else try{localStorage[t]=n;}catch(i){}}function t(e){var t;try{t=localStorage[e];}catch(n){}return t;}function n(e){try{localStorage.removeItem(e);}catch(t){}}var i=require('../function/supportLocalStorage')();if(exports.support=i,i)exports.set=e,exports.get=t,exports.remove=n;else exports.set=exports.get=exports.remove=$.noop;}),define('cc/util/trigger',['require','exports','module','../function/split'],function(require,exports){'use strict';function e(e){return function(t){var i=e.delay,o=e.startDelay,r=e.endDelay,a=function(){e.handler.call(t.currentTarget,t);},s=function(){if(i>0&&o&&r){var t=function(){e[n]=setTimeout(function(){c(n);},i);},s=function(){clearTimeout(e[n]),r(c,e),e[n]=null;},c=function(t){if(e[n])s();if(n===t)a();};if(!e[n])o(c,e),t();}else a();},c=e.beforeHandler;if($.isFunction(c)){var u=c.call(t.currentTarget,t);if(u===!1)return;else if(u&&$.isFunction(u.then))return void u.then(s);}s();};}var t=require('../function/split'),n='delayTimer';return exports={focus:{type:'focusin',handler:e},blur:{type:'focusout',handler:e},click:{type:'click',handler:e},enter:{type:'mouseenter',handler:e},leave:{type:'mouseleave',handler:e},context:{type:'contextmenu',handler:e}},exports.parse=function(e,n){var i={};if(e)$.each(t(e,','),function(e,t){var o=exports[t];if(o)i[t]={type:o.type,handler:o.handler(n(t))};});return i;},exports;}),define('userCenter/common/component/Input_html',function(){return'<div class="input{{#if options.className}} {{options.className}}{{/if}}"><div class="placeholder"></div>{{#if options.multiple}}<textarea name="{{options.name}}" value="{{options.value}}" on-focus="focus" on-blur="blur" on-keydown="keydown"{{#if options.lazy}}{{#if options.lazy === true}} lazy{{else}} lazy="{{options.lazy}}"{{/if}}{{/if}}{{#if options.disabled}} disabled{{/if}}{{#if options.readonly}} readonly{{/if}}{{#if options.autofocus}} autofocus{{/if}}></textarea>{{else}}<input type="{{#if options.type}}{{options.type}}{{else}}text{{/if}}" name="{{options.name}}" value="{{options.value}}" on-focus="focus" on-blur="blur" on-keydown="keydown"{{#if options.lazy}}{{#if options.lazy === true}} lazy{{else}} lazy="{{options.lazy}}"{{/if}}{{/if}}{{#if options.disabled}} disabled{{/if}}{{#if options.readonly}} readonly{{/if}}{{#if options.autofocus}} autofocus{{/if}}{{#if options.maxlength}} maxlength="{{options.maxlength}}"{{/if}}/>{{/if}}<div class="tooltip error right" data-error-for="{{options.name}}"></div><style>{{style}}</style></div>';}),define('userCenter/common/component/Input_12b813ed72',['require','exports','module','custom/form/Text','cc/util/keyboard','./Input_html','./Input_css'],function(require){'use strict';var e=require('custom/form/Text'),t=require('cc/util/keyboard');return Ractive.extend({template:require('./Input_html'),data:function(){return{style:require('./Input_css'),options:{name:'',value:'',type:'',placeholder:'',className:'',multiple:!1,lazy:!1,disabled:!1,readonly:!1,autofocus:!1,maxlength:''}};},onrender:function(){function n(e){function t(){if(o!==i)o=i,e.height(i);if(n=e.prop('scrollHeight')-a,Math.abs(n-o)>r)e.height(n),o=n;}if('hidden'!==e.css('overflow-y'))e.css('overflow-y','hidden');var n,i=e.height(),o=i,r=parseInt(e.css('font-size'),10),a=e.innerHeight()-i;e.on('keyup',t),t();}var i=this,o=$(i.getElement()),r=o.find(':text,textarea'),a=i.formText=new e({mainElement:o,nativeFirst:!1,watch:{value:function(e){if(e!==i.get('options.value'))i.set('options.value',e);}}});i.observe('options.autoHeight',function(e){if(e)n(r);}),i.observe('options.name',function(e){a.set('name',e);}),i.observe('options.value',function(e){a.set('value',e);}),i.observe('options.placeholder',function(e){a.set('placeholder',e);}),i.observe('options.focus',function(e){if(e)r.focus();}),i.observe('options.blur',function(e){if(e)r.blur();}),i.on('focus',function(){i.set({'options.focus':!0,'options.blur':!1});}),i.on('blur',function(){i.set({'options.focus':!1,'options.blur':!0});}),i.on('keydown',function(e){var n={};n[t.enter]='enter';var o=n[e.original.keyCode];if(o)i.fire(o,e);});},onteardown:function(){this.formText&&this.formText.dispose();}});}),define('userCenter/common/component/Input_css',function(){return'';}),define('userCenter/common/component/Pager_html',function(){return'<div class="pagination tight primary{{#if options.size}} {{options.size}}{{/if}}"><a class="item button disabled">上一页</a><a class="item button">1</a><a class="item button">2</a><a class="item button hover">3</a><a class="item button active">4</a><a class="item">...</a><a class="item button checked">5</a><a class="item button">下一页</a></div>';}),define('userCenter/common/component/Pager_c90b08d5db',['require','exports','module','custom/ui/Pager','cc/function/debounce','./Pager_html'],function(require){'use strict';var e=require('custom/ui/Pager'),t=require('cc/function/debounce');return Ractive.extend({template:require('./Pager_html'),data:function(){return{options:{page:0,count:0,size:''}};},onrender:function(){var n=this,i=n.pager=new e({mainElement:$(n.getElement()),watch:{page:t(function(e){if(e!=n.get('options.page'))n.set('options.page',e);},1000,!0),count:function(e){if(e!=n.get('options.count'))n.set('options.count',e);}}});n.observe('options.page',function(e){i.set('page',e);}),n.observe('options.count',function(e){i.set('count',e);});},onteardown:function(){this.pager.dispose();}});}),define('userCenter/common/component/Select_html',function(){return'<div class="dropdown{{#if options.className}} {{options.className}}{{/if}}{{#if options.hidden}} hidden{{/if}}"><div class="button secondary"{{#if options.disabled}} disabled{{/if}}><i class="icon icon-caret-down"></i><span class="text">{{{options.defaultText}}}</span></div><ul class="menu"></ul><input type="hidden" name="{{options.name}}" /><div class="tooltip error right" data-error-for="{{options.name}}"></div></div>';}),define('userCenter/common/component/Select_fea6c25a54',['require','exports','module','custom/form/Select','cc/function/autoScrollUp','./Select_html'],function(require){'use strict';var e=require('custom/form/Select'),t=require('cc/function/autoScrollUp');return Ractive.extend({template:require('./Select_html'),data:function(){return{options:{name:'',className:'',defaultText:'请选择',data:null,value:'',disabled:!1,hidden:!1,onselect:$.noop}};},onrender:function(){var n=this,i=$(n.getElement()),o=n.select=new e({mainElement:i,data:n.get('options.data'),value:n.get('options.value'),defaultText:n.get('options.defaultText'),onselect:n.get('options.onselect'),watch:{value:function(e){if(e!=n.get('options.value'))n.set('options.value',e);},opened:function(e){if(e){var o=i.find('.menu');setTimeout(function(){t(o,o.find('.active'));},500);}else n.set('opened',!1);}}});n.observe('options.value',function(e){o.set('value',e);}),n.observe('options.data',function(e){o.set('data',e);});},onteardown:function(){this.select.dispose();}});}),define('userCenter/common/service_1288b24a55',['require','exports','module'],function(require,exports){'use strict';function e(e,t){var n=e;if(t)n+=$.param(t);return n;}function t(t,n,s){n=n||{},s=$.extend({},i,s);var c,u;if(r[t])u=e(t,n),c=a[u];var l=$.Deferred();if(c)if(!c.response)c.deferredList.push(l);else l.resolve(c.response);else{var f=userData.number||0;if(!o[t])n._user_number=f,$.extend(n,siteData.monkey);if($.ajax({url:t,data:n,method:'post',dataType:'json',timeout:s.timeout,async:s.sync?!1:!0}).then(function(e){if(r[t])c=a[u],c.response=e,$.each(c.deferredList,function(t,n){if(e&&0===e.code)n.resolve(e);else n.reject(e);}),c.deferredList.length=0;else if(e&&0===e.code)l.resolve(e);else{var n=e.msg;if(n&&!s.preventError)alert({title:'提示',content:n});l.reject(e);}},function(e,t){if('timeout'===t||'error'===t)l.reject({code:-1});}),r[t])a[u]={},a[u].deferredList=[l];}return l;}function n(e,t){return $.ajax({url:e,data:t,dataType:'jsonp'});}var i={timeout:5000,sync:!1,stringify:!1,preventError:!1},o={'/area/list':1,'/subject/getList':1},r={'/user/basicInfo':1},a={};exports.post=t,exports.jsonp=n,exports.getUserBasicInfo=function(e){var n;if(e&&null!=e.userId&&null!=e.userType)n={user_id:e.userId,user_type:e.userType};return t('/user/basicInfo',n);},exports.getCourseList=function(){return t('/lesson/list');},exports.getUserType=function(){return t('/user/roles');},exports.sendInviteCode=function(e){var n=$.extend(e.formData||{},{invite_code:e.inviteCode,role:e.role});return t('/user/switch_role_ajax',n);},exports.getCDNSpeedTestUrls=function(){return t('/video/getSpeedTestUrl');};}),define('userCenter/teacherCenter/common/service_79853c6d3e',['require','exports','module','../../common/service_1288b24a55'],function(require,exports){'use strict';var e=require('../../common/service_1288b24a55');exports.overviewAudit=function(t){return e.post('/teacher_center/overview',t);},exports.getUserBasicInfo=function(t){var n;if(t&&null!=t.userId&&null!=t.userType)n={user_id:t.userId,user_type:t.userType};return e.post('/user/basicInfo',n);},exports.getCourseList=function(t){return e.post('/tcenter/courses/class-courses/list',t);},exports.doCourseActions=function(t){return e.post('/tcenter/courses/class-courses/do',t);};}),define('userCenter/teacherCenter/liveCourseList/liveCourseList_html',function(){return'<div id="content" class="card"><div class="card-head"><a href="/teacher_course/list_admin">课程设置</a>&nbsp;&gt;&nbsp;直播课</div><div class="card-body"><div class="tab-nav"><a href="/teacher_course/list_admin">一对一</a><a href="/tcenter/courses/class-courses/list-html?lesson_way=4">线下班课</a><a class="active">直播课</a><a href="/video_course/getcourselist?type=1&page=1&page_size=10">视频课</a></div><div class="add-button"><a class="add-course" href="/tcenter/courses/class-courses/form?lesson_way=2"><i class="icon icon-plus"></i>添加直播课</a></div><div class="search-form"><label>搜索\uFF1A</label><Input options="{{courseNameInputOptions}}" />{{#if showCloseIcon == 1}}<i class=" icon icon-close" on-click="clearInput()"></i>{{/if}}<label>班课状态\uFF1A</label><Select options="{{courseStatusSelectOptions}}" /><span class="search-btn" on-click="searchCourse()">搜索</span><span class="clear-all" on-click="clearAll()">清空筛选条件</span></div><div class="course-list"><table><thead><td width="310px">班课名称</td><td width="78px" ><span class="sort{{#if priceArrowActive == 1}} active{{/if}}" on-click="sortByPrice()">价格<i class="icon {{#if priceArrowActive == 1}}{{#if priceArrowDirection == 0}} icon-arrow-up{{else}} icon-arrow-down{{/if}}{{elseif priceArrowDirection == 0}} icon-arrow-up-o{{else}} icon-arrow-down-o{{/if}}"></i></span></td><td width="90px"><span class="sort{{#if enrolledArrowActive == 1}} active{{/if}}" on-click="sortByEnrolled()">已报人数<i class="icon {{#if enrolledArrowActive == 1}}{{#if enrolledArrowDirection == 0}} icon-arrow-up{{else}} icon-arrow-down{{/if}}{{elseif enrolledArrowDirection == 1}} icon-arrow-down-o{{else}} icon-arrow-up-o{{/if}}"></i></span></td><td width="96px"><span class="sort{{#if timeArrowActive == 1}} active{{/if}}" on-click="sortByTime()">课程时间<i class="icon {{#if timeArrowActive == 1}}{{#if timeArrowDirection == 0}} icon-arrow-up{{else}} icon-arrow-down{{/if}}{{elseif timeArrowDirection == 1}} icon-arrow-down-o{{else}} icon-arrow-up-o{{/if}}"></i></span></td><td width="96px">状态</td><td width="80px" class="center">操作</td></thead><tbody>{{#if cacheCourse && !isSearchResult}}<tr class="course-item" data-start-time="{{cacheCourse.begin_time}}" data-max-student="{{cacheCourse.max_student}}"><td class="basic-info"><div class="info"><div class="photo"><a><img src="{{compressImage(cacheCourse.cover_url, 60, 60)}}"></a></div><div class="name"><a data-title="{{cacheCourse.display_name}}">{{cutString(cacheCourse.display_name, 20)}}</a></div><div class="icons{{#if !cacheCourse.display_name}} set-position{{/if}}">{{#if cacheCourse.chaban_flag != 1}}{{#if cacheCourse.chaban_flag == 3}}<a href="http://www.genshuixue.com/guide/guarantee?a=guarantee" target="_blank" rel="nofollow"><i class="icon icon-anytime-joinclass"></i></a>{{else}}<a href="http://www.genshuixue.com/guide/guarantee?a=guarantee" target="_blank" rel="nofollow"><i class="icon icon-limit-joinclass"></i></a>{{/if}}{{/if}}{{#if cacheCourse.retire_flag == 0}}<a href="http://www.genshuixue.com/guide/guarantee?a=guarantee" target="_blank" rel="nofollow"><i class="icon icon-anytime-quitclass"></i></a>{{elseif cacheCourse.retire_flag == 100}}<!--a href="http://www.genshuixue.com/guide/guarantee?a=guarantee" target="_blank" class="icon icon-noway-retire" rel="nofollow"></a-->{{else}}<a href="http://www.genshuixue.com/guide/guarantee?a=guarantee" target="_blank" rel="nofollow"><i class="icon icon-limit-quitclass"></i></a>{{/if}}</div><div class="clearfix"></div></div></td><td><span class="text-primary">\uFFE5{{cacheCourse.price}}</span></td><td><div><span class="success-pay"><span class="text-primary">0</span>/{{cacheCourse.max_student}}</span></div></td><td>{{#if cacheCourse.began_at && cacheCourse.ended_at}}{{#if formatDate(cacheCourse.began_at) != formatDate(cacheCourse.ended_at)}}<span class="date-time">{{formatDate(cacheCourse.began_at)}}</span><br/>到<br/><span class="date-time">{{formatDate(cacheCourse.ended_at)}}</span>{{else}}<span class="date-time">{{formatDate(cacheCourse.began_at)}}</span>{{/if}}{{/if}}</td><td><span style="color:#9d9e9e">草稿</span></td><td><div class="action"><span><a href="/tcenter/courses/class-courses/form?lesson_way=2">编辑</a></span></div><div class="action" on-click="deleteCacheCourse()"><span>删除课程</span></div></td></tr>{{/if}}{{#each courseList}}<tr class="course-item" data-number="{{number}}" data-start-time="{{time.began_at}}" data-max-student="{{student_amount.max}}" data-total-pay-success="{{total_pay_success}}"><td class="basic-info"><div class="info"><div class="photo">{{#if cover_url}}<a href="{{pc_dynamic_url}}" target="_blank"><img src="{{compressImage(cover_url, 60, 60)}}"></a>{{/if}}</div><div class="name"><a href="{{pc_dynamic_url}}" data-title="{{display_name}}" target="_blank">{{cutString(display_name, 20)}}</a></div><div class="icons{{#if !display_name}} set-position{{/if}}">{{#if chaban.flag != 1}}{{#if chaban.flag == 3}}<a href="http://www.genshuixue.com/guide/guarantee?a=guarantee" target="_blank" rel="nofollow"><i class="icon icon-anytime-joinclass"></i></a>{{else}}<a href="http://www.genshuixue.com/guide/guarantee?a=guarantee" target="_blank" rel="nofollow"><i class="icon icon-limit-joinclass"></i></a>{{/if}}{{/if}}{{#if retire.flag == 0}}<a href="http://www.genshuixue.com/guide/guarantee?a=guarantee" target="_blank" rel="nofollow"><i class="icon icon-anytime-quitclass"></i></a>{{elseif retire.flag == 100}}<!--a href="http://www.genshuixue.com/guide/guarantee?a=guarantee" target="_blank" class="icon icon-noway-retire" rel="nofollow"></a-->{{else}}<a href="http://www.genshuixue.com/guide/guarantee?a=guarantee" target="_blank" rel="nofollow"><i class="icon icon-limit-quitclass"></i></a>{{/if}}</div><div class="clearfix"></div></div></td><td><span class="text-primary">\uFFE5{{prices.now}}</span></td><td><div>{{#if total_pay_success > 0}}<a href="/class_course/order_detail?number={{number}}" target="_blank"><span class="success-pay"><span class="text-primary">{{total_pay_success}}</span>/{{student_amount.max}}</span></a>{{else}}<span class="success-pay"><span class="text-primary">{{total_pay_success}}</span>/{{student_amount.max}}</span>{{/if}}{{#if total_pay_success > 0}}{{#if jigouLogin || (!isOrgTeacher && !shiziLogin)}}<span class="view-roster" on-click="viewRoster(this, event)"><a href="{{roster_url}}" class="text-info" target="_blank">查看花名册</a></span>{{elseif shiziLogin}}<span class="text-info" data-title="师资系统无权查看花名册">查看花名册</span>{{else}}<span class="text-info" data-title="请通过机构后台进入老师个人<br/>中心查看花名册\u3002">查看花名册</span>{{/if}}{{/if}}</div></td><td>{{#if time.began_at && time.ended_at}}{{#if formatDate(time.began_at) != formatDate(time.ended_at)}}<span class="date-time">{{formatDate(time.began_at)}}</span><br/>到<br/><span class="date-time">{{formatDate(time.ended_at)}}</span>{{else}}<span class="date-time">{{formatDate(time.began_at)}}</span>{{/if}}{{/if}}</td><td><span style="color:{{display_status.color}}">{{display_status.name}}</span></td><td>{{#if verify_reasons != null}}<div class="action" data-title="{{replaceLineBreak(verify_reasons.tips)}}" data-max-width="300px"><span>查看原因</span></div>{{/if}}{{#each allow_actions_pc}}<div class="action"><span on-click="{{action}}">{{name}}</span>{{#if action == "copyCourse"}}<i class="icon icon-question-circle" data-title="什么是再开一班\uFF1F<br />再开一班会依据本堂课自动填写课程信息\u3001课程照片及课程简介\uFF0C你只需要重新填写教学计划就可以快速再开一班了" data-max-width="300px"></i>{{/if}}</div>{{/each}}</td></tr>{{/each}}</tbody></table></div>{{#if isSearchResult == 1}}{{#if !isLoaded}}<div class="loading">直播课数据正在加载中...</div>{{elseif courseList.length == 0}}<div class="no-result{{#if isSearchResult == 0}} hidden{{/if}}"><img src="{{sourceDir}}/img/teacher-center/no-class-course.jpg" ><div>抱歉\uFF0C没有找到符合你筛选条件的直播课\uFF0C<br/>试试在上面去除部分筛选条件吧</div></div><div class="empty{{#if isSearchResult == 1}} hidden{{/if}}"><img src="{{sourceDir}}/img/teacher-center/add-class-course.jpg" ><div>点击左上角的\u201C添加直播课\u201D按钮开启你的跟谁学直播课之旅吧</div></div>{{/if}}{{else}}{{#if !cacheCourse && !isLoaded}}<div class="loading">班课数据正在加载中...</div>{{elseif !cacheCourse && courseList.length == 0}}<div class="no-result{{#if isSearchResult == 0}} hidden{{/if}}"><img src="{{sourceDir}}/img/teacher-center/no-class-course.jpg" ><div>抱歉\uFF0C没有找到符合你筛选条件的班课\uFF0C<br/>试试在上面去除部分筛选条件吧</div></div><div class="empty{{#if isSearchResult == 1}} hidden{{/if}}"><img src="{{sourceDir}}/img/teacher-center/add-class-course.jpg" ><div>点击左上角的\u201C添加线下班课\u201D按钮开启你的跟谁学班课之旅吧</div></div>{{/if}}{{/if}}<div class="pager"><Pager options="{{pagerOptions}}" /></div></div></div>';}),define('userCenter/teacherCenter/liveCourseList/liveCourseList',['require','exports','../common/service_79853c6d3e','cc/util/localStorage','./liveCourseList_html','../../common/component/Input_12b813ed72','../../common/component/Select_fea6c25a54','../../common/component/Pager_c90b08d5db'],function(require,exports){'use strict';function e(){c={lesson_way:s,keyword:'',state:'all',page:1,order_by_column:'update_time',order_by_pattern:'desc'};}function t(e,t){r.getCourseList(e).then(function(e){if(0===e.code){var n=Math.ceil(e.data.pager.total/10)?Math.ceil(e.data.pager.total/10):1;t.set({courseList:e.data.courses,isLoaded:!0,shiziLogin:e.data.from_shizi_login,jigouLogin:e.data.from_jigou_login,isOrgTeacher:e.data.is_org_teacher,vipLevel:e.data.vip_level,'pagerOptions.page':e.data.pager.current_page,'pagerOptions.count':n});}},function(){t.set('isLoaded',!0);});}function n(e){return e?0:1;}function i(e){r.doCourseActions({number:e,action:'deleteCourse'}).done(function(e){if(0===e.code)tip({type:'success',content:'删除课程'}).done(function(){location.reload();});});}function o(e,t,n,i){confirm({content:e,title:'温馨提示',width:t}).done(function(){if(i)i(n);});}var r=require('../common/service_79853c6d3e'),a=require('cc/util/localStorage'),s=2,c={lesson_way:s,keyword:'',state:'all',page:1,order_by_column:'update_time',order_by_pattern:'desc'};exports.init=function(){var u=[{text:'全部状态',value:'all'},{text:'审核中',value:'verifying'},{text:'正在招生',value:'enroll_started'},{text:'审核被拒',value:'verify_failed'},{text:'上课中',value:'teaching'},{text:'已完成',value:'finished'}],l={},f=a.get('editLiveClassCourese'+userData.id);if(f&&'undefined'!=f){f=JSON.parse(f);var p=f.schedules.length;if(p)l.began_at=f.schedules[0].began_at,l.ended_at=f.schedules[p-1].ended_at;if(f.covers.length)l.cover_url=f.covers[0].url;if(f.chaban)l.chaban_flag=f.chaban.flag;if(f.retire)l.retire_flag=f.retire.flag;if(f.display_name)l.display_name=f.display_name;if(f.prices)l.price=f.prices.now;if(f.student_amount)l.max_student=f.student_amount.max;}else l=null;new Ractive({el:'#container',template:require('./liveCourseList_html'),data:{sourceDir:siteData.source,courseNameInputOptions:{name:'courseName',value:'',className:'course-name',placeholder:'请输入直播课名称或编号',autofocus:!1},courseStatusSelectOptions:{name:'courseStatus',className:'course-status',value:'all',defaultText:'全部状态',data:u},pagerOptions:{page:1,count:1,size:''},showCloseIcon:1,courseList:'',priceArrowActive:0,enrolledArrowActive:0,timeArrowActive:0,priceArrowDirection:0,enrolledArrowDirection:1,timeArrowDirection:1,isSearchResult:0,isLoaded:!1,shiziLogin:!1,jigouLogin:!1,isOrgTeacher:!1,vipLevel:0,cacheCourse:l},components:{Input:require('../../common/component/Input_12b813ed72'),Select:require('../../common/component/Select_fea6c25a54'),Pager:require('../../common/component/Pager_c90b08d5db')},clearAll:function(){this.set({'courseStatusSelectOptions.value':'all','courseNameInputOptions.value':'',showCloseIcon:0});},clearInput:function(){this.set({'courseNameInputOptions.value':'','courseNameInputOptions.autofocus':!0,showCloseIcon:0});},searchCourse:function(){e(),c.keyword=this.get('courseNameInputOptions.value'),c.state=this.get('courseStatusSelectOptions.value'),this.set({isSearchResult:1,priceArrowActive:0,enrolledArrowActive:0,timeArrowActive:0,priceArrowDirection:0,enrolledArrowDirection:1,timeArrowDirection:1}),t(c,this);},sortByPrice:function(){if(1==this.get('priceArrowActive'))this.set('priceArrowDirection',n(this.get('priceArrowDirection')));else this.set('priceArrowActive',1);this.set('enrolledArrowActive',0),this.set('timeArrowActive',0),c.page=1;var e=this.get('priceArrowDirection');c.order_by_pattern=e?'desc':'asc',c.order_by_column='price',t(c,this);},sortByEnrolled:function(){if(1==this.get('enrolledArrowActive'))this.set('enrolledArrowDirection',n(this.get('enrolledArrowDirection')));else this.set('enrolledArrowActive',1);this.set('priceArrowActive',0),this.set('timeArrowActive',0),c.page=1;var e=this.get('enrolledArrowDirection');c.order_by_pattern=e?'desc':'asc',c.order_by_column='total_pay_success',t(c,this);},sortByTime:function(){if(1==this.get('timeArrowActive'))this.set('timeArrowDirection',n(this.get('timeArrowDirection')));else this.set('timeArrowActive',1);this.set('enrolledArrowActive',0),this.set('priceArrowActive',0),c.page=1;var e=this.get('timeArrowDirection');c.order_by_pattern=e?'desc':'asc',c.order_by_column='update_time',t(c,this);},deleteCacheCourse:function(){alert({title:'温馨提示',content:'确认要删除草稿吗\uFF1F',buttons:[{text:'确定',type:'primary',action:function(){a.remove('editLiveClassCourese'+userData.id),this.hide(),location.reload();}},{text:'取消',action:function(){this.hide();}}]});},viewRoster:function(e,t){var n=this.get('isOrgTeacher'),i=this.get('vipLevel'),o=e.prices.now,r=2;if(2==r)if(0==o)if(0==i)if(!n)alert({title:'温馨提示',content:'免费课花名册只有会员才能查看\uFF0C会员还可享有优先推荐获得更多生源哦\u3002',width:382,skinClass:'vip_dialog',buttons:[{text:'立即开通',type:'error',action:function(){location.href='/teacher_center/vip_center',this.hide();}},{text:'了解详情',type:'default',action:function(){location.href='/teacher_center/vip_detail?type=seeRoster',this.hide();}}]}),t.original.preventDefault();else alert({title:'温馨提示',content:'免费课花名册只有会员才能查看\uFF0C请联系机构开通会员',width:382,skinClass:'vip_dialog',buttons:[{text:'我知道了',type:'primary',action:function(){this.hide();}}]}),t.original.preventDefault();else if(1==i)if(!n)alert({title:'温馨提示',content:'免费课花名册只有高级会员才能查看\uFF0C高级会员还可享有优先推荐获得更多生源哦\u3002',width:382,skinClass:'vip_dialog',buttons:[{text:'立即开通',type:'error',action:function(){location.href='/teacher_center/vip_center',this.hide();}},{text:'了解详情',type:'default',action:function(){location.href='/teacher_center/vip_detail?type=seeRoster',this.hide();}}]}),t.original.preventDefault();else alert({title:'温馨提示',content:'免费课花名册只有高级会员才能查看\uFF0C请联系机构开通会员',width:382,skinClass:'vip_dialog',buttons:[{text:'我知道了',type:'primary',action:function(){this.hide();}}]}),t.original.preventDefault();},oncomplete:function(){var e=this;t(c,e),e.observe('courseNameInputOptions.value',function(){if(''!==e.get('courseNameInputOptions.value'))e.set('showCloseIcon',1);else e.set('showCloseIcon',0);}),e.observe('pagerOptions.page',function(){if(c.page!==this.get('pagerOptions.page'))c.page=this.get('pagerOptions.page'),t(c,e);}),e.on('toEdit',function(e){var t=$(e.node).closest('.course-item').data('number');location.href='/tcenter/courses/class-courses/form?lesson_way='+s+'&number='+t;}),e.on('copyCourse',function(e){var t=$(e.node).closest('.course-item').data('number');location.href='/tcenter/courses/class-courses/form?lesson_way='+s+'&number='+t+'&action=copyCourse';}),e.on('shareFiles',function(e){var t=$(e.node).closest('.course-item').data('number');location.href='/tcenter/courses/files/list?number='+t+'&type=2';}),e.on('deleteCourse',function(e){var t=$(e.node),n=t.closest('.course-item'),r=(n.data('total-pay'),n.data('number'));o('删除直播课操作不能撤销\uFF0C确认要删除吗\uFF1F',330,r,i);}),e.on('stopEnroll',function(e){var t=$(e.node).closest('.course-item').data('number');confirm({content:'老师\uFF0C停止招生后\uFF0C学生将无法继续报名该直播课\uFF0C仍然要停止招生吗\uFF1F',title:'温馨提示',width:335}).done(function(){r.doCourseActions({number:t,action:'stopEnroll'}).then(function(e){if(0===e.code)tip({type:'success',content:'停止招生'}).done(function(){location.reload();});});});}),e.on('revokeVerify',function(e){var t=$(e.node).closest('.course-item').data('number');confirm({content:'确定要撤回本次审核吗\uFF1F',title:'温馨提示',width:335}).done(function(){r.doCourseActions({number:t,action:'revokeVerify'}).then(function(e){if(0===e.code)tip({type:'success',content:'撤回审核'}).done(function(){location.reload();});});});}),e.on('changeTemplate',function(e){var t=$(e.node).closest('.course-item').data('number');location.href='/tcenter/courses/class-courses/form?lesson_way='+s+'&number='+t+'#course-template-edit';}),e.on('closeCourse',function(e){var t=$(e.node).closest('.course-item').data('number');alert({title:'关闭直播课',width:335,content:'关闭直播课后\uFF0C我们将取消之前所有学生支付过的订单\uFF0C该操作不可撤销\uFF01',buttons:[{text:'我知道了',type:'primary',action:function(){this.hide(),r.doCourseActions({number:t,action:'closeCourse'}).then(function(e){if(0===e.code)tip({type:'success',content:'关闭直播课'}).done(function(){location.reload();});});}},{text:'我再想想',action:function(){this.hide();}}]});}),e.on('submitVerify',function(e){{var t=$(e.node),n=t.closest('.course-item'),i=n.data('total-pay'),o=n.data('number'),a=new Date(),c=a.getTime(),u=new Date(n.data('start-time'));u.getTime();}if(0==i&&c>u)alert('老师\uFF0C现在已经过了你设置的开课时间\uFF0C快去检查一下教学计划吧\uFF01');else r.doCourseActions({number:o,action:'submitVerify'},{errorHandler:{991107:function(){alert({title:'温馨提示',content:'请先修改违规内容后再提交审核',buttons:[{text:'马上修改',type:'primary',action:function(){this.hide(),location.href='/tcenter/courses/class-courses/form?lesson_way='+s+'&number='+o;}},{text:'返回',action:function(){this.hide();}}]});},230101:function(e){var t='恭喜你\uFF0C直播课已提交审核<br />但是小秘书发现您的';if(0==e.data.cert)t+='<span class="text-info">身份认证&nbsp;</span>';if(0==e.data.profile)t+='<span class="text-info">资料设置&nbsp;</span>';t+='仍未完善<br />',t+='完善后直播课才会自动开始审核',alert({content:t,title:'温馨提示',buttons:[{text:'我知道了',type:'primary',action:function(){this.hide(),location.reload();}}]});}}}).done(function(e){if(0===e.code)tip({type:'success',content:'提交审核'}).done(function(){location.reload();});});}),e.on('startEnroll',function(e){var t=$(e.node),n=t.closest('.course-item'),i=n.data('number');confirm({content:'老师\uFF0C直播课继续招生后\uFF0C学生将可以继续报名该课程\uFF0C确认要继续招生吗\uFF1F',title:'温馨提示',width:335}).done(function(){r.doCourseActions({number:i,action:'startEnroll'}).then(function(e){if(0===e.code)tip({type:'success',content:'继续招生'}).done(function(){location.reload();});});});});}});};});