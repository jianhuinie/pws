define('cobble/function/viewportHeight',['require','exports','module'],function(){'use strict';return function(){return window.innerHeight||document.documentElement.clientHeight;};}),define('cobble/util/instance',['require','exports','module'],function(require,exports){exports.window=$(window),exports.document=$(document),exports.html=$(document.documentElement),exports.body=$(document.body);}),define('common/bindScroll_f2ce0a166a',function(){'use strict';var e=function(e,t){return e===t.target||e===window&&t.target===document;},t=function(e){for(;e.length>1;)clearTimeout(e.shift());};return function(r,o,i,s){var n=[],a=null,c=$(r);if(r=c[0],isNaN(i)||0>i)if(s)a=o;else a=function(t){if(e(r,t))o(t);};else if(s)a=function(e){n.push(setTimeout(function(){t(n),o(e);},i));};else a=function(s){n.push(setTimeout(function(){if(t(n),e(r,s))o(s);},i));};c.scroll(a);};}),define('common/lazyImage_92160e3789',['require','common/bindScroll_f2ce0a166a','cobble/util/instance','cobble/function/viewportHeight'],function(require){'use strict';function e(e){if(!e.prop('loading'))e.prop('loading',!0).addClass('img-loading');}function t(e){for(var t=e.height();!t;)e=e.parent(),t=e.height();return t;}var r=require('common/bindScroll_f2ce0a166a'),o=require('cobble/util/instance'),i=require('cobble/function/viewportHeight'),s=o.window,n=o.body,a=0,c=null,exports={init:function(e){r(e||s,exports.scanning,a),exports.scanning(!0),setTimeout(function(){s.scroll();},0);},scanning:function(r,o){var a=i(),l=s.scrollTop(),u=l+a;if(r)o=o?$(o):n,c=o.find('img[data-src]');c.each(function(){var r=$(this),o=r.offset().top,i=t(r);if(u>=o-i-a&&o+i+a>=l){if(!r.prop('loaded'))r.prop('src',r.data('src')).prop('loaded',!0).removeAttr('data-src').removeClass('img-loading');}else e(r);});var p=o.find('iframe'),d=p.length;if(d)for(var f,m=0;d>m;m++){var g=p[m],h=$(g).offset();f=$(p[m].contentWindow.document).find('img[data-src]'),f.each(function(){var r=$(this),o=r.offset().top+h.top,i=t(r);if(u>=o&&o+i+a>=l){if(!r.prop('loaded'))r.prop('src',r.data('src')).prop('loaded',!0).removeAttr('data-src').removeClass('img-loading');}else e(r);});}}};return exports;}),define('userCenter/common/service_1288b24a55',['require','exports','module'],function(require,exports){'use strict';function e(e,t){var r=e;if(t)r+=$.param(t);return r;}function t(t,r,a){r=r||{},a=$.extend({},o,a);var c,l;if(s[t])l=e(t,r),c=n[l];var u=$.Deferred();if(c)if(!c.response)c.deferredList.push(u);else u.resolve(c.response);else{var p=userData.number||0;if(!i[t])r._user_number=p,$.extend(r,siteData.monkey);if($.ajax({url:t,data:r,method:'post',dataType:'json',timeout:a.timeout,async:a.sync?!1:!0}).then(function(e){if(s[t])c=n[l],c.response=e,$.each(c.deferredList,function(t,r){if(e&&0===e.code)r.resolve(e);else r.reject(e);}),c.deferredList.length=0;else if(e&&0===e.code)u.resolve(e);else{var r=e.msg;if(r&&!a.preventError)alert({title:'提示',content:r});u.reject(e);}},function(e,t){if('timeout'===t||'error'===t)u.reject({code:-1});}),s[t])n[l]={},n[l].deferredList=[u];}return u;}function r(e,t){return $.ajax({url:e,data:t,dataType:'jsonp'});}var o={timeout:5000,sync:!1,stringify:!1,preventError:!1},i={'/area/list':1,'/subject/getList':1},s={'/user/basicInfo':1},n={};exports.post=t,exports.jsonp=r,exports.getUserBasicInfo=function(e){var r;if(e&&null!=e.userId&&null!=e.userType)r={user_id:e.userId,user_type:e.userType};return t('/user/basicInfo',r);},exports.getCourseList=function(){return t('/lesson/list');},exports.getUserType=function(){return t('/user/roles');},exports.sendInviteCode=function(e){var r=$.extend(e.formData||{},{invite_code:e.inviteCode,role:e.role});return t('/user/switch_role_ajax',r);},exports.getCDNSpeedTestUrls=function(){return t('/video/getSpeedTestUrl');};}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/PhotoGallery_html',function(){return'<div class="photo-gallery"><div class="wrapper"><ul class="pictures">{{#each imageList}}<li class="picture-item"><div class="image-box"><!-- <img src="{{compressImage(url, 172, 96)}}"> --><img data-src="{{compressImage(url, 172, 96)}}" data-width="172" data-height="96" data-crop="1"/></div><label><input class="text fluid" type="checkbox" checked="{{checked}}"><span class="choose">{{#if checked}}<i class="primary icon icon-check-circle"></i>{{else}}<i class="icon icon-circle"></i>{{/if}}</span></label></li>{{/each}}</ul><div class="buttons"><span class="describtion">封面图最多12张</span><div class="button primary" on-click="save()">确认</div><div class="button secondary" on-click="close()">取消</div></div></div><style>{{style}}</style></div>';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/PhotoGallery_87fe0f9bf4',['require','exports','../service_d104b5ab74','common/lazyImage_92160e3789','./PhotoGallery_html','./PhotoGallery_css'],function(require){'use strict';var e=require('../service_d104b5ab74'),t=require('common/lazyImage_92160e3789');return Ractive.extend({template:require('./PhotoGallery_html'),data:function(){return{style:require('./PhotoGallery_css'),imageList:[],options:{list:[],save:$.noop,close:$.noop}};},components:{},onrender:function(){var r=this,o=[];e.getPhotoGallery().then(function(e){{var i=e.data;r.get('options.list');}$.each(i,function(e,t){var r=!1;o.push({url:t.url,id:t.id,checked:r});}),t.init($('.pictures','.photo-gallery'));}),r.set('imageList',o),r.observe('imageList.*.checked',function(e){var t=r.get('options.list');if(!t)t=[];var o=r.get('imageList');if(e)t.push(o[arguments[3]]);else{var i,s=arguments[3];$.each(t,function(e,t){if(t.id==o[s].id)i=e;}),t.splice(i,1);}r.set('options.list',t);});},save:function(){var e=this,t=e.get('options.list');e.get('options').save(t);},close:function(){this.get('options').close();}});}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/PhotoGallery_css',function(){return'.classcourse-help-tooltip{width:785px;font-size:14px;line-height:26px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;}.classcourse-help-tooltip:before,.classcourse-help-tooltip:after{left:96% !important;margin-left:-8px !important;border-width:0 8px 8px 8px !important}.classcourse-help-tooltip:before{top:-8px !important}.classcourse-help-tooltip:after{top:-7px !important}.photo-gallery{margin-bottom:-10px;}.photo-gallery .wrapper .pictures{background:#f8f8f8;width:785px;height:450px;overflow-y:auto;list-style:none;padding:0;margin-top:0;}.photo-gallery .wrapper .pictures .picture-item{float:left;position:relative;margin-right:19px;}.photo-gallery .wrapper .pictures .picture-item .image-box{width:172px;height:96px;position:relative;margin-top:10px;}.photo-gallery .wrapper .pictures .picture-item .image-box img{position:absolute;top:0;left:0}.photo-gallery .wrapper .pictures .picture-item label{position:absolute;bottom:0;right:0;width:100%;height:100%;}.photo-gallery .wrapper .pictures .picture-item label input{z-index:-1;position:absolute;bottom:0;right:0}.photo-gallery .wrapper .pictures .picture-item label .icon{font-size:22px;}.photo-gallery .wrapper .pictures .picture-item label .icon.icon-circle{color:#fff}.photo-gallery .wrapper .pictures .picture-item label .choose{position:absolute;bottom:5px;right:5px}.photo-gallery .wrapper .buttons{text-align:center;margin-top:15px;padding-right:122px;}.photo-gallery .wrapper .buttons .describtion{font-size:12px;float:left}';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/service_d104b5ab74',['require','exports','module','../../../common/service_1288b24a55'],function(require,exports){'use strict';function e(e,t,r){return $.ajax({url:e,data:t,dataType:'jsonp',timeout:r});}var t=require('../../../common/service_1288b24a55');exports.getSubjectList=function(e){return t.post('/tcenter/subjects/list',{keyword:e.keyword});},exports.getAddressList=function(){return t.post('/tcenter/addresses/list-simple');},exports.getAddressSuggestion=function(t){return e('http://api.map.baidu.com/place/v2/suggestion',{query:t.query,region:t.region,output:'json',ak:'EMB0bKIvMeOd70lyyG92BZlu'});},exports.checkAddress=function(e){return t.post('/teacher_center/checkAddress',{city_id:e.cityId,area_name:e.areaName});},exports.upsertAddress=function(e){return t.post('/teacher_center/upsertAddress',{address_id:e.addressId,area_id:e.areaId,address:e.locationAddr,lng:e.lng,lat:e.lat,as_regular_address:e.asRegularAddress},options);},exports.getRelatedCourse=function(){return t.post('/tcenter/courses/all-courses/selling-courses');},exports.getHistorySubject=function(){return t.post('/tcenter/courses/all-courses/history-subjects');},exports.getPhotoGallery=function(){return t.post('/tcenter/courses/photo-gallery/list');},exports.saveOfflineCourse=function(e){return t.post('/tcenter/courses/class-courses/save',{data:e},{preventError:!0,timeout:10000});},exports.getUserBasicInfo=function(e){var r;if(e&&null!=e.userId&&null!=e.userType)r={user_id:e.userId,user_type:e.userType};return t.post('/user/basicInfo',r);};});