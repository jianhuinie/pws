define('custom/form/Date',['require','exports','module','cc/form/Date','cc/function/lpad','cc/util/etpl','cc/function/stringifyDate'],function(require){'use strict';var e=require('cc/form/Date'),t=require('cc/function/lpad'),i=require('cc/util/etpl'),n=require('cc/function/stringifyDate'),o={};return e.defaultOptions={firstDay:1,mode:'month',toggle:!1,multiple:!1,stable:!0,valueAttribute:'data-value',parse:function(e){return new Date(e);},inputSelector:'input[type="text"]',layerSelector:'.calendar',itemSelector:'[data-value]',itemActiveClass:'checked',prevSelector:'.icon-chevron-left',nextSelector:'.icon-chevron-right',showLayerTrigger:'focus',hideLayerTrigger:'click',showLayerAnimation:function(e){e.layerElement.show();},hideLayerAnimation:function(e){e.layerElement.hide();},calendarTemplate:'<div class="header"><i class="icon icon-chevron-left"></i><strong>${year}年${month}月</strong><i class="icon icon-chevron-right"></i></div><table class="body"><thead><tr><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th><th>日</th></tr></thead><tbody><!-- for: ${list} as ${item}, ${index} --><!-- if: ${index} % 7 === 0 --><!-- if: ${index} === 0 --><tr><!-- else --></tr><!-- /if --><!-- /if --><td class="${item.phase}<!-- if: ${item.month} !== ${month} --> adjacent<!-- /if --><!-- if: ${item.active} --> active<!-- /if --><!-- if: ${item.disabled} --> disabled<!-- /if -->"<!-- if: ${item.disabled} !== true --> data-value="${item.value}"<!-- /if --> data-year="${item.year}" data-month="${item.month}" data-date="${item.date}">${item.date}</td><!-- /if --><!-- /for --></tbody></table>',render:function(e,r){var a=o[r];if(!a)a=o[r]=i.compile(r);var s=this.option('disableBefore'),l=this.option('disableAfter');return s='date'===$.type(s)?n(s,'/'):null,l='date'===$.type(l)?n(l,'/'):null,e=$.extend(!0,{},e),$.each(e.list,function(e,i){if(i.value=[i.year,t(i.month,2),t(i.date,2)].join('/'),s&&s>i.value||l&&l<i.value)i.disabled=!0;}),a(e);}},e;}),define('custom/form/Select',['require','exports','module','cc/form/Select'],function(require){'use strict';var e=require('cc/form/Select');return e.defaultOptions={buttonSelector:'> .button',menuSelector:'> .menu',labelSelector:'> .button > .text',itemSelector:'li',itemActiveClass:'active',textAttribute:'data-text',valueAttribute:'data-value',defaultText:'- 请选择 -',menuActiveClass:'opened',showMenuTrigger:'click',hideMenuTrigger:'click',showMenuAnimation:function(e){e.menuElement.show();},hideMenuAnimation:function(e){e.menuElement.hide();},render:function(e){var t=[];return $.each(e,function(e,i){var n=[];$.each(i,function(e,t){if('text'!==e&&null!=t)n.push('data-'+e+'="'+t+'"');});var o=n.join(' ');if(o)o=' '+o;t.push('<li class="item"'+o+'>'+i.text+'</li>');}),t.join('');}},e;}),define('custom/form/Text',['require','exports','module','cc/form/Text'],function(require){'use strict';var e=require('cc/form/Text');return e.defaultOptions={nativeFirst:!0,inputSelector:'input[type="text"],input[type="password"],textarea',labelSelector:'.placeholder',showPlaceholderAnimation:function(e){e.labelElement.fadeIn(500);},hidePlaceholderAnimation:function(e){e.labelElement.hide();}},e;}),define('custom/form/Validator',['require','exports','module','cc/form/Validator','cc/util/etpl'],function(require){'use strict';function e(e){var t;if(e.is('.input')||e.is('.dropdown'))t=e;else{var i=e.closest('.input');if(1===i.length)t=i;else if(i=e.closest('.dropdown'),1===i.length)t=i;}return t;}var t=require('cc/form/Validator'),i=require('cc/util/etpl'),n={};return t.defaultOptions={validateOnBlur:!1,scrollOffset:-100,groupSelector:'.group',errorAttribute:'data-error-for',errorTemplate:'${error}',showErrorAnimation:function(t){var i=t.errorElement;i.css({position:'fixed',display:'inline-block',width:'auto'});var n=i.outerWidth(),o=i.outerHeight(),r=t.fieldElement;if(r.is(':hidden'))r=r.closest(':visible');var a=e(r);if(a)a.addClass('error');var s=r.outerWidth(),l=r.outerHeight(),c=s+8;if(!$.contains(r[0],i[0]))c+=r.position().left;var u={position:'absolute',left:c,top:l>o?5:(l-o)/2},d=n+1,p=r.offset().left+s+8;if(p+d>screen.availWidth)d-=p+d-screen.availWidth+10;u.width=d,i.css(u);},hideErrorAnimation:function(t){var i=t.errorElement;i.hide();var n=e(t.fieldElement);if(n)n.removeClass('error');},render:function(e,t){var o=n[t];if(!o)o=n[t]=i.compile(t);return o(e);}},t;}),define('custom/helper/Draggable',['require','exports','module','cc/helper/Draggable','cc/util/instance'],function(require){'use strict';var e=require('cc/helper/Draggable'),t=require('cc/util/instance').document;return e.defaultOptions={dragAnimation:function(e){e.mainElement.css(e.mainStyle);},init:function(e){var i=e.namespace;e.mainElement.on('mousedown'+i,e.mainSelector,function(n){e.downHandler(n),t.off(i).on('mousemove'+i,e.moveHandler).on('mouseup'+i,function(n){e.upHandler(n),t.off(i);});});}},e;}),define('custom/helper/Popup',['require','exports','module','cc/helper/Popup'],function(require){'use strict';var e=require('cc/helper/Popup');return e.defaultOptions={showLayerTrigger:'click',hideLayerTrigger:'click',showLayerAnimation:function(e){e.layerElement.show();},hideLayerAnimation:function(e){e.layerElement.hide();}},e;}),define('custom/ui/Dialog',['require','exports','module','cc/ui/Dialog'],function(require){'use strict';var e=require('cc/ui/Dialog');return e.defaultOptions={x:'50%',y:'50%',modal:!0,fixed:!0,hidden:!1,draggable:!0,removeOnEmpty:!1,disposeOnHide:!0,removeOnDispose:!0,positionOnResize:!0,hideOnClickMask:!1,draggableClass:'draggable',draggableIncludeSelector:'> .header',draggableExcludeSelector:['> .header > .title','> .close'],parentSelector:'body',headerSelector:'> .header',titleSelector:'> .header > .title',closeSelector:'> .close',contentSelector:'> .body',footerSelector:'> .footer',mainTemplate:'<div class="dialog"><div class="header"><div class="title"></div></div><span class="close">&times;</span><div class="body"></div><div class="footer"></div></div>',maskTemplate:'<div class="mask"></div>',showAnimation:function(e){if(e.mainElement.show(),e.maskElement)e.maskElement.show();},hideAnimation:function(e){if(e.mainElement.hide(),e.maskElement)e.maskElement.hide();},dragAnimation:function(e){e.mainElement.css(e.mainStyle);},refreshAnimation:function(e){e.mainElement.css(e.mainStyle);var t=e.maskElement;if(t)t.css(e.maskStyle);},resizeWindowAnimation:function(e){e.mainElement.css(e.mainStyle);var t=e.maskElement;if(t)t.css(e.maskStyle);}},e;}),define('custom/ui/Uploader',['require','exports','module','cc/ui/Uploader'],function(require){'use strict';var e=require('cc/ui/Uploader');return e.defaultOptions={},e;}),define('cc/form/Date',['require','exports','module','../function/contains','../function/isValidDate','../helper/Popup','../ui/Calendar','../util/life','../util/input','./common'],function(require){'use strict';function e(e){r.init(this,e);}var t=require('../function/contains'),i=require('../function/isValidDate'),n=require('../helper/Popup'),o=require('../ui/Calendar'),r=require('../util/life'),a=require('../util/input'),s=require('./common'),l=e.prototype;return l.type='Date',l.init=function(){var e=this;e.initStruct();var i=e.option('mainElement'),r=i.find(e.option('layerSelector')),s=e.option('calendarSelector'),l=s?r.find(s):r,c=new o({mainElement:l,mainTemplate:e.option('calendarTemplate'),mode:e.option('mode'),date:e.option('date'),today:e.option('today'),stable:e.option('stable'),toggle:e.option('toggle'),multiple:e.option('multiple'),firstDay:e.option('firstDay'),parse:e.option('parse'),renderSelector:e.option('renderSelector'),renderTemplate:e.option('renderTemplate'),prevSelector:e.option('prevSelector'),nextSelector:e.option('nextSelector'),itemSelector:e.option('itemSelector'),itemActiveClass:e.option('itemActiveClass'),valueAttribute:e.option('valueAttribute'),renderOnClickAdjacency:e.option('renderOnClickAdjacency'),render:function(t,i){return e.execute('render',[t,i]);}}),u=new n({triggerElement:i,layerElement:r,showLayerTrigger:e.option('showLayerTrigger'),showLayerDelay:e.option('showLayerDelay'),hideLayerTrigger:e.option('hideLayerTrigger'),hideLayerDelay:e.option('hideLayerDelay'),showLayerAnimation:function(){e.execute('showLayerAnimation',{layerElement:r});},hideLayerAnimation:function(){e.execute('hideLayerAnimation',{layerElement:r});}});u.on('dispatch',function(i,n){var o=i.originalEvent;if('beforeclose'===o.type){var a=o.originalEvent,s=a.target;if('click'===a.type&&s)if(!t(document,s)||t(d,s)||t(r,s))return!1;}e.dispatch(e.emit(o,n),n);});var d=i.find(e.option('inputSelector'));a.init(d),d.on(a.INPUT,function(){e.set('value',this.value);}),e.once('aftersync',function(){c.option('watchSync',{value:function(t){e.set('value',t),u.close();}}),c.set('value',e.get('value')),u.option('watchSync',{opened:function(t){e.state('opened',t);}}),e.state('opened',u.is('opened'));}),e.inner({main:i,'native':d,popup:u,calendar:c}),e.set({name:e.option('name'),value:e.option('value')});},l.open=function(){this.state('opened',!0);},l.close=function(){this.state('opened',!1);},l.render=function(){this.inner('calendar').render();},l.dispose=function(){var e=this;r.dispose(e),a.dispose(e.inner('native')),e.inner('popup').dispose(),e.inner('calendar').dispose();},r.extend(l,['open','close']),e.propertyUpdater={name:function(e){s.prop(this,'name',e);},value:function(e,t){var n=this;s.prop(n,'value',e);var o=n.execute('parse',e);if(i(o))n.inner('calendar').set({value:e,date:o});if(!e&&t)n.state('opened',!0);}},e.propertyValidator={name:function(e){return s.validateName(this,e);},value:function(e){return s.validateValue(this,e);}},e.stateUpdater={opened:function(e){var t=this.inner('popup');if(e)t.open();else t.close();}},e;}),define('cc/form/Select',['require','exports','module','../ui/ComboBox','../util/life','./common'],function(require){'use strict';function e(e){i.init(this,e);}var t=require('../ui/ComboBox'),i=require('../util/life'),n=require('./common'),o=e.prototype;return o.type='Select',o.init=function(){var e=this;e.initStruct();var i=e.option('mainElement'),o=new t({mainElement:i,data:e.option('data'),value:e.option('value'),defaultText:e.option('defaultText'),buttonElement:i.find(e.option('buttonSelector')),menuElement:i.find(e.option('menuSelector')),menuTemplate:e.option('menuTemplate'),renderSelector:e.option('renderSelector'),renderTemplate:e.option('renderTemplate'),showMenuTrigger:e.option('showMenuTrigger'),showMenuDelay:e.option('showMenuDelay'),hideMenuTrigger:e.option('hideMenuTrigger'),hideMenuDelay:e.option('hideMenuDelay'),itemSelector:e.option('itemSelector'),itemActiveClass:e.option('itemActiveClass'),menuActiveClass:e.option('menuActiveClass'),textAttribute:e.option('textAttribute'),valueAttribute:e.option('valueAttribute'),showMenuAnimation:function(t){e.execute('showMenuAnimation',t);},hideMenuAnimation:function(t){e.execute('hideMenuAnimation',t);},render:function(t,i){return e.execute('render',[t,i]);},setText:function(t){var n=e.option('labelSelector');i.find(n).html(t.text);}});e.once('aftersync',function(){o.option('watchSync',{value:function(t){e.set('value',t);},opened:function(t){e.state('opened',t);}}),o.set('value',e.get('value')),e.state('opened',o.is('opened'));});var r=n.findNative(e,'input[type="hidden"]');o.on('dispatch',function(t,i){var n=t.originalEvent;switch(n.type){case'afteropen':r.trigger('focusin');break;case'afterclose':r.trigger('focusout');}e.dispatch(e.emit(n,i),i);}),e.inner({main:i,'native':r,combobox:o}),e.set({data:e.option('data'),name:e.option('name'),value:e.option('value')});},o.open=function(){this.state('opened',!0);},o.close=function(){this.state('opened',!1);},o.dispose=function(){i.dispose(this),this.inner('combobox').dispose();},i.extend(o,['open','close']),e.propertyUpdater={name:function(e){n.prop(this,'name',e);}},e.propertyUpdater.data=e.propertyUpdater.value=function(e,t,i){var o=this,r={},a=i.value;if(a){var s=a.newValue;n.prop(o,'value',s),r.value=s;}var l=i.data;if(l)r.data=l.newValue;return o.inner('combobox').set(r),!1;},e.propertyValidator={name:function(e){return n.validateName(this,e);},value:function(e){return n.validateValue(this,e);}},e.stateUpdater={opened:function(e){var t=this.inner('combobox');if(e)t.open();else t.close();}},e;}),define('cc/form/Text',['require','exports','../helper/Input','../helper/Placeholder','../util/life','./common'],function(require){'use strict';function e(e){n.init(this,e);}var t=require('../helper/Input'),i=require('../helper/Placeholder'),n=require('../util/life'),o=require('./common'),r=e.prototype;return r.type='Text',r.init=function(){var e=this;e.initStruct();var n=new i({mainElement:e.option('mainElement'),value:e.option('placeholder'),hidden:!0,autoTrim:e.option('autoTrim'),nativeFirst:e.option('nativeFirst'),inputSelector:e.option('inputSelector'),labelSelector:e.option('labelSelector'),showAnimation:e.option('showPlaceholderAnimation'),hideAnimation:e.option('hidePlaceholderAnimation')});n.sync();var o=n.inner('input'),r=new t({mainElement:o,shortcut:e.option('shortcut'),value:e.option('value')});r.sync(),n.option('watchSync',{value:function(t){e.set('placeholder',t);}}),r.option('watchSync',{value:function(t){e.set('value',t);}}),e.inner({main:n.inner('main'),'native':o,input:r,placeholder:n}),e.set({name:e.option('name'),value:r.get('value'),placeholder:n.get('value')});},r.dispose=function(){var e=this;n.dispose(e),e.inner('input').dispose(),e.inner('placeholder').dispose();},n.extend(r),e.propertyUpdater={name:function(e){o.prop(this,'name',e);},value:function(e){var t=this.inner('input');t.set('value',e),t.sync(),this.inner('placeholder').render();},placeholder:function(e){this.inner('placeholder').set('value',e);}},e.propertyValidator={name:function(e){return o.validateName(this,e);}},e;}),define('cc/form/Validator',['require','exports','module','../function/isHidden','../function/nextTick','../function/debounce','../function/toNumber','../function/waitPromises','../util/life','../util/validator'],function(require){'use strict';function e(e){a.init(this,e);}var t=require('../function/isHidden'),i=require('../function/nextTick'),n=require('../function/debounce'),o=require('../function/toNumber'),r=require('../function/waitPromises'),a=require('../util/life'),s=require('../util/validator'),l=e.prototype;return l.type='Validator',l.init=function(){var e=this,t=e.option('mainElement'),i=e.namespace();t.on('focusin'+i,function(i){var n=$(i.target),o=n.prop('name'),r=e.option('errorAttribute');if(o&&r)e.execute('hideErrorAnimation',{errorElement:t.find('['+r+'="'+o+'"]'),fieldElement:n});}),t.on('focusout'+i,n(function(t){var i=t.target.name;if(i&&e.guid){var n=e.option('fields')[i];if(n){var o=n.validateOnBlur,r=e.option('validateOnBlur');if(o===!0||null==o&&r)e.validate(i);}}},180)),e.inner({main:t});},l.validate=function(e,n){var a=this,l=a.option('mainElement'),c=a.option('formSelector'),u=a.option('groupSelector'),d=a.option('showFirstError');if('string'===$.type(e))e=[e];else if(!$.isArray(e)){if('boolean'===$.type(e))n=e;e=[],$.each(a.option('fields'),function(t){e.push(t);});}var p=function(i){var n={};return $.each(e,function(e,o){var r=i.find('[name="'+o+'"]');if(1===r.length&&!r.prop('disabled')){var a=r.val();if('password'!==r.prop('type'))a=$.trim(a);var s={name:o,value:a,fieldElement:r};if(u){var l=r.closest(u);if(t(l))return;if(1===l.length)s.groupElement=l;}n[o]=s;}}),s.validate(n,a.option('fields'),a.option('sequence'));},f=[],m=function(e){if(!$.isArray(e)||0!==e.length)f.push(e);};if(c)l.find(c).each(function(){m(p($(this)));});else m(p(l));var h=[],v=function(){var e=a.option('errorAttribute'),t=a.option('errorTemplate'),r=[];$.each(f,function(e,t){$.each(t,function(e,t){r.push(t);});});var s=!1;if($.each(r,function(i,n){var o,r={fieldElement:n.fieldElement};if(e)o=l.find('['+e+'='+n.name+']'),r.errorElement=o;var c=n.error;if(c){if(h.push(n),!d||!s){if(s=!0,o){var u=a.execute('render',[{error:c},t]);o.html(u);}r.rule=n.rule,r.error=c,a.execute('showErrorAnimation',r);}}else a.execute('hideErrorAnimation',r);}),n&&h.length>0){var c=h[0].fieldElement;if(c.is('input[type="hidden"]'))c=c.parent();var u=c.offset().top+o(a.option('scrollOffset'),0);window.scrollTo(window.scrollX,u);}i(function(){if(a.guid)a.emit('validatecomplete',{fields:r,errors:h});});};return r(f,function(){return v(),0===h.length;});},l.dispose=function(){a.dispose(this);},a.extend(l),e;}),define('cc/form/common',['require','exports','module'],function(require,exports){'use strict';exports.prop=function(e,t,i){if($.isPlainObject(t))$.each(t,function(t,i){exports.prop(e,t,i);});else{var n=e.inner('native');if(2===arguments.length)return n.prop(t);else{if(n.prop(t)!==i)n.prop(t,i);if('value'===t)n.trigger('change');}}},exports.setClass=function(e,t,i){var n=e.option(t);if(n)e.option('mainElement')[i+'Class'](n);},exports.findNative=function(e,t){var i=e.option('mainElement').find(t);if(0===i.length)e.error('form/'+e.type+' 必须包含一个 ['+t+'].');return i.eq(0);},exports.validateName=function(e,t){if('string'!==$.type(t))if(t=exports.prop(e,'name'),!t||'string'!==$.type(t))e.error('name attribute is missing.');return t;},exports.validateValue=function(e,t){var i=$.type(t);if('number'===i)t=''+t;else if('string'!==i)t=exports.prop(e,'value')||'';return t;};}),define('cc/function/allPromises',['require','exports','module'],function(){'use strict';return function(e){var t=$.Deferred();return $.when.apply($,e).then(function(){t.resolve($.makeArray(arguments));},function(){t.reject($.makeArray(arguments));}),t;};}),define('cc/function/around',['require','exports','module'],function(){'use strict';return function(e,t,i,n){var o='string'===$.type(t),r=o?e[t]:e;if(!o)n=i,i=t;var a=function(){var e,t=$.makeArray(arguments);if($.isFunction(i))e=i.apply(this,t);if(e!==!1){if($.isFunction(r))e=r.apply(this,t);if($.isFunction(n)){t.push(e);var o=n.apply(this,t);if('undefined'!==$.type(o))e=o;}return e;}};return o?e[t]=a:a;};}),define('cc/function/autoScrollUp',['require','exports','module'],function(){'use strict';return function(e,t){var i=e.scrollTop(),n=i+e.height(),o=t.prop('offsetTop');if(i>o||o>n)e.scrollTop(o);};}),define('cc/function/contains',['require','exports','module'],function(){'use strict';return function(e,t){if(e=e.jquery?e[0]:e,t=t.jquery?t[0]:t,!e||!t)return!1;if(e===t)return!0;else return $.contains(e,t);};}),define('cc/function/createEvent',['require','exports','module'],function(){'use strict';return function(e){if(e&&!e[$.expando])e='string'===$.type(e)||e.type?$.Event(e):$.Event(null,e);return e||$.Event();};}),define('cc/function/debounce',['require','exports','module'],function(){'use strict';return function(e,t,i){function n(i){r=setTimeout(function(){r=null,o=$.now(),e.apply(null,$.makeArray(i));},t);}t='number'===$.type(t)?t:50;var o,r;return function(){if(i&&o>0&&$.now()-o<t)clearTimeout(r),r=null;if(!r)n(arguments);};};}),define('cc/function/decimalLength',['require','exports','module'],function(){'use strict';return function(e){var t=(''+e).split('.');return 2===t.length?t[1].length:0;};}),define('cc/function/disableSelection',['require','exports','module'],function(){'use strict';if(document.selection)return function(){document.body.onselectstart=function(){return!1;};};else return $.noop;}),define('cc/function/divide',['require','exports','module','./decimalLength','./float2Int'],function(require){'use strict';var e=require('./decimalLength'),t=require('./float2Int');return function(i,n){var o=Math.max(e(i),e(n));return i=t(i,o),n=t(n,o),i/n;};}),define('cc/function/dragGlobal',['require','exports','module','../helper/Draggable','../util/instance'],function(require){'use strict';var e=require('../helper/Draggable'),t=require('../util/instance');return function(i){return new e({mainElement:i.element,containerElement:t.body,mainDraggingClass:i.draggingClass,includeSelector:i.includeSelector,excludeSelector:i.excludeSelector,dragAnimation:i.dragAnimation,init:function(e){var i=e.namespace;e.mainElement.on('mousedown'+i,function(n){if(e.downHandler(n))t.document.off(i).on('mousemove'+i,e.moveHandler).on('mouseup'+i,function(n){e.upHandler(n),t.document.off(i);});});}});};}),define('cc/function/enableSelection',['require','exports','module'],function(){'use strict';if(document.selection)return function(){document.body.onselectstart=null;};else return $.noop;}),define('cc/function/eventOffset',['require','exports','module'],function(){'use strict';return function(e){var t=e.offsetX,i=e.offsetY;if('number'!==$.type(t)){var n=e.target.getBoundingClientRect();t=e.clientX-n.left,i=e.clientY-n.top;}return{x:t,y:i};};}),define('cc/function/eventPage',['require','exports','module'],function(){'use strict';return function(e){var t=e.pageX,i=e.pageY;if('number'!==$.type(t)){var n=document.documentElement;t=e.clientX+n.scrollLeft,i=e.clientY+n.scrollTop;}return{x:t,y:i};};}),define('cc/function/extend',['require','exports','module'],function(){'use strict';return function(e,t){if($.isPlainObject(t))$.each(t,function(t,i){if(!(t in e))e[t]=i;});};}),define('cc/function/firstDateInMonth',['require','exports','module','./offsetDate'],function(require){'use strict';var e=require('./offsetDate');return function(t){if('number'===$.type(t))t=new Date(t);return e(t,1-t.getDate());};}),define('cc/function/firstDateInWeek',['require','exports','module','./offsetDate'],function(require){'use strict';var e=require('./offsetDate');return function(t,i){if('number'===$.type(t))t=new Date(t);var n=t.getDay();return n=n>=i?n:n+7,e(t,-1*(n-i));};}),define('cc/function/float2Int',['require','exports','module'],function(){'use strict';return function(e,t){var i,n=(''+e).split('.');if(t>=0);else t=0;if(1===n.length)i=e+new Array(t+1).join('0');else t=Math.max(0,t-n[1].length),i=n.join('')+new Array(t+1).join('0');return+i;};}),define('cc/function/guid',['require','exports','module'],function(){var e=0;return function(){return'cc_'+e++;};}),define('cc/function/innerOffset',['require','exports','module','./toNumber'],function(require){'use strict';var e=require('./toNumber');return function(t){var i=t.offset(),n=t.css('border-left-width'),o=t.css('border-top-width');return{x:i.left+e(n,0,'int'),y:i.top+e(o,0,'int')};};}),define('cc/function/isHidden',['require','exports','module'],function(){'use strict';return function(e){e.css('display');return'none'===e.css('display')||0==e.css('opacity')||'hidden'===e.css('visibility');};}),define('cc/function/isValidDate',['require','exports','module'],function(){'use strict';return function(e){if('date'!==$.type(e))return!1;var t=e.getTime();if('number'===$.type(t))return(''+t).length>8;else return!1;};}),define('cc/function/keys',['require','exports','module'],function(){'use strict';return function(e){if(Object.keys)return Object.keys(e);var t=[];return $.each(e,function(e){t.push(e);}),t;};}),define('cc/function/lastDateInMonth',['require','exports','module','./offsetDate','./offsetMonth','./firstDateInMonth'],function(require){'use strict';var e=require('./offsetDate'),t=require('./offsetMonth'),i=require('./firstDateInMonth');return function(n){return e(i(t(n,1)),-1);};}),define('cc/function/lastDateInWeek',['require','exports','module','./firstDateInWeek','./offsetDate'],function(require){'use strict';var e=require('./firstDateInWeek'),t=require('./offsetDate');return function(i,n){return t(e(i,n),6);};}),define('cc/function/lpad',['require','exports','module'],function(){'use strict';return function(e,t){if(null==t)t=2;var i=new Array(t-(''+e).length+1);return i.join('0')+e;};}),define('cc/function/nextTick',['require','exports','module'],function(){'use strict';return function(e){var t=setTimeout(e,0);return function(){clearTimeout(t);};};}),define('cc/function/offsetDate',['require','exports','module','./offsetHour'],function(require){'use strict';var e=require('./offsetHour');return function(t,i){return e(t,24*i);};}),define('cc/function/offsetHour',['require','exports','module','./offsetMinute'],function(require){'use strict';var e=require('./offsetMinute');return function(t,i){return e(t,60*i);};}),define('cc/function/offsetMinute',['require','exports','module','./offsetSecond'],function(require){'use strict';var e=require('./offsetSecond');return function(t,i){return e(t,60*i);};}),define('cc/function/offsetMonth',['require','exports','module'],function(){'use strict';return function(e,t){if('date'===$.type(e))e=e.getTime();return e=new Date(e),e.setDate(1),e.setMonth(e.getMonth()+t),e;};}),define('cc/function/offsetParent',['require','exports','module'],function(){'use strict';function e(e){return e.is('body')||'static'!==e.css('position');}return function(t){if(t.is('body'))return t;for(var i=t.parent();!e(i);)i=i.parent();return i;};}),define('cc/function/offsetSecond',['require','exports','module'],function(){'use strict';return function(e,t){if('date'===$.type(e))e=e.getTime();return new Date(e+1000*t);};}),define('cc/function/offsetWeek',['require','exports','module','./offsetDate'],function(require){'use strict';var e=require('./offsetDate');return function(t,i){return e(t,7*i);};}),define('cc/function/outerOffset',['require','exports','module','./toNumber'],function(require){'use strict';var e=require('./toNumber');return function(t){var i=t.offset(),n=e(t.css('margin-left'),0,'int'),o=e(t.css('margin-top'),0,'int');return{x:i.left-n,y:i.top-o};};}),define('cc/function/page',['require','exports','module','../util/instance'],function(require){'use strict';var e=require('../util/instance');return function(){if(e.body.prop('clientHeight')<e.html.prop('clientHeight'))return e.html;else return e.body;};}),define('cc/function/pageHeight',['require','exports','module','./page'],function(require){'use strict';var e=require('./page');return function(){var t=e()[0];return Math.max(t.scrollHeight,t.clientHeight);};}),define('cc/function/pageScrollLeft',['require','exports','module'],function(){'use strict';return function(){return Math.max(document.body.scrollLeft,document.documentElement.scrollLeft);};}),define('cc/function/pageScrollTop',['require','exports','module'],function(){'use strict';return function(){return Math.max(document.body.scrollTop,document.documentElement.scrollTop);};}),define('cc/function/pageWidth',['require','exports','module','./page'],function(require){'use strict';var e=require('./page');return function(){var t=e()[0];return Math.max(t.scrollWidth,t.clientWidth);};}),define('cc/function/parseDate',['require','exports','module'],function(){'use strict';return function(e,t,i){var n=!1;if($.isNumeric(e)&&$.isNumeric(t)&&$.isNumeric(i))n=!0;else if(1===arguments.length){if($.isPlainObject(e))n=!0,i=e.date,t=e.month,e=e.year;}else if(2===arguments.length)if('string'===$.type(e)){n=!0;var o=e.split(t||'-');e=o[0],t=o[1],i=o[2];}if(n)if(4===String(e).length&&t>=1&&12>=t&&i>=1&&31>=i)return new Date(e,t-1,i);};}),define('cc/function/parsePercent',['require','exports','module','./divide'],function(require){'use strict';var e=require('./divide'),t=/(-?\d+(\.\d+)?)%/;return function(i){if(t.test(i))return e(RegExp.$1,100);else return void 0;};}),define('cc/function/pin',['require','exports','module','../util/instance','./parsePercent'],function(require){'use strict';function e(e){var t=o[e.x];if(null==t)t=e.x;if('string'===$.type(t)){var i=n(t);if(null!=i)t=i*(e.width||e.element.outerWidth());}return t;}function t(e){var t=o[e.y];if(null==t)t=e.y;if('string'===$.type(t)){var i=n(t);if(null!=i)t=i*(e.height||e.element.outerHeight());}return t;}var i=require('../util/instance'),n=require('./parsePercent'),o={left:0,top:0,center:'50%',middle:'50%',right:'100%',bottom:'100%'};return function(n){var o=n.element,r=n.attachment||{};if(!r.element)r.element=i.body;var a=r.element.offset(),s=a.left+e(r),l=a.top+t(r),c=s-e(n),u=l-t(n),d=n.offset;if(d){if('number'===$.type(d.x))c+=d.x;if('number'===$.type(d.y))u+=d.y;}var p={left:c,top:u},f=o.css('position');if('absolute'!==f&&'fixed'!==f)p.position='absolute';if(n.silent)return p;else o.css(p);};}),define('cc/function/pinGlobal',['require','exports','module','./pin','./viewport','./viewportWidth','./viewportHeight','./pageScrollLeft','./pageScrollTop'],function(require){'use strict';var e=require('./pin'),t=require('./viewport'),i=require('./viewportWidth'),n=require('./viewportHeight'),o=require('./pageScrollLeft'),r=require('./pageScrollTop');return function(a){var s={silent:!0,element:a.element,x:'50%'===a.x?'50%':0,y:'50%'===a.y?'50%':0,attachment:{element:t(),width:i(),height:n(),x:a.x,y:a.y}};if(!a.fixed)s.offset={x:o(),y:r()};return e(s);};}),define('cc/function/position',['require','exports','module','./offsetParent'],function(require){'use strict';var e=require('./offsetParent');return function(t){var i=e(t),n=t.css('position'),o=parseInt(t.css('left'),10),r=parseInt(t.css('top'),10),a=isNaN(o),s=isNaN(r);if(a||s)if(1===i.length){var l=t.offset(),c=i.offset();if(a)o=l.left-c.left-(parseInt(i.css('border-left-width'),10)||0);if(s)r=l.top-c.top-(parseInt(i.css('border-top-width'),10)||0);}else o=r=0;if(!n||'static'===n)n='absolute';return{position:n,left:o,top:r};};}),define('cc/function/ratio',['require','exports','module'],function(){'use strict';return function(e,t){if(e>=0&&t>0)return e/t;else return 0;};}),define('cc/function/replaceWith',['require'],function(){'use strict';return function(e,t){e=e[0],t=t[0],e.parentNode.replaceChild(t,e);};}),define('cc/function/restrain',['require','exports','module'],function(){'use strict';return function(e,t,i){if(t>e)e=t;else if(e>i)e=i;return e;};}),define('cc/function/simplifyDate',['require','exports','module'],function(){'use strict';return function(e){if(e){if('number'===$.type(e))e=new Date(e);return{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate(),day:e.getDay()};}};}),define('cc/function/split',['require','exports','module'],function(){'use strict';return function(e,t){var i=[];if('number'===$.type(e))e=''+e;if(e&&'string'===$.type(e))$.each(e.split(t),function(e,t){if(t=$.trim(t))i.push(t);});return i;};}),define('cc/function/stringifyDate',['require','exports','module','./lpad','./simplifyDate'],function(require){'use strict';var e=require('./lpad'),t=require('./simplifyDate');return function(i,n){var o=t(i);if(o)return[o.year,e(o.month),e(o.date)].join(n||'-');else return'';};}),define('cc/function/supportInput',['require','exports','module'],function(){'use strict';return function(){var e=$('<input type="text" />')[0];return'oninput'in e;};}),define('cc/function/supportLocalStorage',['require','exports','module'],function(){'use strict';return function(){return'undefined'!=typeof window.localStorage;};}),define('cc/function/supportPlaceholder',['require','exports','module'],function(){'use strict';return function(){var e=$('<input type="text" />')[0];return'placeholder'in e;};}),define('cc/function/testTarget',['require','exports','module','../util/instance','./contains'],function(require){'use strict';var e=require('../util/instance'),t=require('./contains');return function(i,n,o){var r=!1;if($.isArray(n))n=n.join(',');if(!o)o=e.document;return o.find(n).each(function(){if(r=t(this,i))return!1;else return void 0;}),r;};}),define('cc/function/toBoolean',['require','exports','module'],function(){'use strict';return function(e,t){if('boolean'!==$.type(e)){if(1===arguments.length)t=!!e;e=t;}return e;};}),define('cc/function/toNumber',['require','exports','module'],function(){'use strict';var e={'int':parseInt,'float':parseFloat};return function(t,i,n){if('number'!==$.type(t)){var o=e[n];if(o)t=o(t,10);else if($.isNumeric(t))t=+t;else t=0/0;}return isNaN(t)?i:t;};}),define('cc/function/toString',['require','exports','module'],function(){'use strict';return function(e,t){var i=$.type(e);if('number'===i)e=''+e;else if('string'!==i){if(1===arguments.length)t='';e=t;}return e;};}),define('cc/function/ucFirst',['require','exports','module'],function(){'use strict';return function(e){return e.charAt(0).toUpperCase()+e.slice(1);};}),define('cc/function/viewport',['require','exports','module','../util/instance'],function(require){'use strict';var e=require('../util/instance');return function(){if(e.body.prop('clientHeight')>e.html.prop('clientHeight'))return e.html;else return e.body;};}),define('cc/function/viewportHeight',['require','exports','module'],function(){'use strict';return function(){return window.innerHeight||document.documentElement.clientHeight;};}),define('cc/function/viewportWidth',['require','exports','module'],function(){'use strict';return function(){return window.innerWidth||document.documentElement.clientWidth;};}),define('cc/function/waitPromises',['require','exports','module','./allPromises'],function(require){'use strict';var e=require('./allPromises');return function(t,i){var n=[],o=[];if($.each(t,function(e,t){if($.isFunction(t.then))n.push(t),o.push(e);}),n.length>0)return e(n).then(function(e){$.each(e,function(e,i){t[o[e]]=i;}),i();});else return i();};}),define('cc/helper/AjaxUploader',['require','exports','module','../function/ratio','../function/restrain','../function/nextTick','../util/life','../util/event','../util/mimeType'],function(require){'use strict';function e(e){l.init(this,e);}function t(e){var t=e.xhr;if(t)$.each(p,function(e,i){t['on'+i.type]=null;}),$.each(f,function(e,i){t.upload['on'+i.type]=null;}),delete e.xhr;var i=e.options;if(i)delete e.options;e.emit('uploadcomplete',{fileItem:e.toPlainObject()}),e.off();}function i(t){var i=this;if($.extend(i,t),null==i.file)i.file=o(i.nativeFile);if(null==i.status)i.status=e.STATUS_WAITING;}function n(e){var t=[];return $.each(e,function(e,i){if(u[i])t.push(u[i]);}),$.unique(t).join(',');}function o(e){var t=e.name,i=t.split('.'),n=i.length>1?i.pop().toLowerCase():'';return{name:t,type:n,size:e.size};}var r=require('../function/ratio'),a=require('../function/restrain'),s=require('../function/nextTick'),l=require('../util/life'),c=require('../util/event'),u=require('../util/mimeType'),d=e.prototype;d.type='AjaxUploader',d.init=function(){var e=this,t=e.option('mainElement');if(!t.is('input[type="file"]'))e.error('AjaxUploader mainElement must be <input type="file" />.');var o=$('<form></form>');t.replaceWith(o),o.append(t);var r={};if(e.option('accept'))r.accept=n(e.option('accept'));if(e.option('multiple'))r.multiple=!0;t.prop(r).on('change'+e.namespace(),function(){$.each(e.getFiles(),function(e,t){t.dispose();}),e.inner('files',$.map(t.prop('files'),function(e,t){return new i({nativeFile:e,index:t});})),e.emit('filechange');}),e.inner({main:o,file:t,files:[]}),e.set({action:e.option('action'),data:e.option('data')}),e.emit('ready');},d.getFiles=function(){return this.inner('files');},d.reset=function(){this.inner('main')[0].reset();},d.upload=function(e,t){var n=this;if(!t)t=n.getFiles()[e];else t=new i(t),n.getFiles()[e]=t;if(t)if(t.upload({action:n.get('action'),data:n.get('data'),fileName:n.option('fileName'),header:n.option('header'),useChunk:n.option('useChunk'),chunkSize:n.option('chunkSize')})){var o=function(e,t){n.emit(e,t);};t.on('uploadstart',o).on('uploadprogress',o).on('uploadsuccess',o).on('uploaderror',o).on('uploadcomplete',o).on('chunkuploadsuccess',o);}},d.stop=function(e){var t=this.getFiles()[e];if(t)t.cancel();},d.enable=function(){this.inner('file').prop('disabled',!1);},d.disable=function(){this.inner('file').prop('disabled',!0);},d.dispose=function(){var e=this;l.dispose(e),e.stop(),e.inner('file').off(e.namespace());},l.extend(d,['getFiles','setAction','setData']),e.supportChunk='undefined'!=typeof FileReader,e.STATUS_WAITING=0,e.STATUS_UPLOADING=1,e.STATUS_UPLOAD_SUCCESS=2,e.STATUS_UPLOAD_ERROR=3,e.ERROR_CANCEL=0,e.ERROR_CHUNK_SIZE=-1;var p={uploadStart:{type:'loadstart',handler:function(t){t.status=e.STATUS_UPLOADING,t.emit('uploadstart',{fileItem:t.toPlainObject()});}},uploadSuccess:{type:'load',handler:function(i){var n={responseText:i.xhr.responseText},o=i.chunk;if(o){var r=i.file.size;if(o.uploaded<r){n.fileItem=i.toPlainObject();var a=i.emit('chunkuploadsuccess',n);if(!a.isDefaultPrevented())if(o.index++,o.uploaded+=o.uploading,o.uploaded<r)return void i.upload();}}i.status=e.STATUS_UPLOAD_SUCCESS,n.fileItem=i.toPlainObject(),i.emit('uploadsuccess',n),t(i);}},uploadError:{type:'error',handler:function(i,n,o){i.status=e.STATUS_UPLOAD_ERROR,i.emit('uploaderror',{fileItem:i.toPlainObject(),errorCode:o}),t(i);}},uploadStop:{type:'abort',handler:function(t,i){p.uploadError.handler(t,i,e.ERROR_CANCEL);}}},f={uploadProgress:{type:'progress',handler:function(e,t){var i=e.file.size,n=t.loaded,o=e.chunk;if(o)n+=o.uploaded;e.emit('uploadprogress',{fileItem:e.toPlainObject(),uploaded:n,total:i,percent:(100*a(r(n,i),0,1)).toFixed(2)+'%'});}}},m=i.prototype;return m.upload=function(t){var i=this;if(!t)t=i.options;else i.options=t;var n=t.useChunk?e.STATUS_UPLOADING:e.STATUS_WAITING;if(!(i.status>n)){var o=new XMLHttpRequest();return i.xhr=o,$.each(p,function(e,t){o['on'+t.type]=function(e){t.handler(i,e);};}),$.each(f,function(e,t){o.upload['on'+t.type]=function(e){t.handler(i,e);};}),o.open('post',t.action,!0),s(function(){if(t.useChunk)i.uploadFileChunk(t);else i.uploadFile(t);}),!0;}},m.uploadFile=function(e){var t=this,i=new FormData();if(e.data)$.each(e.data,function(e,t){i.append(e,t);});i.append(e.fileName,t.nativeFile);var n=t.xhr;if(e.header)$.each(e.header,function(e,t){n.setRequestHeader(e,t);});n.send(i);},m.uploadFileChunk=function(t){var i=this,n=i.nativeFile,o=i.file.size,r=i.chunk;if(!r)r=i.chunk={index:0,uploaded:0};var a=r.index,l=t.chunkSize,c=l*a,u=l*(a+1);if(u>o)u=o;if(r.uploading=u-c,r.uploading<=0)return void s(function(){p.uploadError.handler(i,{},e.ERROR_CHUNK_SIZE);});var d=i.xhr,f={'Content-Type':'',X_FILENAME:encodeURIComponent(n.name),'Content-Range':'bytes '+(c+1)+'-'+u+'/'+o};if(t.header)$.extend(f,t.header);$.each(f,function(e,t){d.setRequestHeader(e,t);}),d.send(n.slice(c,u));},m.cancel=function(){var t=this;if(t.status===e.STATUS_UPLOADING)t.xhr.abort();},m.toPlainObject=function(){var e=this,t={index:e.index,file:e.file,nativeFile:e.nativeFile,status:e.status};if(e.chunk)t.chunk=e.chunk;return t;},m.dispose=function(){var e=this;e.cancel(),e.off();},c.extend(m),e;}),define('cc/helper/Draggable',['require','exports','module','../function/page','../function/restrain','../function/position','../function/contains','../function/testTarget','../function/innerOffset','../function/outerOffset','../function/pageScrollLeft','../function/pageScrollTop','../function/viewportWidth','../function/viewportHeight','../function/enableSelection','../function/disableSelection','../util/life','../util/touch','../util/instance'],function(require){'use strict';function e(e){m.init(this,e);}var t=require('../function/page'),i=require('../function/restrain'),n=require('../function/position'),o=require('../function/contains'),r=require('../function/testTarget'),a=require('../function/innerOffset'),s=require('../function/outerOffset'),l=require('../function/pageScrollLeft'),c=require('../function/pageScrollTop'),u=require('../function/viewportWidth'),d=require('../function/viewportHeight'),p=require('../function/enableSelection'),f=require('../function/disableSelection'),m=require('../util/life'),h=require('../util/touch'),v=require('../util/instance').body,g=e.prototype;g.type='Draggable',g.init=function(){var e=this,m=e.option('mainElement'),h=e.option('mainSelector');e.inner({main:m});var g=e.option('containerElement');if(!g)g=t();var k,T=e.option('draggingClass'),E=e.option('containerDraggingClass'),O=e.option('bodyDraggingClass')||'dragging',D=function(t){var p;C=h?$(t.currentTarget):m;var f=t[$.expando];if(f){var v=e.option('includeSelector'),T=e.option('excludeSelector'),E=t.target;if(v&&!r(E,v,C)||T&&r(E,T,C))return;$.each(S,function(e,i){if(0===t.type.indexOf(e))return p=i,!1;else return void 0;});}else if(t.type)p=S[t.type];if(!p)p=S.mouse;e.emit('pick',{mainElement:C}),k=n(C),w.left=k.left,w.top=k.top;var O=g.is('html,body'),D=!0;if(!O)D=o(g,C);var I,A,R=s(C),P=a(g);if(f)I=p.absoluteX(t)-R.x,A=p.absoluteY(t)-R.y;else I=t.offsetX,A=t.offsetY;if(D){if(!O)I-=g.scrollLeft(),A-=g.scrollTop();I+=P.x,A+=P.y;}var U,j,N,L,M=u(),q=d(),z=c(),F=l(),B=F+M,H=z+q,V='fixed'===k.position;if(V)if(O)U=0,j=0;else U=i(P.x,F,B),j=i(P.y,z,H);else if(O)U=-1*P.x,j=-1*P.y;else if(D)U=0,j=0;else U=P.x,j=P.y;if(null==N)if(!O&&D)N=g.prop('scrollWidth'),L=g.prop('scrollHeight');else N=g.innerWidth(),L=g.innerHeight();if(O){if(M>N)N=M;if(q>L)L=q;}if(V){if(U+N>B)N=B-U;if(j+L>H)L=H-j;}N=Math.max(0,N-C.outerWidth(!0)),L=Math.max(0,L-C.outerHeight(!0));var G=e.option('axis');return b='y'===G?_.constant(k.left):_.variable(p[V?'fixedX':'absoluteX'],I,U,U+N),x='x'===G?_.constant(k.top):_.variable(p[V?'fixedY':'absoluteY'],A,j,j+L),y=0,!0;},I=function(t){if(null!=y){w.left=b(t),w.top=x(t);var i;if(0===y){if(k)C.css(k),k=null;if(i=e.emit('beforedrag',$.extend({},w)),i.isDefaultPrevented())return;if(f(),T)C.addClass(T);if(E)g.addClass(E);if(O)v.addClass(O);}if(y++,i=e.emit('drag',$.extend({},w)),!i.isDefaultPrevented())e.execute('dragAnimation',{mainElement:C,mainStyle:w});}},A=function(){if(null!=y){if(y>0){if(p(),T)C.removeClass(T);if(E)g.removeClass(E);if(O)v.removeClass(O);e.emit('afterdrag',$.extend({},w));}e.emit('drop',{mainElement:C}),y=b=x=k=C=null;}};e.execute('init',{mainElement:m,mainSelector:h,namespace:e.namespace(),downHandler:D,moveHandler:I,upHandler:A});},g.dispose=function(){m.dispose(this);},m.extend(g);var b,x,y,C,w={},_={constant:function(e){return function(){return e;};},variable:function(e,t,n,o){return function(r){return i(e(r)-t,n,o);};}},S={};return $.each(h,function(e,t){if(t.support)S[e]={absoluteX:function(e){return t.client(e).x+l();},absoluteY:function(e){return t.client(e).y+c();},fixedX:function(e){return t.client(e).x;},fixedY:function(e){return t.client(e).y;}};}),e;}),define('cc/helper/FlashUploader',['require','exports','module','../function/ucFirst','../function/ratio','../util/life','../util/supload/supload'],function(require){'use strict';function e(e){n.init(this,e);}var t=require('../function/ucFirst'),i=require('../function/ratio'),n=require('../util/life');require('../util/supload/supload');var o=window.Supload,r=e.prototype;r.type='FlashUploader',r.init=function(){var e=this,i=e.option('mainElement'),n=e.option('action'),r=e.option('data'),s={element:i[0],flashUrl:e.option('flashUrl'),action:r,accept:e.option('accept'),multiple:e.option('multiple'),data:r,header:e.option('header'),fileName:e.option('fileName'),customSettings:{uploader:e}};$.each(a,function(e,i){s['on'+t(e)]=i;});var l=new o(s);e.inner({supload:l,watchSync:{action:function(e){l.setAction(e);},data:function(e){l.setData(e);}}}),e.set({action:n,data:r});},r.getFiles=function(){return this.inner('supload').getFiles();},r.reset=function(){this.inner('supload').reset();},r.upload=function(e){this.inner('supload').upload(e);},r.stop=function(e){this.inner('supload').cancel(e);},r.enable=function(){this.inner('supload').enable();},r.disable=function(){this.inner('supload').disable();},r.dispose=function(){var e=this;n.dispose(e),e.inner('supload').dispose();},n.extend(r,['getFiles','setAction','setData']),e.STATUS_WAITING=o.STATUS_WAITING,e.STATUS_UPLOADING=o.STATUS_UPLOADING,e.STATUS_UPLOAD_SUCCESS=o.STATUS_UPLOAD_SUCCESS,e.STATUS_UPLOAD_ERROR=o.STATUS_UPLOAD_ERROR,e.ERROR_CANCEL=o.ERROR_CANCEL,e.ERROR_SECURITY=o.ERROR_SECURITY,e.ERROR_IO=o.ERROR_IO;var a={ready:function(){var e=this.customSettings.uploader;e.emit('ready');},fileChange:function(){var e=this.customSettings.uploader;e.emit('filechange');},uploadStart:function(e){var t=this.customSettings.uploader;t.emit('uploadstart',e);},uploadProgress:function(e){var t=this.customSettings.uploader;e.percent=(100*i(e.uploaded,e.total)).toFixed(2)+'%',t.emit('uploadprogress',e);},uploadSuccess:function(e){var t=this.customSettings.uploader;t.emit('uploadsuccess',e);},uploadError:function(e){var t=this.customSettings.uploader;t.emit('uploaderror',e);},uploadComplete:function(e){var t=this.customSettings.uploader;t.emit('uploadcomplete',e);}};return e;}),define('cc/helper/Input',['require','exports','module','../function/toString','../util/life','../util/input','../util/keyboard','./Keyboard'],function(require){'use strict';function e(e){i.init(this,e);}var t=require('../function/toString'),i=require('../util/life'),n=require('../util/input'),o=require('../util/keyboard'),r=require('./Keyboard'),a=e.prototype;return a.type='Input',a.init=function(){var e=this,t=e.option('mainElement');n.init(t);var i,a=new r({mainElement:t,shortcut:e.option('shortcut')}),s=function(i){if('string'!==$.type(i))i=t.val();e.set('value',i);};a.on('dispatch',function(n,r){var a=n.originalEvent;switch(a.type){case'beforelongpress':i=!0;break;case'afterlongpress':i=!1;var l=r.keyCode;if(o.isCharKey(l)||o.isDeleteKey()||t.is('textarea')&&l===o.enter)s();}e.dispatch(e.emit(a,r),r);});var l=e.namespace();t.on('blur'+l,s).on(n.INPUT+l,function(){if(!i||!e.option('silentOnLongPress'))s();}),e.inner({keyboard:a,main:t}),s(e.option('value'));},a.dispose=function(){var e=this;i.dispose(e),n.dispose(e.inner('main')),e.inner('keyboard').dispose();},i.extend(a),e.propertyUpdater={value:function(e,t,i){var n=this.inner('main');if(n.val()!==e||i.value.force)n.val(e);}},e.propertyValidator={value:function(e){return t(e);}},e;}),define('cc/helper/Keyboard',['require','exports','module','../function/split','../util/life','../util/keyboard'],function(require){'use strict';function e(e){n.init(this,e);}function t(e){var t=[];return $.each(e,function(e,n){var r=[],a='plus',s=i(e.replace(/\$\+/g,a),'+');if($.each(o.combinationKey,function(e){if($.inArray(e,s)<0)s.push('!'+e);}),$.each(s,function(e,t){var i=0===t.indexOf('!');if(i)t=t.substr(1);if(t===a)t='$+';if(o.combinationKey[t])r.push((i?'!':'')+'e.'+t+'Key');else if(o[t])r.push('e.keyCode==='+o[t]);else return r.length=0,!1;}),r.length>0)t.push({test:new Function('e','return '+r.join('&')),handler:n});}),t;}var i=require('../function/split'),n=require('../util/life'),o=require('../util/keyboard'),r=e.prototype;return r.type='Keyboard',r.init=function(){var e=this,i=e.option('shortcut');if($.isPlainObject(i))i=t(i);var n,o=0,r=1,a=function(){return o>r;},s=e.namespace();e.option('mainElement').on('keydown'+s,function(t){var s=t.keyCode;if(n===s&&o>0){if(o===r)e.emit('beforelongpress',{keyCode:s},!0);o++;}else n=s,o=1;if(e.dispatch(e.emit(t)),i){var l={isLongPress:a()},c=[t,l];$.each(i,function(i,n){if(n.test(t))e.execute(n.handler,c);});}}).on('keyup'+s,function(t){if(a())e.emit('afterlongpress',{keyCode:t.keyCode},!0);o=0,n=null,e.dispatch(e.emit(t));});},r.dispose=function(){n.dispose(this);},n.extend(r),e;}),define('cc/helper/Placeholder',['require','exports','module','../function/isHidden','../function/toString','../function/supportPlaceholder','../util/life','../util/input'],function(require){'use strict';function e(e){r.init(this,e);}function t(e,t){var i=e.inner('proxy'),n=i[t];if(n)return n(e);else return void 0;}var i=require('../function/isHidden'),n=require('../function/toString'),o=require('../function/supportPlaceholder')(),r=require('../util/life'),a=require('../util/input'),s=e.prototype;s.type='Placeholder',s.init=function(){var e=this;e.initStruct(),e.inner({proxy:e.option('nativeFirst')&&o?l:c}),t(e,'init'),e.set({value:e.option('value')}),e.state({hidden:e.option('hidden')});},s.show=function(){this.state('hidden',!1);},s._show=function(){if(!this.is('hidden'))return!1;else return void 0;},s.hide=function(){this.state('hidden',!0);},s._hide=function(){if(this.is('hidden'))return!1;else return void 0;},s.render=function(){t(this,'render');},s.dispose=function(){t(this,'dispose'),r.dispose(this);},r.extend(s),e.propertyUpdater={value:function(){this.render();}},e.propertyValidator={value:function(e){if(e=n(e,null),null==e)e=this.inner('input').attr('placeholder');return e||'';}},e.stateUpdater={hidden:function(e){t(this,e?'hide':'show');}},e.stateValidator={hidden:function(e){if('boolean'!==$.type(e))e=t(this,'isHidden');return e;}};var l={init:function(e){var t=e.option('mainElement'),i=e.option('inputSelector'),n=t.prop('tagName');e.inner({main:t,input:'INPUT'===n||'TEXTAREA'===n?t:t.find(i)});},render:function(e){e.inner('input').attr('placeholder',e.get('value'));},isHidden:function(e){return e.inner('input').val().length>0;}},c={init:function(e){var t=e.option('mainElement'),i=e.option('inputSelector'),n=e.option('labelSelector'),o=t.find(i),r=t.find(n);o.removeAttr('placeholder'),e.inner({main:t,input:o,label:r}),a.init(o);var s=$.proxy(e.render,e);s();var l=e.namespace();t.on('click'+l,n,function(){o.focus();}).on('change'+l,i,s).on(a.INPUT+l,i,s);},show:function(e){e.execute('showAnimation',{labelElement:e.inner('label')});},hide:function(e){e.execute('hideAnimation',{labelElement:e.inner('label')});},render:function(e){var t=e.inner('input');e.inner('label').html(e.get('value'));var i=t.val();if(e.option('autoTrim'))i=$.trim(i);if(i)e.hide();else e.show();},dispose:function(e){a.dispose(e.inner('input'));},isHidden:function(e){return i(e.inner('label'));}};return e;}),define('cc/helper/Popup',['require','exports','module','../function/isHidden','../function/contains','../function/nextTick','../util/life','../util/trigger','../util/instance'],function(require){'use strict';function e(e){h.init(this,e);}function t(e,t){return function(i){var n=$(this);if('disabled'!==n.attr('disabled')){if($.isFunction(t))if(!t.call(this,i))return;e.open(i);}};}function i(e,t){return function(i){var n=$(this);if('disabled'!==n.attr('disabled')){if($.isFunction(t))if(!t.call(this,i))return;e.close(i);var o=e.inner(C);if(o)e.sync(),o.resolve();}};}function n(e,t,i,n){if(e)e.on(t,n,i);}function o(e,t,i){if(e)e.off(t,i);}function r(e,t){var i=e.option('triggerElement'),o=e.option('triggerSelector');if(i||o)n(i||g.body,t.type,t.handler,o);}function a(e,t){o(e.option('triggerElement')||g.body,t.type,t.handler);}function s(e,t){n(g.document,t.type,t.handler);}function l(e,t){o(g.document,t.type,t.handler);}function c(e){return i(e,function(t){return!f(e.inner('layer'),t.target);});}function u(e,t){var i=e.option('triggerElement'),n=e.option('triggerSelector');if(i&&!n)return i;if(t)return $(t.currentTarget);else return void 0;}function d(e,t){var i=e.option('layerElement');if(i&&i.jquery&&i.length)return i;if(t&&$.isFunction(i)){if(i=e.execute(i,t),i&&i.tagName)i=$(i);return i;}}var p=require('../function/isHidden'),f=require('../function/contains'),m=require('../function/nextTick'),h=require('../util/life'),v=require('../util/trigger'),g=require('../util/instance'),b=e.prototype;b.type='Popup',b.init=function(){var e=this,t=function(t,i){if($.isFunction(t[i]))return t[i](e);else return void 0;},i=v.parse(e.option('showLayerTrigger'),function(i){var n=S.show[i];return{delay:e.option('showLayerDelay'),startDelay:t(n,'startDelay'),endDelay:t(n,'endDelay'),handler:t(n,'handler'),beforeHandler:function(t){var i=function(){e.inner({trigger:u(e,t),layer:d(e,t)});};if(e.is('opened')){var n=$.Deferred();return n.then(i),e.inner(C,n),n;}else i();}};}),n=v.parse(e.option('hideLayerTrigger'),function(i){var n=S.hide[i];return{delay:e.option('hideLayerDelay'),startDelay:t(n,'startDelay'),endDelay:t(n,'endDelay'),handler:t(n,'handler')};}),o=function(t){$.each(i,function(i,n){S.show[i][t](e,n);});},r=function(t){$.each(n,function(i,n){S.hide[i][t](e,n);});},a=!1,s=!1,l=function(){if(!a)o('on'),a=!0;},c=function(){if(a)o('off'),a=!1;},p=function(){if(!s)r('on'),s=!0;},f=function(){if(s)r('off'),s=!1;},h=function(t,i){var n=i.opened;if(n)if(n.newValue){if(!e.option('triggerSelector'))c();m(p);}else f(),l();};e.before('dispose',function(){e.off('statechange',h),c(),f(),e.close();}).on('statechange',h),e.inner({trigger:u(e),layer:d(e)}),e.state({opened:e.option('opened')});},b.open=function(){this.state('opened',!0);},b._open=function(e){var t=this;if(t.is('opened')){var i=t.inner('layer'),n=t.inner('trigger'),o=i.data(y);if(n&&o&&n[0]!==o[0])i.data(x).close(),m(function(){if(t.guid)t.open(e);});return!1;}return{dispatch:!0};},b.open_=function(){var e=this,t=e.inner('layer');if(t){var i={};i[y]=e.inner('trigger'),i[x]=e,t.data(i);}return{dispatch:!0};},b.close=function(){this.state('opened',!1);},b._close=function(){if(!this.is('opened'))return!1;else return{dispatch:!0};},b.close_=function(){var e=this,t=e.inner('layer');if(t)t.removeData(x).removeData(y);return{dispatch:!0};},b.dispose=function(){h.dispose(this);},h.extend(b),e.stateUpdater={opened:function(e){var t=this.inner('layer');if(t)this.execute(e?'showLayerAnimation':'hideLayerAnimation',{layerElement:t});}},e.stateValidator={opened:function(e){if('boolean'!==$.type(e)){var t=this.inner('layer');if(t)e=!p(t);}return e;}};var x='__prev_popup__',y='__trigger_element__',C='__hide_promise__',w=v.enter.type,_=v.leave.type,S={show:{focus:{on:r,off:a,handler:t},click:{on:r,off:a,handler:t},enter:{on:r,off:a,handler:t,startDelay:function(e){return function(t){n(e.inner('trigger'),_,t);};},endDelay:function(e){return function(t){o(e.inner('trigger'),_,t);};}},context:{on:r,off:a,handler:t}},hide:{blur:{on:r,off:a,handler:i},click:{on:s,off:l,handler:c},leave:{on:function(e,t){n(e.inner('trigger'),t.type,t.handler),n(e.inner('layer'),t.type,t.handler);},off:function(e,t){o(e.inner('trigger'),t.type,t.handler),o(e.inner('layer'),t.type,t.handler);},handler:i,startDelay:function(e){return function(t){n(e.inner('trigger'),w,t),n(e.inner('layer'),w,t);};},endDelay:function(e){return function(t){o(e.inner('trigger'),w,t),o(e.inner('layer'),w,t);};}},context:{on:s,off:l,handler:c}}};return e;}),define('cc/ui/Calendar',['require','../function/offsetWeek','../function/offsetMonth','../function/firstDateInWeek','../function/lastDateInWeek','../function/firstDateInMonth','../function/lastDateInMonth','../function/isValidDate','../function/parseDate','../function/simplifyDate','../util/life','../util/Value'],function(require){'use strict';function e(e){m.init(this,e);}function t(e,t){var n,o,a=e.option('firstDay'),s=r(e.get('today')),p=e.option('mode')===g;if(p)n=l(u(t),a),o=c(d(t),a);else n=l(t,a),o=c(t,a);if(n=r(n),o=r(o),p&&e.option('stable')){var m=o-n,h=x-m;if(h>0)o+=h;}var v={};e.inner('value').each(function(t){if(t){var i=e.execute('parse',t);v[r(i)]=1;}});var b=i(n,o,s,v);return $.extend(f(t),{start:b[0],end:b[b.length-1],list:b});}function i(e,t,i,n){for(var o,r=[],a=e;t>=a;a+=b){if(o=f(a),a>i)o.phase='future';else if(i>a)o.phase='past';else o.phase='today';if(n[a])o.active=!0;r.push(o);}return r;}function n(e,t,i){if(!i)return!1;var n,o;if(e.option('mode')===g)n=u(i),o=d(i);else{var r=e.option('firstDay');n=l(i,r),o=c(i,r);}return t>=n&&t<o.getTime()+b;}function o(e,i){var n=e.get('date');n=e.option('mode')===g?s(n,i):a(n,i),e.set({date:n,data:t(e,n)});}function r(e){return e.setHours(0,0,0,0);}var a=require('../function/offsetWeek'),s=require('../function/offsetMonth'),l=require('../function/firstDateInWeek'),c=require('../function/lastDateInWeek'),u=require('../function/firstDateInMonth'),d=require('../function/lastDateInMonth'),p=require('../function/isValidDate'),f=(require('../function/parseDate'),require('../function/simplifyDate')),m=require('../util/life'),h=require('../util/Value'),v=e.prototype;v.type='Calendar',v.init=function(){var e=this;e.initStruct();var t=e.option('mainElement'),i='click'+e.namespace(),o=e.option('itemSelector');if(o){var r=e.option('valueAttribute');if(!r)e.error('valueAttribute is missing.');t.on(i,o,function(){var t,i,o=$(this).attr(r),a=e.inner('value');if(a.has(o)){if(e.option('toggle'))t='valuedel',a.remove(o);}else if(t='valueadd',a.add(o))if(e.option('renderOnClickAdjacency'))if(i=e.execute('parse',o),n(e,i,e.get('date')))i=null;if(t)if(t=e.emit(t,{value:o}),!t.isDefaultPrevented()){var s={value:a.get()};if(i)s.date=i;e.set(s),e.sync();}});}var a=e.option('prevSelector');if(a)t.on(i,a,$.proxy(e.prev,e));var s=e.option('nextSelector');if(s)t.on(i,s,$.proxy(e.next,e));e.inner({main:t,value:new h({multiple:e.option('multiple'),validate:function(t){return p(e.execute('parse',t));}})});var l=e.option('today')||new Date();e.set({today:l,date:e.option('date')||l,value:e.option('value')});},v.prev=function(){o(this,-1);},v.next=function(){o(this,1);},v.render=function(){this.renderWith(this.get('data'));},v._render=function(){if(!this.get('data'))return!1;else return void 0;},v.dispose=function(){var e=this;m.dispose(e),e.inner('value').dispose();},m.extend(v),e.propertyUpdater={},e.propertyUpdater.data=e.propertyUpdater.date=e.propertyUpdater.value=function(e,i,n){var o,r=this,a=function(e){o=!0,r.set('data',t(r,e),{silent:!0});};if(n.data)o=n.data.newValue;if(!o&&n.date)a(n.date.newValue);if(!o&&!r.get('data'))a(r.get('date'));if(o)return void r.render();else if(!n.value)return;var s=r.option('valueAttribute'),l=r.option('itemActiveClass');if(s&&l){var c=r.inner('main');return c.find('.'+l).removeClass(l),r.inner('value').each(function(e){if(e)c.find('['+s+'="'+e+'"]').addClass(l);}),!1;}},e.propertyValidator={value:function(e){var t=this.inner('value');return t.set(e),t.get();}};var g='month',b=86400000,x=41*b;return e;}),define('cc/ui/ComboBox',['require','exports','module','../function/toString','../helper/Popup','../util/life'],function(require){'use strict';function e(e){n.init(this,e);}var t=require('../function/toString'),i=require('../helper/Popup'),n=require('../util/life'),o=e.prototype;return o.type='ComboBox',o.init=function(){var e=this;e.initStruct();var t=e.option('buttonElement'),n=e.option('menuElement'),o=new i({triggerElement:t,layerElement:n,showLayerTrigger:e.option('showMenuTrigger'),showLayerDelay:e.option('showMenuDelay'),hideLayerTrigger:e.option('hideMenuTrigger'),hideLayerDelay:e.option('hideMenuDelay'),showLayerAnimation:function(){e.execute('showMenuAnimation',{menuElement:n});},hideLayerAnimation:function(){e.execute('hideMenuAnimation',{menuElement:n});},watchSync:{opened:function(t){e.state('opened',t);}}});o.on('dispatch',function(t,i){var n=e.emit(t.originalEvent,i);e.dispatch(n,i);});var r=e.option('mainElement'),a=e.option('menuActiveClass');if(a){var s=r||n;o.after('open',function(){s.addClass(a);}).after('close',function(){s.removeClass(a);});}var l=e.option('itemSelector'),c=e.option('valueAttribute');n.on('click'+e.namespace(),l,function(t){if(e.is('opened'))e.close(t);if(!t.isDefaultPrevented()){e.set('value',$(this).attr(c));var i=$.Event(t.originalEvent);i.type='select',e.dispatch(e.emit(i));}}),e.inner({main:r,popup:o}),e.set({data:e.option('data'),value:e.option('value')});},o.render=function(){var e=this;e.renderWith(e.get('data'),e.option('menuTemplate'),e.option('menuElement'));},o._render=function(){if(!this.get('data'))return!1;else return void 0;},o.open=function(){this.state('opened',!0);},o.close=function(){this.state('opened',!1);},o.dispose=function(){var e=this;n.dispose(e),e.inner('popup').dispose(),e.option('menuElement').off(e.namespace());},n.extend(o,['open','close']),e.propertyUpdater={},e.propertyUpdater.data=e.propertyUpdater.value=function(e,i,n){var o=this,r=o.option('menuElement'),a=o.option('itemActiveClass'),s=o.option('textAttribute'),l=o.option('valueAttribute');if(n.data)this.render();else if(n.value&&a)r.find('.'+a).removeClass(a);var c,u=t(o.get('value'),null);if(null!=u){var d=function(e){if(c=e.attr(s),null==c)c=e.html();return c;};if(''!==u){var p=r.find('['+l+'="'+u+'"]');switch(p.length){case 1:if(a)p.addClass(a);c=d(p);break;case 0:break;default:o.error('value repeated.');}}else r.find('['+l+']').each(function(){var e=$(this),t=e.attr(l);if(''===t)return c=d(e),!1;else return void 0;});}return o.execute('setText',{buttonElement:o.option('buttonElement'),text:c||o.option('defaultText')}),!1;},e.propertyValidator={value:function(e){var t=this,i=t.option('itemActiveClass');if(null==e&&i){var n=t.option('menuElement').find('.'+i);if(1===n.length)e=n.attr(t.option('valueAttribute'));}return e;}},e.stateUpdater={opened:function(e){var t=this.inner('popup');if(e)t.open();else t.close();}},e;}),define('cc/ui/Dialog',['require','exports','module','../function/contains','../function/debounce','../function/pageWidth','../function/pageHeight','../function/pinGlobal','../function/dragGlobal','../util/life','../util/instance'],function(require){'use strict';function e(e){s.init(this,e);}var t=require('../function/contains'),i=require('../function/debounce'),n=require('../function/pageWidth'),o=require('../function/pageHeight'),r=require('../function/pinGlobal'),a=require('../function/dragGlobal'),s=require('../util/life'),l=require('../util/instance').window,c=e.prototype;return c.type='Dialog',c.init=function(){var e=this;e.initStruct();var i=e.option('mainElement'),n=e.option('maskElement');if(e.option('modal')){if(!n)n=$(e.option('maskTemplate'));if(!t(n,i))i.before(n);}else if(n)n=null;var o=[],r=e.option('skinClass');if(r)o.push(r);var a=e.option('draggableClass');if(e.option('draggable')&&a)o.push(a);if(o.length>0)i.addClass(o.join(' '));var s=e.option('removeOnEmpty');$.each(['content','footer'],function(t,n){var o=e.option(n),r=e.option(n+'Selector');if(o)i.find(r).html(o);else if(s)i.find(r).remove();});var l=e.option('title');if(l)i.find(e.option('titleSelector')).html(l);else if(s)i.find(e.option('headerSelector')).remove();var c=e.option('closeSelector');if(e.option('removeClose'))i.find(c).remove();var u={},d=e.option('width');switch($.type(d)){case'string':case'number':u.width=d;}var p=e.option('fixed')?'fixed':'absolute';if(i.css('position')!==p)u.position=p;if(n){var f='z-index',m=e.option('zIndex');if(!$.isNumeric(m))if(m=n.css(f),!$.isNumeric(m))m='auto';n.css(f,m),u[f]=m;}i.css(u);var h='click'+e.namespace();if(c)i.on(h,c,$.proxy(e.hide,e));if(e.option('disposeOnHide'))e.on('statechange',function(t,i){var n=i.hidden;if(n&&n.newValue===!0&&n.oldValue===!1)e.dispose();});if(n){if(e.option('hideOnClickMask'))n.on(h,function(n){if(!t(i,n.target))e.hide();});if(e.option('removeOnDispose'))e.after('dispose',function(){n.remove();});}e.inner({main:i,mask:n});var v=e.option('hidden');if(v)e.hide();else e.show();},c.show=function(){this.state('hidden',!1);},c._show=function(){if(this.is('hidden')===!1)return!1;else return void 0;},c.hide=function(){this.state('hidden',!0);},c._hide=function(){if(this.is('hidden')===!0)return!1;else return void 0;},c.refresh=function(){var e=this,t={},i=e.inner('main');t.mainElement=i,t.mainStyle=r({element:i,x:e.option('x'),y:e.option('y'),fixed:e.option('fixed')});var a=e.inner('mask');if(a)t.maskElement=a,t.maskStyle={width:n(),height:o()};e.execute(arguments[0]?'resizeWindowAnimation':'refreshAnimation',t);},c.dispose=function(){var e=this;if(s.dispose(e),!e.is('hidden'))e.hide();var t=e.inner('mask');if(t)t.off(e.namespace());},s.extend(c),e.stateUpdater={hidden:function(e){var t=this,n=t.namespace();l.off(n);var o=t.inner('dragger');if(o)o.dispose(),o=null;var r=t.inner('main'),s=t.inner('mask'),c={mainElement:r};if(s)c.maskElement=s;if(e)t.execute('hideAnimation',c);else{if(l.on('resize'+n,i(function(){t.refresh(!0);},50)),t.option('draggable'))o=a({element:r,includeSelector:t.option('draggableIncludeSelector'),excludeSelector:t.option('draggableExcludeSelector'),draggingClass:t.option('draggingClass'),dragAnimation:t.option('dragAnimation')});t.execute('showAnimation',c),t.refresh();}t.inner('dragger',o);}},e;}),define('cc/ui/Uploader',['require','exports','module','../helper/AjaxUploader','../helper/FlashUploader'],function(require){'use strict';function e(){return'files'in $('<input type="file" />')[0];}function t(){if(!XMLHttpRequest)return!1;var e=new XMLHttpRequest();return'upload'in e&&'onprogress'in e.upload;}return e()&&t()?require('../helper/AjaxUploader'):require('../helper/FlashUploader');}),define('cc/util/FiniteArray',['require','exports','module'],function(){'use strict';function e(e){$.extend(this,e),this.init();}var t=e.prototype;return t.init=function(){this.list=[];},t.push=function(e){var t=this,i=t.list;if(t.isFull())i.shift();if(i.length<t.max)i.push(e);},t.get=function(e){return this.list[e];},t.first=function(){return this.get(0);},t.last=function(){return this.get(this.list.length-1);},t.isFull=function(){return this.list.length===this.max;},t.each=function(e){$.each(this.list,function(t,i){return e(i,t);});},t.size=function(){return this.list.length;},t.clear=function(){this.list.length=0;},e;}),define('cc/util/Timer',['require','exports','module'],function(){'use strict';function e(e){$.extend(this,e);}var t=e.prototype;return t.start=function(){var e=this;e.stop();var t=e.timeout,i=e.interval,n=function(){if(e.count++,e.task()!==!1)e.timer=setTimeout(n,i);else e.stop();};if(null==t)t=i;e.timer=setTimeout(n,t);},t.stop=function(){var e=this;if(e.timer)clearTimeout(e.timer),e.timer=null,e.count=0;},t.dispose=function(){var e=this;e.stop(),e.task=e.timeout=e.interval=null;},e;}),define('cc/util/Value',['require','exports','module','../function/split'],function(require){'use strict';function e(t){$.extend(this,e.defaultOptions,t),this.init();}var t=require('../function/split'),i=e.prototype;return i.init=function(){this.list=[];},i.get=function(){return this.list.join(this.sep);},i.set=function(e){var i=this;i.list.length=0,$.each(t(e,i.sep),function(e,t){i.add(t);});},i.add=function(e){var t=this,i=t.list,n=$.inArray(e,i);if(0>n){if(!t.validate||t.validate(e))i.push(e);else return;if(i.length>1)if(!t.multiple)i[0]=i.pop(),i.length=1;else if(t.sort)i.sort(t.sort);return!0;}else;},i.remove=function(e){var t=this.list,i=$.inArray(e,t);if(i>=0)return t.splice(i,1),!0;else return void 0;},i.has=function(e){return $.inArray(e,this.list)>=0;},i.each=function(e){$.each(this.list,function(t,i){return e(i,t);});},i.dispose=function(){this.list=null;},e.defaultOptions={sep:',',sort:function(e,t){if(e>t)return 1;else if(t>e)return-1;else return 0;}},e;}),define('cc/util/cookie',['require','exports','module','../function/split','../function/offsetDate'],function(require,exports){'use strict';function e(e){if(0===e.indexOf('"'))e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');var t={};try{e=decodeURIComponent(e.replace(/\+/g,' ')),$.each(i(e,';'),function(e,n){var o=i(n,'='),r=o[0],a=o[1];if(r)t[r]=a;});}catch(n){}return t;}function t(e,t,i){var o=i.expires;if($.isNumeric(o))o=n(new Date(),o);document.cookie=[encodeURIComponent(e),'=',encodeURIComponent(t),o?';expires='+o.toUTCString():'',i.path?';path='+i.path:'',i.domain?';domain='+i.domain:'',i.secure?';secure':''].join('');}var i=require('../function/split'),n=require('../function/offsetDate');exports.get=function(t){var i=e(document.cookie);return'string'===$.type(t)?i[t]:i;},exports.set=function(e,i,n){if($.isPlainObject(e))n=i,i=null;if(n=$.extend({},exports.defaultOptions,n),null===i)$.each(e,function(e,i){t(e,i,n);});else t(e,i,n);},exports.remove=function(e,i){i=i||{},i.expires=-1,t(e,'',$.extend({},exports.defaultOptions,i));},exports.defaultOptions={};}),define('cc/util/etpl',function(){function e(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];return e;}function t(){this.raw=[],this.length=0;}function i(){return'___'+O++;}function n(e,t){var i=new Function();i.prototype=t.prototype,e.prototype=new i(),e.prototype.constructor=e;}function o(e){return $[e];}function r(e){return'"'+e.replace(/\x5C/g,'\\\\').replace(/"/g,'\\"').replace(/\x0A/g,'\\n').replace(/\x09/g,'\\t').replace(/\x0D/g,'\\r')+'"';}function a(e){return e.replace(/[\^\[\]\$\(\)\{\}\?\*\.\+]/g,function(e){return'\\'+e;});}function s(e){var t=arguments;return e.replace(/\{([0-9]+)\}/g,function(e,i){return t[i-0+1];});}function l(e){return e=e.replace(/^\s*\*/,''),s('gv({0},["{1}"])',r(e),e.replace(/\[['"]?([^'"]+)['"]?\]/g,function(e,t){return'.'+t;}).split('.').join('","'));}function c(e,t,i,n,o,r){for(var a=i.length,s=e.split(t),l=0,c=[],u=0,d=s.length;d>u;u++){var p=s[u];if(u){var f=1;for(l++;;){var m=p.indexOf(i);if(0>m){c.push(l>1&&f?t:'',p);break;}if(l=n?l-1:0,c.push(l>0&&f?t:'',p.slice(0,m),l>0?i:''),p=p.slice(m+a),f=0,0===l)break;}if(0===l)o(c.join('')),r(p),c=[];}else p&&r(p);}if(l>0&&c.length>0)r(t),r(c.join(''));}function u(e,t,i){var n,o=[],a=t.options,s='',d='',p='',f='';if(i)s='ts(',d=')',p=A,f=R,n=a.defaultFilter;return c(e,a.variableOpen,a.variableClose,1,function(e){if(i&&e.indexOf('|')<0&&n)e+='|'+n;var r=e.indexOf('|'),a=(r>0?e.slice(0,r):e).replace(/^\s+/,'').replace(/\s+$/,''),c=r>0?e.slice(r+1):'',m=0===a.indexOf('*'),h=[m?'':s,l(a),m?'':d];if(c){c=u(c,t);for(var v=c.split('|'),g=0,b=v.length;b>g;g++){var x=v[g];if(/^\s*([a-z0-9_-]+)(\((.*)\))?\s*$/i.test(x)){if(h.unshift('fs["'+RegExp.$1+'"]('),RegExp.$3)h.push(',',RegExp.$3);h.push(')');}}}o.push(p,h.join(''),f);},function(e){o.push(p,i?r(e):e,f);}),o.join('');}function d(e,t){this.value=e,this.engine=t;}function p(e,t){this.value=e,this.engine=t,this.children=[],this.cloneProps=[];}function f(e,t){var i=e.stack,n=t?i.find(function(e){return e instanceof t;}):i.bottom();if(n){for(var o;(o=i.top())!==n;){if(!o.autoClose)throw new Error(o.type+' must be closed manually: '+o.value);o.autoClose(e);}n.close(e);}return n;}function m(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*(\(\s*master\s*=\s*([a-z0-9\/_-]+)\s*\))?\s*/i.test(e))throw new Error('Invalid '+this.type+' syntax: '+e);this.master=RegExp.$3,this.name=RegExp.$1,p.call(this,e,t),this.blocks={};}function h(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(e))throw new Error('Invalid '+this.type+' syntax: '+e);this.name=RegExp.$1,p.call(this,e,t),this.cloneProps=['name'];}function v(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(e))throw new Error('Invalid '+this.type+' syntax: '+e);this.name=RegExp.$1,p.call(this,e,t),this.cloneProps=['name','state','blocks'],this.blocks={};}function g(e,t){if(!/^\s*([a-z0-9_]+)\s*=([\s\S]*)$/i.test(e))throw new Error('Invalid '+this.type+' syntax: '+e);this.name=RegExp.$1,this.expr=RegExp.$2,p.call(this,e,t),this.cloneProps=['name','expr'];}function b(e,t){if(!/^\s*([a-z0-9_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(e))throw new Error('Invalid '+this.type+' syntax: '+e);this.name=RegExp.$1,this.args=RegExp.$3,p.call(this,e,t),this.cloneProps=['name','args'];}function x(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(e))throw new Error('Invalid '+this.type+' syntax: '+e);this.name=RegExp.$1,this.args=RegExp.$3,p.call(this,e,t),this.cloneProps=['name','args'];}function y(e,t){var i=new RegExp(s('^\\s*({0}[\\s\\S]+{1})\\s+as\\s+{0}([0-9a-z_]+){1}\\s*(,\\s*{0}([0-9a-z_]+){1})?\\s*$',a(t.options.variableOpen),a(t.options.variableClose)),'i');if(!i.test(e))throw new Error('Invalid '+this.type+' syntax: '+e);this.list=RegExp.$1,this.item=RegExp.$2,this.index=RegExp.$4,p.call(this,e,t),this.cloneProps=['list','item','index'];}function C(e,t){p.call(this,e,t);}function w(e,t){C.call(this,e,t);}function _(e,t){p.call(this,e,t);}function S(e,t){t.target=e;var i=t.engine,n=e.name;if(i.targets[n])switch(i.options.namingConflict){case'override':i.targets[n]=e,t.targets.push(n);case'ignore':break;default:throw new Error('Target exists: '+n);}else i.targets[n]=e,t.targets.push(n);}function k(e,t){N[e]=t,t.prototype.type=e;}function T(t){this.options={commandOpen:'<!--',commandClose:'-->',commandSyntax:/^\s*(\/)?([a-z]+)\s*(?::([\s\S]*))?$/,variableOpen:'${',variableClose:'}',defaultFilter:'html'},this.config(t),this.targets={},this.filters=e({},D);}function E(e,i){function n(){var e;if(m.length>0&&(e=m.join(''))){var t=new d(e,i);if(t.beforeAdd(u),l.top().addChild(t),m=[],i.options.strip&&u.current instanceof p)t.value=e.replace(/^[\x20\t\r]*\n/,'');u.current=t;}}var o,r=i.options.commandOpen,a=i.options.commandClose,s=i.options.commandSyntax,l=new t(),u={engine:i,targets:[],stack:l,target:null},m=[];return c(e,r,a,0,function(e){var t=s.exec(e);if(t&&(o=N[t[2].toLowerCase()])&&'function'==typeof o){n();var l=u.current;if(i.options.strip&&l instanceof d)l.value=l.value.replace(/\r?\n[\x20\t]*$/,'\n');if(t[1])l=f(u,o);else{if(l=new o(t[3],i),'function'==typeof l.beforeOpen)l.beforeOpen(u);l.open(u);}u.current=l;}else if(!/^\s*\/\//.test(e))m.push(r,e,a);o=null;},function(e){m.push(e);}),n(),f(u),u.targets;}t.prototype={push:function(e){this.raw[this.length++]=e;},pop:function(){if(this.length>0){var e=this.raw[--this.length];return this.raw.length=this.length,e;}},top:function(){return this.raw[this.length-1];},bottom:function(){return this.raw[0];},find:function(e){for(var t=this.length;t--;){var i=this.raw[t];if(e(i))return i;}}};var O=178245,$={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'},D={html:function(e){return e.replace(/[&<>"']/g,o);},url:encodeURIComponent,raw:function(e){return e;}},I='var r="";',A='r+=',R=';',P='return r;';if('undefined'!=typeof navigator&&/msie\s*([0-9]+)/i.test(navigator.userAgent)&&RegExp.$1-0<8)I='var r=[],ri=0;',A='r[ri++]=',P='return r.join("");';d.prototype={getRendererBody:function(){var e=this.value,t=this.engine.options;if(!e||t.strip&&/^\s*$/.test(e))return'';else return u(e,this.engine,1);},clone:function(){return this;}},p.prototype={addChild:function(e){this.children.push(e);},open:function(e){var t=e.stack.top();t&&t.addChild(this),e.stack.push(this);},close:function(e){if(e.stack.top()===this)e.stack.pop();},getRendererBody:function(){for(var e=[],t=this.children,i=0;i<t.length;i++)e.push(t[i].getRendererBody());return e.join('');},clone:function(){for(var e=this.constructor,t=new e(this.value,this.engine),i=0,n=this.children.length;n>i;i++)t.addChild(this.children[i].clone());for(var i=0,n=this.cloneProps.length;n>i;i++){var o=this.cloneProps[i];t[o]=this[o];}return t;}};var U='data=data||{};var v={},fs=engine.filters,hg=typeof data.get=="function",gv=function(n,ps){var p=ps[0],d=v[p];if(d==null){if(hg){return data.get(n);}d=data[p];}for(var i=1,l=ps.length;i<l;i++)if(d!=null)d = d[ps[i]];return d;},ts=function(s){if(typeof s==="string"){return s;}if(s==null){s="";}return ""+s;};';n(m,p),n(h,p),n(v,p),n(g,p),n(b,p),n(x,p),n(y,p),n(C,p),n(w,C),n(_,C);var j={READING:1,READED:2,APPLIED:3,READY:4};v.prototype.applyMaster=m.prototype.applyMaster=function(e){function t(e){var n=e.children;if(n instanceof Array)for(var o=0,r=n.length;r>o;o++){var a=n[o];if(a instanceof h&&i[a.name])a=n[o]=i[a.name];t(a);}}if(this.state>=j.APPLIED)return 1;var i=this.blocks,n=this.engine.targets[e];if(n&&n.applyMaster(n.master))return this.children=n.clone().children,t(this),this.state=j.APPLIED,1;else return void 0;},m.prototype.isReady=function(){function e(n){for(var o=0,r=n.children.length;r>o;o++){var a=n.children[o];if(a instanceof v){var s=t.targets[a.name];i=i&&s&&s.isReady(t);}else if(a instanceof p)e(a);}}if(this.state>=j.READY)return 1;var t=this.engine,i=1;if(this.applyMaster(this.master))return e(this),i&&(this.state=j.READY),i;else return void 0;},m.prototype.getRenderer=function(){if(this.renderer)return this.renderer;if(this.isReady()){var e=new Function('data','engine',[U,I,this.getRendererBody(),P].join('\n')),t=this.engine;return this.renderer=function(i){return e(i,t);},this.renderer;}return null;},m.prototype.open=function(e){f(e),p.prototype.open.call(this,e),this.state=j.READING,S(this,e);},g.prototype.open=x.prototype.open=function(e){e.stack.top().addChild(this);},h.prototype.open=function(e){p.prototype.open.call(this,e),e.stack.find(function(e){return e.blocks;}).blocks[this.name]=this;},w.prototype.open=function(e){var t=new _();t.open(e);var i=f(e,C);i.addChild(this),e.stack.push(this);},_.prototype.open=function(e){var t=f(e,C);t.addChild(this),e.stack.push(this);},v.prototype.open=function(e){this.parent=e.stack.top(),this.target=e.target,p.prototype.open.call(this,e),this.state=j.READING;},x.prototype.close=g.prototype.close=function(){},v.prototype.close=function(e){p.prototype.close.call(this,e),this.state=j.READED;},m.prototype.close=function(e){p.prototype.close.call(this,e),this.state=this.master?j.READED:j.APPLIED,e.target=null;},v.prototype.autoClose=function(e){var t=this.parent.children;t.push.apply(t,this.children),this.children.length=0;for(var i in this.blocks)this.target.blocks[i]=this.blocks[i];this.blocks={},this.close(e);},x.prototype.beforeOpen=v.prototype.beforeOpen=g.prototype.beforeOpen=y.prototype.beforeOpen=b.prototype.beforeOpen=h.prototype.beforeOpen=C.prototype.beforeOpen=d.prototype.beforeAdd=function(e){if(!e.stack.bottom()){var t=new m(i(),e.engine);t.open(e);}},v.prototype.getRendererBody=function(){return this.applyMaster(this.name),p.prototype.getRendererBody.call(this);},x.prototype.getRendererBody=function(){return s('{0}engine.render({2},{{3}}){1}',A,R,r(this.name),u(this.args,this.engine).replace(/(^|,)\s*([a-z0-9_]+)\s*=/gi,function(e,t,i){return(t||'')+r(i)+':';}));},g.prototype.getRendererBody=function(){if(this.expr)return s('v[{0}]={1};',r(this.name),u(this.expr,this.engine));else return'';},C.prototype.getRendererBody=function(){return s('if({0}){{1}}',u(this.value,this.engine),p.prototype.getRendererBody.call(this));},_.prototype.getRendererBody=function(){return s('}else{{0}',p.prototype.getRendererBody.call(this));},y.prototype.getRendererBody=function(){return s('var {0}={1};if({0} instanceof Array)for (var {4}=0,{5}={0}.length;{4}<{5};{4}++){v[{2}]={4};v[{3}]={0}[{4}];{6}}else if(typeof {0}==="object")for(var {4} in {0}){v[{2}]={4};v[{3}]={0}[{4}];{6}}',i(),u(this.list,this.engine),r(this.index||i()),r(this.item),i(),i(),p.prototype.getRendererBody.call(this));},b.prototype.getRendererBody=function(){var e=this.args;return s('{2}fs[{5}]((function(){{0}{4}{1}})(){6}){3}',I,P,A,R,p.prototype.getRendererBody.call(this),r(this.name),e?','+u(e,this.engine):'');};var N={};k('target',m),k('block',h),k('import',v),k('use',x),k('var',g),k('for',y),k('if',C),k('elif',w),k('else',_),k('filter',b),T.prototype.config=function(t){e(this.options,t);},T.prototype.compile=T.prototype.parse=function(e){if(e){var t=E(e,this);if(t.length)return this.targets[t[0]].getRenderer();}return new Function('return ""');},T.prototype.getRenderer=function(e){var t=this.targets[e];if(t)return t.getRenderer();else return void 0;},T.prototype.render=function(e,t){var i=this.getRenderer(e);if(i)return i(t);else return'';},T.prototype.addFilter=function(e,t){if('function'==typeof t)this.filters[e]=t;};var L=new T();return L.Engine=T,L;}),define('cc/util/event',['require','exports','module','../function/extend','../function/createEvent'],function(require,exports){'use strict';var e=require('../function/extend'),t=require('../function/createEvent'),i={get$:function(){var e=this;if(!e.$)e.$=$({});return e.$;},on:function(e,t,i){return this.get$().on(e,t,i),this;},once:function(e,t,i){return this.get$().one(e,t,i),this;},off:function(e,t){return this.get$().off(e,t),this;},emit:function(e,i){return e=t(e),this.get$().trigger(e,i),e;}};exports.extend=function(t){e(t,i);};}),define('cc/util/input',['require','exports','module','../function/guid','../function/around','../function/supportInput'],function(require,exports){'use strict';function e(e){var t='.'+i();e.data(r,t).on('input'+t,function(t){t.type=a,e.trigger(t);});}function t(e){var t=e.val(),o=!1,s='.'+i();e.data(r,s).on('propertychange'+s,function(i){if(o)return void(o=!1);if('value'===i.originalEvent.propertyName){var n=e.val();if(n!==t)if(i.type=a,e.trigger(i),!i.isDefaultPrevented())t=n;}}),n(e,'val',function(){if(0!==arguments.length)o=!0;});}var i=require('../function/guid'),n=require('../function/around'),o=require('../function/supportInput'),r='cc-util-input',a='cc-input';exports.INPUT=a,exports.init=o()?e:t,exports.dispose=function(e){var t=e.data(r);if(t)e.removeData(r).off(t);};}),define('cc/util/instance',['require','exports','module'],function(require,exports){exports.window=$(window),exports.document=$(document),exports.html=$(document.documentElement),exports.body=$(document.body);}),define('cc/util/json',['require','exports','module'],function(require,exports,module){if('object'!=typeof JSON)JSON={};return function(){'use strict';function f(e){return 10>e?'0'+e:e;}function this_value(){return this.valueOf();}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return'string'==typeof t?t:'\\u'+('0000'+e.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+e+'"';}function str(e,t){var i,n,o,r,a,s=gap,l=t[e];if(l&&'object'==typeof l&&'function'==typeof l.toJSON)l=l.toJSON(e);if('function'==typeof rep)l=rep.call(t,e,l);switch(typeof l){case'string':return quote(l);case'number':return isFinite(l)?String(l):'null';case'boolean':case'null':return String(l);case'object':if(!l)return'null';if(gap+=indent,a=[],'[object Array]'===Object.prototype.toString.apply(l)){for(r=l.length,i=0;r>i;i+=1)a[i]=str(i,l)||'null';return o=0===a.length?'[]':gap?'[\n'+gap+a.join(',\n'+gap)+'\n'+s+']':'['+a.join(',')+']',gap=s,o;}if(rep&&'object'==typeof rep){for(r=rep.length,i=0;r>i;i+=1)if('string'==typeof rep[i])if(n=rep[i],o=str(n,l))a.push(quote(n)+(gap?': ':':')+o);}else for(n in l)if(Object.prototype.hasOwnProperty.call(l,n))if(o=str(n,l))a.push(quote(n)+(gap?': ':':')+o);return o=0===a.length?'{}':gap?'{\n'+gap+a.join(',\n'+gap)+'\n'+s+'}':'{'+a.join(',')+'}',gap=s,o;}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;if('function'!=typeof Date.prototype.toJSON)Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+f(this.getUTCMonth()+1)+'-'+f(this.getUTCDate())+'T'+f(this.getUTCHours())+':'+f(this.getUTCMinutes())+':'+f(this.getUTCSeconds())+'Z':null;},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value;var gap,indent,meta,rep;if('function'!=typeof JSON.stringify)meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},JSON.stringify=function(e,t,i){var n;if(gap='',indent='','number'==typeof i)for(n=0;i>n;n+=1)indent+=' ';else if('string'==typeof i)indent=i;if(rep=t,t&&'function'!=typeof t&&('object'!=typeof t||'number'!=typeof t.length))throw new Error('JSON.stringify');return str('',{'':e});};if('function'!=typeof JSON.parse)JSON.parse=function(text,reviver){function walk(e,t){var i,n,o=e[t];if(o&&'object'==typeof o)for(i in o)if(Object.prototype.hasOwnProperty.call(o,i))if(n=walk(o,i),void 0!==n)o[i]=n;else delete o[i];return reviver.call(e,t,o);}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text))text=text.replace(rx_dangerous,function(e){return'\\u'+('0000'+e.charCodeAt(0).toString(16)).slice(-4);});if(rx_one.test(text.replace(rx_two,'@').replace(rx_three,']').replace(rx_four,'')))return j=eval('('+text+')'),'function'==typeof reviver?walk({'':j},''):j;throw new SyntaxError('JSON.parse');};}(),JSON;}),define('cc/util/keyboard',['require','exports','module'],function(require,exports){'use strict';function e(e){var t={};return $.each(e,function(e,i){t[i]=e;}),t;}var t={a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,'`':192,'-':173,'=':61,'[':219,']':221,'\\':220,';':59,"'":222,',':188,'.':190,'/':191,$0:96,$1:97,$2:98,$3:99,$4:100,$5:101,$6:102,$7:103,$8:104,$9:105,'$.':110,'$+':107,'$-':109,'$*':106,'$/':111,space:32,tab:9},i={backspace:8,'delete':46},n={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,enter:13,esc:27,capslock:20,insert:45,home:36,end:35,pageup:33,pagedown:34,left:37,right:39,up:38,down:40},o={shift:16,ctrl:17,meta:91,alt:18};$.extend(exports,t,i,n,o),exports.charKey=t,exports.deleteKey=i,exports.functionKey=n,exports.combinationKey=o,exports.isCharKey=function(i){return i in e(t);},exports.isDeleteKey=function(t){return t in e(i);},exports.isFunctionKey=function(t){return t in e(n);},exports.isCombinationKey=function(t){return t in e(o);};}),define('cc/util/life',['require','exports','module','../function/guid','../function/around','../function/extend','../function/ucFirst','../function/nextTick','../function/toBoolean','../function/createEvent','../function/replaceWith','../function/offsetParent','./event'],function(require,exports){'use strict';function e(e,t,i,n,o){return function(s,l,c){var u=this;if($.isPlainObject(s))return c=l,void $.each(s,function(e,t){u[i](e,t,c);});c=c||{};var d=u[n](s),f=u.constructor[e+'Validator'];if(f)if($.isFunction(f[s]))l=f[s].call(u,l,c);if($.isFunction(o))l=o(u,l,c);if(d!==l||c.force)if(u[t][s]=l,!c.silent){var m={};r(m,c),m.newValue=l,m.oldValue=d;var h={};h[s]=m;var v=function(e){if(e&&e[s])u.execute(e[s],[l,d,m]);};if(v(u.inner('watchSync')),v(u.option('watchSync')),c.sync)return v(u.constructor[e+'Updater']),v(u.option('watch')),void u.emit(e+'change',h);var g=u.inner(e+'Changes');if(!g)g={},u.inner(e+'Changes',g);if($.extend(g,h),!u.inner(p))u.inner(p,a(function(){u.sync(p);}));}};}function t(){this.error('initStruct() can just call one time.');}function i(e,t,i,n,o){var r,a='before'===n?'_'+t:t+'_',s=e[a];if($.isFunction(s))if(r=s.apply(e,i),r!==!1&&!$.isPlainObject(r))r=null;if(r===!1)return!1;var l=!1;if(r&&r.dispatch)l=!0,delete r.dispatch;if(o=$.Event(o),o.type=n+t,e.emit(o,r),l)e.dispatch(o,r);if(o.isDefaultPrevented())return!1;else return void 0;}var n=require('../function/guid'),o=require('../function/around'),r=require('../function/extend'),a=(require('../function/ucFirst'),require('../function/nextTick')),s=require('../function/toBoolean'),l=require('../function/createEvent'),c=require('../function/replaceWith'),u=(require('../function/offsetParent'),require('./event')),d={},p='__update_async__',f={},m={initStruct:function(){var e=this,i=e.option('mainElement'),n=e.option('mainTemplate');if('string'===$.type(n)){var o=e.option('share'),r=e.type+n;if(o)i=f[r];var a;if(!i){if(a=$(n),o)f[r]=a;}else if(e.option('replace'))c(i,a=$(n));else i.html(n);if(a)i=a,e.option('mainElement',i);}var s=e.option('parentSelector');if(s&&!i.parent().is(s))i.appendTo(s);e.initStruct=t;},warn:function(e){if('undefined'!=typeof console)console.warn(['[CC warn]',this.type,e].join(' '));},error:function(e){throw new Error(['[CC error]',this.type,e].join(' '));},live:function(e,t,i){var n=this,o=n.inner('main');if(o)o.on(e+n.namespace(),t,i);return n;},emit:function(e,t){var i=this,n=i.option('context')||i;e=l(e),e.cc=n;var o=[e];if($.isPlainObject(t))o.push(t);e.type=e.type.toLowerCase();var r=n.get$();r.trigger.apply(r,o);var a='on'+e.type;if(!e.isPropagationStopped()&&n.execute(a,o)===!1)e.preventDefault(),e.stopPropagation();return n.execute(a+'_',o),e;},dispatch:function(e,t){if(!e.isPropagationStopped()){if(!e.originalEvent)e.originalEvent={preventDefault:$.noop,stopPropagation:$.noop};var i=$.Event(e);if(i.type='dispatch',this.emit(i,t),i.isPropagationStopped())e.preventDefault(),e.stopPropagation();}},before:function(e,t){return this.on('before'+e.toLowerCase(),t);},after:function(e,t){return this.on('after'+e.toLowerCase(),t);},find:function(e){var t=this.inner('main');if(t){var i=t.find(e);if(i.length)return i;}},appendTo:function(e){var t=this.inner('main');if(t)t.appendTo(e);},prependTo:function(e){var t=this.inner('main');if(t)t.prependTo(e);},execute:function(e,t){var i=this,n=e;if('string'===$.type(e))n=i.option(e);if($.isFunction(n)){var o=i.option('context')||i;if($.isArray(t))return n.apply(o,t);else return n.call(o,t);}},renderWith:function(e,t,i){var n=this;if(!t)if(t=n.option('renderTemplate'),!t)t=n.option('mainTemplate');if(!i)i=n.option('mainElement');var o=n.option('renderSelector');if(o)i=i.find(o);var r;if($.isPlainObject(e)||$.isArray(e))r=n.execute('render',[e,t]);else if('string'===$.type(e))r=e;i.html(r);},namespace:function(){return'.'+this.guid;},option:function(e,t){var i=this;if(1===arguments.length&&'string'===$.type(e))return i.options[e];else{if($.isPlainObject(e))return void $.each(e,function(e,t){i.option(e,t);});i.options[e]=t;}},inner:function(e,t){var i=this,n=i.inners||{};if(1===arguments.length&&'string'===$.type(e))return n[e];else{if($.isPlainObject(e))return void $.each(e,function(e,t){i.inner(e,t);});n[e]=t;}},is:function(e){return this.states[e];},state:e('state','states','state','is',function(e,t){return s(t,!1);}),get:function(e){return this.properties[e];},set:e('property','properties','set','get')},h={sync:function(){var e=this,t=function(t,i,n){$.each(t,function(o,r){return e.execute(i[o],[r.newValue,r.oldValue,n?t:r]);});};if($.each(['property','state'],function(i,n){var o=e.inner(n+'Changes');if(o){e.inner(n+'Changes',null);var r=e.constructor[n+'Updater'];if(r)t(o,r,!0);var a=e.option('watch');if(a)t(o,a);e.emit(n+'change',o);}}),arguments[0]!==p)e.execute(e.inner(p));e.inner(p,!1);},_sync:function(){if(!this.inner(p))return!1;else return void 0;},_init:function(){var e='initCalled';if(this.is(e))return!1;else return void this.state(e,!0);},_dispose:function(){var e='disposeCalled';if(this.is(e))return!1;else return void this.state(e,!0);}};exports.extend=function(e,t){r(e,h),$.each(e,function(n,r){var a=n.indexOf('_');if($.isFunction(r)&&0!==a&&a!==n.length-1)if(!($.isArray(t)&&$.inArray(n,t)>=0)){var s=function(e){return i(this,n,arguments,'before',e);},l=function(e){var t=this,o=arguments,a=function(){return i(t,n,o,'after',e);};if(r.length+1===o.length){var s=o[o.length-1];if(s&&$.isFunction(s.then))return void s.then(a);}a();};o(e,n,s,l);}}),r(e,m),u.extend(e);},exports.init=function(e,t){if(!t)t={};return r(t,e.constructor.defaultOptions),t.onafterinit_=function(){e.state('inited',!0);},t.onafterdispose_=function(){e.state('disposed',!0),e.off();var t=e.inner('main');if(e.option('removeOnDispose')&&t)t.remove();a(function(){delete d[e.guid],e.properties=e.options=e.changes=e.states=e.inners=e.guid=null;});},d[e.guid=n()]=e,e.properties={},e.options=t,e.states={},e.inners={},e.init(),e;},exports.dispose=function(e){e.sync();var t=e.inner('main')||e.option('mainElement');if(t)t.off(e.namespace());};}),define('cc/util/localStorage',['require','exports','module','../function/supportLocalStorage'],function(require,exports){'use strict';function e(t,i){if($.isPlainObject(t))$.each(t,e);else try{localStorage[t]=i;}catch(n){}}function t(e){var t;try{t=localStorage[e];}catch(i){}return t;}function i(e){try{localStorage.removeItem(e);}catch(t){}}var n=require('../function/supportLocalStorage')();if(exports.support=n,n)exports.set=e,exports.get=t,exports.remove=i;else exports.set=exports.get=exports.remove=$.noop;}),define('cc/util/mimeType',['require','exports','module'],function(){'use strict';return{html:'text/html',htm:'text/html',shtml:'text/html',xml:'text/xml',css:'text/css',js:'application/x-javascript',json:'application/json',atom:'application/atom+xml',rss:'application/rss+xml',mml:'text/mathml',txt:'text/plain',jad:'text/vnd.sun.j2me.app-descriptor',wml:'text/vnd.wap.wml',htc:'text/x-component',jpg:'image/jpeg',jpeg:'image/jpeg',png:'image/png',gif:'image/gif',tif:'image/tiff',tiff:'image/tiff',wbmp:'image/vnd.wap.wbmp',ico:'image/x-icon',jng:'image/x-jng',bmp:'image/x-ms-bmp',svg:'image/svg+xml',svgz:'image/svg+xml',webp:'image/webp',mp3:'audio/mpeg',wma:'audio/x-ms-wma',wav:'audio/x-wav',mid:'audio/midi',midd:'audio/midi',kar:'audio/midi',ogg:'audio/ogg',m4a:'audio/x-m4a',ra:'audio/x-realaudio',ram:'audio/x-pn-realaudio',mod:'audio/mod','3gp':'video/3gpp','3gpp':'video/3gpp',mp4:'video/mp4',mpeg:'video/mpeg',mpg:'video/mpeg',mov:'video/quicktime',webm:'video/webm',flv:'video/x-flv',m4v:'video/x-m4v',mng:'video/x-mng',asx:'video/x-ms-asf',asf:'video/x-ms-asf',wmv:'video/x-ms-wmv',avi:'video/x-msvideo',rm:'video/vnd.rn-realvideo',rmvb:'video/vnd.rn-realvideo',ts:'video/MP2T',dv:'video/x-dv',mkv:'video/x-matroska',jar:'application/java-archive',war:'application/java-archive',ear:'application/java-archive',hqx:'application/mac-binhex40',pdf:'application/pdf',ps:'application/postscript',eps:'application/postscript',ai:'application/postscript',rtf:'application/rtf',wmlc:'application/vnd.wap.wmlc',kml:'application/vnd.google-earth.kml+xml',kmz:'application/vnd.google-earth.kmz','7z':'application/x-7z-compressed',cco:'application/x-cocoa',jardiff:'application/x-java-archive-diff',jnlp:'application/x-java-jnlp-file',run:'application/x-makeself',pl:'application/x-perl',pm:'application/x-perl',prc:'application/x-pilot',pdb:'application/x-pilot',rar:'application/x-rar-compressed',rpm:'application/x-redhat-package-manager',sea:'application/x-sea',swf:'application/x-shockwave-flash',sit:'application/x-stuffit',tcl:'application/x-tcl',tk:'application/x-tcl',der:'application/x-x509-ca-cert',pem:'application/x-x509-ca-cert',crt:'application/x-x509-ca-cert',xpi:'application/x-xpinstall',xhtml:'application/xhtml+xml',zip:'application/zip',bin:'application/octet-stream',exe:'application/octet-stream',dll:'application/octet-stream',deb:'application/octet-stream',dmg:'application/octet-stream',eot:'application/octet-stream',iso:'application/octet-stream',img:'application/octet-stream',msi:'application/octet-stream',msp:'application/octet-stream',msm:'application/octet-stream',doc:'application/msword',xls:'application/vnd.ms-excel',ppt:'application/vnd.ms-powerpoint',docx:'application/vnd.openxmlformats-officedocument.wordprocessingml.document',xlsx:'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',pptx:'application/vnd.openxmlformats-officedocument.presentationml.presentation'};}),define('cc/util/rect',['require','exports','module'],function(require,exports){'use strict';exports.makeRectList=function(e,t){var i=0,n=0;if(t)i=t.scrollLeft(),n=t.scrollTop();return e.map(function(){var e,o,r=$(this);if(t){var a=r.position();e=a.left+i,o=a.top+n;}else{var s=r.offset();e=s.left,o=s.top;}return{left:e,top:o,width:r.outerWidth(),height:r.outerHeight()};});},exports.sortByIntersectionArea=function(e,t){var i=$.map(t,function(t,i){var n=Math.max(e.left,t.left),o=Math.max(e.top,t.top),r=Math.min(e.left+e.width,t.left+t.width),a=Math.min(e.top+e.height,t.top+t.height),s=r-n,l=a-o;return{index:i,area:s>0&&l>0?s*l:0};});return i.sort(function(e,t){if(e.area<t.area)return 1;else if(e.area>t.area)return-1;return 0;}),i;};}),define('cc/util/supload/supload',['require','exports','module','../cookie','../json'],function(require){function e(e){$.extend(this,e),this.init();}function t(){return'_Supload_'+o++;}if(window.Supload===e)return window.Supload;var i=require('../cookie'),n=require('../json');e.prototype={constructor:e,init:function(){var n=t();this.movieName=n;var o=this.element;if('string'===$.type(o))o=document.getElementById(o);var r=this.data||(this.data={});$.each(i.get(),function(e,t){if('undefined'===$.type(r[e]))r[e]=t;});var a=e.createSWF(n,this.flashUrl,this.getFlashVars());o.parentNode.replaceChild(a,o),this.element=a,e.instances[n]=this;},getFlashVars:function(){var t=this,i=[];return $.each(['movieName','action','accept','multiple','fileName','data','header'],function(e,o){var r=t[o];if(null!=r){if($.isPlainObject(r))r=n.stringify(r);else if($.isArray(r))r=r.join(',');i.push(o+'='+encodeURIComponent(r));}}),i.push('projectName='+e.projectName),i.join('&amp;');},getFiles:function(){return this.element.getFiles&&this.element.getFiles()||[];},setAction:function(e){this.element.setAction&&this.element.setAction(e);},setData:function(e){this.element.setData&&this.element.setData(e);},reset:function(){this.element.reset&&this.element.reset();},upload:function(e){this.element.upload&&this.element.upload(e);},cancel:function(e){this.element.cancel&&this.element.cancel(e);},enable:function(){this.element.enable&&this.element.enable();},disable:function(){this.element.disable&&this.element.disable();},dispose:function(){this.element.dispose&&this.element.dispose(),e.instances[this.movieName]=null,window[this.movieName]=null;}},e.projectName='Supload',e.createSWF=function(t,i,n){var o='<object id="'+t+'" class="'+e.projectName.toLowerCase()+'" type="application/x-shockwave-flash" data="'+i+'"><param name="movie" value="'+i+'" /><param name="allowscriptaccess" value="always" /><param name="wmode" value="transparent" /><param name="flashvars" value="'+n+'" /></object>';return $(o)[0];},e.instances={},e.STATUS_WAITING=0,e.STATUS_UPLOADING=1,e.STATUS_UPLOAD_SUCCESS=2,e.STATUS_UPLOAD_ERROR=3,e.ERROR_CANCEL=0,e.ERROR_SECURITY=1,e.ERROR_IO=2;var o=178245;return window.Supload=e,e;}),define('cc/util/touch',['require','exports','module','../function/eventPage','../function/eventOffset'],function(require){'use strict';function t(e){return e.originalEvent.changedTouches[0];}var i=require('../function/eventPage'),n=require('../function/eventOffset'),o=document.createElement('div'),r={support:'ontouchend'in o,click:'touchstart',down:'touchstart',move:'touchmove',up:'touchend',page:function(e){var i=t(e);return{x:i.pageX,y:i.pageY};},client:function(e){var i=t(e);return{x:i.clientX,y:i.clientY};},offset:function(e){var i=t(e);return{x:i.offsetX,y:i.offsetY};}},a={support:'onclick'in o,click:'click',down:'mousedown',move:'mousemove',up:'mouseup',page:function(e){return i(e);},client:function(e){return{x:e.clientX,y:e.clientY};},offset:function(){return n(e);}};return o=null,{touch:r,mouse:a};}),define('cc/util/trigger',['require','exports','module','../function/split'],function(require,exports){'use strict';function e(e){return function(t){var n=e.delay,o=e.startDelay,r=e.endDelay,a=function(){e.handler.call(t.currentTarget,t);},s=function(){if(n>0&&o&&r){var t=function(){e[i]=setTimeout(function(){l(i);},n);},s=function(){clearTimeout(e[i]),r(l,e),e[i]=null;},l=function(t){if(e[i])s();if(i===t)a();};if(!e[i])o(l,e),t();}else a();},l=e.beforeHandler;if($.isFunction(l)){var c=l.call(t.currentTarget,t);if(c===!1)return;else if(c&&$.isFunction(c.then))return void c.then(s);}s();};}var t=require('../function/split'),i='delayTimer';return exports={focus:{type:'focusin',handler:e},blur:{type:'focusout',handler:e},click:{type:'click',handler:e},enter:{type:'mouseenter',handler:e},leave:{type:'mouseleave',handler:e},context:{type:'contextmenu',handler:e}},exports.parse=function(e,i){var n={};if(e)$.each(t(e,','),function(e,t){var o=exports[t];if(o)n[t]={type:o.type,handler:o.handler(i(t))};});return n;},exports;}),define('cc/util/url',['require','exports','module','../function/split'],function(require,exports){'use strict';var e=require('../function/split');exports.parseQuery=function(t){var i={};if('string'===$.type(t)&&t.indexOf('=')>=0){var n=t.charAt(0),o='?'===n||'#'===n?1:0;if(o>0)t=t.substr(o);$.each(e(t,'&'),function(t,n){var o=e(n,'=');if(2===o.length){var r=o[0];if(r)i[r]=decodeURIComponent(o[1]);}});}return i;},exports.parse=function(e){if(null==e)e=document.URL;var t=document.createElement('a');t.href=e,e=t.href;var i='';if(t.protocol&&t.host)i=t.protocol+'//'+t.host;else if(/^(http[s]?:\/\/[^\/]+)(?=\/)/.test(e))i=RegExp.$1;var n=i.split(':');if(0===i.indexOf('http:')&&3===n.length&&80==n[2])n.length=2,i=n.join(':');var o=t.pathname;if(o&&'/'!==o.charAt(0))o='/'+o;return{origin:i,pathname:o,search:t.search,hash:t.hash};},exports.mixin=function(e,t,i){if('boolean'===$.type(t)&&2===arguments.length)i=t,t=null;if(null==t)t=document.URL;var n=exports.parse(t),o=exports.parseQuery(i?n.hash:n.search);if($.extend(o,e),o=$.param(o),t=n.origin+n.pathname,i)t+=n.search;else if(o)t+='?'+o;if(!i)t+=n.hash;else if(o)t+='#'+o;return t;};}),define('cc/util/validator',['require','exports','module','../function/allPromises','../function/keys'],function(require,exports){'use strict';function e(e){var t={};return $.each(e,function(e,i){if(i.name)t[i.name]=i;}),t;}var t=require('../function/allPromises'),i=require('../function/keys'),n={required:function(e,t){if(0===e.value||e.value)return!0;var i=t.required;if(i===!0)return!1;else return void 0;},pattern:function(e,t){var i=t.pattern;if('string'===$.type(i))i=exports.buildInPatterns[i];if(i instanceof RegExp)return i.test(e.value);else return void 0;},minlength:function(e,t){var i=t.minlength;if($.isNumeric(i))return e.value.length>=+i;else return void 0;},maxlength:function(e,t){var i=t.maxlength;if($.isNumeric(i))return e.value.length<=+i;else return void 0;},min:function(e,t){var i=t.min;if($.isNumeric(i))return e.value>=+i;else return void 0;},max:function(e,t){var i=t.max;if($.isNumeric(i))return e.value<=+i;else return void 0;},step:function(e,t){var i=t.min,n=t.step;if($.isNumeric(i)&&$.isNumeric(n))return(e.value-i)%n===0;else return void 0;},equals:function(e,t,i){var n=t.equals;if('string'===$.type(n))return e.value===i[n].value;else return void 0;}};exports.buildInPatterns={'int':/^\d+$/,number:/^-?[\d.]*$/,positive:/^[\d.]*$/,negative:/^-[\d.]*$/,'char':/^[\w\u2E80-\u9FFF]+$/,url:/^(?:(?:0\d{2,3}[- ]?[1-9]\d{6,7})|(?:[48]00[- ]?[1-9]\d{6}))$/,tel:/^(?:(?:0\d{2,3}[- ]?[1-9]\d{6,7})|(?:[48]00[- ]?[1-9]\d{6}))$/,mobile:/^1[3-9]\d{9}$/,email:/^(?:[a-z0-9]+[_\-+.]+)*[a-z0-9]+@(?:([a-z0-9]+-?)*[a-z0-9]+.)+([a-z]{2,})+$/i},exports.validate=function(o,r,a){var s=[],l=[];if(!$.isArray(a))a=i(o);if($.each(a,function(a,c){var u=o[c],d=r[c];if(d){var p=$.extend({name:c},u);if($.isFunction(d.before)&&d.before(o,e(s))===!1)return void s.push(p);var f,m=d.rules,h=[],v=[],g=m.required;if($.isFunction(g))g=g(u,m,o);if(''!==u.value||g===!0){var b=function(e,t){if(t===!1)f=e;else if(t&&$.isFunction(t.then))t.then(b),h.push(e),v.push(t);else if('boolean'!==$.type(t))t=!1;return t;},x=function(e,t){if(!$.isFunction(t))t=n[e];if($.isFunction(t))return b(e,t(u,m,o));else return void 0;},y=$.isArray(d.sequence)?d.sequence:i(m);$.each(y,function(e,t){return x(t,m[t]);});}var a,C=function(){if(f){p.rule=f;var t=d.errors[f];if($.isFunction(t))t=t(u,m,o);p.error=t;}if($.isFunction(d.after))d.after(p,e(s));};if(v.length){var w=t(v).then(function(e){$.each(e,function(e,t){if(t===!1)return f=h[e],!1;else return void 0;}),C(),s[a-1]=p;});a=s.push(w),l.push(w);}else C(),s.push(p);}}),l.length)return t(l).then(function(){return s;});else return s;};}),define('cobble/function/pageScrollTop',['require','exports','module'],function(){'use strict';return function(){return Math.max(document.body.scrollTop,document.documentElement.scrollTop);};}),define('cobble/function/viewportHeight',['require','exports','module'],function(){'use strict';return function(){return window.innerHeight||document.documentElement.clientHeight;};}),define('cobble/util/instance',['require','exports','module'],function(require,exports){exports.window=$(window),exports.document=$(document),exports.html=$(document.documentElement),exports.body=$(document.body);}),define('cobble/util/json',['require','exports','module'],function(require,exports,module){if('object'!=typeof JSON)JSON={};return function(){'use strict';function f(e){return 10>e?'0'+e:e;}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return'string'==typeof t?t:'\\u'+('0000'+e.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+e+'"';}function str(e,t){var i,n,o,r,a,s=gap,l=t[e];if(l&&'object'==typeof l&&'function'==typeof l.toJSON)l=l.toJSON(e);if('function'==typeof rep)l=rep.call(t,e,l);switch(typeof l){case'string':return quote(l);case'number':return isFinite(l)?String(l):'null';case'boolean':case'null':return String(l);case'object':if(!l)return'null';if(gap+=indent,a=[],'[object Array]'===Object.prototype.toString.apply(l)){for(r=l.length,i=0;r>i;i+=1)a[i]=str(i,l)||'null';return o=0===a.length?'[]':gap?'[\n'+gap+a.join(',\n'+gap)+'\n'+s+']':'['+a.join(',')+']',gap=s,o;}if(rep&&'object'==typeof rep){for(r=rep.length,i=0;r>i;i+=1)if('string'==typeof rep[i])if(n=rep[i],o=str(n,l))a.push(quote(n)+(gap?': ':':')+o);}else for(n in l)if(Object.prototype.hasOwnProperty.call(l,n))if(o=str(n,l))a.push(quote(n)+(gap?': ':':')+o);return o=0===a.length?'{}':gap?'{\n'+gap+a.join(',\n'+gap)+'\n'+s+'}':'{'+a.join(',')+'}',gap=s,o;}}if('function'!=typeof Date.prototype.toJSON)Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+f(this.getUTCMonth()+1)+'-'+f(this.getUTCDate())+'T'+f(this.getUTCHours())+':'+f(this.getUTCMinutes())+':'+f(this.getUTCSeconds())+'Z':null;},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf();};var cx,escapable,gap,indent,meta,rep;if('function'!=typeof JSON.stringify)escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},JSON.stringify=function(e,t,i){var n;if(gap='',indent='','number'==typeof i)for(n=0;i>n;n+=1)indent+=' ';else if('string'==typeof i)indent=i;if(rep=t,t&&'function'!=typeof t&&('object'!=typeof t||'number'!=typeof t.length))throw new Error('JSON.stringify');return str('',{'':e});};if('function'!=typeof JSON.parse)cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(e,t){var i,n,o=e[t];if(o&&'object'==typeof o)for(i in o)if(Object.prototype.hasOwnProperty.call(o,i))if(n=walk(o,i),void 0!==n)o[i]=n;else delete o[i];return reviver.call(e,t,o);}var j;if(text=String(text),cx.lastIndex=0,cx.test(text))text=text.replace(cx,function(e){return'\\u'+('0000'+e.charCodeAt(0).toString(16)).slice(-4);});if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,'')))return j=eval('('+text+')'),'function'==typeof reviver?walk({'':j},''):j;throw new SyntaxError('JSON.parse');};}(),JSON;}),define('imageCrop/imageCrop',['require','cobble/util/json'],function(require){'use strict';function e(t){$.extend(this,e.defaultOptions,t),this.init();}if(window.ImageCrop)return window.ImageCrop;var t=require('cobble/util/json');e.prototype={constructor:e,init:function(){var t=this;t.movieName='_ImageCrop_'+i++,e.instances[t.movieName]=t;var n=$(t.getFlashHTML());t.element.replaceWith(n),t.swf=n[0];},getFlashHTML:function(){var e=this,t=e.flashUrl;return['<object id="',e.movieName,'" type="application/x-shockwave-flash" data="',t,'" width="',e.width,'" height="',e.height,'" class="imagecrop">','<param name="wmode" value="transparent" />','<param name="movie" value="',t,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value=\''+e.getFlashVars()+"' />",'</object>'].join('');},getFlashVars:function(){var e=this;return['movieName='+encodeURIComponent(e.movieName),'action='+encodeURIComponent(e.action),'accept='+encodeURIComponent(e.accept),'adaptive='+encodeURIComponent(e.adaptive),'original='+encodeURIComponent(e.original),'encoder='+encodeURIComponent(e.encoder),'header='+(e.header?encodeURIComponent(t.stringify(e.header)):''),'button='+(e.button?encodeURIComponent(t.stringify(e.button)):''),'minSize='+('number'===$.type(e.minSize)?e.minSize:''),'maxSize='+('number'===$.type(e.maxSize)?e.maxSize:''),'minWidth='+('number'===$.type(e.minWidth)?e.minWidth:''),'maxWidth='+('number'===$.type(e.maxWidth)?e.maxWidth:''),'minHeight='+('number'===$.type(e.minHeight)?e.minHeight:''),'maxHeight='+('number'===$.type(e.maxHeight)?e.maxHeight:''),'src='+encodeURIComponent(t.stringify(e.src)),'dest='+encodeURIComponent(t.stringify(e.dest))].join('&amp;');},upload:function(){var e=this.swf;if(e.upload)e.upload();},leftRotate:function(){var e=this.swf;if(e.leftRotate)e.leftRotate();},rightRotate:function(){var e=this.swf;if(e.rightRotate)e.rightRotate();},isReady:function(){var e=this.swf;if(e.isReady)return e.isReady();else return void 0;},dispose:function(){var t=this,i=t.swf;if(i.dispose)i.dispose();t.swf=t.element=window[this.movieName]=e.instances[t.movieName]=null;}},e.defaultOptions={flashUrl:require.toUrl('./imageCrop.swf'),original:!0,encoder:'jpg'},e.instances={},e.version='0.0.1';var i=0;return window.ImageCrop=e,e;}),define('common/bindScroll_f2ce0a166a',function(){'use strict';var e=function(e,t){return e===t.target||e===window&&t.target===document;},t=function(e){for(;e.length>1;)clearTimeout(e.shift());};return function(i,n,o,r){var a=[],s=null,l=$(i);if(i=l[0],isNaN(o)||0>o)if(r)s=n;else s=function(t){if(e(i,t))n(t);};else if(r)s=function(e){a.push(setTimeout(function(){t(a),n(e);},o));};else s=function(r){a.push(setTimeout(function(){if(t(a),e(i,r))n(r);},o));};l.scroll(s);};}),define('common/function/compressImage_1539d29a96',function(){function e(e,i,n,o,r){var a=0.05;if(o/r/(n/ i)>1+2*a)return'@1e_'+i+'w_1c_0i_1o_90Q_1x.'+e+'%7C0-'+a*i*r/o+'-'+i+'-'+n+'a.'+e.toLowerCase();else return t(e,i,n);}function t(e,t,i,n){return'@'+(n?0:1)+'e_'+t+'w_'+i+'h_1c_0i_1o_90Q_1x.'+e.toLowerCase();}return function(i){var n=i.url,o=n.split('.').pop();if('gif'===o)o='jpg';var r=i.width,a=i.height,s=i.rawWidth,l=i.rawHeight;if(r=Math.floor(r),a=Math.floor(a),null!=s&&null!=l)return s=Math.floor(s),l=Math.floor(l),n+e(o,r,a,s,l);else return n+t(o,r,a,i.noCrop);};}),define('common/lazyImage_92160e3789',['require','common/bindScroll_f2ce0a166a','cobble/util/instance','cobble/function/viewportHeight'],function(require){'use strict';function e(e){if(!e.prop('loading'))e.prop('loading',!0).addClass('img-loading');}function t(e){for(var t=e.height();!t;)e=e.parent(),t=e.height();return t;}var i=require('common/bindScroll_f2ce0a166a'),n=require('cobble/util/instance'),o=require('cobble/function/viewportHeight'),r=n.window,a=n.body,s=0,l=null,exports={init:function(e){i(e||r,exports.scanning,s),exports.scanning(!0),setTimeout(function(){r.scroll();},0);},scanning:function(i,n){var s=o(),c=r.scrollTop(),u=c+s;if(i)n=n?$(n):a,l=n.find('img[data-src]');l.each(function(){var i=$(this),n=i.offset().top,o=t(i);if(u>=n-o-s&&n+o+s>=c){if(!i.prop('loaded'))i.prop('src',i.data('src')).prop('loaded',!0).removeAttr('data-src').removeClass('img-loading');}else e(i);});var d=n.find('iframe'),p=d.length;if(p)for(var f,m=0;p>m;m++){var h=d[m],v=$(h).offset();f=$(d[m].contentWindow.document).find('img[data-src]'),f.each(function(){var i=$(this),n=i.offset().top+v.top,o=t(i);if(u>=n&&n+o+s>=c){if(!i.prop('loaded'))i.prop('src',i.data('src')).prop('loaded',!0).removeAttr('data-src').removeClass('img-loading');}else e(i);});}}};return exports;}),define('userCenter/common/biz/VideoDialog_1e1ff8e0e7',['require','custom/ui/Dialog','./VideoDialog_css'],function(require){'use strict';function e(t){$.extend(this,e.defaultOptions,t),this.init();}var t=require('custom/ui/Dialog');return e.prototype={init:function(){var e=this,i=new t({width:e.videoWidth,skinClass:'video-dialog',title:e.title,removeOnEmpty:!0,content:'<iframe src="'+e.url+'" style="width:'+e.videoWidth+'px;height:'+e.videoHeight+'px;border:0" frameborder="no" border="0"></iframe><style>'+require('./VideoDialog_css')+'</style>'});e.dialog=i;},show:function(){this.dialog.show();}},e.defaultOptions={videoWidth:676,videoHeight:383},e;}),define('userCenter/common/biz/VideoDialog_css',function(){return'.video-dialog > .body{padding:0}';}),define('userCenter/common/biz/VideoUploader_131da711a9',['require','exports','module','custom/ui/Uploader','cc/function/toNumber','cc/function/allPromises','cc/util/url','cc/util/localStorage','cc/util/FiniteArray','../service_1288b24a55'],function(require){'use strict';function e(e){return encodeURIComponent(e.name)+'_'+e.size;}function t(){if(null==a){var e=$.now(),t=l(d.get(S),0),i=d.get(k);if(i&&_*v>e-t)a=i;}return a;}function i(e){a=e,d.set(k,e),d.set(S,$.now());}function n(e,t,n){var o=e.nativeFile.slice(0,0.5*m),r=[],a=[];$.each(t,function(t,i){var n=$('<input type="file" class="hidden">');n.appendTo('body');var l,c=new $.Deferred();a.push(c);var u=new s({mainElement:n,action:i,onuploadstart:function(){l=$.now();},onuploadsuccess:function(){r.push($.now()-l);},onuploaderror:function(){r.push(0);},onuploadcomplete:function(){u.dispose(),n.remove(),c.resolve();}});u.upload(0,{file:$.extend({},e.file,{size:o.size}),nativeFile:o});}),tip({type:'info',content:'正在为您的网络测速\uFF0C选择最快的上传方式\uFF0C请稍候...',duration:10000}),c(a).then(function(){var e=0,o=0;$.each(r,function(t,i){if(i<r[e])o=e,e=t;});var a=e;if(a===r.length-1)if(1.2*r[a]>r[o])a=o;var s=u.parse(t[a]).origin;i(s),n(s);});}function o(e){$.extend(this,o.defaultOptions,e),this.init();}var r,a,s=require('custom/ui/Uploader'),l=require('cc/function/toNumber'),c=require('cc/function/allPromises'),u=require('cc/util/url'),d=require('cc/util/localStorage'),p=require('cc/util/FiniteArray'),f=require('../service_1288b24a55'),m=1048576,h=1024*m,v=86400000,g=s.supportChunk,b=!0,x=!0,y={FlashUploader:{value:200*m,text:'你的浏览器最大支持上传 200M 的视频\uFF0C可使用 <a href="http://www.baidu.com/s?wd=Chrome%20%E6%B5%8F%E8%A7%88%E5%99%A8" target="_blank">Chrome 浏览器</a> 获得 2G 超大文件上传体验\uFF01'},AjaxUploader:{value:2*h,text:'上传的视频不能超过 2G'}},C=['wmv','avi','dat','asf','rm','rmvb','ram','mpg','mpeg','3gp','mov','mp4','m4v','dvix','dv','mkv','flv','vob','qt','divx','cpk','fli','flc','mod'],w='upload_retry',_=1,S='cdn_speed_test_time',k='cdn_speed_test_result';return o.prototype={init:function(){var t=this;if(t.useChunk)if(!g)t.useChunk=!1;var n=function(e){var i=e.fileItem,n=t.currentFiles[i.index];return $.extend(n.fileItem,i),n;},o=new s({mainElement:t.mainElement,action:'',fileName:t.name,useChunk:t.useChunk,chunkSize:t.chunkSize,onfilechange:function(){var e=o.getFiles();if(t.currentFiles=$.map(e,function(e){var t=e.file;return{fileItem:e,videoName:t.name,videoSize:t.size,videoType:t.type};}),$.isFunction(t.onFileChange))t.onFileChange();},onuploadstart:t.useChunk?function(i,r){var a=n(r);if(!a[w]){var s=a.fileItem,l=s.file,c=s.chunk.index;if(!l.size)c=0,o.stopFile(s.index);if(b)d.set(e(l),c+'|'+a.uploadId+'|'+$.now());if(!l.size){if($.isFunction(t.onUploadError))t.onUploadError();return void o.stop();}if($.isFunction(t.onUploadStart))t.onUploadStart(r);}}:null,onuploadprogress:function(e,i){var o=n(i),r=i.uploaded,a=$.now(),s=o.lastTime||o.uploadStartTime,l=r-o.uploaded,c=(a-s)/1000;if(1>c)l*=1/c,c=1;var u=l/c;if(o.lastTime=a,o.uploaded=r,o.speeds.push(u),!o[w])if($.isFunction(t.onUploadProgress))t.onUploadProgress(i);},onchunkuploadsuccess:function(e,i){var r,a=n(i);try{r=$.parseJSON(i.responseText);}catch(e){}if($.isFunction(t.isChunkUploadSuccess)&&!t.isChunkUploadSuccess(r)){if(e.preventDefault(),a.chunkFailCount<t.chunkUploadMaxCount)a.chunkUploadTimer=setTimeout(function(){a.chunkUploadTimer=null,o.upload(a.fileItem);},t.chunkUploadInterval),a.chunkFailCount++;else if(t.stopFile(a.fileItem.index),$.isFunction(t.onChunkUploadError))t.onChunkUploadError(i);}else{if(t.retryUploadNextChunk(a))return void e.preventDefault();if($.isFunction(t.onChunkUploadSuccess))t.onChunkUploadSuccess(i);}},onuploadsuccess:function(i,o){var r,a=n(o);try{r=$.parseJSON(o.responseText);}catch(i){}if(!$.isFunction(t.isUploadSuccess)||t.isUploadSuccess(r)){if(!a[w]){if(t.useChunk&&b)d.remove(e(a.fileItem.file));if($.isFunction(t.onUploadSuccess))t.onUploadSuccess(o);}}else if(t.stopFile(a.fileItem.index),$.isFunction(t.onUploadError))t.onUploadError(o);},onuploaderror:function(e,o){var l=n(o);if(l[w])delete l[w];if(o.errorCode!==s.ERROR_CANCEL&&$.isFunction(t.onUploadError))if(l.uploaded&&a&&a!==r)i(r),l.fileItem.chunk.index=0,t.upload(l);else t.onUploadError(o);},onuploadcomplete:function(e,i){var o=n(i);if(!o[w])if($.isFunction(t.onUploadComplete))t.onUploadComplete(i);}});t.uploader=o;},validateFiles:function(e){var t=this,i=!0;return $.each(e,function(e,n){if(!t.validateFile(n))return i=!1,!1;else return void 0;}),i;},validateFile:function(e){var t,i=this,n=$.inArray(e.videoType,C);if(-1===n)t='文件格式错误\uFF0C请上传 '+C.join('\u3001')+' 等格式的视频';else if(i.maxSize){if(e.videoSize>i.maxSize)t=i.maxSizeError;}else{var o=y[i.uploader.type];if(e.videoSize>o.value)t=o.text;}if(t)return void alert({type:'error',content:t});if(!$.isFunction(i.validateVideo)||i.validateVideo(e))return!0;else return void 0;},getUploadSpeed:function(e){var t=0,i=0,n=this.currentFiles[e];if(n&&n.speeds)n.speeds.each(function(e){t+=e,i++;});return i>0?parseFloat((t/ i).toFixed(2),10):0;},uploadFile:function(e){var t=this,i=t.uploader;i.set('action',e.uploadUrl,{force:!0});var n=e.fileItem,o=n.index;if(n.chunk){if(0===n.chunk.index)n.chunk.uploaded=0;}else n=null;setTimeout(function(){if(n)n.status=s.STATUS_WAITING;i.upload(o,n);});},autoUpload:function(t){var i=this;t.uploadStartTime=$.now(),t.chunkFailCount=0,t.uploaded=0,t.speeds=new p({max:5});var n=t.fileItem.file;if(i.useChunk){if(b){var o=d.get(e(n));if(o){var r=o.split('|'),a=r[2];if($.now()-a<i.resumeExpireTime)return t.uploadId=r[1],void i.resumeUpload(t);}}t.chunk=!0;}i.upload(t);},upload:function(e){var i=this,o=function(e){if(e&&e.code<0)alert({type:'error',title:'错误',content:'上传失败\uFF0C目前网络不可用'});},a=function(t){e.cdnHost=t,i.getUploadUrl(e).then(function(t){e.fid=t.fid,e.uploadId=t.id,e.uploadUrl=t.url,i.uploadFile(e);},o);};if(x)f.getCDNSpeedTestUrls().then(function(i){var o=i.data.test_speed_urls;r=u.parse(o[o.length-1]).origin;var s;if(e.chunk){var l=t();if(l)$.each(o,function(e,t){if(l===u.parse(t).origin)return s=l,!1;else return void 0;});if(!s)return void n(e.fileItem,o,a);}else s=u.parse(o[0]).origin;a(s);},o);else a();},retryUploadChunks:function(e,t){e[w]={chunks:t,index:0},e.fileItem.chunk.index=t[0],e.fileItem.chunk.uploaded=0,this.uploadFile(e);},retryUploadNextChunk:function(e){var t=e[w];if(t){var i=t.index+1;if(t.chunks[i])t.index=i,e.fileItem.chunk.index=t.chunks[i],e.fileItem.chunk.uploaded=0,this.uploadFile(e);else delete e[w];return!0;}},resumeUpload:function(e){var t=this,i=t.resumeUploadMaxCount,n=0;if('number'!==$.type(i))throw new Error('[VideoUploader]resumeUploadMaxCount must be number.');var o=function(){t.getResumeUploadUrl(e).then(function(r){var a='id'in r;if(a){var s=r.uploaded||0,l=Math.floor(parseInt(s/t.chunkSize,10));e.fileItem.chunk={index:l,uploaded:s},e.fid=r.fid,e.uploadId=r.id,e.uploadUrl=r.url,e.cdnHost=u.parse(r.url).origin,t.uploadFile(e),n++;}else{if(!n)t.waitResumeUpload();if(i>n)e.resumeUploadTimer=setTimeout(function(){e.resumeUploadTimer=null,o();},2000);else t.cancelResumeUpload(e);}});};o();},waitResumeUpload:function(){var e=this;if($.isFunction(e.onResumeUploadWait))e.onResumeUploadWait();},cancelResumeUpload:function(t){var i=this;if(t.resumeUploadTimer)clearTimeout(t.resumeUploadTimer),t.resumeUploadTimer=null;if(b)d.remove(e(t.fileItem.file));if($.isFunction(i.onResumeUploadCancel))i.onResumeUploadCancel();},stopFile:function(e){var t=this.uploader;t.stop(e);},stop:function(){var e=this.uploader,t=this.currentFiles;$.each(t,function(t){e.stop(t);}),e.reset();},enable:function(){this.uploader.enable();},disable:function(){this.uploader.disable();},reset:function(){this.uploader.reset();},dispose:function(){var e=this;$.each(e.currentFiles||[],function(e,t){if(t.resumeUploadTimer)clearTimeout(t.resumeUploadTimer),t.resumeUploadTimer=null;if(t.chunkUploadTimer)clearTimeout(t.chunkUploadTimer),t.chunkUploadTimer=null;}),e.uploader.dispose();}},o.defaultOptions={name:'file',useChunk:!0,chunkUploadMaxCount:4,chunkUploadInterval:500,resumeUploadMaxCount:6,resumeUploadInterval:1000,resumeExpireTime:0.25*v,chunkSize:5*m},o.M=m,o;}),define('userCenter/common/component/DatePicker_html',function(){return'<div class="date-picker"><Input options="{{options}}" /><div class="menu bordered calendar"></div><style>{{style}}</style></div>';}),define('userCenter/common/component/DatePicker_ce4d436989',['require','exports','module','custom/form/Date','./DatePicker_html','./DatePicker_css','./Input_12b813ed72'],function(require){'use strict';var e=require('custom/form/Date');return Ractive.extend({template:require('./DatePicker_html'),data:function(){return{style:require('./DatePicker_css'),options:{name:'',value:'',placeholder:'',className:'',disabled:!1,readonly:!1,autofocus:!1,disableBefore:null,disableAfter:null}};},components:{Input:require('./Input_12b813ed72')},oncomplete:function(){var t=this;t.formDate=new e({mainElement:$(t.getElement()),disableBefore:t.get('options.disableBefore'),disableAfter:t.get('options.disableAfter'),watch:{value:function(e){t.set('options.value',e);}}}),t.observe('options.value',function(e){t.formDate.set('value',e);}),t.observe('options.disableBefore',function(e){t.formDate.option('disableBefore',e),t.formDate.render();}),t.observe('options.disableAfter',function(e){t.formDate.option('disableAfter',e),t.formDate.render();});},onteardown:function(){this.formDate.dispose();}});}),define('userCenter/common/component/DatePicker_css',function(){return'.date-picker{display:inline-block;position:relative;}.date-picker > .input{display:block}';}),define('userCenter/common/component/Input_html',function(){return'<div class="input{{#if options.className}} {{options.className}}{{/if}}"><div class="placeholder"></div>{{#if options.multiple}}<textarea name="{{options.name}}" value="{{options.value}}" on-focus="focus" on-blur="blur" on-keydown="keydown"{{#if options.lazy}}{{#if options.lazy === true}} lazy{{else}} lazy="{{options.lazy}}"{{/if}}{{/if}}{{#if options.disabled}} disabled{{/if}}{{#if options.readonly}} readonly{{/if}}{{#if options.autofocus}} autofocus{{/if}}></textarea>{{else}}<input type="{{#if options.type}}{{options.type}}{{else}}text{{/if}}" name="{{options.name}}" value="{{options.value}}" on-focus="focus" on-blur="blur" on-keydown="keydown"{{#if options.lazy}}{{#if options.lazy === true}} lazy{{else}} lazy="{{options.lazy}}"{{/if}}{{/if}}{{#if options.disabled}} disabled{{/if}}{{#if options.readonly}} readonly{{/if}}{{#if options.autofocus}} autofocus{{/if}}{{#if options.maxlength}} maxlength="{{options.maxlength}}"{{/if}}/>{{/if}}<div class="tooltip error right" data-error-for="{{options.name}}"></div><style>{{style}}</style></div>';}),define('userCenter/common/component/Input_12b813ed72',['require','exports','module','custom/form/Text','cc/util/keyboard','./Input_html','./Input_css'],function(require){'use strict';var e=require('custom/form/Text'),t=require('cc/util/keyboard');return Ractive.extend({template:require('./Input_html'),data:function(){return{style:require('./Input_css'),options:{name:'',value:'',type:'',placeholder:'',className:'',multiple:!1,lazy:!1,disabled:!1,readonly:!1,autofocus:!1,maxlength:''}};},onrender:function(){function i(e){function t(){if(o!==n)o=n,e.height(n);if(i=e.prop('scrollHeight')-a,Math.abs(i-o)>r)e.height(i),o=i;}if('hidden'!==e.css('overflow-y'))e.css('overflow-y','hidden');var i,n=e.height(),o=n,r=parseInt(e.css('font-size'),10),a=e.innerHeight()-n;e.on('keyup',t),t();}var n=this,o=$(n.getElement()),r=o.find(':text,textarea'),a=n.formText=new e({mainElement:o,nativeFirst:!1,watch:{value:function(e){if(e!==n.get('options.value'))n.set('options.value',e);}}});n.observe('options.autoHeight',function(e){if(e)i(r);}),n.observe('options.name',function(e){a.set('name',e);}),n.observe('options.value',function(e){a.set('value',e);}),n.observe('options.placeholder',function(e){a.set('placeholder',e);}),n.observe('options.focus',function(e){if(e)r.focus();}),n.observe('options.blur',function(e){if(e)r.blur();}),n.on('focus',function(){n.set({'options.focus':!0,'options.blur':!1});}),n.on('blur',function(){n.set({'options.focus':!1,'options.blur':!0});}),n.on('keydown',function(e){var i={};i[t.enter]='enter';var o=i[e.original.keyCode];if(o)n.fire(o,e);});},onteardown:function(){this.formText&&this.formText.dispose();}});}),define('userCenter/common/component/Input_css',function(){return'';}),define('userCenter/common/component/RichTextEditor_70c287328e',['require','exports','module','common/lazyImage_92160e3789'],function(require){'use strict';var e=require('common/lazyImage_92160e3789');return Ractive.extend({template:'<textarea class="rich-text-editor"></textarea>',data:function(){return{options:{content:'',initHeight:400,maxLength:1000,maxImageWidth:760,error:'',length:0}};},oncomplete:function(){var t=this,i=t.getElement(),n=new UE.ui.Editor({initialFrameHeight:t.get('options.initHeight'),initialFrameWidth:t.get('options.initWidth'),maximumWords:t.get('options.maxLength')});n.render(i),n.addListener('ready',function(){n.setContent(t.get('options.content')),e.init();});var o=function(){var e=n.iframe,i=e.contentDocument||e.contentWindow.document,a=!1;$('img',i).each(function(){var e=this,i=$(e);if(e.complete&&!i.hasClass('loadingclass')){if(e.width>r)a=!0;i.attr({width:e.width});}else t.timer=setTimeout(o);});var s={'options.content':n.getContent(),'options.length':n.getContentLength(!0),'options.error':a?'插入的图片宽度大于最大展现宽度 '+r+'px':''};t.set(s);},r=t.get('options.maxImageWidth');n.addListener('contentchange',o),t.editor=n;},onteardown:function(){if(this.editor.destroy(),this.timer)clearTimeout(this.timer),this.timer=null;}});}),define('userCenter/common/component/Select_html',function(){return'<div class="dropdown{{#if options.className}} {{options.className}}{{/if}}{{#if options.hidden}} hidden{{/if}}"><div class="button secondary"{{#if options.disabled}} disabled{{/if}}><i class="icon icon-caret-down"></i><span class="text">{{{options.defaultText}}}</span></div><ul class="menu"></ul><input type="hidden" name="{{options.name}}" /><div class="tooltip error right" data-error-for="{{options.name}}"></div></div>';}),define('userCenter/common/component/Select_fea6c25a54',['require','exports','module','custom/form/Select','cc/function/autoScrollUp','./Select_html'],function(require){'use strict';var e=require('custom/form/Select'),t=require('cc/function/autoScrollUp');return Ractive.extend({template:require('./Select_html'),data:function(){return{options:{name:'',className:'',defaultText:'请选择',data:null,value:'',disabled:!1,hidden:!1,onselect:$.noop}};},onrender:function(){var i=this,n=$(i.getElement()),o=i.select=new e({mainElement:n,data:i.get('options.data'),value:i.get('options.value'),defaultText:i.get('options.defaultText'),onselect:i.get('options.onselect'),watch:{value:function(e){if(e!=i.get('options.value'))i.set('options.value',e);},opened:function(e){if(e){var o=n.find('.menu');setTimeout(function(){t(o,o.find('.active'));},500);}else i.set('opened',!1);}}});i.observe('options.value',function(e){o.set('value',e);}),i.observe('options.data',function(e){o.set('data',e);});},onteardown:function(){this.select.dispose();}});}),define('userCenter/common/component/SubjectSelect_html',function(){return'<div class="dropdowns tight{{#if options.className}} {{options.className}}{{/if}}"><Select options={{options.subject1}} /><Select options={{options.subject2}} /><Select options={{options.subject3}} /></div>';}),define('userCenter/common/component/SubjectSelect_fb875b704e',['require','exports','module','common/service_9c322508d3','./SubjectSelect_html','./Select_fea6c25a54'],function(require){'use strict';function e(e,i){return t.getSubjectList({id:e}).done(function(e){if(0===e.code){var t=$.map(e.data.list,function(e){return{text:e.name,value:e.id};});i(t);}});}var t=require('common/service_9c322508d3');return Ractive.extend({template:require('./SubjectSelect_html'),data:function(){return{options:{className:'',subject1:{name:'',value:0,data:null,defaultText:'请选择'},subject2:{name:'',value:0,data:null,defaultText:'请选择'},subject3:{name:'',value:0,data:null,defaultText:'请选择'}}};},components:{Select:require('./Select_fea6c25a54')},oninit:function(){var t=this;t.set('options.subject1.onselect',function(){t.set({'options.subject2.value':'','options.subject3.value':'','options.subject3.data':[]});}),t.set('options.subject2.onselect',function(){t.set('options.subject3.value','');}),e(null,function(e){t.set('options.subject1.data',e);});},onrender:function(){var t=this;t.observe('options.subject1.value',function(i){if(i)e(i,function(e){t.set('options.subject2.data',e);});}),t.observe('options.subject2.value',function(i){if(i)e(i,function(e){t.set('options.subject3.data',e);});});}});}),define('userCenter/common/filter/formatDateTime_dec0a6129d',['require','exports','module','moment'],function(require){'use strict';var e=require('moment');return function(t,i){return e(t).format(i||'YYYY-MM-DD HH:mm');};}),define('userCenter/common/function/compressImage_6f80f8c271',function(){function e(e,i,n,o,r){var a=0.05;if(o/r/(n/ i)>1+2*a)return'@1e_'+i+'w_1c_0i_1o_90Q_1x.'+e+'%7C0-'+a*i*r/o+'-'+i+'-'+n+'a.'+e.toLowerCase();else return t(e,i,n);}function t(e,t,i,n){return'@'+(n?0:1)+'e_'+t+'w_'+i+'h_1c_0i_1o_90Q_1x.'+e.toLowerCase();}return function(i){var n=i.url,o=n.split('.').pop();if('gif'===o)o='jpg';var r=i.width,a=i.height,s=i.rawWidth,l=i.rawHeight;if(r=Math.floor(r),a=Math.floor(a),null!=s&&null!=l)return s=Math.floor(s),l=Math.floor(l),n+e(o,r,a,s,l);else return n+t(o,r,a,i.noCrop);};}),define('userCenter/common/function/ractiveDialog_e00233834c',['require','exports','module','custom/ui/Dialog'],function(require){'use strict';var e=require('custom/ui/Dialog');return function(t,i,n){var o,r;if(!$.isPlainObject(i))i={};var a=i.onbeforedispose;if(i.onbeforedispose=function(){if($.isFunction(a))a.apply(this,arguments);r.teardown();},$.isFunction(t))i.content=' ',i.removeOnEmpty=!0,o=new e(i),r=new Ractive({el:o.find('> .body')[0],data:{options:n},template:'<DialogBodyComponent options="{{options}}" />',components:{DialogBodyComponent:t}}),r=r.findComponent('DialogBodyComponent');else if($.isPlainObject(t)){var s=t.template,l=$(s);i.mainElement=l,i.mainTemplate=null,o=new e(i);var c=s.indexOf('>'),u=s.lastIndexOf('<');t.template=s.substring(c+1,u),t.el=l[0],r=new Ractive(t);}return r.getElement=function(){return r.el;},r.closeDialog=function(){o.hide();},o.ractive=r,o;};}),define('userCenter/common/function/renderImage_b12a57d1e9',['require','exports','module','cc/function/toNumber','common/function/compressImage_1539d29a96'],function(require){'use strict';var e=require('cc/function/toNumber'),t=require('common/function/compressImage_1539d29a96');return function(i){'undefined'!=typeof window.devicePixelRatio?window.devicePixelRatio:1;$('img[data-src]',i).each(function(){var i=$(this),n=i.attr('data-src'),o=e(i.attr('data-width'),0),r=e(i.attr('data-height'),0),a=!e(i.attr('data-crop'),0);if(o>0&&r>0){var s=t({url:n,width:o,height:r,noCrop:a}),l=t({url:n,width:2*o,height:2*r,noCrop:a}),c=t({url:n,width:3*o,height:3*r,noCrop:a}),u=[l+' 2x',c+' 3x'];i.prop({src:s,srcset:u.join(',')}).removeAttr('data-src');}});};}),define('userCenter/common/service_1288b24a55',['require','exports','module'],function(require,exports){'use strict';function e(e,t){var i=e;if(t)i+=$.param(t);return i;}function t(t,i,s){i=i||{},s=$.extend({},n,s);var l,c;if(r[t])c=e(t,i),l=a[c];var u=$.Deferred();if(l)if(!l.response)l.deferredList.push(u);else u.resolve(l.response);else{var d=userData.number||0;if(!o[t])i._user_number=d,$.extend(i,siteData.monkey);if($.ajax({url:t,data:i,method:'post',dataType:'json',timeout:s.timeout,async:s.sync?!1:!0}).then(function(e){if(r[t])l=a[c],l.response=e,$.each(l.deferredList,function(t,i){if(e&&0===e.code)i.resolve(e);else i.reject(e);}),l.deferredList.length=0;else if(e&&0===e.code)u.resolve(e);else{var i=e.msg;if(i&&!s.preventError)alert({title:'提示',content:i});u.reject(e);}},function(e,t){if('timeout'===t||'error'===t)u.reject({code:-1});}),r[t])a[c]={},a[c].deferredList=[u];}return u;}function i(e,t){return $.ajax({url:e,data:t,dataType:'jsonp'});}var n={timeout:5000,sync:!1,stringify:!1,preventError:!1},o={'/area/list':1,'/subject/getList':1},r={'/user/basicInfo':1},a={};exports.post=t,exports.jsonp=i,exports.getUserBasicInfo=function(e){var i;if(e&&null!=e.userId&&null!=e.userType)i={user_id:e.userId,user_type:e.userType};return t('/user/basicInfo',i);},exports.getCourseList=function(){return t('/lesson/list');},exports.getUserType=function(){return t('/user/roles');},exports.sendInviteCode=function(e){var i=$.extend(e.formData||{},{invite_code:e.inviteCode,role:e.role});return t('/user/switch_role_ajax',i);},exports.getCDNSpeedTestUrls=function(){return t('/video/getSpeedTestUrl');};}),define('userCenter/teacherCenter/classCourseEdit/common/component/editor/Audio_html',function(){return'<div class="editor-audio editor-content"><div class="view-audio-wrapper"></div><div class="wrapper"><div class="edit-button fluid"><i class="draggable-icon icon icon-microphone"></i><div class="button button-remove icon-close" on-click="remove()"></div>{{#if options.url }}<div class="view-audio" on-click="playAudio()"><div class="thumbnail-audio audio">{{#if !options.playing}}<i class="icon icon-recording"></i>{{else}}<img class="icon" src="http://img.gsxservice.com/0cms/d/file/content/2016/08/57b69204a2241.gif">{{/if}}</div></div>{{/if}}<span class="button upload-wrapper {{#if status === STATUS_IMAGE_UPLOADING}}button-ing-audio{{elseif options.url}}button-has-audio{{else}}button-no-audio audio{{/if}}"><input type="file">{{#if status === STATUS_IMAGE_UPLOADING}}上传中...{{progress}}{{elseif options.url}}重新上传{{else}}<i class="icon-plus"></i>上传录音{{/if}}</span></div></div><style>{{style}}</style></div>';}),define('userCenter/teacherCenter/classCourseEdit/common/component/editor/Audio_539eee59f7',['require','exports','module','custom/ui/Uploader','audioPlayer','./Audio_html','./Audio_css'],function(require){'use strict';var e=require('custom/ui/Uploader'),t=require('audioPlayer'),i=5,n=1048576,o=['mp3'],r=0,a=1,s=2,l=-1;return Ractive.extend({template:require('./Audio_html'),data:function(){return{style:require('./Audio_css'),index:'',progress:0,status:r,STATUS_NO_IMAGE:r,STATUS_IMAGE_UPLOADING:a,STATUS_IMAGE_UPLOAD_SUCCESS:s,STATUS_IMAGE_UPLOAD_FAILURE:l,options:{url:'',playing:!1,uploading:!1,storage_id:''}};},onrender:function(){var r=this,c=$(r.getElement()).find('input[type="file"]');if(r.get('options.url'))r.set({status:s});var u=$(r.getElement());r.audioPlayer=new t({element:u.find('.view-audio-wrapper'),onPlayComplete:function(){r.audioPlayer.stop(),r.set('options.playing',!1);}}),r.uploader=new e({mainElement:c,multiple:!1,ignoreError:!0,action:'/tcenter/foundation/storage/upload-audio',data:'',fileName:'attachment',onfilechange:function(){var e=r.uploader.getFiles();if(1===e.length){r.set('status',a);var t,s=e[0],c=s.file,u=$.inArray(c.type,o);if(0>u)t='文件格式错误\uFF0C请上传 '+o.join('\u3001')+' 等格式的音频';else if(c.size>i*n)t='请不要上传超过'+i+'M的内容';if(t)return r.set('status',l),void alert({title:'温馨提示',content:t,type:'error'});else return void r.uploader.upload(0);}},onuploadstart:function(){r.set('options.uploading',!0);},onuploadprogress:function(e,t){r.set('progress',t.percent);},onuploadsuccess:function(e,t){if(t.responseText){var i=$.parseJSON(t.responseText);if(0===i.code){var n=i.data.url,o=i.data.id;r.set({'options.url':n,'options.storage_id':o,status:s});}}},onuploaderror:function(){r.set('status',l),alert({title:'温馨提示',content:'上传错误\uFF0C请重新上传',type:'error'});},onuploadcomplete:function(){r.set('options.uploading',!1);}});},onteardown:function(){this.uploader.dispose(),this.audioPlayer.dispose();},remove:function(){var e=this;if(e.get('options.storage_id'))alert({title:'温馨提示',content:'您确认删除吗\uFF1F',buttons:[{text:'确定',type:'primary',action:function(){e.fire('remove',{index:e.get('index')}),this.hide();}},{text:'取消',type:'',action:function(){this.hide();}}]});else e.fire('remove',{index:e.get('index')});},playAudio:function(){var e=this,t=e.get('options.url');if(e.get('options.playing'))e.audioPlayer.stop(),e.set('options.playing',!1);else e.audioPlayer.play(t),e.set('options.playing',!0);}});}),define('userCenter/teacherCenter/classCourseEdit/common/component/editor/Audio_css',function(){return'.editor-audio .audio-player{position:absolute;top:0;left:0}.editor-audio > .wrapper{position:relative}.editor-audio .audio{width:244px;height:138px;font-size:16px;margin-left:45px}.editor-audio .edit-button{background-color:#fff;padding-left:45px;padding:20px 0;}.editor-audio .edit-button .icon{font-size:22px;color:#ccc;position:absolute;top:20px;left:15px}.editor-audio .edit-button .button-no-audio{line-height:120px;color:#ccc;border:1px solid #ccc}.editor-audio .edit-button .button-has-audio{border:1px solid #ccc;margin:45px;margin-bottom:55px}.editor-audio .edit-button .button-ing-audio{border:none;margin:45px;margin-bottom:55px}.editor-audio .edit-button .button-remove{float:right;font-size:22px;color:#ccc;margin-right:10px;margin-top:-10px}.editor-audio .edit-button .view-audio{display:inline-block;}.editor-audio .edit-button .view-audio .thumbnail-audio{position:relative;background:url("http://img.gsxservice.com/0cms/d/file/content/2016/08/57b693e1e3815.png") 50% no-repeat;}.editor-audio .edit-button .view-audio .thumbnail-audio img{width:100%;height:100%}.editor-audio .edit-button .view-audio .thumbnail-audio .icon{position:absolute;font-size:20px;top:43%;left:29%;width:20px;height:20px}.editor-audio .edit-button .view-audio .thumbnail-audio .audio-player{cursor:pointer;display:none;}.editor-audio .edit-button .view-audio .thumbnail-audio .audio-player .icon-live-o{left:50%;top:50%;margin-left:-11px;margin-top:-11px}.editor-audio .edit-button .view-audio .thumbnail-audio .audio-player:after{content:\'\';position:absolute;top:0;left:0;right:0;bottom:0}.editor-audio .edit-button .view-audio .thumbnail-audio:hover .audio-player{display:block}';}),define('userCenter/teacherCenter/classCourseEdit/common/component/editor/Body_html',function(){return'<div class="editor-body editor-content"><div class="wrapper">{{#if options.isEditing}}<div class="input-group fluid" data-index="{{index}}"><i class="draggable-icon icon floated icon-text-o"></i><Input options="{{inputOptions}}" /><div class="button floated icon-close" on-click="remove()"></div></div><div class="toolbar fluid"><span class="button switer-bold icon-bold{{#if options.isBold}} active{{/if}}" on-click="toggle(\'options.isBold\')"></span><span class="button change-size icon-font{{#if options.isBig}} active{{/if}}" on-click="toggle(\'options.isBig\')"></span><span class="button switer-center icon-align-left{{#if !options.isCenter}} active{{/if}}" on-click="set(\'options.isCenter\', false)"></span><span class="button switer-center icon-align-center{{#if options.isCenter}} active{{/if}}" on-click="set(\'options.isCenter\', true)"></span><ul class="color-list inline">{{#each colorList}}<li class="button tiny{{#if options.color == this}} active{{/if}}" style="background-color: {{this}}" on-click="set(\'options.color\', this)"></li>{{/each}}</ul></div>{{else}}<div class="button-switch input-group fluid" on-click="openEdit()"><i class="draggable-icon icon icon-text-o"></i><div class="button fluid edit-button">编辑正文</div><div class="button button-remove icon-close" on-click="remove()"></div></div>{{/if}}</div><style>{{style}}.input-group[data-index="{{index}}"] .body-input textarea {color: {{options.color}};font-weight: {{#if options.isBold}}bold{{else}}normal{{/if}};font-size: {{#if options.isBig}}17px{{else}}15px{{/if}};text-align: {{#if options.isCenter}}center{{else}}left{{/if}};}</style></div>';}),define('userCenter/teacherCenter/classCourseEdit/common/component/editor/Body_080bd000a9',['require','exports','module','./Body_html','./Body_css','../../../../../common/component/Input_12b813ed72'],function(require){'use strict';var e='#000000',t='#999999',i='#FC5C5A',n='#FF9100',o='#0F86E8',r='#43B244',a='#3D618A',s='#9900CC',l=Ractive.extend({template:require('./Body_html'),data:function(){return{style:require('./Body_css'),index:'',colorList:[e,t,i,n,o,r,a,s],inputOptions:{name:'body',placeholder:'编辑正文',className:'body-input fluid',multiple:!0,autoHeight:!1,lazy:!0},showToolBar:!0,options:{text:'',color:e,isBold:!1,isBig:!1,isCenter:!1,isEditing:!1}};},onrender:function(){var e=this;e.bindData({'inputOptions.value':'options.text'}),e.observe('inputOptions.focus',function(e){if(e)this.set('showToolBar',!0);}),e.observe('inputOptions.blur',function(e){if(e)this.set('showToolBar',!1);});},openEdit:function(){this.set({'inputOptions.autofocus':!0,'options.isEditing':!0});},components:{Input:require('../../../../../common/component/Input_12b813ed72')},remove:function(){var e=this;if(e.get('options.text'))alert({title:'温馨提示',content:'您确认删除吗\uFF1F',buttons:[{text:'确定',type:'primary',action:function(){e.fire('remove',{index:e.get('index')}),this.hide();}},{text:'取消',type:'',action:function(){this.hide();}}]});else e.fire('remove',{index:e.get('index')});}});return l.COLOR_BLACK=e,l;}),define('userCenter/teacherCenter/classCourseEdit/common/component/editor/Body_css',function(){return'.editor-body .wrapper{position:relative;}.editor-body .wrapper .button-switch{height:44px;}.editor-body .wrapper .button-switch .edit-button{background-color:#fff;padding-left:45px;font-size:16px;border:none;text-align:left;line-height:32px;color:#ccc}.editor-body .wrapper .button-switch .icon,.editor-body .wrapper .button-switch .button-remove{position:absolute;color:#ccc}.editor-body .wrapper .button-switch .icon{font-size:24px;top:10px;left:12px}.editor-body .wrapper .button-switch .button-remove{font-size:22px;right:12px;top:0}.editor-body .wrapper .input-group{color:#ccc;}.editor-body .wrapper .input-group .floated{top:8px;z-index:1;font-size:22px;}.editor-body .wrapper .input-group .floated.icon-close{top:0}.editor-body .wrapper .input-group .body-input .placeholder{font-size:16px;color:#ccc !important}.editor-body .wrapper .input-group .body-input .placeholder,.editor-body .wrapper .input-group .body-input textarea{border:none;padding:12px 45px;padding-right:50px}.editor-body .wrapper .input-group .body-input textarea{resize:vertical}.editor-body .toolbar{background-color:#fff;}.editor-body .toolbar .button{margin-left:15px}.editor-body .toolbar .color-list{padding:12px;display:inline-block;}.editor-body .toolbar .color-list li{width:16px;height:16px;background-color:#000}.editor-body .toolbar .active{background-color:#fff3df;border:1px solid #f90}';}),define('userCenter/teacherCenter/classCourseEdit/common/component/editor/Editor_html',function(){return'<div class="editor"><div class="editor-list">{{#each options.list:index}}<div class="editor-item">{{#if type === \'title\'}}<Title index="{{index}}" options="{{options}}" />{{elseif type === \'body\'}}<Body index="{{index}}" options="{{options}}" />{{elseif type === \'image\'}}<Image index="{{index}}" options="{{options}}" />{{elseif type === \'video\'}}<Video index="{{index}}" options="{{options}}" />{{elseif type === \'audio\'}}<Audio index="{{index}}" options="{{options}}" />{{/if}}</div>{{/each}}<div></div>{{#if options.list.length >= 2}}<div class="muted">长按模块前图标可以拖动排序</div>{{/if}}</div>{{#if isUploading}}<div class="uploading-mask">正在上传\uFF0C请稍候...</div>{{/if}}<div class="buttons"><div class="button fluid" on-click="addTitle()">标题</div><div class="button fluid" on-click="addBody()">正文</div><div class="button fluid" on-click="addImage()">图片</div><div class="button fluid" on-click="addVideo()">视频</div><div class="button fluid" on-click="addAudio()">音频</div></div><style>{{style}}</style></div>';}),define('userCenter/teacherCenter/classCourseEdit/common/component/editor/Editor_364b39dc3b',['require','exports','module','custom/helper/Draggable','cc/util/rect','cc/function/position','cc/function/waitPromises','./Editor_html','./Editor_css','./Title_d3522bcb7a','./Body_080bd000a9','./Image_6f171b6997','./Video_1ab451fe27','./Audio_539eee59f7'],function(require){'use strict';var e=require('custom/helper/Draggable'),t=require('cc/util/rect'),i=require('cc/function/position'),n=require('cc/function/waitPromises');return Ractive.extend({template:require('./Editor_html'),data:function(){return{style:require('./Editor_css'),checkedIndex:'',options:{list:[{type:'title',options:{text:'编辑段落标题'}}]}};},computed:{isUploading:function(){for(var e=this.get('options.list'),t=0,i=e.length;i>t;t++)if(e[t].options.uploading)return!0;return!1;}},oncomplete:function(){var o,r,a,s,l,c,u,d=this,p=$(d.getElement()),f=d.listElement=p.find('.editor-list'),m='.editor-content',h='active',v='brother',g='active-parent',b=function(){s=a=null,c=p.find(m),u=t.makeRectList(c,f);};b(),d.draggable=new e({mainElement:p,mainSelector:m,containerElement:f,includeSelector:['.draggable-icon'],draggingClass:'dragging',onpick:function(e,t){if(!o){r=t.mainElement,r.addClass(h),r.width(r.width());var i=r.closest('.editor-item');i.addClass(g).height(i.height()),b();}},onbeforedrag:function(e,t){if(s=c.index(r),o||!d.isDraggable(s))return!1;else return l=t,void(a=null);},ondrag:function(e,i){var n={left:i.left,top:i.top,width:u[s].width,height:u[s].height},o=t.sortByIntersectionArea(n,u);if('number'===$.type(a))c.eq(a).removeClass(v);var r=o[0].index!==s?o[0]:o[1];if(r&&d.isDraggable(r.index)){var l=n.width*n.height;if(l>0&&r.area/l>0.1)return a=r.index,void c.eq(a).addClass(v);}a=null;},onafterdrag:function(){if(null==a)a=s;var e={position:'',left:'',top:''},t=100,u='easeOutQuad',p=[],f=[],m={};if(a!==s){if(s>a){m[s]=a;for(var h=a;s>h;h++)m[h]=h+1;}else{m[s]=a;for(var h=s+1;a>=h;h++)m[h]=h-1;}var g={};g[s]=l;var x=function(e){var t=g[e];if(!t)t=i(c.eq(e)),g[e]=t;return t;};$.each(m,function(i,n){p.push(i),$.each(p,function(e,t){c.eq(t).width(c.eq(t).width());});var o=$.Deferred();f.push(o);{var r=c.eq(n),a=x(n),l=r.parent(),d={left:a.left,top:a.top},m=c.eq(i),h=x(i);({left:h.left,top:h.top});}if(i!=s)m.css(h);m.animate(d,t,u,function(){m.css(e).removeClass(v),l.append(m),o.resolve();});});}else{p.push(s);var y=$.Deferred();f.push(y),r.animate({left:l.left,top:l.top},t,u,function(){r.css(e),y.resolve();});}var C={};$.each(p,function(e,t){C['options.list.'+t+'.animating']=!0;}),d.set(C),o=!0,n(f,function(){var e=d.get('options.list');$.each(p,function(t,i){e[i].animating=!1;});var t=[];$.each(e,function(e,i){if(null!=m[e])t[m[e]]=i;else t[e]=i;}),e.splice(0,e.length),e.push.apply(e,t),o=!1,b();});},ondrop:function(e,t){if(!o){r=t.mainElement,r.removeClass(h),r.width(r.width());var i=r.closest('.editor-item');i.removeClass(g).height('');}}}),d.on('*.remove',function(e){var t=d.get('options.list');t.splice(e.index,1);});},isDraggable:function(e){if(0>e)return!1;var t=this.get('options.list');if(t[e].animating)return!1;for(var i=0,n=t.length;n>i;i++)if(t[i].uploading)return!1;return!0;},components:{Title:require('./Title_d3522bcb7a'),Body:require('./Body_080bd000a9'),Image:require('./Image_6f171b6997'),Video:require('./Video_1ab451fe27'),Audio:require('./Audio_539eee59f7')},addTitle:function(){var e=this,t=e.get('options.list');t.push({type:'title',options:{text:''}}),e.set({list:t,checkedIndex:1}).then(function(){e.scrollToBottom();});},addBody:function(){var e=this,t=e.get('options.list');t.push({type:'body',options:{text:'',color:require('./Body_080bd000a9').COLOR_BLACK,isBold:!1,isBig:!1,isCenter:!1,isEditing:!1}}),e.set({list:t,checkedIndex:2}).then(function(){e.scrollToBottom();});},addImage:function(){var e=this,t=e.get('options.list');t.push({type:'image',options:{url:'',width:'',height:'',size:'',watermark:'photo',storage_id:''}}),e.set({list:t,checkedIndex:3}).then(function(){e.scrollToBottom();});},addVideo:function(){var e=this,t=e.get('options.list');t.push({type:'video',options:{video_id:'',cover:''}}),e.set({list:t,checkedIndex:4}).then(function(){e.scrollToBottom();});},addAudio:function(){var e=this,t=e.get('options.list');t.push({type:'audio',options:{storage_id:'',url:'',playing:''}}),e.set({list:t,checkedIndex:5}).then(function(){e.scrollToBottom();});},scrollToBottom:function(){this.listElement.prop('scrollTop',this.listElement.prop('scrollHeight'));}});}),define('userCenter/teacherCenter/classCourseEdit/common/component/editor/Editor_css',function(){return".editor{position:relative;overflow-y:hidden;}.editor .buttons{width:90px;}.editor .buttons .button{background-color:#f3f3f4;color:#3d3d3e;-webkit-transition-property:background-color,color;-moz-transition-property:background-color,color;-o-transition-property:background-color,color;transition-property:background-color,color;-webkit-transition-duration:.2s;-moz-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s;}.editor .buttons .button:hover{background-color:#f90;color:#fff}.editor .editor-list{width:665px;height:440px;padding:20px;float:right;position:relative;overflow-y:auto;background-color:#f4f4f4;border:1px solid #e4e4e4}.editor .uploading-mask{position:absolute;top:0;right:0;bottom:0;left:119px;z-index:2;color:#fff;font-size:140%;text-align:center;line-height:438px;background-color:#000;opacity:.3;filter:alpha(opacity=30)}.box-shadow .uploading-mask{background-color:rgba(0,0,0,0.3);opacity:1;filter:alpha(opacity=100)}.editor-item{border:1px solid transparent;}.editor-item.active-parent{border:1px dashed #e4e4e4}.editor-item + .editor-item{margin-top:10px}.editor-content{border:transparent 1px solid;}.editor-content.brother{-webkit-box-shadow:0 0 4px rgba(232,143,28,0.71);-moz-box-shadow:0 0 4px rgba(232,143,28,0.71);box-shadow:0 0 4px rgba(232,143,28,0.71)}.editor-content.active{z-index:4}.editor-content.dragging{cursor:move}.editor-content:hover{border:#f90 1px solid}.editor-content.dragging:after{content:' ';position:absolute;top:0;right:0;bottom:0;left:0}";}),define('userCenter/teacherCenter/classCourseEdit/common/component/editor/Image_html',function(){return'<div class="editor-image editor-content"><div class="wrapper"><div class="edit-button fluid"><i class="draggable-icon icon icon-image"></i><div class="button button-remove icon-close" on-click="remove()"></div>{{#if options.url || status >= STATUS_IMAGE_UPLOADING }}<div class="view-image"><div class="thumbnail-image image texts"><img class="text fluid" src="{{options.url}}" draggable="false">{{#if status === STATUS_IMAGE_UPLOADING}}<div class="upload-progress">{{progress}}</div>{{/if}}</div></div>{{/if}}<span class="button upload-wrapper {{#if options.url || status == STATUS_IMAGE_UPLOADING}}button-has-image{{else}}button-no-image image{{/if}}"><input type="file">{{#if options.url}}重新上传{{else}}<i class="icon-plus"></i>上传图片{{/if}}</span></div></div><style>{{style}}</style></div>';}),define('userCenter/teacherCenter/classCourseEdit/common/component/editor/Image_6f171b6997',['require','exports','module','custom/ui/Uploader','userCenter/common/function/compressImage_6f80f8c271','./Image_html','./Image_css'],function(require){'use strict';var e=require('custom/ui/Uploader'),t=(require('userCenter/common/function/compressImage_6f80f8c271'),5),i=1048576,n=['jpg','png','jpeg'],o=0,r=1,a=2,s=-1;return Ractive.extend({template:require('./Image_html'),data:function(){return{style:require('./Image_css'),index:'',progress:0,status:o,STATUS_NO_IMAGE:o,STATUS_IMAGE_UPLOADING:r,STATUS_IMAGE_UPLOAD_SUCCESS:a,STATUS_IMAGE_UPLOAD_FAILURE:s,options:{url:'',width:'',height:'',size:'',watermark:'',storage_id:'',uploading:!1}};},onrender:function(){var o=this,l=$(o.getElement()).find('input[type="file"]');if(o.get('options.url'))o.set({status:a});var c={};if('photo'===o.get('options.watermark'))c.watermark=1;else if('cert'===o.get('options.watermark'))c.watermark=2;o.uploader=new e({mainElement:l,multiple:!1,ignoreError:!0,action:'/tcenter/foundation/storage/upload-image',data:c,fileName:'attachment',onfilechange:function(){var e=o.uploader.getFiles();if(1===e.length){o.set('status',r);var a,l=e[0],c=l.file,u=$.inArray(c.type,n);if(0>u)a='文件格式错误\uFF0C请上传 '+n.join('\u3001')+' 等格式的图片';else if(c.size>t*i)a='请不要上传超过'+t+'M的内容';if(a)return o.set('status',s),void alert({title:'温馨提示',content:a,type:'error'});else return void o.uploader.upload(0);}},onuploadstart:function(){o.set('options.uploading',!0);},onuploadprogress:function(e,t){o.set('progress',t.percent);},onuploadsuccess:function(e,t){if(t.responseText){var i=$.parseJSON(t.responseText);if(0===i.code){var n=i.data.url;o.set({'options.url':n,'options.storage_id':i.data.id,status:a});}}},onuploaderror:function(){o.set('status',s),alert({title:'温馨提示',content:'上传错误\uFF0C请重新上传',type:'error'});},onuploadcomplete:function(){o.set('options.uploading',!1);}});},onteardown:function(){this.uploader.dispose();},remove:function(){var e=this;if(e.get('options.storage_id'))alert({title:'温馨提示',content:'您确认删除吗\uFF1F',buttons:[{text:'确定',type:'primary',action:function(){e.fire('remove',{index:e.get('index')}),this.hide();}},{text:'取消',type:'',action:function(){this.hide();}}]});else e.fire('remove',{index:e.get('index')});}});}),define('userCenter/teacherCenter/classCourseEdit/common/component/editor/Image_css',function(){return'.editor-image > .wrapper{position:relative}.editor-image .image{width:244px;height:140px;font-size:16px;margin-left:45px}.editor-image .edit-button{background-color:#fff;padding-left:45px;padding:20px 0;}.editor-image .edit-button .icon{font-size:22px;color:#ccc;position:absolute;top:20px;left:15px}.editor-image .edit-button .button-no-image{border:1px solid #ccc;line-height:120px;color:#ccc}.editor-image .edit-button .button-has-image{border:1px solid #ccc;margin:45px;margin-bottom:75px}.editor-image .edit-button .button-remove{float:right;font-size:22px;color:#ccc;margin-right:10px;margin-top:-10px}.editor-image .edit-button .view-image{display:inline-block;vertical-align:top;}.editor-image .edit-button .view-image .thumbnail-image{position:relative;width:240px;height:140px;}.editor-image .edit-button .view-image .thumbnail-image img{width:100%;height:100%}.editor-image .edit-button .view-image .thumbnail-image .upload-progress{position:absolute;top:65px;left:95px;color:#ccc}';}),define('userCenter/teacherCenter/classCourseEdit/common/component/editor/Title_html',function(){return'<div class="editor-title editor-content"><div class="wrapper"><div class="input-group fluid"><i class="draggable-icon icon floated icon-text"></i><Input options="{{inputOptions}}" /><div class="button floated icon-close" on-click="remove()"></div></div></div><style>{{style}}</style></div>';}),define('userCenter/teacherCenter/classCourseEdit/common/component/editor/Title_d3522bcb7a',['require','exports','module','custom/form/Validator','./Title_html','./Title_css','../../../../../common/component/Input_12b813ed72'],function(require){'use strict';require('custom/form/Validator');return Ractive.extend({template:require('./Title_html'),data:function(){return{style:require('./Title_css'),index:'',inputOptions:{name:'title',placeholder:'编辑段落标题\uFF0C最多 10 个字',className:'title-input fluid huge',value:'',maxlength:10},options:{text:''}};},onrender:function(){var e=this;e.bindData({'inputOptions.value':'options.text'});},components:{Input:require('../../../../../common/component/Input_12b813ed72')},remove:function(){var e=this;if(e.get('options.text'))alert({title:'温馨提示',content:'您确认删除吗\uFF1F',buttons:[{text:'确定',type:'primary',action:function(){e.fire('remove',{index:e.get('index')}),this.hide();}},{text:'取消',type:'',action:function(){this.hide();}}]});else e.fire('remove',{index:e.get('index')});}});}),define('userCenter/teacherCenter/classCourseEdit/common/component/editor/Title_css',function(){return'.editor-title > .wrapper{position:relative}.editor-title .input-group{color:#ccc;}.editor-title .input-group .icon{font-size:24px;z-index:1}.editor-title .input-group .title-input{padding-right:32px;}.editor-title .input-group .title-input .placeholder,.editor-title .input-group .title-input input{height:44px;line-height:28px;padding-left:45px;border:none;font-size:16px}.editor-title .input-group .title-input .placeholder{color:#ccc}.editor-title .input-group .title-input input{color:#000}.editor-title .floated{top:5px;}.editor-title .floated.icon-close{font-size:22px;top:0;right:10px}';}),define('userCenter/teacherCenter/classCourseEdit/common/component/editor/Video_html',function(){return'<div class="editor-video editor-content"><div class="wrapper"><div class="edit-button fluid"><i class="draggable-icon icon icon-live-o"></i><div class="button button-remove icon-close" on-click="remove()"></div>{{#if options.video_id || status >= STATUS_IMAGE_UPLOADING }}<div class="view-video"><div class="thumbnail-video video"><img src="{{options.cover}}" data-id={{options.video_id}} />{{#if status === STATUS_IMAGE_UPLOAD_SUCCESS && options.video_id}}<div class="button video-player" data-video="/video/view/{{options.video_id}}" on-click="playVideo(this)"><img src="{{sourceDir}}/userCenter/teacherCenter/classCourseEdit/common/img/play.png" class="icon play"></div>{{/if}}</div></div>{{/if}}<span class="button upload-wrapper {{#if status === STATUS_IMAGE_UPLOADING}}button-ing-video{{elseif options.video_id}}button-has-video{{else}}button-no-video video{{/if}}"><input type="file" />{{#if status === STATUS_IMAGE_UPLOADING}}上传中...{{progress}}{{elseif options.video_id}}重新上传{{else}}<i class="icon-plus"></i>上传视频{{/if}}</span></div></div><style>{{style}}</style></div>';}),define('userCenter/teacherCenter/classCourseEdit/common/component/editor/Video_1ab451fe27',['require','exports','module','userCenter/common/biz/VideoUploader_131da711a9','../../service_c2a600d2eb','userCenter/common/biz/VideoDialog_1e1ff8e0e7','userCenter/common/function/ractiveDialog_e00233834c','./Video_html','./Video_css'],function(require){'use strict';var e=require('userCenter/common/biz/VideoUploader_131da711a9'),t=require('../../service_c2a600d2eb'),i=require('userCenter/common/biz/VideoDialog_1e1ff8e0e7'),n=(require('userCenter/common/function/ractiveDialog_e00233834c'),0),o=1,r=2,a=3;return Ractive.extend({template:require('./Video_html'),data:function(){return{style:require('./Video_css'),index:'',progress:0,sourceDir:siteData.source,status:n,STATUS_NO_IMAGE:n,STATUS_IMAGE_UPLOADING:o,STATUS_IMAGE_UPLOAD_SUCCESS:r,STATUS_IMAGE_UPLOAD_FAILURE:a,options:{video_id:'',cover:'',uploading:!1}};},oncomplete:function(){var i=this,n=$(i.getElement());if(i.get('options.video_id'))i.set({status:r});var a=n.find('input[type="file"]');if(a.length)i.uploader=new e({mainElement:a,name:'file',validateVideo:i.get('validateVideo'),maxSize:250*e.M,maxSizeError:'上传的视频不能超过250M',getUploadUrl:function(e){return t.getVideoUploadUrl({fileName:e.videoName,fileSize:e.videoSize,cndHost:e.cdnHost}).then(function(e){var t=e.data;return i.set({'options.video_id':t.id,'options.cover':t.cover}),{id:t.id,url:t.upload_url};});},getResumeUploadUrl:function(e){return t.getVideoResumeUploadUrl({videoId:e.uploadId}).then(function(e){var t=e.data;return{id:t.id,url:t.upload_url,uploaded:t.upload_size};});},onFileChange:function(){var e=i.uploader,t=e.currentFiles;if(1===t.length)if(!e.validateFile(t[0]))return void e.reset();else return void e.autoUpload(t[0]);},onUploadStart:function(){i.set({status:o,'options.uploading':!0});},onUploadProgress:function(e){i.set({progress:e.percent});},onUploadSuccess:function(){t.uploadSuccCallback({id:i.get('options.video_id')}),i.set({status:r});},onChunkUploadError:function(){alert({type:'error',content:'上传错误\uFF0C请重新上传'});},onUploadError:function(){alert({type:'error',content:'上传错误\uFF0C请重新上传'});},onUploadComplete:function(){i.set('options.uploading',!1),i.uploader.reset();}});},onteardown:function(){if(this.uploader)this.uploader.dispose();},remove:function(){var e=this;if(e.get('options.video_id'))alert({title:'温馨提示',content:'您确认删除吗\uFF1F',buttons:[{text:'确定',type:'primary',action:function(){e.fire('remove',{index:e.get('index')}),this.hide();}},{text:'取消',type:'',action:function(){this.hide();}}]});else e.fire('remove',{index:e.get('index')});},playVideo:function(){var e=this,t='/tcenter/foundation/storage/get-video-info?id='+this.get('options.video_id');$.ajax({url:t,method:'get',success:function(t){if(70==t.data.status)new i({url:t.data.pc_play_url}),e.set('options.cover',t.data.preface_url);else alert({type:'error',content:'视频正在转码中...'});}});}});}),define('userCenter/teacherCenter/classCourseEdit/common/component/editor/Video_css',function(){return".editor-video > .wrapper{position:relative}.editor-video .video{width:244px;height:140px;font-size:16px;margin-left:45px;border:1px solid #ccc}.editor-video .edit-button{background-color:#fff;padding-left:45px;padding:20px 0;}.editor-video .edit-button .icon{font-size:22px;color:#ccc;position:absolute;top:20px;left:15px}.editor-video .edit-button .button-no-video{line-height:120px;color:#ccc}.editor-video .edit-button .button-has-video{border:1px solid #ccc;margin:45px;margin-bottom:55px}.editor-video .edit-button .button-ing-video{border:none;margin:45px;margin-bottom:55px}.editor-video .edit-button .button-remove{float:right;font-size:22px;color:#ccc;margin-right:10px;margin-top:-10px}.editor-video .edit-button .view-video{display:inline-block;}.editor-video .edit-button .view-video .thumbnail-video{position:relative;}.editor-video .edit-button .view-video .thumbnail-video img{width:100%;height:100%}.editor-video .edit-button .view-video .thumbnail-video .video-player{cursor:pointer;}.editor-video .edit-button .view-video .thumbnail-video .video-player .play{width:60px;height:60px;left:50%;top:50%;margin-left:-30px;margin-top:-30px}.editor-video .edit-button .view-video .thumbnail-video .video-player:after{content:'';position:absolute;top:0;left:0;right:0;bottom:0}";}),define('userCenter/teacherCenter/classCourseEdit/common/service_c2a600d2eb',['require','exports','module','../../../common/service_1288b24a55'],function(require,exports){'use strict';function e(e,i){return t.post(e,i).then(null,function(e){if(e.msg)alert({title:'温馨提示',content:e.msg});return e;});}var t=require('../../../common/service_1288b24a55');exports.getVideoUploadUrl=function(e){return t.post('/tcenter/foundation/storage/get-upload-video-url',{filename:e.fileName,total_size:e.fileSize,cdn_host:e.cdnHost,from_type:7,priority:1});},exports.uploadSuccCallback=function(t){return e('/tcenter/foundation/storage/upload-video-callback',{id:t.id});},exports.getVideoResumeUploadUrl=function(t){return e('/video_course/getresumeuploadurl',{user_number:userData.number,video_id:t.videoId});};}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/AddMoreCourses_html',function(){return'<div class="add-more-course"><div class="wrapper"><div class="form inline date-period-form">{{#if options.orgTeachers.length > 0}}<div class="group fluid"><label class="label">授课老师</label><div class="controls"><Select options="{{orgTeachersSelectOptions}}" /></div></div>{{/if}}<div class="group"><label class="label">开课日期</label><div class="controls"><DatePicker options="{{startDatePickerOptions}}" /></div></div><div class="group floated"><label class="label">结课日期</label><div class="controls"><DatePicker options="{{endDatePickerOptions}}" /></div></div></div>{{#each timeTableOptions.timeList:index}}<TimeTable index="{{index}}" options="{{this}}"/>{{/each}}<div class="add-new-lesson" on-click="addSchedule()"><div class="button"><i class="icon icon-plus-o"></i>添加新时间段</div></div><div class="footer"><div class="buttons"><div class="button primary" on-click="save()">保存</div><div class="button secondary" on-click="close()">取消</div></div><div class="block muted small"><i class="icon-exclamation-o"></i>时间冲突时\uFF0C新设置的课程将覆盖教学计划中的原有课程\u3002如果有需要微调的课程\uFF0C请点击\u201C完成\u201D后具体手动调整\u3002</div></div></div><style>{{style}}</style></div>';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/AddMoreCourses_a205132b8d',['require','exports','userCenter/common/filter/formatDateTime_dec0a6129d','./AddSigleCourse_9ae621da65','custom/form/Validator','moment','./AddMoreCourses_html','./AddMoreCourses_css','userCenter/common/component/Select_fea6c25a54','userCenter/common/component/Input_12b813ed72','userCenter/common/component/DatePicker_ce4d436989','./TimeTable_289daa7aa5'],function(require){'use strict';function e(e,t,i){var o=[],e=e.timeList;return $.each(e,function(e,r){for(var a=0;a<=r.weekList.length;a++){var s=r.weekList[a];if(7==s)s=0;var l=t[s];if(l)$.each(l,function(t,a){var s=n.getPlanTime({date:a,hour:r.hour,minute:r.minute,duration:r.duration,teacherId:i});s.index=e,o.push(s);});else;}}),o;}function t(e,t){for(var n={},o=new Date(e),t=new Date(t);o.getTime()<=t.getTime();){if(!n[o.getDay()])n[o.getDay()]=[],n[o.getDay()].push(i(o.getTime(),'YYYY-MM-DD'));else n[o.getDay()].push(i(o.getTime(),'YYYY-MM-DD'));o=r(o).add(1,'d').toDate();}return n;}var i=require('userCenter/common/filter/formatDateTime_dec0a6129d'),n=require('./AddSigleCourse_9ae621da65'),o=require('custom/form/Validator'),r=require('moment'),a=[],s=[];return Ractive.extend({template:require('./AddMoreCourses_html'),data:function(){return{style:require('./AddMoreCourses_css'),timeTableOptions:{timeList:[{hour:'',minute:'',duration:'',weekList:[],isToday:!1,disabled:!0}]},orgTeachersSelectOptions:{name:'orgTeachers',className:'org-teachers-select',defaultText:'请选择主讲老师',data:null,value:''},startDatePickerOptions:{name:'startDate',className:'start-select',value:'',placeholder:'请选择开始时间',disableBefore:new Date(),readonly:!0},endDatePickerOptions:{name:'endDate',className:'end-select',value:'',placeholder:'请选择结束时间',disableBefore:new Date(),readonly:!0},options:{disabled:!0,orgTeachers:[],save:$.noop,close:$.noop,onScheduleAdd:$.noop,onScheduleRemove:$.noop}};},onrender:function(){var e=this,t=e.get('options.orgTeachers');if(t&&0!=t.length){var i=[];$.each(t,function(e,t){if(1==t.is_valid)i.push({value:t.id,text:t.realname});}),e.set('orgTeachersSelectOptions.data',i);}e.on('*.remove',function(t){var i=e.get('timeTableOptions.timeList');if(i.length<=1)alert({title:'温馨提示',content:'只剩下一个时间段了\uFF0C不可以删除'});else{i.splice(t.index,1);var n=e.get('options.onScheduleRemove');if($.isFunction(n))n();}});var n=$(e.getElement());e.validator=new o({mainElement:n,validateOnBlur:!0,fields:{orgTeachers:{rules:{required:!0},errors:{required:'请选择主讲老师'}},startDate:{validateOnBlur:!1,rules:{required:!0},errors:{required:'请输入开始日期'}},endDate:{validateOnBlur:!1,rules:{required:!0},errors:{required:'请输入结束日期'}}}}),e.observe('startDatePickerOptions.value',function(t){if(t){e.isToday();var i=new Date(t);e.set('endDatePickerOptions.disableBefore',i);}}),e.observe('endDatePickerOptions.value',function(t){if(t)if(e.isToday(),e.validateDatePicker()){var i={};$.each(e.get('timeTableOptions.timeList'),function(e){i['timeTableOptions.timeList.'+e+'.disabled']=!1;}),e.set(i);}});},components:{Select:require('userCenter/common/component/Select_fea6c25a54'),Input:require('userCenter/common/component/Input_12b813ed72'),DatePicker:require('userCenter/common/component/DatePicker_ce4d436989'),TimeTable:require('./TimeTable_289daa7aa5')},isToday:function(){var e=this,t=e.get('startDatePickerOptions.value'),n=e.get('endDatePickerOptions.value'),o=i(new Date().getTime(),'YYYY/MM/DD'),r=e.get('timeTableOptions.timeList');if(t==n&&t==o)$.each(r,function(e,t){t.isToday=!0;});else $.each(r,function(e,t){t.isToday=!1;});e.set('timeTableOptions.timeList',r);},validateDatePicker:function(){var e=this;if(!e.validator.validate('startDate')||!e.validator.validate('endDate'))return!1;if(e.get('startDatePickerOptions.value')>e.get('endDatePickerOptions.value'))return alert({title:'温馨提示',content:'开始时间不可以大于结束时间',type:'error'}),!1;else return!0;},addSchedule:function(){var e=this;if(e.validateDatePicker()){var t=e.get('timeTableOptions.timeList');if(t.length<3){if(!e.validator.validate())return;var n={hour:'',minute:'',duration:'',weekList:[],isToday:!1},o=e.get('startDatePickerOptions').value,r=e.get('endDatePickerOptions').value,a=i(new Date().getTime(),'YYYY/MM/DD');if(o==r&&o==a)n.isToday=!0;t.push(n);}else alert({title:'温馨提示',content:'亲\uFF0C一次最多设置3种不同的时间段'});e.set('timeTableOptions.timeList',t);var s=e.get('options.onScheduleAdd');if($.isFunction(s))s();}},getPlanList:function(){var i=this,n=i.get('startDatePickerOptions').value,o=i.get('endDatePickerOptions').value,r=t(n,o),a=i.get('orgTeachersSelectOptions').value,s=e(i.get('timeTableOptions'),r,a),l=i.sortList(s);if(i.validateConflict(l,i.get('timeTableOptions').timeList))return l;else return void 0;},save:function(){var e=this;if(e.validateDatePicker())if(e.validator.validate()){var t=e.get('timeTableOptions'),i=t.timeList,n='';if($.each(i,function(e,t){if(!t.hour||!t.minute||!t.duration||0==t.weekList.length)n='请将信息填写完整才能提交哦';}),n)return void alert({title:'温馨提示',content:n,type:'error'});var o=e.findComponent('TimeTable');if(o.validate()){var r=e.getPlanList();if(r)e.get('options').save(r);}}},sortList:function(e){var t=[];$.map(e,function(e){t.push(e.beginTime);}),t.sort();var i=[];return $.map(e,function(e){for(var n=0,o=t.length;o>n;n++)if(e.beginTime===t[n])if(!i[n]){i[n]=e;break;}}),i;},validateConflict:function(e){if($.each(e,function(t,i){var n=t+1;if(e[n])if(i.endTime<=e[n].beginTime)return!0;else{if(a.push(e[n]),-1==s.indexOf(i.index))s.push(i.index);if(-1==s.indexOf(e[n].index))s.push(e[n].index);}}),0!=a.length){var t=[];$.each(a,function(e,i){var n=new Date(i.beginTime.replace(/-/g,'/')).getDay();if(-1==t.indexOf(n))t.push(n);});var i={0:'周日',1:'周一',2:'周二',3:'周三',4:'周四',5:'周五',6:'周六'},n=[];t=t.sort();var o='';if($.each(t,function(e,t){if(0==t)o=i[t];else n.push(i[t]);}),o)n.push(o);if(s)s=s.sort();if(3==s.length)alert({title:'温馨提示',content:'第1\u30012\u30013个时间段有冲突\uFF0C快检查一下吧'});else alert({title:'温馨提示',content:'第'+(s[0]+1)+'\u3001'+(s[1]+1)+'个时间段在'+n.join('\uFF0C')+'有冲突\uFF0C快检查一下吧'});return s=[],a=[],!1;}else return!0;},close:function(){this.get('options').close();}});}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/AddMoreCourses_css',function(){return'.add-more-course .date-schedule-form{margin-top:10px;padding:14px 0;}.add-more-course .date-schedule-form .group{vertical-align:-webkit-baseline-middle;margin-left:10px;}.add-more-course .date-schedule-form .group.date-list{margin-left:20px;}.add-more-course .date-schedule-form .group.date-list .texts > .text + .text.fluid{margin-top:0}.add-more-course .date-schedule-form .group.delete-group{margin-left:25px}.add-more-course .group{margin-left:10px;}.add-more-course .group.floated{margin-left:185px !important}.add-more-course .group .controls{display:inline-block;}.add-more-course .group .controls .org-teachers-select{width:160px;margin-bottom:20px}.add-more-course .group .controls .minute-select,.add-more-course .group .controls .hour-select{width:80px}.add-more-course .group .controls .duration-select{width:102px}.add-more-course .group .controls .button{background-color:$grey}.add-more-course .group .controls .checkboxes .label{width:30px}.add-more-course .group .label{vertical-align:top}.add-more-course .add-new-lesson{border-top:1px solid #f8f8f8;padding:20px 0;width:124px;}.add-more-course .add-new-lesson .icon-plus-o{padding-right:10px}.add-more-course .icon-exclamation-o{padding-right:10px}.add-more-course .footer{text-align:center;margin:10px 0;}.add-more-course .footer .button{width:120px;height:40px;font-size:16px;line-height:24px}.add-more-course .footer .block{margin:10px}';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/AddSigleCourse_html',function(){return'<div class="add-sigle-course"><div class="wrapper">{{#if options.orgTeachers.length > 0 && !options.isEdit}}<div class="group fluid"><label class="label">授课老师</label><div class="controls"><Select options="{{orgTeachersSelectOptions}}" /></div></div>{{/if}}<div class="group begin"><label class="label">课程日期</label><div class="controls"><DatePicker options="{{timeDatePickerOptions}}" /></div></div><div class="group center"><label class="label">开始时间</label><div class="controls"><div class="dropdowns"><Select options="{{hourSelectOptions}}" /><Select options="{{minuteSelectOptions}}" /></div></div></div><div class="group"><label class="label">课程时长</label><div class="controls"><Select options="{{durationSelectOptions}}" /></div></div>{{#if !options.isEdit}}<div class="group fluid"><label class="label">课节内容</label><div class="controls"><Input options="{{lessonNameInputOptions}}" /></div></div>{{else}}<div class="fluid"><span class="muted">请修改最近一节课的上课时间\uFF0C后续课节会随之自动调整</span></div>{{/if}}<div class="footer"><div class="buttons"><div class="button primary" on-click="save()">{{#if options.isEdit}}确认{{else}}保存{{/if}}</div><div class="button secondary" on-click="close()">取消</div></div></div></div><style>{{style}}</style></div>';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/AddSigleCourse_9ae621da65',['require','exports','cc/function/stringifyDate','userCenter/common/filter/formatDateTime_dec0a6129d','custom/form/Validator','cc/function/autoScrollUp','./AddSigleCourse_html','./AddSigleCourse_css','userCenter/common/component/Select_fea6c25a54','userCenter/common/component/Input_12b813ed72','userCenter/common/component/DatePicker_ce4d436989'],function(require){'use strict';function e(){for(var e=0.5,t=6,i=0.5,n=[],o=e;t>=o;o+=i)if(0.5==o)n.push({value:o,text:'30分钟'}),n.push({value:0.75,text:'45分钟'});else n.push({value:o,text:o+'小时'});return n;}function t(e){var t=0,i=23;if(e)t=e;for(var n=[],o=t;i>=o;o++){if(10>o)o='0'+o;n.push({value:o,text:o});}return n;}function i(e){var t=0,i=55,n=5;if(e){var o=5-e%5;t=e+o;}for(var r=[],a=t;i>=a;a+=n){var s=a;if(10>a)s='0'+a;r.push({value:s,text:s});}return r;}function n(e){var t=e.date.replace(/-/g,'/'),i=t+' '+e.hour+':'+e.minute+':00',n=new Date(i).getTime(),o=c*e.duration,a=r(n+o,'YYYY-MM-DD HH:mm:ss');return{id:e.id,beginTime:r(n,'YYYY-MM-DD HH:mm:ss'),endTime:a,content:e.content,teacherId:e.teacherId};}function o(e){if(e.beginTime&&e.endTime){var t=e.beginTime.replace(/-/g,'/'),i=e.endTime.replace(/-/g,'/'),n=new Date(t),o=new Date(i),a=r(n,'YYYY/MM/DD'),s=n.getHours();if(10>s)s='0'+s;var l=n.getMinutes();if(10>l)l='0'+l;var c=(o-n)/3600000;return{date:a,hour:s,minute:l,duration:c};}}var r=(require('cc/function/stringifyDate'),require('userCenter/common/filter/formatDateTime_dec0a6129d')),a=require('custom/form/Validator'),s=(require('cc/function/autoScrollUp'),1000),l=60*s,c=60*l,u=Ractive.extend({template:require('./AddSigleCourse_html'),data:function(){return{style:require('./AddSigleCourse_css'),timeDatePickerOptions:{name:'time',className:'time-select',value:'',placeholder:'请选择开始时间',disableBefore:new Date(),readonly:!0},hourSelectOptions:{name:'hour',className:'hour-select',defaultText:'小时',data:t(),value:''},minuteSelectOptions:{name:'minute',className:'minute-select',defaultText:'分钟',data:i(),value:''},durationSelectOptions:{name:'duration',className:'duration-select',defaultText:'时长',data:e(),value:''},orgTeachersSelectOptions:{name:'orgTeachers',className:'org-teachers-select',defaultText:'请选择主讲老师',data:null,value:''},lessonNameInputOptions:{name:'lessonName',className:'name-input',value:'',multiple:!0,placeholder:'请输入200字以内(选填)'},editIndex:'',options:{schedules:[],save:$.noop,close:$.noop,item:{},orgTeachers:[],isEdit:''}};},components:{Select:require('userCenter/common/component/Select_fea6c25a54'),Input:require('userCenter/common/component/Input_12b813ed72'),DatePicker:require('userCenter/common/component/DatePicker_ce4d436989')},onrender:function(){var e=this,n=$(e.getElement()),o=e.get('options.item');if(o)e.initSchedules(o);var s=e.get('options.orgTeachers');if(s&&0!=s.length){var l=[];$.each(s,function(e,t){if(1==t.is_valid)l.push({value:t.id,text:t.realname});}),e.set('orgTeachersSelectOptions.data',l);}e.validator=new a({mainElement:n,validateOnBlur:!0,fields:{time:{validateOnBlur:!1,rules:{required:!0},errors:{required:'请输入日期'}},hour:{rules:{required:!0},errors:{required:'请输入小时'}},minute:{rules:{required:!0},errors:{required:'请输入分钟'}},duration:{rules:{required:!0},errors:{required:'请输入时长'}},orgTeachers:{rules:{required:!0},errors:{required:'请选择主讲老师'}},lessonName:{rules:{maxlength:200},errors:{maxlength:'请输入200字以内'}}}});var c=function(){var n=e.get('timeDatePickerOptions.value'),o=e.get('hourSelectOptions.value'),a=e.get('minuteSelectOptions.value'),s={'hourSelectOptions.disabled':!n,'minuteSelectOptions.disabled':!o,'durationSelectOptions.disabled':!a},l=new Date(),c=r(l,'YYYY/MM/DD'),u=n==c,d=l.getHours();if(n&&!o){if(u)o=12>d?12:d;else o=12;s['hourSelectOptions.value']=o;}s['hourSelectOptions.data']=u?t(d):t();var p=l.getMinutes();if(o&&!a){if(u&&d>12)a=p+(5-p%5);else a='00';s['minuteSelectOptions.value']=a,s['durationSelectOptions.value']=1;}s['minuteSelectOptions.data']=u&&o==d?i(p):i(),e.set(s);};e.observe('timeDatePickerOptions.value',c),e.observe('hourSelectOptions.value',c),e.observe('minuteSelectOptions.value',c);},initSchedules:function(e){var t=this,i=t.get('options.schedules');$.each(i,function(i,n){if(n.beginTime==e.beginTime&&n.endTime==e.endTime)t.set('editIndex',i);});var n=o(e),r={};if(n){var a=n.date.replace(/-/g,'/');r['timeDatePickerOptions.value']=a,r['hourSelectOptions.value']=n.hour,r['minuteSelectOptions.value']=n.minute,r['durationSelectOptions.value']=n.duration,r['lessonNameInputOptions.value']=e.content,r['orgTeachersSelectOptions.value']=e.teacherId;}else r['timeDatePickerOptions.value']='',r['hourSelectOptions.value']='',r['minuteSelectOptions.value']='',r['durationSelectOptions.value']='',r['lessonNameInputOptions.value']=e.content,r['orgTeachersSelectOptions.value']=e.teacherId;t.set(r);},save:function(){var e=this;if(e.validator.validate()){var t=e.get('timeDatePickerOptions.value'),i=e.get('hourSelectOptions.value'),o=e.get('minuteSelectOptions.value'),r=e.get('durationSelectOptions.value'),a=e.get('lessonNameInputOptions.value'),s=e.get('orgTeachersSelectOptions.value'),l=e.get('options.item'),c='';if(l)c=l.id?l.id:'';var u={id:c,date:t,hour:i,minute:o,duration:r,content:a,teacherId:s},d=n(u),p=e.get('editIndex');e.get('options').save(d,p);}},close:function(){this.get('options').close();}});return u.getPlanTime=n,u.getDurations=e,u.getHour=t,u.getMinute=i,u;}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/AddSigleCourse_css',function(){return'.classcourse-help-tooltip{width:785px;font-size:14px;line-height:26px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;}.classcourse-help-tooltip:before,.classcourse-help-tooltip:after{left:96% !important;margin-left:-8px !important;border-width:0 8px 8px 8px !important}.classcourse-help-tooltip:before{top:-8px !important}.classcourse-help-tooltip:after{top:-7px !important}.add-sigle-course .group{display:inline-block;margin-top:16px;vertical-align:top;}.add-sigle-course .group.center{margin:0 19px;vertical-align:bottom}.add-sigle-course .group .controls{display:inline-block;}.add-sigle-course .group .controls .org-teachers-select{width:160px}.add-sigle-course .group .controls .minute-select,.add-sigle-course .group .controls .hour-select{width:80px}.add-sigle-course .group .controls .time-select,.add-sigle-course .group .controls .duration-select{width:130px}.add-sigle-course .group .controls .button{background-color:#f8f8f8}.add-sigle-course .group .controls .lessons-select,.add-sigle-course .group .controls .name-input{width:638px}.add-sigle-course .group .label{vertical-align:top}.add-sigle-course .footer{text-align:center;margin:10px 0;}.add-sigle-course .footer .button{width:120px;height:40px;font-size:16px;line-height:24px}';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/PhotoGallery_html',function(){return'<div class="photo-gallery"><div class="wrapper"><ul class="pictures">{{#each imageList}}<li class="picture-item"><div class="image-box"><!-- <img src="{{compressImage(url, 172, 96)}}"> --><img data-src="{{compressImage(url, 172, 96)}}" data-width="172" data-height="96" data-crop="1"/></div><label><input class="text fluid" type="checkbox" checked="{{checked}}"><span class="choose">{{#if checked}}<i class="primary icon icon-check-circle"></i>{{else}}<i class="icon icon-circle"></i>{{/if}}</span></label></li>{{/each}}</ul><div class="buttons"><span class="describtion">封面图最多12张</span><div class="button primary" on-click="save()">确认</div><div class="button secondary" on-click="close()">取消</div></div></div><style>{{style}}</style></div>';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/PhotoGallery_87fe0f9bf4',['require','exports','../service_d104b5ab74','common/lazyImage_92160e3789','./PhotoGallery_html','./PhotoGallery_css'],function(require){'use strict';var e=require('../service_d104b5ab74'),t=require('common/lazyImage_92160e3789');return Ractive.extend({template:require('./PhotoGallery_html'),data:function(){return{style:require('./PhotoGallery_css'),imageList:[],options:{list:[],save:$.noop,close:$.noop}};},components:{},onrender:function(){var i=this,n=[];e.getPhotoGallery().then(function(e){{var o=e.data;i.get('options.list');}$.each(o,function(e,t){var i=!1;n.push({url:t.url,id:t.id,checked:i});}),t.init($('.pictures','.photo-gallery'));}),i.set('imageList',n),i.observe('imageList.*.checked',function(e){var t=i.get('options.list');if(!t)t=[];var n=i.get('imageList');if(e)t.push(n[arguments[3]]);else{var o,r=arguments[3];$.each(t,function(e,t){if(t.id==n[r].id)o=e;}),t.splice(o,1);}i.set('options.list',t);});},save:function(){var e=this,t=e.get('options.list');e.get('options').save(t);},close:function(){this.get('options').close();}});}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/PhotoGallery_css',function(){return'.classcourse-help-tooltip{width:785px;font-size:14px;line-height:26px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;}.classcourse-help-tooltip:before,.classcourse-help-tooltip:after{left:96% !important;margin-left:-8px !important;border-width:0 8px 8px 8px !important}.classcourse-help-tooltip:before{top:-8px !important}.classcourse-help-tooltip:after{top:-7px !important}.photo-gallery{margin-bottom:-10px;}.photo-gallery .wrapper .pictures{background:#f8f8f8;width:785px;height:450px;overflow-y:auto;list-style:none;padding:0;margin-top:0;}.photo-gallery .wrapper .pictures .picture-item{float:left;position:relative;margin-right:19px;}.photo-gallery .wrapper .pictures .picture-item .image-box{width:172px;height:96px;position:relative;margin-top:10px;}.photo-gallery .wrapper .pictures .picture-item .image-box img{position:absolute;top:0;left:0}.photo-gallery .wrapper .pictures .picture-item label{position:absolute;bottom:0;right:0;width:100%;height:100%;}.photo-gallery .wrapper .pictures .picture-item label input{z-index:-1;position:absolute;bottom:0;right:0}.photo-gallery .wrapper .pictures .picture-item label .icon{font-size:22px;}.photo-gallery .wrapper .pictures .picture-item label .icon.icon-circle{color:#fff}.photo-gallery .wrapper .pictures .picture-item label .choose{position:absolute;bottom:5px;right:5px}.photo-gallery .wrapper .buttons{text-align:center;margin-top:15px;padding-right:122px;}.photo-gallery .wrapper .buttons .describtion{font-size:12px;float:left}';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/PreviewDetail_html',function(){return'<div class="preview-detail"><div class="header"><div class="button secondary button-exit" on-click="close()">退出预览</div><div class="tool-bar"><span class="title muted large">样式\uFF1A</span><ul class="tool-bar-list">{{#each colorList:index}}<li class="tool-bar-item"{{#if themeChecked != index}}style="background-color: {{this}}"{{/if}}on-click="set(\'themeChecked\', index)">{{#if themeChecked == index}}<i class="{{#if index == \'white\'}} icon-check{{else}} icon-check-circle{{/if}}"style="{{#if index != \'white\'}}color: {{this}};{{else}}color: #ccc;{{/if}} "></i>{{/if}}</li>{{/each}}</ul></div></div><div class="preview-body {{options.list.style}}">{{#each options.list.list}}{{#if type === \'title\'}}<div class="title">{{options.text}}</div>{{elseif type === \'body\'}}<div class="body" style="color: {{options.color}};font-weight: {{#if options.isBold}}bold{{else}}normal{{/if}};font-size: {{#if options.isBig}}17px{{else}}15px{{/if}};text-align: {{#if options.isCenter}}center{{else}}left{{/if}};">{{{formatText(options.text)}}}</div>{{elseif type === \'image\' && options.url}}<div class="image-box"><img src="{{options.url}}"></div>{{elseif type === \'video\' && options.cover}}<div class="video-box" on-click="playVideo(this)"><img src="{{options.cover}}"><img src="http://img.gsxservice.com/0cms/d/file/content/2016/08/57b5684983da9.png" class="icon play"></div>{{elseif type === \'audio\' && options.url}}<div class="audio-box" on-click="playAudio(this)"><img src="http://img.gsxservice.com/0cms/d/file/content/2016/08/57b693e1e3815.png">{{#if playing}}<img class="icon" src="http://img.gsxservice.com/0cms/d/file/content/2016/08/57b69204a2241.gif">{{else}}<i class="icon icon-recording"></i>{{/if}}</div>{{/if}}{{/each}}<div class="view-audio-wrapper"></div></div><style>{{style}}</style></div>';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/PreviewDetail_24093d7511',['require','exports','userCenter/common/biz/VideoDialog_1e1ff8e0e7','audioPlayer','./PreviewDetail_html','./PreviewDetail_css'],function(require){'use strict';var e=require('userCenter/common/biz/VideoDialog_1e1ff8e0e7'),t=require('audioPlayer'),i={white:'#FFFFFF',black:'#2B2B2B',brown:'#9C2334',pink:'#FECDD1',green:'#53CBC2',blue:'#62C8EB'};return Ractive.extend({template:require('./PreviewDetail_html'),data:function(){return{style:require('./PreviewDetail_css'),colorList:i,formatText:function(e){return e=e.replace(/\n/g,'<br>'),e.replace(/ /g,'&nbsp;');},themeChecked:'white',options:{close:$.noop,list:{style:'',list:{}}}};},onrender:function(){var e=this,i=e.get('options.list.list');$.each(i,function(e,t){if(t.idx=e,'audio'==t.type)t.playing=!1;}),e.set('options.list.list',i),e.bindData({themeChecked:'options.list.style'}),e.observe('themeChecked',function(t){e.set('options.list.style',t);});var n=$(e.getElement());e.audioPlayer=new t({element:n.find('.view-audio-wrapper'),onPlayComplete:function(t){var i=e.get('options.list.list'),t={};$.each(i,function(e,i){if(i.playing)t['options.list.list.'+e+'.playing']=!1;}),e.set(t),e.audioPlayer.stop();}});},close:function(){this.get('options').close();},playVideo:function(t){var i=this,n='/tcenter/foundation/storage/get-video-info?id='+t.options.video_id;$.ajax({url:n,method:'get',success:function(n){if(70==n.data.status){new e({url:n.data.pc_play_url});var o={};o['options.list.list.'+t.idx+'.options.cover']=n.data.preface_url,i.set(o);}else alert({type:'error',content:'视频正在转码中...'});}});},playAudio:function(e){var t=this,i=e.options.url,n={},o=t.get('options.list.list');if($.each(o,function(e,t){if(t.playing)n['options.list.list.'+e+'.playing']=!1;}),e.playing)n['options.list.list.'+e.idx+'.playing']=!1,t.audioPlayer.stop();else n['options.list.list.'+e.idx+'.playing']=!0,t.audioPlayer.play(i);t.set(n);}});}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/PreviewDetail_css',function(){return'.classcourse-help-tooltip{width:785px;font-size:14px;line-height:26px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;}.classcourse-help-tooltip:before,.classcourse-help-tooltip:after{left:96% !important;margin-left:-8px !important;border-width:0 8px 8px 8px !important}.classcourse-help-tooltip:before{top:-8px !important}.classcourse-help-tooltip:after{top:-7px !important}.preview-detail-dialog > .close{display:none}.preview-detail .header{background:#f8f8f8;width:780px;height:80px;}.preview-detail .header .button-exit{float:right;margin-top:20px;margin-right:20px}.preview-detail .header .tool-bar{display:inline-block;padding:10px 20px;}.preview-detail .header .tool-bar .tool-bar-list{display:inline-block;list-style:none;padding:0;vertical-align:middle;}.preview-detail .header .tool-bar .tool-bar-list .tool-bar-item{float:left;background:#f8f8f8;-webkit-border-radius:100px;-moz-border-radius:100px;border-radius:100px;width:30px;height:30px;margin-right:24px;}.preview-detail .header .tool-bar .tool-bar-list .tool-bar-item:first-child{border:1px solid #ededec}.preview-detail .header .tool-bar .tool-bar-list .tool-bar-item .icon-check{font-size:24px;line-height:28px;padding:2px}.preview-detail .header .tool-bar .tool-bar-list .tool-bar-item .icon-check-circle{font-size:30px}.preview-detail .preview-body{width:780px;height:400px;overflow:auto;padding:10px 30px}.preview-body > div{margin-bottom:15px}.preview-body .title{margin:17px auto;font-size:18px;text-align:center}.preview-body .body{word-break:break-word}.preview-body .audio-box{position:relative;max-width:690px;}.preview-body .audio-box .icon{position:absolute;top:26%;left:3%;font-size:20px;width:20px;height:20px;color:#ccc}.preview-body .video-box,.preview-body .image-box{margin:0 auto;text-align:center;}.preview-body .video-box img,.preview-body .image-box img{max-width:720px}.preview-body .video-box{cursor:pointer;position:relative;}.preview-body .video-box .play{width:60px;height:60px;position:absolute;left:50%;top:50%;margin-left:-30px;margin-top:-30px;}.preview-body .video-box .play:after{position:absolute;content:\' \';top:0;left:0;bottom:0;right:0}.black{background-color:#fff;}.black .title{width:226px;height:42px;line-height:42px;color:#fff;background:url("http://img.gsxservice.com/0cms/d/file/content/2016/08/57ba67d77e643.png") no-repeat 50%}.brown{background-color:#8a1f2f;}.brown .title{width:240px;height:44px;line-height:44px;color:#fffcf2;background:url("http://img.gsxservice.com/0cms/d/file/content/2016/08/57ba67d8bcaa7.png") no-repeat 50%}.pink{background-color:#fff4f7;}.pink .title{width:273px;height:40px;line-height:40px;color:#562c11;background:url("http://img.gsxservice.com/0cms/d/file/content/2016/08/57ba67d879811.png") no-repeat 50%}.green{background-color:#fff;}.green .title{width:278px;height:45px;line-height:45px;color:#6d6d6e;background:url("http://img.gsxservice.com/0cms/d/file/content/2016/08/57ba67d840937.png") no-repeat 50%}.blue{background-color:#eeeef0;}.blue .title{width:302px;height:52px;line-height:52px;padding-right:45px;color:#3c3d3d;background:url("http://img.gsxservice.com/0cms/d/file/content/2016/08/57ba67d7e3990.png") no-repeat 50%}';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/RelatedCourse_html',function(){return'<div class="add-related-course">{{#if relatedCourseList}}<ul class="related-course-list">{{#each relatedCourseList:index}}{{#if item.cover_url}}<li class="related-course-item"><img src="{{compressImage(item.cover_url, 200, 137)}}"><div class="content"><label><input class="text check-input" type="checkbox" checked="{{checked}}"><span class="choose">{{#if checked}}<i class="primary icon-check-circle"></i>{{/if}}</span></label><div class="title">{{item.display_name}}</div><div class="muted">{{item.type_cn}}</div>{{#if item.price_human}}<div class="price primary"><span class="now-price">{{#if item.price_human == 0}}免费{{else}}{{item.price_human}}{{/if}}</span></div>{{/if}}</div></li>{{/if}}{{/each}}</ul>{{else}}<div class="nodata">{{#if hasComputed}}您还没有招生中的课程{{else}}加载中...{{/if}}</div>{{/if}}<div class="footer buttons"><span class="small error intro">最多选择 3 门推荐课程</span>{{#if relatedCourseList.length > 0}}<div class="button primary before" on-click="save()">保存</div>{{/if}}<div class="button secondary" on-click="close()">取消</div></div><style>{{style}}</style></div>';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/RelatedCourse_c63cd7f5e5',['require','exports','../service_d104b5ab74','./RelatedCourse_html','./RelatedCourse_css'],function(require){'use strict';var e=require('../service_d104b5ab74');return Ractive.extend({template:require('./RelatedCourse_html'),data:function(){return{style:require('./RelatedCourse_css'),relatedCourseList:null,hasComputed:!1,options:{item:[],save:$.noop,close:$.noop}};},components:{},onrender:function(){var t=this;e.getRelatedCourse().then(function(e){if(0==e.code){var i=[],n=e.data;$.each(n,function(e,n){var o=!1,r=t.get('options.item');if(!r)r={};if($.each(r,function(e,t){if(n.number==t.number)o=!0;}),!o)i.push({item:n,checked:!1});}),t.set({hasComputed:!0,relatedCourseList:i});}}),t.observe('relatedCourseList.*.checked',function(e){var i=t.get('options.item');if(!i)i=[];var n=t.get('relatedCourseList');if(e)i.push(n[arguments[3]]);else{var o=[];$.each(i,function(e,t){if(t.checked)o.push(t);}),i=o;}t.set('options.item',i);});},save:function(){var e=this.get('options.item');this.get('options').save(e);},close:function(){this.get('options').close();}});}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/RelatedCourse_css',function(){return'.classcourse-help-tooltip{width:785px;font-size:14px;line-height:26px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;}.classcourse-help-tooltip:before,.classcourse-help-tooltip:after{left:96% !important;margin-left:-8px !important;border-width:0 8px 8px 8px !important}.classcourse-help-tooltip:before{top:-8px !important}.classcourse-help-tooltip:after{top:-7px !important}.add-related-course .related-course-list{list-style:none;background-color:#f8f8f8;width:750px;height:468px;padding:17px;overflow-y:auto;}.add-related-course .related-course-list .related-course-item{padding:15px 5px;}.add-related-course .related-course-list .related-course-item > img{display:inline-block}.add-related-course .related-course-list .related-course-item .content{display:inline-block;width:475px;height:140px;vertical-align:top;padding:0 15px;position:relative;}.add-related-course .related-course-list .related-course-item .content > div{line-height:28px}.add-related-course .related-course-list .related-course-item .content .price{font-size:16px;}.add-related-course .related-course-list .related-course-item .content .price.free{color:#1db954}.add-related-course .related-course-list .related-course-item .content > label{position:absolute;top:0;right:-17px;margin-top:-15px;width:701px;height:173px;}.add-related-course .related-course-list .related-course-item .content > label .check-input{position:absolute;right:14px;top:41%}.add-related-course .related-course-list .related-course-item .content > label .choose{background-color:#fff;border:1px solid #ededec;width:25px;height:25px;-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;display:inline-block;position:absolute;left:95%;top:38%;}.add-related-course .related-course-list .related-course-item .content > label .choose .icon-check-circle{font-size:24px}.add-related-course .related-course-list .related-course-item:hover{background-color:#ededec;padding:15px 5px}.add-related-course .footer{text-align:center;margin-top:15px;}.add-related-course .footer .intro{line-height:36px;float:left}.add-related-course .footer .before{margin-left:-60px}.add-related-course .nodata{background-color:#f8f8f8;width:750px;height:468px;margin-bottom:17px;text-align:center;font-size:17px;color:#6d6d6e;line-height:468px}';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/SubjectSelector_html',function(){return'<div class="subject-selector"><div class="suggestion">{{#if recommendClassify}}<div class="labels recommend-classify">{{#each recommendClassify}}<div class="label link{{#if options.id == id}} active{{/if}}" on-click="selectHistorySubject(this)">{{path_crumbs}}</div>{{/each}}</div>{{/if}}{{#if courseClassifyList}}<div class="classifyMenu">{{#if courseClassifyList.classifyListOne || courseClassifyList.classifyListTwo || courseClassifyList.classifyListThree }}<div class="row">{{#each courseClassifyList.classifyListOne}}<div class="classify-item{{#if chooseClassifyId.Id == id}} active{{/if}}" on-click="checkOneClassify(this)">{{name}}</div>{{/each}}</div><div class="row">{{#each courseClassifyList.classifyListTwo[chooseClassifyId.Id]}}<div class="classify-item{{#if chooseClassifyId.twoId == id}} active{{/if}}" on-click="checkTwoClassify(this)">{{name}}</div>{{/each}}</div><div class="row">{{#each courseClassifyList.classifyListThree[chooseClassifyId.twoId]}}<div class="classify-item{{#if options.id == id}} active{{/if}}" on-click="checkThreeClassify(this)">{{name}}</div>{{/each}}</div>{{else}}<div class="clospan">未找到搜索结果\uFF0C您可以换个词重新查询或者在<span on-click="blankSearch()">全部类目</span>中选择相近的类目</div>{{/if}}</div>{{/if}}</div><div class="input-group fluid"><Input options="{{courseClassifyOptions}}" on-enter="searchByEnter" /><div class="button primary floated" on-click="search()"><i class="icon-search-o"></i></div></div><style>{{style}}</style></div>';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/SubjectSelector_9384ba0ad1',['require','exports','module','../service_d104b5ab74','cc/function/autoScrollUp','./SubjectSelector_html','./SubjectSelector_css','../../../../common/component/SubjectSelect_fb875b704e','../../../../common/component/Input_12b813ed72'],function(require){'use strict';function e(e){var t=[],i=[],n=[];return $.each(e,function(e,o){t.push({id:o.id,name:o.name,parentId:o.parent_id}),$.each(o.children,function(e,t){var r=[];if(r.push({id:t.id,name:t.name,parentId:t.parent_id}),!i[o.id])i[o.id]=r;else i[o.id]=i[o.id].concat(r);$.each(t.children,function(e,i){var o=[];if(o.push({id:i.id,name:i.name,parentId:i.parent_id}),!n[t.id])n[t.id]=o;else n[t.id]=n[t.id].concat(o);});});}),{classifyListOne:t,classifyListTwo:i,classifyListThree:n};}var t=require('../service_d104b5ab74'),i=require('cc/function/autoScrollUp');return Ractive.extend({template:require('./SubjectSelector_html'),data:function(){return{style:require('./SubjectSelector_css'),subjectName:'',oneName:'',twoName:'',courseClassifyOptions:{name:'classify',value:'',placeholder:'输入关键词快速查找分类',className:'course-classify fluid'},courseClassifyList:{classifyListOne:null,classifyListTwo:null,classifyListThree:null},chooseClassifyId:{Id:'',twoId:''},recommendClassify:'',options:{id:'',name:'',hidden:!1,path_array:[]}};},components:{SubjectSelect:require('../../../../common/component/SubjectSelect_fb875b704e'),Input:require('../../../../common/component/Input_12b813ed72')},onrender:function(){var n=this,o=$(n.getElement());n.observe('options.hidden',function(e){if(e===!1)o.find('.row').each(function(){var e=$(this);i(e,e.find('.active'));});}),t.getHistorySubject().then(function(e){n.set('recommendClassify',e.data);}),t.getSubjectList({keyword:''}).then(function(t){var i={courseClassifyList:e(t.data)};n.defaultChoose(),$.each(n.get('options.path_array'),function(e,t){if(0==e)i['chooseClassifyId.Id']=t.id;else if(1==e)i['chooseClassifyId.twoId']=t.id;}),n.set(i);}),n.on('searchByEnter',function(){n.search();});},checkOneClassify:function(e){var t=this;t.set({'chooseClassifyId.Id':e.id,'chooseClassifyId.twoId':'',oneName:e.name});var i=t.get('courseClassifyList'),n=i.classifyListTwo;if(n)t.checkTwoClassify(n[e.id][0]);},checkTwoClassify:function(e){var t=this,i=t.get('oneName')+'>'+e.name;t.set({'chooseClassifyId.twoId':e.id,twoName:i});},checkThreeClassify:function(e){var t=this,i=t.get('twoName')+'>'+e.name,n=e.id;t.set({'options.id':n,'options.name':i}),t.fire('selectSubject',{id:n,subject:i});},selectSubject:function(e){var t=this,i='';i=e.name+'>'+e.children[0].name+'>'+e.children[0].children[0].name;var n=e.children[0].children[0].id;t.set({'options.id':n,'options.name':i}),t.fire('selectSubject',{subject:i});},selectHistorySubject:function(e){var t=this,i=e.path_crumbs;t.set({'options.id':e.id,'options.name':i}),t.fire('selectSubject',{subject:i});},search:function(){var i=this;t.getSubjectList({keyword:i.get('courseClassifyOptions.value')}).then(function(t){i.set({courseClassifyList:e(t.data)}),i.defaultChoose();});},defaultChoose:function(){var e=this,t=e.get('courseClassifyList'),i=t.classifyListOne,n=t.classifyListTwo;if(i){e.checkOneClassify(i[0]);var o=i[0].id;if(n)e.checkTwoClassify(n[o][0]);}},blankSearch:function(){var i=this;t.getSubjectList({keyword:''}).then(function(t){i.set({'courseClassifyOptions.value':''}),i.set({courseClassifyList:e(t.data)}),i.defaultChoose();});}});}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/SubjectSelector_css',function(){return'.classcourse-help-tooltip{width:785px;font-size:14px;line-height:26px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;}.classcourse-help-tooltip:before,.classcourse-help-tooltip:after{left:96% !important;margin-left:-8px !important;border-width:0 8px 8px 8px !important}.classcourse-help-tooltip:before{top:-8px !important}.classcourse-help-tooltip:after{top:-7px !important}.subject-selector{background-color:#fff;padding:25px;border:1px solid #ededec;border-top:none;}.subject-selector .suggestion .recommend-classify .label{width:49%;margin-bottom:14px;padding:13px;text-align:center;background-color:#f8f8f8}.subject-selector .suggestion .recommend-classify .active{background-color:#f90;color:#fff}.subject-selector .suggestion .recommend-classify .label:nth-child(odd){margin-left:0}.subject-selector .suggestion .classifyMenu{font-size:14px;color:#3c3c3d;}.subject-selector .suggestion .classifyMenu .row{display:inline-block;width:200px;height:278px;background-color:#f8f8f8;vertical-align:top;margin-right:20px;padding:10px 0;overflow-y:auto;overflow-x:hidden;position:relative;}.subject-selector .suggestion .classifyMenu .row:last-child{margin-right:0}.subject-selector .suggestion .classifyMenu .row .classify-item{width:190px;height:30px;line-height:30px;padding:0 20px;overflow:hidden;}.subject-selector .suggestion .classifyMenu .row .classify-item:hover{background-color:#ffcd7a}.subject-selector .suggestion .classifyMenu .row .classify-item.active{color:#fff;background-color:#ffcd7a}.subject-selector .suggestion .classifyMenu .clospan{background-color:#f8f8f8;height:278px;text-align:center;padding-top:125px;}.subject-selector .suggestion .classifyMenu .clospan span{color:#3383fb;cursor:pointer}.subject-selector .suggestion .menu{text-align:left;}.subject-selector .suggestion .menu > div{margin-bottom:10px}.subject-selector .suggestion .menu .less{background:#f8f8f8;padding:16px;font-size:14px;}.subject-selector .suggestion .menu .less .true-word{display:inline-block;width:80px}.subject-selector .input-group{margin-top:30px;}.subject-selector .input-group .floated{right:0;top:0}';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/TimeTable_html',function(){return'<div class="form inline date-schedule-form"><div class="group"><label class="label">开始时间</label><div class="controls texts"><div class="dropdowns"><Select options="{{hourSelectOptions}}" /><Select options="{{minuteSelectOptions}}" /></div></div></div><div class="group"><label class="label">课程时长</label><div class="controls"><Select options="{{durationSelectOptions}}" /></div></div><div class="group date-list"><div class="controls"><div class="checkboxes">{{#each dateList}}<label class="label checkbox texts"><span class="text">{{text}}</span><input class="text fluid" type="checkbox" checked="{{checked}}"{{#if options.disabled}} disabled{{/if}}></label>{{/each}}{{#if errorContent}}<div class="tooltip error right" data-error-for="startDate" style="position: absolute; display: inline-block; width: 131px; left: 188px; top: -4px;">   {{errorContent}}</div>{{/if}}</div></div></div><div class="group delete-group info"><div class="controls"><label class="label button" on-click="remove()">删除<br>时段</label></div></div></div>';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/common/TimeTable_289daa7aa5',['require','exports','custom/form/Validator','./AddSigleCourse_9ae621da65','./TimeTable_html','userCenter/common/component/Select_fea6c25a54','userCenter/common/component/Input_12b813ed72'],function(require){'use strict';var e=require('custom/form/Validator'),t=require('./AddSigleCourse_9ae621da65'),i=1,n=2,o=3,r=4,a=5,s=6,l=7,c=-1,u=[{text:'周一',value:i},{text:'周二',value:n},{text:'周三',value:o},{text:'周四',value:r},{text:'周五',value:a},{text:'周六',value:s},{text:'周日',value:l},{text:'全选',value:c}],d=Ractive.extend({template:require('./TimeTable_html'),data:function(){return{index:'',errorContent:'',dateList:$.map(u,function(e){return{text:e.text,value:e.value,checked:!1};}),hourSelectOptions:{name:'hour',className:'hour-select text',defaultText:'小时',data:t.getHour(),value:''},minuteSelectOptions:{name:'minute',className:'minute-select text',defaultText:'分钟',data:t.getMinute(),value:'',disabled:!0},durationSelectOptions:{name:'duration',className:'duration-select',defaultText:'时长',data:t.getDurations(),value:'',disabled:!0},options:{hour:'',minute:'',duration:'',weekList:[],isToday:!1,disabled:!1}};},onrender:function(){var i=this,n=$(i.getElement());i.validator=new e({mainElement:n,fields:{hour:{rules:{required:!0},errors:{required:'请选择开始小时'}},minute:{rules:{required:!0},errors:{required:'请选择开始分钟'}},duration:{rules:{required:!0},errors:{required:'请选择课程时长'}}}}),i.bindData({'hourSelectOptions.value':'options.hour','minuteSelectOptions.value':'options.minute','durationSelectOptions.value':'options.duration','hourSelectOptions.disabled':'options.disabled'});var o=function(){var e=i.get('options.isToday'),n=!i.get('options.disabled'),o=i.get('hourSelectOptions.value'),r=i.get('minuteSelectOptions.value'),a={'hourSelectOptions.disabled':!n,'minuteSelectOptions.disabled':!n||!o,'durationSelectOptions.disabled':!n||!r},s=new Date(),l=s.getHours(),c=s.getMinutes();if(n&&!o){if(e)o=12>l?12:l;else o=12;a['hourSelectOptions.value']=o;}if(a['hourSelectOptions.data']=e?t.getHour(l):t.getHour(),o&&!r){if(e&&l>12)r=c+(5-c%5);else r='00';a['minuteSelectOptions.value']=r,a['durationSelectOptions.value']=1;}a['minuteSelectOptions.data']=e&&o==l?t.getMinute(c):t.getMinute(),i.set(a);};i.observe('options.isToday',o),i.observe('options.disabled',o),i.observe('hourSelectOptions.value',o),i.observe('minuteSelectOptions.value',o),i.observe('dateList.*.checked',function(e){if(e&&7==arguments[3])i.set('dateList.*.checked',!0);else if(!e&&7==arguments[3])i.set('dateList.*.checked',!1);if(!e&&7!=arguments[3])i.set('dateList.7.checked',!1);var t=[];$.each(i.get('dateList'),function(e,i){if(i.checked)t.push(i.value);}),i.set('options.weekList',t);});},components:{Select:require('userCenter/common/component/Select_fea6c25a54'),Input:require('userCenter/common/component/Input_12b813ed72')},validate:function(){var e=this;if(e.validator.validate(!0))if(!e.get('options.weekList').length)return e.set('errorContent','请填写时间段'),!1;else return!0;},remove:function(){var e=this;e.fire('remove',{index:e.get('index')});}});return d.dateList=u,d;}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/component/OfflineCourseTemplate_html',function(){return'<div class="course-template"><div class="wrapper"><div class="header"><div class="help texts"data-title="<span>根据您的课程科目\u3001课程详情内容\uFF0C选择合适的模板会使课程主页更加美观和优雅</span>" data-skin="primary classcourse-help-tooltip" data-placement="bottomLeft" data-offset-x="90"><i class="text primary icon-help-o"></i><span class="text">帮助信息</span></div><div class="title">模板选择</div></div><div class="template-editor"><div class="tabs primary"><div class="tab{{#if checkedIndex == 0}} checked{{/if}}"on-click="set(\'checkedIndex\', 0)">网页模板</div><div class="tab{{#if checkedIndex == 1}} checked{{/if}}"on-click="set(\'checkedIndex\', 1)">手机模板</div></div><div class="template-images">{{#each template.data:index}}<div class="template-card{{#if options.templateCheckedPc == name && checkedIndex == 0}} active{{/if}}{{#if options.templateCheckedM == name && checkedIndex == 1}} active{{/if}}{{#if defaultTemplate && index == 0}} active{{/if}}" on-click="chooseTemplate(this)"><img class="image" src="{{compressImage(image, 200, 127)}}"><span class="name">{{name_cn}}</span></div>{{/each}}</div></div></div><style>{{style}}</style></div>';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/component/OfflineCourseTemplate_4c7b926090',['require','exports','module','../service_d104b5ab74','../../../../common/function/renderImage_b12a57d1e9','./OfflineCourseTemplate_html','./OfflineCourseTemplate_css'],function(require){'use strict';function e(e){if(0==r)alert({title:'温馨提示',content:e.content,width:382,skinClass:'vip-dialog',buttons:[{text:'立即开通',type:'error',action:function(){location.href='/teacher_center/vip_center',this.hide();}},{text:'了解详情',type:'default',action:function(){location.href='/teacher_center/vip_detail?type=pageDress',this.hide();}}]});else alert({title:'温馨提示',content:e.content,width:382,skinClass:'vip-dialog',buttons:[{text:'我知道了',type:'error',action:function(){this.hide();}}]});return!1;}var t=require('../service_d104b5ab74'),i=require('../../../../common/function/renderImage_b12a57d1e9'),n={},o={},r='';return Ractive.extend({template:require('./OfflineCourseTemplate_html'),data:function(){return{style:require('./OfflineCourseTemplate_css'),checkedIndex:0,defaultTemplate:!0,template:{data:null,checkedName:''},options:{templatePc:null,templateM:null,templateCheckedPc:'skin101',templateCheckedM:'orange'}};},onrender:function(){i();var e=this;if(e.get('options.templateCheckedPc')||e.get('options.templateCheckedM'))e.set('defaultTemplate',!1);var t=e.get('options.templatePc'),r=e.get('options.templateM');$.each(t,function(e,t){n[t.name]=t.vip_level;}),$.each(r,function(e,t){o[t.name]=t.vip_level;}),e.observe('checkedIndex',function(i){var n={};if(0==i)n={data:t,checkedName:'PC'};else n={data:r,checkedName:'M'};e.set('template',n);}),e.observe('options.templateCheckedPc',function(t){if(t)e.set('defaultTemplate',!1);}),e.observe('options.templateCheckedM',function(t){if(t)e.set('defaultTemplate',!1);});},chooseTemplate:function(e){var t=this;if('PC'==t.get('template.checkedName'))t.set('options.templateCheckedPc',e.name);else t.set('options.templateCheckedM',e.name);},validate:function(){var i=this;t.getUserBasicInfo().then(function(e){r=e.data.org_id;});var a=userData.vip_level,s=i.get('options.templateCheckedPc')?i.get('options.templateCheckedPc'):'default',l=i.get('options.templateCheckedM')?i.get('options.templateCheckedM'):'default',c=n[s],u='',d=o[l];if(a<n[s]){if('0'==r){if('1'==c)u='您选择的网页模板为会员模板\uFF0C开通会员后即可使用\uFF0C会员还可享有优先推荐获得更多生源哦~';else if('2'==c)u='您选择的网页模板为高级会员模板\uFF0C开通高级会员后即可使用\uFF0C会员还可享有优先推荐获得更多生源哦~';else if('3'==c)u='您选择的网页模板为超级会员模板\uFF0C开通超级会员后即可使用\uFF0C会员还可享有优先推荐获得更多生源哦~';}else if('1'==c)u='您选择的网页模板为会员模板\uFF0C请联系机构开通会员\u3002';else if('2'==c)u='您选择的网页模板为高级会员模板\uFF0C请联系机构开通高级会员\u3002';else if('3'==c)u='您选择的网页模板为超级会员模板\uFF0C请联系机构开通超级会员\u3002';return e({content:u}),!1;}if(a<o[l]){if('0'==i.get('org_id')){if('1'==d)u='您选择的手机模板为会员模板\uFF0C开通会员后即可使用\uFF0C会员还可享有优先推荐获得更多生源哦~';else if('2'==d)u='您选择的手机模板为高级会员模板\uFF0C开通高级会员后即可使用\uFF0C会员还可享有优先推荐获得更多生源哦~';else if('3'==d)u='您选择的手机模板为超级会员模板\uFF0C开通超级会员后即可使用\uFF0C会员还可享有优先推荐获得更多生源哦~';}else if('1'==d)u='您选择的手机模板为会员模板\uFF0C请联系机构开通会员\u3002';else if('2'==d)u='您选择的手机模板为高级会员模板\uFF0C请联系机构开通高级会员\u3002';else if('3'==d)u='您选择的手机模板为超级会员模板\uFF0C请联系机构开通超级会员\u3002';return e({content:u}),!1;}return!0;}});}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/component/OfflineCourseTemplate_css',function(){return'.classcourse-help-tooltip{width:785px;font-size:14px;line-height:26px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;}.classcourse-help-tooltip:before,.classcourse-help-tooltip:after{left:96% !important;margin-left:-8px !important;border-width:0 8px 8px 8px !important}.classcourse-help-tooltip:before{top:-8px !important}.classcourse-help-tooltip:after{top:-7px !important}.course-template > .wrapper{width:835px;padding:25px;background-color:#fff;border:1px solid #ededec;color:#6d6d6e;}.course-template > .wrapper .header .title{font-size:16px}.course-template > .wrapper .header .help{float:right;font-size:12px}.course-template > .wrapper .template-images{margin-top:16px;}.course-template > .wrapper .template-images .template-card{width:202px;margin-right:14px;display:inline-block;text-align:center;}.course-template > .wrapper .template-images .template-card .image{width:100%;border:2px solid transparent;height:127px}.course-template > .wrapper .template-images .template-card .name{font-size:14px;color:#6d6d6e}.course-template > .wrapper .template-images .template-card.active .image,.course-template > .wrapper .template-images .template-card:hover .image{border-color:#f90}.course-template > .wrapper .template-editor{margin-top:15px;}.course-template > .wrapper .template-editor .tabs > .tab{font-weight:normal !important;}.course-template > .wrapper .template-editor .tabs > .tab:first-child{padding-left:0}';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/component/OfflineCoverEdit_html',function(){return'<div class="cover"><div class="wrapper"><div class="header"><div class="help texts"data-title="<ul class=\'texts\'><li class=\'text fluid\'>您可以上传展示教学场地\u3001作品或其他能体现课程特色的高质量照片\uFF0C这有助于给学生留下良好的心理印象</li><li class=\'text fluid\'>精美的封面图片会获得包括聚惠学在内的更多展示机会<br />请上传不超过5M\u3001格式为jpg\u3001jpeg\u3001png的图片\uFF0C最多上传12张封面\uFF0C注意不能出现广告信息和水印哦\uFF01</li><li class=\'text fluid texts\'><span class=\'muted small\'>参考示例</span><div class=\'images text fluid\'><img class=\'image\' src=\'http://img.gsxservice.com/0cms/d/file/content/2016/07/578c45f511420.png@1e_173w_98h_1c_0i_1o_90Q_1x.jpeg\'><img class=\'image\' src=\'http://img.gsxservice.com/0cms/d/file/content/2016/07/578c45f55c676.png@1e_173w_98h_1c_0i_1o_90Q_1x.jpeg\'><img class=\'image\' src=\'http://img.gsxservice.com/0cms/d/file/content/2016/07/578c45f5b34e0.png@1e_173w_98h_1c_0i_1o_90Q_1x.jpeg\'><img class=\'image\' src=\'http://img.gsxservice.com/0cms/d/file/content/2016/07/578c45f5d834a.png@1e_173w_98h_1c_0i_1o_90Q_1x.jpeg\'></div><div class=\'images text fluid\'><img class=\'image\' src=\'http://img.gsxservice.com/0cms/d/file/content/2016/07/578c45f610085.png@1e_173w_98h_1c_0i_1o_90Q_1x.jpeg\'><img class=\'image\' src=\'http://img.gsxservice.com/0cms/d/file/content/2016/07/578c45f6308f9.png@1e_173w_98h_1c_0i_1o_90Q_1x.jpeg\'><img class=\'image\' src=\'http://img.gsxservice.com/0cms/d/file/content/2016/07/578c45f661e85.png@1e_173w_98h_1c_0i_1o_90Q_1x.jpeg\'><img class=\'image\' src=\'http://img.gsxservice.com/0cms/d/file/content/2016/07/578c45f682e31.png@1e_173w_98h_1c_0i_1o_90Q_1x.jpeg\'></div></li></ul>" data-skin="primary classcourse-help-tooltip" data-placement="bottomLeft" data-offset-x="90"><i class="text primary icon-help-o"></i><span class="text">帮助信息</span></div><div class="title">课程封面</div></div><div class="cover-editor">{{#each options.list:index}}<div class="cover-item"><div class="cover-handler"><div class="cover-wrapper"><img src="{{compressImage(url, 242, 136)}}" draggable="false"><div class="delete-icon" on-click="deleteItem(index)"><i class="button icon icon-trash"></i></div></div></div></div>{{/each}}{{#if showButton}}<span class="button upload-wrapper" on-click="uploadCover()"><i class="icon-plus fluid muted"></i><span class="text">添加课程封面</span></span>{{/if}}</div></div><style>{{style}}</style></div>';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/component/OfflineCoverEdit_41eeeb9853',['require','exports','module','custom/helper/Draggable','cc/util/rect','cc/function/position','cc/function/waitPromises','userCenter/teacherCenter/videoCourseEdit/component/VideoCropDialog_ccea4c99f9','../common/PhotoGallery_87fe0f9bf4','userCenter/common/function/ractiveDialog_e00233834c','./OfflineCoverEdit_html','./OfflineCoverEdit_css'],function(require){'use strict';var e=require('custom/helper/Draggable'),t=require('cc/util/rect'),i=require('cc/function/position'),n=require('cc/function/waitPromises'),o=require('userCenter/teacherCenter/videoCourseEdit/component/VideoCropDialog_ccea4c99f9'),r=require('../common/PhotoGallery_87fe0f9bf4'),a=require('userCenter/common/function/ractiveDialog_e00233834c');return Ractive.extend({template:require('./OfflineCoverEdit_html'),data:function(){return{style:require('./OfflineCoverEdit_css'),showButton:!0,options:{list:[]}};},onrender:function(){var o=this;if(o.get('options.list').length>=12)o.set('showButton',!1);var r,a,s,l,c,u,d,p=$(o.getElement()),f='.cover-handler',m='active',h='brother',v='active-parent',g=function(){l=s=null,u=p.find(f),d=t.makeRectList(u);};g(),o.draggable=new e({mainElement:p,mainSelector:f,excludeSelector:['.draggable-icon'],draggingClass:'dragging',ondrag:function(e,i){var n={left:i.left,top:i.top,width:d[l].width,height:d[l].height},r=t.sortByIntersectionArea(n,d);if('number'===$.type(s))u.eq(s).removeClass(h);var a=r[0].index!==l?r[0]:r[1];if(a&&o.isDraggable(a.index)){var c=n.width*n.height;if(c>0&&a.area/c>0.1)return s=a.index,void u.eq(s).addClass(h);}s=null;},onpick:function(e,t){if(!r){a=t.mainElement,a.addClass(m),a.width(a.width());var i=a.closest('.cover-item');i.addClass(v).height(i.height()),g();}},ondrop:function(e,t){if(!r){a=t.mainElement,a.removeClass(m),a.width(a.width());var i=a.closest('.cover-item');i.removeClass(v).height('');}},onbeforedrag:function(e,t){if(l=u.index(a),r||!o.isDraggable(l))return!1;else return c=t,void(s=null);},onafterdrag:function(){if(null==s)s=l;var e={position:'',left:'',top:''},t=300,d='easeOutQuad',p=[],f=[],m={};if(s!==l){if(l>s){m[l]=s;for(var v=s;l>v;v++)m[v]=v+1;}else{m[l]=s;for(var v=l+1;s>=v;v++)m[v]=v-1;}var b={};b[l]=c;var x=function(e){var t=b[e];if(!t)t=i(u.eq(e)),b[e]=t;return t;};$.each(m,function(i,n){p.push(i),$.each(p,function(e,t){u.eq(t).width(u.eq(t).width());});var o=$.Deferred();f.push(o);{var r=u.eq(n),a=x(n),s=r.parent(),c={left:a.left,top:a.top},m=u.eq(i),v=x(i);({left:v.left,top:v.top});}if(i!=l)m.css(v);m.animate(c,t,d,function(){m.css(e).removeClass(h),s.append(m),o.resolve();});});}else{p.push(l);var y=$.Deferred();f.push(y),a.animate({left:c.left,top:c.top},t,d,function(){a.css(e),y.resolve();});}var C={};$.each(p,function(e,t){C['options.list.'+t+'.animating']=!0;}),o.set(C),r=!0,n(f,function(){var e=o.get('options.list');$.each(p,function(t,i){e[i].animating=!1;});var t=[];$.each(e,function(e,i){if(null!=m[e])t[m[e]]=i;else t[e]=i;}),e.splice(0,e.length),e.push.apply(e,t),r=!1,g();});}});},isDraggable:function(e){if(0>e)return!1;var t=this.get('options.list');if(t[e].animating)return!1;for(var i=0,n=t.length;n>i;i++)if(t[i].uploading)return!1;return!0;},uploadCover:function(){var e=this;alert({title:'温馨提示',content:'请选择上传方式',buttons:[{text:'图片库',type:'primary',action:function(){this.hide();var t=a(r,{title:'图片库',skinClass:'photo-gallery'},{save:function(i){var n=e.get('options.list'),o=n.length;if(!n)n=[];$.each(i,function(e,t){n.push({url:t.url,id:t.id});});var r=[],a=!1;$.each(n,function(e,t){if(-1!=r.indexOf(t.id))a=!0;else r.push(t.id);});var s=n.length;if(!a){if(n.length<=12)e.set({'options.list':n}),t.hide();else n.splice(o,s-o),a=!1,r=[],alert({title:'温馨提示',content:'最多上传12张哦'});if(12==n.length)e.set({showButton:!1});}else n.splice(o,s-o),a=!1,r=[],alert({title:'温馨提示',content:'您有图片上传重复了,请重新上传吧'});},close:function(){t.hide();}});}},{text:'本地上传',type:'info',action:function(){this.hide();var t=o({onUploadComplete:function(i){if(!i.code){{var n=e.get('options.list');n.length;}if(!n)n=[];if(n.length<=11)n.push({url:i.data.url,id:i.data.id}),t.hide();if(12==n.length)e.set({showButton:!1});}}});t.show();}}]});},deleteItem:function(e){var t=this,i=t.get('options.list');if(i.length<=1)return void alert({title:'温馨提示',content:'至少有一张图片作为封面'});if(i.splice(e,1),i.length<12)t.set({showButton:!0,'options.list':i});},getData:function(){var e=this,t={};return t.covers=[],t.cover_storage_ids=[],$.each(e.get('options.list'),function(e,i){t.covers.push({storage_id:i.id,url:i.url}),t.cover_storage_ids.push(i.id);}),t;}});}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/component/OfflineCoverEdit_css',function(){return".classcourse-help-tooltip{width:785px;font-size:14px;line-height:26px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;}.classcourse-help-tooltip:before,.classcourse-help-tooltip:after{left:96% !important;margin-left:-8px !important;border-width:0 8px 8px 8px !important}.classcourse-help-tooltip:before{top:-8px !important}.classcourse-help-tooltip:after{top:-7px !important}.cover{width:835px;padding:25px;background-color:#fff;border:1px solid #ededec;color:#6d6d6e;margin-top:20px;}.cover .header .title{font-size:20px;}.cover .header .title:before{content:' ';background-color:#6d6d6e;-webkit-border-radius:37px;-moz-border-radius:37px;border-radius:37px;display:inline-block;width:5px;height:16px;margin-right:10px}.cover .header .help{float:right;font-size:12px}.cover .cover-editor{margin-top:30px;}.cover .cover-editor .upload-wrapper{background-color:#f8f8f8;border:1px solid #ededec;width:242px;height:136px;padding:25px;margin-right:15px;}.cover .cover-editor .upload-wrapper .icon-plus{font-size:30px;padding:10px}.cover .cover-editor .upload-wrapper:hover{background-color:#fff;border-color:#f90}.cover .cover-editor .cover-item{width:242px;height:136px;display:inline-block;margin-right:15px;margin-bottom:15px;vertical-align:top;}.cover .cover-editor .cover-item img{vertical-align:top}.cover .cover-editor .cover-item .cover-wrapper{display:inline-block;position:relative;}.cover .cover-editor .cover-item .cover-wrapper .delete-icon{display:none;}.cover .cover-editor .cover-item .cover-wrapper .delete-icon .icon{position:absolute;right:0;top:0;padding:11px;background-color:#f8f8f8}.cover .cover-editor .cover-item .cover-wrapper:hover .delete-icon{display:block}.cover .cover-editor .cover-item.active-parent{border:1px dashed #ccc}.cover .cover-editor .cover-handler.dragging{cursor:move}.cover .cover-editor .cover-handler.active{z-index:4}.cover .cover-editor .cover-handler.brother{-webkit-box-shadow:0 0 4px rgba(255,153,0,0.92);-moz-box-shadow:0 0 4px rgba(255,153,0,0.92);box-shadow:0 0 4px rgba(255,153,0,0.92)}.classcourse-help-tooltip ul{list-style:none;padding:0;}.classcourse-help-tooltip ul .image{width:173px;height:98px}.photo-gallery > .header{background-color:#fff;color:#3d3d3e}";}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/component/OfflineDetailEdit_html',function(){return'<div class="class-detail"><div class="wrapper"><div class="header"><div class="help texts"data-title="<span>您可以简要地描述课程的适学人群\u3001课程规划及特点等\u3002适当的使用短视频\u3001图片\u3001音频将使课程详情更加富有吸引力\uFF0C提高学生对教学质量的信任程度<p></p>仅支持5M以内的jpg\u3001png\u3001jpeg格式图片\uFF0C宽度最好不要超过760像素<br>视频最大支持250MB\uFF0C上传后需要最多3个小时左右进行转码\uFF0C请您耐心等待<br>请不要在内容中出现电话\u3001QQ和个人网址哦\uFF01</span>" data-skin="primary classcourse-help-tooltip" data-placement="bottomLeft" data-offset-x="90"><i class="text primary icon-help-o"></i><span class="text">帮助信息</span></div><div class="title">课程图文详情</div></div><div class="detail-editor">{{#if errorContent}}<div class="muted error-detail"><div class="button"><i class="icon icon-warning error"></i><span class="error">{{errorContent}}</span></div></div>{{/if}}<Editor options={{editorOptions}} /><div class="label muted detail-preview" on-click="preview()"><div class="button preview-detail-button">预览课程详情</div></div></div></div><style>{{style}}</style></div>';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/component/OfflineDetailEdit_12f789bdab',['require','exports','module','../common/PreviewDetail_24093d7511','userCenter/common/function/ractiveDialog_e00233834c','./OfflineDetailEdit_html','./OfflineDetailEdit_css','../../common/component/editor/Editor_364b39dc3b'],function(require){'use strict';var e=require('../common/PreviewDetail_24093d7511'),t=require('userCenter/common/function/ractiveDialog_e00233834c');return Ractive.extend({template:require('./OfflineDetailEdit_html'),data:function(){return{style:require('./OfflineDetailEdit_css'),errorContent:'',editorOptions:{style:'white',list:[]},options:{style:'',list:[]}};},components:{Editor:require('../../common/component/editor/Editor_364b39dc3b')},onrender:function(){var e=this;e.bindData({editorOptions:'options'}),e.on('*.titleError',function(){e.validate();});},preview:function(){var i=this;i.dialog=t(e,{title:'',skinClass:'preview-detail-dialog'},{list:i.get('editorOptions'),close:function(){i.dialog.hide();}}),i.dialog.show();},validate:function(){var e=this,t=e.get('options.list'),i='',n=[];if($.each(t,function(e,t){var o=t.options;if('title'==t.type){var r=o.text;if(!r)n.push(e);else if(r.length>10)i='标题最多输入十个字哦';}else if('body'==t.type){if(!o.text)n.push(e);else if(/<script/i.test(o.text))i='正文输入不合法的';}else if('image'==t.type){if(o.uploading)i='请等待图片上传完成';else if(!o.storage_id&&!o.url)n.push(e);}else if('video'==t.type){if(o.uploading)i='请等待视频上传完成';else if(!o.video_id)n.push(e);}else if('audio'==t.type)if(o.uploading)i='请等待音频上传完成';else if(!o.storage_id)n.push(e);}),e.set('errorContent',i),n.reverse(),!i)$.each(n,function(e,i){t.splice(i,1);});return i;},getData:function(){var e=this,t={},i=e.get('options');t.intro={},t.intro.style=i.style?i.style:'white';var n=[];return $.each(i.list,function(e,t){var i=t.type;if('title'==i)n.push({type:i,text:t.options.text});else if('body'==i){var o=t.options.text.replace(/\n/g,'<br>');n.push({type:i,text:o,font_weight:t.options.isBold?'bold':'normal',font_size:t.options.isBig?'17px':'15px',text_align:t.options.isCenter?'center':'left',color:t.options.color});}else if('image'==i)n.push({type:i,storage_id:t.options.storage_id,url:t.options.url});else if('video'==i)n.push({type:i,cover:t.options.cover,video_id:t.options.video_id});else if('audio'==i)n.push({type:i,storage_id:t.options.storage_id,url:t.options.url});}),t.intro.items=n,t;}});}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/component/OfflineDetailEdit_css',function(){return".classcourse-help-tooltip{width:785px;font-size:14px;line-height:26px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;}.classcourse-help-tooltip:before,.classcourse-help-tooltip:after{left:96% !important;margin-left:-8px !important;border-width:0 8px 8px 8px !important}.classcourse-help-tooltip:before{top:-8px !important}.classcourse-help-tooltip:after{top:-7px !important}.class-detail{width:835px;padding:25px;background-color:#fff;border:1px solid #ededec;color:#6d6d6e;margin-top:20px;}.class-detail .header .title{font-size:20px;}.class-detail .header .title:before{content:' ';background-color:#6d6d6e;-webkit-border-radius:37px;-moz-border-radius:37px;border-radius:37px;display:inline-block;width:5px;height:16px;margin-right:10px}.class-detail .header .help{float:right;font-size:12px}.class-detail .detail-editor{width:100%;margin-top:10px;overflow:hidden;}.class-detail .detail-editor .editor-list .muted{padding-top:10px}.class-detail .detail-editor .error-detail{width:100%;border-top:none;text-align:right;}.class-detail .detail-editor .error-detail .icon{padding-right:5px}.class-detail .detail-editor .error-detail .button{padding-right:0}.class-detail .detail-editor .detail-preview{width:665px;float:right;border:1px solid #e4e4e4;border-top:none;text-align:right}.class-detail .detail-editor .preview-detail-button:hover{color:#f90}";}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/component/OfflinePlanEdit_html',function(){return'<div class="plan"><div class="wrapper"><div class="header"><div class="help texts"data-title="<span>班课有学生报名后\uFF0C按照班课总课节数除以15\uFF0C取结果整数部分\uFF0C乘2\uFF0C所得结果为可修改班课时间的次数\u3002超过这个次数每次修改会被扣2分\u3002修改课节内容\u3001课程时长或添加新课节不扣分\u3002<br>请尽量提前规划您的课程时间\uFF0C避免因频繁修改造成双方损失\uFF0C多谢\uFF01<br>批量修改课节\uFF1A修改最近一节课的时间\uFF0C后续课节会随之自动调整\uFF1B例如\uFF0C第一节课上完后\uFF0C使用批量修改时间\uFF0C将最近一节\uFF08第二节\uFF09开始时间延后1小时\uFF0C则所有课节的开始时间都会延后1小时\u3002同时\uFF0C课节时长也会随之变动为您选择的时长\u3002</span>" data-skin="primary classcourse-help-tooltip" data-placement="bottomLeft" data-offset-x="90"><i class="text primary icon-help-o"></i><span class="text">帮助信息</span></div><div class="title texts">教学计划{{#if options.haveStudent}}<span class="title-tips text small">剩余班课时间修改次数\uFF1A<span class="primary">{{options.schedulesTimeChangeTimes}}</span></span>{{/if}}<span class="title-tips text small" style="display: none;">使用\u201C再开一班\u201D开课时\uFF0C原有课节在您编辑过程中不会自动排序\u3002<span class="link info small">按时间排序<span></span></div></div><div class="plan-editor"><div class="plan-list texts">{{#each options.schedules:index}}<div class="plan-item texts text fluid"><span class="badge left primary text small">{{index + 1}}</span><div class="text"><span class="muted">课程时间\uFF1A</span>{{#if beginTime}}{{formatDateTime(beginTime)}}{{/if}}<span class="center">至</span>{{#if endTime}}{{formatTime(endTime)}}{{/if}}</div>{{#if content}}<div class="plan-text"><span class="muted">课节内容\uFF1A</span><span class="content">{{content}}</span></div>{{/if}}{{#if options.orgTeachers.length > 0 && teacherId}}<div class="plan-text"><span class="muted">授课老师\uFF1A</span><span class="content">{{#if teacherTable[teacherId]}}{{teacherTable[teacherId]}}{{else}}已解约老师{{/if}}</span></div>{{/if}}<div class="buttons floated">{{#if canEdit}}<div class="button secondary tiny texts" on-click="editItem(this)"><i class="icon-edit-o text"></i><span class="text">编辑课节</span></div>{{/if}}{{#if canDelete}}<div class="button secondary tiny texts" on-click="deleteItem(this)"><i class="icon-trash text"></i><span class="text">删除课节</span></div>{{/if}}</div></div>{{/each}}</div><div class="button secondary button-plan texts" on-click="addMoreCourses()"><i class="icon icon-bulk text"></i><span class="text">批量添加课节</span></div><div class="button secondary button-plan texts" on-click="addSingleCourse()"><i class="icon icon-bulks text"></i><span class="text">添加一个课节</span></div>{{#if options.schedules.length >= 2}}<div class="button secondary button-plan texts" on-click="editAllItems()"><i class="icon icon-pencil-square-o text"></i><span class="text">整体修改时间</span></div>{{#if haveStudentCanDelete}}<div class="button secondary button-plan texts" on-click="deleteAllItems()"><i class="icon icon-trash text"></i><span class="text">删除全部课节</span></div>{{/if}}{{/if}}</div></div><style>{{style}}</style></div>';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/component/OfflinePlanEdit_847587e127',['require','exports','module','cc/function/toNumber','../common/AddSigleCourse_9ae621da65','../common/AddMoreCourses_a205132b8d','userCenter/common/function/ractiveDialog_e00233834c','userCenter/common/filter/formatDateTime_dec0a6129d','./OfflinePlanEdit_html','./OfflinePlanEdit_css'],function(require){'use strict';function e(t){return $.each(t,function(i,n){var o=i+1;if(t[o])if(n.endTime<=t[o].beginTime)return!0;else a.push(t[o]),s.push(o),t.splice(o,1),e(t);}),t;}var t=require('cc/function/toNumber'),i=require('../common/AddSigleCourse_9ae621da65'),n=require('../common/AddMoreCourses_a205132b8d'),o=require('userCenter/common/function/ractiveDialog_e00233834c'),r=require('userCenter/common/filter/formatDateTime_dec0a6129d'),a=[],s=[];return Ractive.extend({template:require('./OfflinePlanEdit_html'),data:function(){return{style:require('./OfflinePlanEdit_css'),teacherTable:{},isValidate:!1,useChangeTimesRemind:0,options:{schedules:[],planLength:0,haveStudent:!1,orgTeachers:[],copyCourse:!1,schedulesTimeChangeTimes:0}};},onrender:function(){var e=this,t=e.get('options.schedules'),i=e.get('options.orgTeachers');e.sortList(t);var n={};if(i&&0!=i.length)$.each(i,function(e,t){n[t.id]=t.realname;});e.set('teacherTable',n);},computed:{countPlanLength:function(){return this.get('options.schedules').length;},haveStudentCanDelete:function(){var e=this;if(e.get('options.haveStudent')){var t=e.get('options.schedules');if(t[0]&&t[0].beginTime>e.getNowTime()){var i=0;return $.each(t,function(e,t){if(t.canDelete)i++;}),i>2;}else return!1;}else return!0;}},getNowTime:function(){return r(new Date().getTime(),'YYYY-MM-DD HH:mm:ss');},addItem:function(e,t){var i=this,n=i.get('options.schedules');n.push(e),i.sortList(n),i.judgeRepeatPlan(e,t);var o,r=i.get('options.schedules');if(!i.get('isValidate'))$.each(r,function(t,i){if(i.beginTime==e.beginTime&&i.endTime==e.endTime)o=t;}),r.splice(o,1);i.set('options.schedules',r);},addItemNew:function(e){var t=this,i=t.get('options.schedules');i.push(e),t.sortList(i),t.judgeRepeatPlanNew();var n,o=t.get('options.schedules');if(!t.get('isValidate'))$.each(o,function(t,i){if(i.beginTime==e.beginTime&&i.endTime==e.endTime)n=t;}),o.splice(n,1);t.set('options.schedules',o);},deleteItem:function(e){function t(){alert({title:'温馨提示',content:'确认删除这个课节吗\uFF1F',buttons:[{text:'确定',type:'primary',action:function(){o.splice(i,1),n.set('options.schedules',o),this.hide();}},{text:'取消',type:'primary',action:function(){this.hide();}}]});}var i,n=this,o=n.get('options.schedules');$.each(o,function(t,n){if(n.beginTime==e.beginTime&&n.endTime==e.endTime)i=t;}),n.changeTimesRemind(t);},deleteAllItems:function(){function e(){alert({title:'温馨提示',content:'确认删除所有课节吗?',buttons:[{text:'确定',type:'primary',action:function(){var e=[];$.each(i,function(t,i){if(!i.canDelete)e.push(i);}),t.set({'options.schedules':e}),this.hide();}},{text:'取消',type:'primary',action:function(){this.hide();}}]});}var t=this,i=t.get('options.schedules');t.changeTimesRemind(e);},addMoreItems:function(e){var t=this,i=t.get('options.schedules'),n=t.getNowTime();$.each(e,function(e,t){if(t.beginTime>n)i.push(t);}),t.sortList(i),t.deleteRepeatPlan();},sortList:function(e){var t=this,i=[];$.map(e,function(e){i.push(e.beginTime);}),i.sort();var n=t.getNowTime(),o=[];if(!t.get('options.copyCourse'))$.map(e,function(e){for(var t=0;t<i.length;t++)if(e.beginTime===i[t]){if(e.readonly&&e.beginTime<n)e.canDelete=!1,e.canEdit=!1;else if(e.readonly&&e.beginTime>n)e.canDelete=!1,e.canEdit=!0;else e.canDelete=!0,e.canEdit=!0;if(!o[t]){o[t]=e;break;}}});else $.map(e,function(e){for(var t=0;t<i.length;t++)if(e.beginTime===i[t])e.canDelete=!0,e.canEdit=!0,o[t]=e;});t.set({'options.schedules':o});},deleteRepeatPlan:function(){{var t=this;e(t.get('options.schedules'));}if(0!=a.length){t.set('isValidate',!1);var i='';$.each(a,function(){i='新添加课节和第'+s[0]+'节课有时间冲突\uFF0C快去调整一下吧\uFF5E';}),alert({title:'温馨提示',content:i}),s=[],a=[];}else t.set('isValidate',!0);},judgeRepeatPlan:function(e,t){var i=this,n=i.get('options.schedules'),o='';if($.each(n,function(t,i){var r=t+1;if(n[r]){if(i.beginTime==e.beginTime&&i.endTime==e.endTime)o=t+1;if(i.endTime<=n[r].beginTime)return!0;else{if(!n[r].beginTime||!n[r].endTime)return;a.push(n[r]),s.push(r);}}}),0!=a.length){i.set('isValidate',!1);var r='',l=s[0];if(''!=o){if(l>=t+1)l++;}else if(l>=t+1)l++;$.each(a,function(){r='修改后的时间与第'+l+'节课有冲突\uFF0C快去调整一下吧';}),alert({title:'温馨提示',content:r}),s=[],a=[];}else i.set('isValidate',!0);},judgeRepeatPlanNew:function(){var e=this,t=e.get('options.schedules');if($.each(t,function(e,i){var n=e+1;if(t[n])if(i.endTime<=t[n].beginTime)return!0;else{if(!t[n].beginTime||!t[n].endTime)return;a.push(t[n]),s.push(n);}}),0!=a.length){e.set('isValidate',!1);var i='';$.each(a,function(){i='新课节的时间与第'+s[0]+'节课有冲突\uFF0C快去调整一下吧';}),alert({title:'温馨提示',content:i}),s=[],a=[];}else e.set('isValidate',!0);},addSingleCourse:function(e){function n(){r.dialog=o(i,{title:'添加单一课节',skinClass:'add-sigle-course-dialog'},{schedules:r.get('options.schedules'),item:e,orgTeachers:r.get('options.orgTeachers'),save:function(e,i){var n=r.get('options.schedules');if(i=t(i,-1),i>=0)e.canDelete=n[i].canDelete,e.canEdit=n[i].canEdit,e.readonly=n[i].readonly;else e.canDelete=!0,e.canEdit=!0,e.readonly=!1;var o={};if(i>=0)o=n[i],n.splice(i,1);if(r.set('options.schedules',n),i>=0)if(r.addItem(e,i),r.get('isValidate'))r.dialog.hide();else r.addItem(o);else if(r.addItemNew(e),r.get('isValidate'))r.dialog.hide();},close:function(){r.dialog.hide();}}),r.dialog.show();}var r=this;if(r.get('countPlanLength')>=500&&r.get('options.planLength')<500)return void alert({title:'温馨提示',content:'课节最多不能超过 500 节'});else return void r.changeTimesRemind(n);},addMoreCourses:function(){function e(){t.dialog=o(n,{title:'快速排课',skinClass:'add-more-course-dialog'},{schedules:t.get('options.schedules'),orgTeachers:t.get('options.orgTeachers'),save:function(e){t.dialog.hide(),t.addMoreItems(e);},close:function(){t.dialog.hide();},onScheduleAdd:function(){t.dialog.refresh();},onScheduleRemove:function(){t.dialog.refresh();}}),t.dialog.show();}var t=this;if(t.get('countPlanLength')>=500&&t.get('options.planLength')<500)return void alert({title:'温馨提示',content:'课节最多不能超过 500 节'});else return void t.changeTimesRemind(e);},editItem:function(e){this.addSingleCourse(e);},editAllItems:function(){function e(){t.dialog=o(i,{title:'批量修改课节',skinClass:'edit-all-course-dialog'},{schedules:n,item:a[0],orgTeachers:t.get('options.orgTeachers'),save:function(e){var i=(a[0],a[0].beginTime.replace(/-/g,'/')),n=new Date(i).getTime(),o=e.beginTime.replace(/-/g,'/'),l=new Date(o).getTime(),c=l-n,u=a[0].endTime.replace(/-/g,'/'),d=(new Date(u).getTime()-n,e.endTime.replace(/-/g,'/')),p=new Date(d).getTime()-l,f=[];$.each(a,function(e,t){var i=t.beginTime.replace(/-/g,'/'),n=new Date(i).getTime()+c,o=n+p,a=r(n,'YYYY-MM-DD HH:mm:ss'),s=r(o,'YYYY-MM-DD HH:mm:ss');f.push({beginTime:a,endTime:s,canDelete:t.canDelete,canEdit:t.canEdit,content:t.content,teacherId:t.teacherId,id:t.id,readonly:t.readonly});});var m=s.concat(f);t.set('options.schedules',m),t.dialog.hide();},close:function(){t.dialog.hide();},isEdit:!0}),t.dialog.show();}var t=this,n=t.get('options.schedules'),a=[],s=[];if($.each(n,function(e,t){if(t.canEdit)a.push(t);else s.push(t);}),a.length<=0)return void alert({title:'温馨提示',content:'没有可以编辑的课节哦~'});else return void t.changeTimesRemind(e);},getData:function(){var e=this,t={};return t.schedules=[],$.each(e.get('options.schedules'),function(i,n){var o=!e.get('options.copyCourse')?n.id:'';t.schedules.push({id:o,began_at:n.beginTime,ended_at:n.endTime,content:n.content,teacher_id:n.teacherId});}),t;},changeTimesRemind:function(e){var t=this,i=t.get('options.haveStudent'),n=t.get('options.schedulesTimeChangeTimes');if(0==t.get('useChangeTimesRemind')){if(t.set('useChangeTimesRemind',1),!i){var o='<div>班课有学生报名后\uFF0C按照班课总课节数除以15\uFF0C取结果整数部分\uFF0C乘2\uFF0C所得结果为可修改班课时间的次数\u3002超过这个次数每次修改会被扣2分\u3002修改课节内容\u3001课程时长或添加新课节不扣分\u3002</div><div>请尽量提前规划您的课程时间\uFF0C避免因频繁修改造成双方损失\uFF0C多谢\uFF01</div>';alert({title:'温馨提示',content:o,width:400,type:'changetime-dialog',buttons:[{text:'继续',type:'primary',action:function(){this.hide(),e();}}]});}else if(0==n)alert({title:'温馨提示',content:'您对本班课的时间调整已超过两次\uFF0C<br>再次调整将被扣2分',buttons:[{text:'取消',action:function(){this.hide();}},{text:'继续',type:'primary',action:function(){this.hide(),e();}}]});else if(n>0)alert({title:'温馨提示',content:'班课已有学生报名\uFF0C您还有'+n+'次修改课程时间的机会\u3002<br>之后再进行修改\uFF0C每次都会扣2分',buttons:[{text:'取消',action:function(){this.hide();}},{text:'继续',type:'primary',action:function(){this.hide(),e();}}]});}else e();}});}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/component/OfflinePlanEdit_css',function(){return".classcourse-help-tooltip{width:785px;font-size:14px;line-height:26px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;}.classcourse-help-tooltip:before,.classcourse-help-tooltip:after{left:96% !important;margin-left:-8px !important;border-width:0 8px 8px 8px !important}.classcourse-help-tooltip:before{top:-8px !important}.classcourse-help-tooltip:after{top:-7px !important}.plan{width:835px;padding:25px;background-color:#fff;border:1px solid #ededec;color:#6d6d6e;margin-top:20px;}.plan .header .title{font-size:20px;}.plan .header .title .title-tips{margin-left:10px}.plan .header .title:before{content:' ';background-color:#6d6d6e;-webkit-border-radius:37px;-moz-border-radius:37px;border-radius:37px;display:inline-block;width:5px;height:16px;margin-right:10px}.plan .header .help{float:right;font-size:12px}.plan .plan-editor{margin-top:30px;}.plan .plan-editor .plan-list .plan-item{min-height:60px;padding:10px;position:relative;border-bottom:1px #cdcdce dashed;}.plan .plan-editor .plan-list .plan-item .buttons{position:absolute;right:0;top:0;}.plan .plan-editor .plan-list .plan-item .buttons .button:hover{border:1px solid #f90}.plan .plan-editor .plan-list .plan-item .left{float:left;margin-right:10px}.plan .plan-editor .plan-list .plan-item .center{padding:0 5px}.plan .plan-editor .plan-list .plan-item:first-child{border-top:1px #cdcdce dashed;}.plan .plan-editor .plan-list .plan-item:first-child .buttons{top:10px}.plan .plan-editor .plan-list .plan-item:last-child{border-bottom:1px #cdcdce dashed}.plan .plan-editor .plan-list .plan-item .plan-text{display:block;margin-top:10px;margin-left:35px;word-wrap:break-word;width:540px;}.plan .plan-editor .plan-list .plan-item .plan-text .content{width:440px;display:inline-block;vertical-align:top}.plan .plan-editor .button-plan{background:#fff;border:1px solid #ededec;width:266px;height:44px;line-height:28px;margin-right:20px;margin-top:15px;}.plan .plan-editor .button-plan:hover{border:1px solid #f90}.edit-all-course-dialog,.add-more-course-dialog,.add-sigle-course-dialog{width:850px;}.edit-all-course-dialog > .header,.add-more-course-dialog > .header,.add-sigle-course-dialog > .header{padding:20px;background-color:#fff}.edit-all-course-dialog > .close,.add-more-course-dialog > .close,.add-sigle-course-dialog > .close{top:10px}.add-sigle-course-dialog textarea[name='lessonName']{height:130px;overflow:hidden}.edit-all-course-dialog{width:650px;}.edit-all-course-dialog .add-sigle-course .begin{width:100%}.edit-all-course-dialog .add-sigle-course .group.center{margin:0}.edit-all-course-dialog .add-sigle-course .fluid{margin:15px}.changetime-dialog .body{text-align:left;text-indent:28px}";}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/component/OfflineRelatedCourses_html',function(){return'<div class="related-course"><div class="wrapper"><div class="header"><div class="help texts"data-title="<span>推荐相关课程可以引导学生访问更多课程\uFF0C帮助推广其它的课程\u3002最多可设置3门相关课程<br>设置的时候请注意课程之间的搭配关系\uFF0C建议使用免费课+收费课\uFF0C直播课+视频课\uFF0C初级课+进阶课这样的组合模式</span>" data-skin="primary classcourse-help-tooltip" data-placement="bottomLeft" data-offset-x="90"><i class="text primary icon-help-o"></i><span class="text">帮助信息</span></div><div class="title">相关课程</div></div><div class="related-course-editor">{{#each relatedCourseList:index}}<div class="related-course-card"><img src="{{compressImage(cover_url, 240, 140)}}"><div class="delete-icon" on-click="deleteItem(index)"><i class="button icon icon-trash"></i></div><div class="title">{{{cutString(display_name, 32)}}}</div><div class="price primary large">{{price_human}}</div></div>{{/each}}{{#if showButton}}<div class="related-course-card"><span class="button add-related-course" on-click="addRecommendCourse()"><i class="icon-plus fluid muted text"></i><span class="text">添加课程</span></span></div>{{/if}}</div></div><style>{{style}}</style></div>';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/component/OfflineRelatedCourses_7176cf1bb1',['require','exports','module','../common/RelatedCourse_c63cd7f5e5','userCenter/common/function/ractiveDialog_e00233834c','../service_d104b5ab74','./OfflineRelatedCourses_html','./OfflineRelatedCourses_css'],function(require){'use strict';{var e=require('../common/RelatedCourse_c63cd7f5e5'),t=require('userCenter/common/function/ractiveDialog_e00233834c');require('../service_d104b5ab74');}return Ractive.extend({template:require('./OfflineRelatedCourses_html'),data:function(){return{style:require('./OfflineRelatedCourses_css'),relatedCourseList:null,showButton:!0,options:{relatedCourse:null,save:$.noop,close:$.noop}};},onrender:function(){var e=this;e.bindData({relatedCourseList:'options.relatedCourse'});var t=e.get('options.relatedCourse');if(t&&t.length>=3)e.set('showButton',!1);},addRecommendCourse:function(){var i=this;i.dialog=t(e,{title:'选择你的推荐课程',skinClass:'add-related-course-dialog'},{item:i.get('options.relatedCourse'),close:function(){i.dialog.dispose();},save:function(e){if(!e)return void alert({title:'温馨提示',content:'您还没有选择相关课程'});var t=i.get('relatedCourseList');if(!t)t=[];var n=[];if($.each(t,function(e,t){n.push(t.number);}),t.length+e.length>3)return void alert({title:'温馨提示',content:'最多选择 3 门推荐课程'});if($.each(e,function(e,i){if(-1==n.indexOf(i.item.number))n.push(i.item.number),t.push(i.item);else alert({title:'温馨提示',content:'您有课程上传重复了,请重新选择吧'});}),3==t.length)i.set({showButton:!1});i.set({relatedCourseList:t,'options.relatedCourse':t}),i.dialog.dispose();}}),i.dialog.show();},deleteItem:function(e){var t=this;alert({title:'温馨提示',content:'是否确认取消推荐',buttons:[{text:'确定',type:'primary',action:function(){var i=t.get('relatedCourseList');if(i.splice(e,1),i.length<3)t.set({showButton:!0,relatedCourseList:i});this.hide();}},{text:'取消',action:function(){this.hide();}}]});}});}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/component/OfflineRelatedCourses_css',function(){return'.classcourse-help-tooltip{width:785px;font-size:14px;line-height:26px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;}.classcourse-help-tooltip:before,.classcourse-help-tooltip:after{left:96% !important;margin-left:-8px !important;border-width:0 8px 8px 8px !important}.classcourse-help-tooltip:before{top:-8px !important}.classcourse-help-tooltip:after{top:-7px !important}.related-course > .wrapper{width:835px;padding:25px;background-color:#fff;border:1px solid #ededec;color:#6d6d6e;}.related-course > .wrapper .header .title{font-size:16px}.related-course > .wrapper .header .help{float:right;font-size:12px}.related-course > .wrapper .related-course-editor{padding-top:30px}.related-course > .wrapper .related-course-card{vertical-align:top;display:inline-block;width:240px;margin-right:10px;position:relative;}.related-course > .wrapper .related-course-card img{width:100%}.related-course > .wrapper .related-course-card .delete-icon{display:none;}.related-course > .wrapper .related-course-card .delete-icon .icon{position:absolute;right:0;top:0;padding:11px;background-color:#f8f8f8}.related-course > .wrapper .related-course-card:hover .delete-icon{display:block}.related-course > .wrapper .related-course-card .add-related-course{border:1px solid #cdcdce;padding:36px;background:#f8f8f8;}.related-course > .wrapper .related-course-card .add-related-course:hover{background-color:#fff;border-color:#f90}.related-course > .wrapper .related-course-card .add-related-course .icon-plus{font-size:29px;padding:0 66px}';}),define('userCenter/teacherCenter/classCourseEdit/offlineCourseEdit/service_d104b5ab74',['require','exports','module','../../../common/service_1288b24a55'],function(require,exports){'use strict';function e(e,t,i){return $.ajax({url:e,data:t,dataType:'jsonp',timeout:i});}var t=require('../../../common/service_1288b24a55');exports.getSubjectList=function(e){return t.post('/tcenter/subjects/list',{keyword:e.keyword});},exports.getAddressList=function(){return t.post('/tcenter/addresses/list-simple');},exports.getAddressSuggestion=function(t){return e('http://api.map.baidu.com/place/v2/suggestion',{query:t.query,region:t.region,output:'json',ak:'EMB0bKIvMeOd70lyyG92BZlu'});},exports.checkAddress=function(e){return t.post('/teacher_center/checkAddress',{city_id:e.cityId,area_name:e.areaName});},exports.upsertAddress=function(e){return t.post('/teacher_center/upsertAddress',{address_id:e.addressId,area_id:e.areaId,address:e.locationAddr,lng:e.lng,lat:e.lat,as_regular_address:e.asRegularAddress},options);},exports.getRelatedCourse=function(){return t.post('/tcenter/courses/all-courses/selling-courses');},exports.getHistorySubject=function(){return t.post('/tcenter/courses/all-courses/history-subjects');},exports.getPhotoGallery=function(){return t.post('/tcenter/courses/photo-gallery/list');},exports.saveOfflineCourse=function(e){return t.post('/tcenter/courses/class-courses/save',{data:e},{preventError:!0,timeout:10000});},exports.getUserBasicInfo=function(e){var i;if(e&&null!=e.userId&&null!=e.userType)i={user_id:e.userId,user_type:e.userType};return t.post('/user/basicInfo',i);};}),define('userCenter/teacherCenter/classCourseEdit/onlineCourseEdit/component/OnlineBasicInfo_html',function(){return'<div class="basic-info"><div class="header"><div class="help texts"data-title="<ul><li>1. 课程名称\uFF1A准确的课程标题可以让学生迅速了解您的课程\u3002比如 \u201C<span class=\'primary\'>水彩画零基础速成</span>\u201D 比 \u201C<span class=\'primary\'>画画</span>\u201D 更容易吸引学员</li><li>2. 科目\uFF1A使用搜索功能可以帮你更快地找到目标科目</li><li>3. 价格\uFF1A现价是真正的课程售价\u3002填写适当的原价可以体现课程现价的优惠\uFF0C促进课程的销售\u3002免费课请直接设置现价为0元</li><li>4. 人数\uFF1A这里填写的人数是课程报名人数的上限\u3002对于人数设置为2000人以下的班级\uFF0C我们会在聊天功能中为您和报名的学生自动建立群聊</li></ul>" data-skin="primary classcourse-help-tooltip" data-placement="bottomLeft" data-offset-x="90"><i class="text primary icon-help-o"></i><span class="text">帮助信息</span></div><div class="title">基础信息</div></div><div class="form basic-info-form"><div class="group"><label class="label">课程名</label><div class="controls"><Input options="{{courseNameInputOptions}}" /></div></div><div class="group"><label class="label">科目</label><div class="controls subject-recommend"><div class="button button-subject-recommend secondary fluid">{{subjectRecommend}}{{#if showMore}}<i class="icon icon-caret-up"></i>{{else}}<i class="icon icon-caret-down"></i>{{/if}}</div><input type="hidden" name="subject" value="{{subjectSelectOptions.id}}"><div class="tooltip error right" data-error-for="subject"></div><div class="subject-wrapper"><SubjectSelector options="{{subjectSelectOptions}}"/></div></div></div><div class="group"><div class="inline right"><label class="label">人数</label><div class="controls member-controls"><Input options="{{memberInputOptions}}" /></div></div><div class="inline left"><label class="label">价格</label><div class="controls feature-controls"><div class="input-group"><div class="label secondary">现价:</div><Input options="{{priceInputOptions}}" /><div class="label secondary">元</div><div class="label secondary">原价\uFF08选填\uFF09:</div><Input options="{{originPriceInputOptions}}" /><div class="label secondary">元</div></div></div></div></div><!--div class="group"><div class="inline"><label class="label">试听</label><div class="controls"><div class="radios"><label class="label radio no-allow"><input type="radio" name="{{isAppointment}}" value="{{NO_APPOINTMENT}}">不允许学生试听</label><label class="label radio allow texts{{#if appointmentDisabled}} disabled{{/if}}"><input type="radio" name="{{isAppointment}}" value="{{IS_APPOINTMENT}}"><span class="text">允许试听</span><div class="input-group text texts"><Input options="{{auditionInputOptions}}" /><div class="label secondary text">分钟</div><span class="text small muted small-text">超出试听限制后\uFF0C学生需购买才可以继续观看</span></div></label></div></div></div></div--></div><style>{{style}}</style></div>';}),define('userCenter/teacherCenter/classCourseEdit/onlineCourseEdit/component/OnlineBasicInfo_ef4abbe850',['require','exports','module','custom/helper/Popup','custom/form/Validator','../../offlineCourseEdit/service_d104b5ab74','./OnlineBasicInfo_html','./OnlineBasicInfo_css','../../../../common/component/Input_12b813ed72','../../offlineCourseEdit/common/SubjectSelector_9384ba0ad1'],function(require){'use strict';function e(e){if(0==o)alert({title:'温馨提示',content:e.content,width:300,skinClass:'vip-dialog',buttons:[{text:'立即开通',type:'primary',action:function(){location.href='/teacher_center/vip_center',this.hide();}},{text:'了解详情',type:'default',action:function(){location.href='/teacher_center/vip_detail?type=freeLive',this.hide();}}]});else alert({title:'温馨提示',content:e.content,width:300,skinClass:'vip-dialog',buttons:[{text:'我知道了',type:'primary',action:function(){this.hide();}}]});return!1;}var t=require('custom/helper/Popup'),i=require('custom/form/Validator'),n=require('../../offlineCourseEdit/service_d104b5ab74'),o='';return Ractive.extend({template:require('./OnlineBasicInfo_html'),data:function(){return{style:require('./OnlineBasicInfo_css'),subjectRecommend:'请选择科目',courseNameInputOptions:{name:'courseName',value:'',placeholder:'请输入20字以内',className:'course-name-input fluid'},priceInputOptions:{name:'price',value:'',placeholder:'请输入现价',className:'price-input'},originPriceInputOptions:{name:'originPrice',value:'',placeholder:'',className:'price-input'},memberInputOptions:{name:'memberNumber',value:'',placeholder:'请输入人数',className:'member-input fluid'},subjectSelectOptions:{id:'',path_crumbs:'',path_array:[],hidden:!0},appointmentDisabled:!1,options:{courseName:'',memberNumber:'',originPrice:'',price:'',subject:{id:'',path_crumbs:'',path_array:[]}}};},computed:{},components:{Input:require('../../../../common/component/Input_12b813ed72'),SubjectSelector:require('../../offlineCourseEdit/common/SubjectSelector_9384ba0ad1')},onrender:function(){var e=this,n=$(e.getElement());e.popupSubject=new t({triggerElement:n.find('.button-subject-recommend'),layerElement:n.find('.subject-wrapper'),showLayerTrigger:'click',hideLayerTrigger:'click',watch:{opened:function(t){if(e.set('subjectSelectOptions.hidden',!t),t)e.set('showMore',!0);else e.set('showMore',!1);}}}),e.on('*.selectSubject',function(t){e.set('subjectRecommend',t.subject),e.popupSubject.close();}),e.bindData({'courseNameInputOptions.value':'options.courseName','memberInputOptions.value':'options.memberNumber','originPriceInputOptions.value':'options.originPrice','priceInputOptions.value':'options.price','subjectSelectOptions.id':'options.subject.id','subjectSelectOptions.path_array':'options.subject.path_array',subjectRecommend:'options.subject.path_crumbs'});var n=$(e.getElement());e.validator=new i({mainElement:n,validateOnBlur:!0,fields:{courseName:{rules:{required:!0},errors:{required:'班课名称不能为空'}},price:{rules:{required:!0,pattern:/^(\d)+(\.)?(\d)?(\d)?$/,min:0,max:999999},errors:{required:'请输入价格',pattern:'仅支持1-999999的两位小数哦',min:'最低 0 元',max:'最高 999999 元'}},memberNumber:{rules:{required:!0,pattern:/^\d+$/,min:1,max:999999},errors:{required:'请填写人数',pattern:'请输入1-999999的整数',min:'请输入1-999999之间的整数',max:'请输入1-999999之间的整数'}},subject:{rules:{required:!0},errors:{required:'科目不能为空'}}}}),e.observe('memberInputOptions.blur',function(t){if(t)e.judgeMember();});},validate:function(){return this.validator.validate(!0);},onteardown:function(){var e=this;e.popupSubject.dispose();},judgeMember:function(){var t=this;if(0==t.get('priceInputOptions.value')){n.getUserBasicInfo().then(function(e){o=e.data.org_id;});var i=userData.vip_level,r=t.get('memberInputOptions.value'),a='';if(0==i&&r>500){if(0==o)a='非会员用户免费直播课最高上限500人\uFF0C开通会员获得更高上限';else a='非会员用户免费直播课最高上限500人\uFF0C联系机构开通会员获得更高上限';e({content:a});}else if(1==i&&r>1000){if(0==o)a='普通会员用户免费直播课最高上限1000人\uFF0C开通会员获得更高上限';else a='普通会员用户免费直播课最高上限1000人\uFF0C联系机构开通更高级别会员获得更高上限';e({content:a});}else if(2==i&&r>3000){if(0==o)a='高级会员用户免费直播课最高上限3000人\uFF0C开通超级会员获得更高上限';else a='高级会员用户免费直播课最高上限3000人\uFF0C联系机构开通更高级别会员获得更高上限';e({content:a});}}},getData:function(){var e=this,t={};return t.name=e.get('options.courseName'),t.subject={},t.student_amount={},t.subject.id=e.get('options.subject.id'),t.prices={now:e.get('options.price'),original:e.get('options.originPrice')},t.student_amount.max=e.get('options.memberNumber'),t.student_amount.min=1,t;}});}),define('userCenter/teacherCenter/classCourseEdit/onlineCourseEdit/component/OnlineBasicInfo_css',function(){return".classcourse-help-tooltip{width:785px;font-size:14px;line-height:26px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;}.classcourse-help-tooltip:before,.classcourse-help-tooltip:after{left:96% !important;margin-left:-8px !important;border-width:0 8px 8px 8px !important}.classcourse-help-tooltip:before{top:-8px !important}.classcourse-help-tooltip:after{top:-7px !important}.basic-info{width:835px;padding:25px;background-color:#fff;border:1px solid #ededec;color:#6d6d6e;}.basic-info .header .title{font-size:20px;}.basic-info .header .title:before{content:' ';background-color:#6d6d6e;-webkit-border-radius:37px;-moz-border-radius:37px;border-radius:37px;display:inline-block;width:5px;height:16px;margin-right:10px}.basic-info .header .help{float:right;font-size:12px}.basic-info .form .group{margin-top:20px;}.basic-info .form .group > .label{width:80px}.basic-info .form .group .controls{width:703px}.basic-info .form .group .input{background-color:#f8f8f8}.basic-info .form .group input{color:#3d3d3e;}.basic-info .form .group input:focus{background-color:#fff}.basic-info .form .group .fluid{width:100%}.basic-info .form .group .subject-recommend .button-subject-recommend{text-align:left;background-color:#f8f8f8;height:36px;position:relative;}.basic-info .form .group .subject-recommend .button-subject-recommend .icon{position:absolute;right:8px;top:6px;font-size:24px;color:#6d6d6e}.basic-info .form .group .subject-recommend .subject-wrapper{display:none;position:absolute;z-index:3;width:703px;height:529px}.basic-info .form .group .address-recommend .button{background-color:#f8f8f8}.basic-info .form .group .inline{display:inline-block;}.basic-info .form .group .inline > .label{display:inline-block;width:80px;text-align:right}.basic-info .form .group .inline.left{width:70%}.basic-info .form .group .inline.right{width:30%;float:right;text-align:right}.basic-info .form .group .inline .controls{display:inline-block;}.basic-info .form .group .inline .controls .input-group{display:inline-block}.basic-info .form .group .inline .feature-controls{width:465px;}.basic-info .form .group .inline .feature-controls .label{background-color:#f8f8f8}.basic-info .form .group .inline .feature-controls .label +.label{border-left:none}.basic-info .form .group .inline .feature-controls .price-input{width:101px}.basic-info .form .group .inline .feature-controls .member-input{width:150px}.basic-info .form .group .inline .audition-input{width:125px}.basic-info .form .group .inline .small-text{margin-top:8px}.basic-info .form .group .inline .member-controls{width:150px;text-align:right}.basic-info .form .group .radios .no-allow{margin-right:15px;line-height:36px}.basic-info .form .group .radios .allow{float:right;width:560px}.basic-info .form .group .radios > .radio.disabled .tooltip.error{display:none !important}.basic-info .form .group .radios > .radio.disabled .audition-input input{border-color:#ccc;color:#ccc}";}),define('userCenter/teacherCenter/classCourseEdit/onlineCourseEdit/component/OnlineCourseSetting_html',function(){return'<div class="course-setting"><div class="wrapper"><div class="header"><div class="help texts"data-title="<ol><li>退班规则\uFF1A出于资金安全的考虑\uFF0C学生会倾向于选择随时可退的课程\u3002如无特殊原因\uFF0C请尽量不要修改此处的设置<br>课时费将会按照课节结算到你的跟谁学账户\uFF0C学生在可退期间申请退款将退还未开课部分的课时费</li><li>插班规则\uFF1A插班指在班课设置的开始时间后学生再报名</li><li>保底开班人数\uFF1A设置最小开班人数后\uFF0C开课前一天报名人数不足最小开班人数时\uFF0C课程会自动关闭\uFF0C已报名学生自动退费(仅在第一节课开始前24小时有效)\uFF0C请慎重设置</li></ol>" data-skin="primary classcourse-help-tooltip" data-placement="bottomLeft" data-offset-x="90"><i class="text primary icon-help-o"></i><span class="text">帮助信息</span></div><div class="title">课程设置</div></div><div class="form"><div class="group"><label class="label">退班规则:</label><div class="controls"><div class="radios"><label class="label radio"><input type="radio" name="{{classRule}}"value="{{CLASS_RULE_ANYTIME}}"{{#if classRuleDisabled}} disabled{{/if}}>随时可退</label>{{#if options.fromShiziLogin }}<label class="label radio"><input type="radio" name="{{classRule}}" value="{{CLASS_RULE_NOEXIT}}"{{#if classRuleDisabled}} disabled{{/if}}>不可退班</label>{{/if}}{{#if options.classRule == CLASS_RULE_HOUREXIT}}<label class="label radio special-radio{{#if classRule != CLASS_RULE_HOUREXIT}} disabled{{/if}}"><input type="radio" name="{{classRule}}" value="{{CLASS_RULE_HOUREXIT}}"{{#if classRuleDisabled}} disabled{{/if}}>开班前一小时不可退</label>{{/if}}<label class="label radio{{#if classRule != CLASS_RULE_CUSTOM}} disabled{{/if}}"><input type="radio" name="{{classRule}}" value="{{CLASS_RULE_CUSTOM}}"{{#if classRuleDisabled}} disabled{{/if}}>第<Input options="{{retireTextInputOptions}}" />节课前可退</label></div></div></div><div class="group"><label class="label">插班规则:</label><div class="controls"><div class="radios"><label class="label radio"><input type="radio" name="{{compatibleRule}}" value="{{CLASS_CHABAN_NO}}">不可插班</label><label class="label radio"><input type="radio" name="{{compatibleRule}}" value="{{CLASS_CHABAN_INSERT}}">随时可插班</label><label class="label text-remind">插班学生可以观看以往课程回放</label><label class="label radio{{#if options.compatibleRule != CLASS_CHABAN_CUSTOM}} hidden{{/if}}"><input type="radio" name="{{compatibleRule}}" value="{{CLASS_CHABAN_CUSTOM}}">第<Input options="{{chabanQuotaInputOptions}}" />节课开始前可插班</label></div></div></div>{{#if showChabanPrice}}<div class="group"><label class="label">插班价格:</label><div class="controls"><div class="radios"><label class="label radio"><input type="radio" name="{{compatiblePrice}}" value="{{CLASS_CHABAN_PRICE_ALL}}">课程全价</label><label class="label radio"><input type="radio" name="{{compatiblePrice}}" value="{{CLASS_CHABAN_PRICE_RESET}}">剩余课程全价</label><label class="label radio{{#if options.compatiblePrice != CLASS_CHABAN_PRICE_CUSTOM}} hidden{{/if}}"><input type="radio" name="{{compatiblePrice}}" value="{{CLASS_CHABAN_PRICE_CUSTOM}}">自定义插班价<Input options="{{chabanPriceInputOptions}}" /></label></div></div></div>{{/if}}<div class="group"><label class="label">保底开班:</label><div class="controls"><div class="radios"><label class="label radio{{#if minimumRule != MIN_MEMBER_NORMAL}} disabled{{/if}}"><input type="radio" name="{{minimumRule}}" value="{{MIN_MEMBER_NORMAL}}">报名即开班</label><label class="label radio set-justify{{#if minimumRule != MIN_MEMBER_MIN}} disabled{{/if}}"><input type="radio" name="{{minimumRule}}" value="{{MIN_MEMBER_MIN}}">保底<Input options="{{minimumMemberInputOptions}}" />人开班</label></div></div></div><div class="group"><label class="label"></label><div class="checkboxes"><label class="checkbox fluid"><input type="checkbox" checked="{{smsContact}}">允许学生通过手机联系我</label><label class="checkbox fluid"><input type="checkbox" checked="{{autoReamed}}">报名人数快满时自动扩班</label></div></div></div></div><style>{{style}}</style></div>';}),define('userCenter/teacherCenter/classCourseEdit/onlineCourseEdit/component/OnlineCourseSetting_a35d5c6919',['require','exports','module','custom/form/Validator','./OnlineCourseSetting_html','./OnlineCourseSetting_css','userCenter/common/component/Input_12b813ed72'],function(require){'use strict';var e=require('custom/form/Validator'),t='anyTime',i='noExit',n='custom',o='hourExit',r='nochaban',a='insertchaban',s='chabancustom',l='allfullprice',c='restfullprice',u='chabanpricecustom',d='normalRule',p='minRule';return Ractive.extend({template:require('./OnlineCourseSetting_html'),data:function(){return{style:require('./OnlineCourseSetting_css'),CLASS_RULE_ANYTIME:t,CLASS_RULE_NOEXIT:i,CLASS_RULE_CUSTOM:n,CLASS_RULE_HOUREXIT:o,CLASS_CHABAN_NO:r,CLASS_CHABAN_INSERT:a,CLASS_CHABAN_CUSTOM:s,CLASS_CHABAN_PRICE_ALL:l,CLASS_CHABAN_PRICE_RESET:c,CLASS_CHABAN_PRICE_CUSTOM:u,MIN_MEMBER_NORMAL:d,MIN_MEMBER_MIN:p,retireTextInputOptions:{name:'retireText',value:'',className:'lesson-number',disabled:!1},chabanQuotaInputOptions:{name:'chabanQuota',value:'',className:'lesson-number',disabled:!0},chabanPriceInputOptions:{name:'chabanPrice',value:'',className:'lesson-number',disabled:!0},minimumMemberInputOptions:{name:'minMember',value:'',className:'lesson-number',disabled:!1},classRuleDisabled:!1,classRule:t,compatibleRule:a,compatiblePrice:l,minimumRule:d,smsContact:!0,autoReamed:!0,showChabanPrice:!0,options:{classRule:'',compatibleRule:'',compatiblePrice:'',minimumRule:'',retireText:'',chabanQuota:'',chabanPrice:'',minimumMember:'',smsContact:1,autoReamed:1,fromShiziLogin:!1,haveStudent:!1}};},components:{Input:require('userCenter/common/component/Input_12b813ed72')},onrender:function(){var f=this;if(f.get('options.haveStudent'))f.set({classRuleDisabled:!0});var m=f.get('options.smsContact'),h=f.get('options.autoReamed');f.set({smsContact:1==m?!0:!1,autoReamed:1==h?!0:!1}),f.bindData({'retireTextInputOptions.value':'options.retireText','chabanQuotaInputOptions.value':'options.chabanQuota','chabanPriceInputOptions.value':'options.chabanPrice','minimumMemberInputOptions.value':'options.minimumMember',classRule:'options.classRule',compatibleRule:'options.compatibleRule',compatiblePrice:'options.compatiblePrice',minimumRule:'options.minimumRule'});var v=$(f.getElement());f.validator=new e({mainElement:v,validateOnBlur:!0,fields:{retireText:{rules:{required:!0,pattern:/^\d+$/,min:1},errors:{required:'请输入课节',pattern:'请输入数字',min:'填写错误'}},chabanQuota:{rules:{required:!0,pattern:/^\d+$/},errors:{required:'请输入课节',pattern:'请输入数字'}},chabanPrice:{rules:{required:!0,pattern:/^\d+$/},errors:{required:'请输入价格',pattern:'请输入数字'}},minMember:{rules:{min:2,required:!0,pattern:/^\d+$/},errors:{min:'请输入大于1的数字',required:'请输入保底开班人数',pattern:'请输入数字'}}}}),f.observe('classRule',function(e){var r=!1,a={'retireTextInputOptions.focus':!1,'options.classRule':n};if(e==n)if(a['options.classRule']=n,f.get('options.haveStudent'))a['retireTextInputOptions.disabled']=!0,a['retireTextInputOptions.focus']=!1;else r=!0,a['retireTextInputOptions.focus']=!0;else if(e==t)a['options.classRule']=t;else if(e==i)a['options.classRule']=i;else if(e==o)a['options.classRule']=o;f.set(a).then(function(){if('#course-template-edit'!=location.hash)f.set('retireTextInputOptions.focus',r);});}),f.observe('retireTextInputOptions.focus',function(e){if(e&&!f.get('options.haveStudent'))f.set('options.classRule',n);}),f.observe('compatibleRule',function(e){var t={'chabanQuotaInputOptions.disabled':!0,'options.compatibleRule':s,showChabanPrice:!0};if(e==s)t['chabanQuotaInputOptions.disabled']=!1,t['options.compatibleRule']=s,t.showChabanPrice=!0;else if(e==r)t['options.compatibleRule']=r,t.showChabanPrice=!1;else if(e==a)t['options.compatibleRule']=a,t.showChabanPrice=!0;f.set(t);}),f.observe('compatiblePrice',function(e){var t={'chabanPriceInputOptions.disabled':!0,'options.compatiblePrice':u};if(e==u)t['chabanPriceInputOptions.disabled']=!1,t['options.compatiblePrice']=u;else if(e==l)t['options.compatiblePrice']=l;else if(e==c)t['options.compatiblePrice']=c;f.set(t);}),f.observe('minimumMemberInputOptions.value',function(e){f.set('options.minimumMember',e);}),f.observe('minimumRule',function(e,t){var i=!1,n=!1,o=function(){f.set('minimumMemberInputOptions.focus',i);},r={'options.minimumRule':p};if(e==p){if(null!=t)alert({title:'温馨提示',width:425,content:'注意\uFF1A设置了保底开班后\uFF0C当报名学生人数没有达到最低开班人数时\uFF0C开班前1天将会自动关班\uFF0C所有已报名学生将自动退款\u3002请确认是否设置(仅在第一节课开始前24小时有效)',buttons:[{text:'确定',type:'primary',action:function(){this.hide(),o();}}]}),n=!0;i=!0,r['options.minimumRule']=p;}else if(e==d)r['options.minimumRule']=d;f.set(r).then(function(){if(!n)if('#course-template-edit'!=location.hash)o();});}),f.observe('minimumMemberInputOptions.focus',function(e){if(e)f.set('options.minimumRule',p);}),f.observe('smsContact',function(e){f.set('options.smsContact',e?1:0);}),f.observe('autoReamed',function(e){f.set('options.autoReamed',e?1:0);});},validate:function(e){return this.validator.validate(e,!0);}});}),define('userCenter/teacherCenter/classCourseEdit/onlineCourseEdit/component/OnlineCourseSetting_css',function(){return'.classcourse-help-tooltip{width:785px;font-size:14px;line-height:26px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;}.classcourse-help-tooltip:before,.classcourse-help-tooltip:after{left:96% !important;margin-left:-8px !important;border-width:0 8px 8px 8px !important}.classcourse-help-tooltip:before{top:-8px !important}.classcourse-help-tooltip:after{top:-7px !important}.course-setting > .wrapper{width:835px;padding:25px;background-color:#fff;border:1px solid #ededec;color:#6d6d6e;}.course-setting > .wrapper .header .title{font-size:16px}.course-setting > .wrapper .header .help{float:right;font-size:12px}.course-setting > .wrapper .form{margin-top:30px;}.course-setting > .wrapper .form .label{vertical-align:bottom}.course-setting > .wrapper .form .radios .label{max-width:130px;vertical-align:bottom;margin-right:50px;}.course-setting > .wrapper .form .radios .label.disabled .input{background-color:#eee;color:#ccc;}.course-setting > .wrapper .form .radios .label.disabled .input input{border-color:#ccc !important}.course-setting > .wrapper .form .radios .label.disabled .tooltip{display:none !important}.course-setting > .wrapper .form .radios .text-remind{position:relative;left:-40px;color:#ccc}.course-setting > .wrapper .form .radios .special-radio{width:150px}.course-setting > .wrapper .form .radios .set-justify{position:relative;left:-14px}.course-setting > .wrapper .form .lesson-number{width:56px;height:26px;margin:0 5px;vertical-align:middle}.course-setting > .wrapper .form input[type="text"]{height:26px}.course-setting > .wrapper .checkboxes .checkbox{margin-left:70px;max-width:200px}';}),define('userCenter/teacherCenter/classCourseEdit/onlineCourseEdit/component/OnlineRelatedSetting_html',function(){return'<div class="related-setting"><div class="header"><div class="help texts"data-title="<ul><li>1. 试听设置\uFF1A直播课的试听时间是指<span class=\'error\'>每一课节</span>的试听时间\u3002例如\uFF0C您设置试听时间为5分钟\uFF0C则每一个课节学生都可以进入试听5分钟\u3002试听结束后\uFF0C必须购买才能继续观看\u3002</li><li>2.回放自动转为视频课\uFF1A<br>- 启用此功能后\uFF0C系统将在第一节直播课结束后自动创建一个与直播课同名的视频课\uFF0C视频课的详情和课程安排与直播课相同\u3002随直播课进行\uFF0C每节直播的回放视频都会自动同步到视频课中\u3002<br>- 回放视频课将单独售卖\uFF0C默认价格与直播课相同\uFF0C用户可自由修改\u3002购买直播课的学生不会自动获得观看回放视频课的权利\u3002<br>- 为保障录制和同步成功\uFF0C请确保每节课都开启云端录制\u3002因为存储空间不足等原因而导致的录制失败\uFF0C需要老师后续手动补录\u3002</li></ul>" data-skin="primary classcourse-help-tooltip" data-placement="bottomLeft" data-offset-x="90"><i class="text primary icon-help-o"></i><span class="text">帮助信息</span></div><div class="title">直播设置</div></div><div class="form related-setting-form"><div class="group"><div class="inline"><label class="label">试听设置</label><div class="controls"><div class="radios"><label class="label radio no-allow"><input type="radio" name="{{isAppointment}}" value="{{NO_APPOINTMENT}}">不支持试听</label><label class="label radio allow texts{{#if appointmentDisabled}} disabled{{/if}}"><input type="radio" name="{{isAppointment}}" value="{{IS_APPOINTMENT}}"><span class="text">每节课允许试听</span><div class="input-group text texts"><Input options="{{auditionInputOptions}}" /><div class="label secondary text">分钟</div><span class="text small muted small-text">超出试听限制后\uFF0C学生需购买才可以继续观看</span></div></label></div></div></div></div><div class="group"><label class="label"></label><div class="checkboxes"><span class="checkbox" on-click="autoPlaybackRecordBlur()" ><input type="checkbox" checked="{{autoPlaybackRecord}}">提供回放</span><div class="hint">90%以上的老师会提供云端回放服务\uFF0C一方面能创造更多与学生接触的机会\uFF0C同时能沉淀您的优质内容</div></div></div><div class="group"><label class="label"></label><div class="checkboxes"><span class="checkbox" on-click="toVideoBlur()" ><input type="checkbox" checked="{{playbackToVideo}}" {{#if playbackToVideoDisabled}} disabled{{/if}}>回放自动转为视频课</span><div class="hint">开启回放视频课功能后\uFF0C系统将生成同名的视频课\uFF0C并将直播课的回放视频自动同步到该视频课\u3002</div></div></div></div><style>{{style}}</style></div>';}),define('userCenter/teacherCenter/classCourseEdit/onlineCourseEdit/component/OnlineRelatedSetting_305934c2d6',['require','exports','module','custom/helper/Popup','custom/form/Validator','../../offlineCourseEdit/service_d104b5ab74','./OnlineRelatedSetting_html','./OnlineRelatedSetting_css','../../../../common/component/Input_12b813ed72'],function(require){'use strict';function e(e){if(null==e)e=0;var t=0;if(e/1024/1024/1024>=1)t=(e/1024/1024/1024).toFixed(1)+'G';else if(e/1024/1024>=1)t=(e/1024/1024).toFixed(1)+'M';else if(e/1024>=1)t=(e/1024).toFixed(1)+'K';else t=e+'B';return t;}var t=(require('custom/helper/Popup'),require('custom/form/Validator')),i=(require('../../offlineCourseEdit/service_d104b5ab74'),0),n=1;return Ractive.extend({template:require('./OnlineRelatedSetting_html'),data:function(){return{style:require('./OnlineRelatedSetting_css'),auditionInputOptions:{name:'auditionTime',value:0,placeholder:'最多60',className:'audition-input'},NO_APPOINTMENT:i,IS_APPOINTMENT:n,appointmentDisabled:!1,playbackToVideo:!1,playbackToVideoDisabled:!1,freeDataSize:0,autoPlaybackRecord:!1,options:{auditionFlag:'',auditionTime:'',playbackToVideo:0,freeDataSize:'',autoPlaybackRecord:0}};},computed:{isAppointment:{get:function(){return this.get('appointmentDisabled')?i:n;},set:function(e){var t=this,i={};if(e){if(!t.get('options.auditionTime'))i['auditionInputOptions.value']=5,i['auditionInputOptions.focus']=!0;i['auditionInputOptions.disabled']=!1,i.appointmentDisabled=!1;}else i['auditionInputOptions.value']='',i['auditionInputOptions.disabled']=!0,i.appointmentDisabled=!0;t.set(i).then(function(){if(t.validator)t.validator.validate('auditionTime');});}}},components:{Input:require('../../../../common/component/Input_12b813ed72')},onrender:function(){var e=this,i=$(e.getElement()),n=e.get('options.autoPlaybackRecord');e.set({autoPlaybackRecord:1==n?!0:!1});var o=e.get('options.playbackToVideo');e.set({playbackToVideo:1==o?!0:!1}),e.bindData({'auditionInputOptions.value':'options.auditionTime',isAppointment:'options.auditionFlag',playbackToVideoDisabled:'options.playbackToVideoDisabled',freeDataSize:'options.freeDataSize'});var i=$(e.getElement());e.validator=new t({mainElement:i,validateOnBlur:!0,fields:{auditionTime:{rules:{required:!0,pattern:/^\d+$/,min:1,max:60},errors:{required:'请填写试听时长',pattern:'请输入1-60的整数',min:'请输入1-60之间的整数',max:'请输入1-60之间的整数'}}}}),e.observe('auditionInputOptions.focus',function(t){if(t){var i=e.get('auditionInputOptions.value'),n={};if(null==i)n['auditionInputOptions.value']=5;n.isAppointment=1,e.set(n).then(function(){e.validator.validate('auditionTime');});}}),e.observe('playbackToVideo.blur',function(t){if(t)e.judgeMember();});},toVideoBlur:function(){var t=this;if(!t.get('playbackToVideoDisabled')){var i=t.get('freeDataSize');if(i>0){var n=(i/1024/1024/100).toFixed(1)+'小时',o='<div style="text-align: left">选择自动生成回放视频课后\uFF0C每节直播课都需要手动开启云端录制\uFF0C<br>请确保有足够的云资料空间\u3002<br><br>现有空余资料空间\uFF1A<span class="primary">'+e(i)+'</span><br>预计可录制课程时长\uFF1A<span class="primary">'+n+'</span>左右</div>';alert({title:'温馨提示',content:o,width:450,buttons:[{text:'继续',type:'primary',action:function(){this.hide(),t.set({playbackToVideo:!0,'options.playbackToVideo':1});}},{text:'取消',type:'default',action:function(){this.hide();}}],onbeforehide:function(){t.set({playbackToVideo:!1,'options.playbackToVideo':0});}});}else alert({title:'温馨提示',content:'您的存储空间已满\uFF0C无法进行课程录制',width:360,buttons:[{text:'取消',type:'default',action:function(){this.hide();}},{text:'扩容',type:'primary',action:function(){this.hide(),location.href='/teacher_center/storage_space';}}],onbeforehide:function(){t.set({playbackToVideo:!1,'options.playbackToVideo':0});}});}},autoPlaybackRecordBlur:function(){var e=this;if(1==e.get('options.autoPlaybackRecord'))alert({title:'温馨提示',content:'为学生提供回放可以提高学生满意度\uFF0C同时提高学生的复购哦\uFF0C建议您开启云端录制来录制回放哦',width:360,buttons:[{text:'立即开启',type:'primary',action:function(){this.hide(),e.set({autoPlaybackRecord:!0,'options.autoPlaybackRecord':1});}},{text:'暂不录制',type:'default',action:function(){this.hide(),e.set({autoPlaybackRecord:!1,'options.autoPlaybackRecord':0});}}]});else e.set({autoPlaybackRecord:!0,'options.autoPlaybackRecord':1});},validate:function(){return this.validator.validate(!0);},getData:function(){var e=this,t={};if(e.get('options.auditionFlag'))t.trial_minutes=e.get('options.auditionTime');return t.auto_playback_record=e.get('options.autoPlaybackRecord'),t.playback_to_video=e.get('options.playbackToVideo'),t.free_data_size=e.get('freeDataSize'),t;}});}),define('userCenter/teacherCenter/classCourseEdit/onlineCourseEdit/component/OnlineRelatedSetting_css',function(){return".classcourse-help-tooltip{width:785px;font-size:14px;line-height:26px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;}.classcourse-help-tooltip:before,.classcourse-help-tooltip:after{left:96% !important;margin-left:-8px !important;border-width:0 8px 8px 8px !important}.classcourse-help-tooltip:before{top:-8px !important}.classcourse-help-tooltip:after{top:-7px !important}.related-setting{width:835px;padding:25px;background-color:#fff;border:1px solid #ededec;color:#6d6d6e;margin-top:20px;}.related-setting .header .title{font-size:20px;}.related-setting .header .title:before{content:' ';background-color:#6d6d6e;-webkit-border-radius:37px;-moz-border-radius:37px;border-radius:37px;display:inline-block;width:5px;height:16px;margin-right:10px}.related-setting .header .help{float:right;cursor:pointer;font-size:12px}.related-setting .form .group{margin-top:10px;}.related-setting .form .group > .label{width:80px}.related-setting .form .group .controls{width:703px}.related-setting .form .group .input{background-color:#f8f8f8}.related-setting .form .group input{color:#3d3d3e;}.related-setting .form .group input:focus{background-color:#fff}.related-setting .form .group .inline{display:inline-block;}.related-setting .form .group .inline > .label{display:inline-block;width:80px;text-align:right}.related-setting .form .group .inline .controls{display:inline-block;}.related-setting .form .group .inline .controls .input-group{display:inline-block}.related-setting .form .group .inline .audition-input{width:75px}.related-setting .form .group .inline .small-text{margin-top:8px}.related-setting .form .group .radios .no-allow{margin-right:15px;line-height:36px}.related-setting .form .group .radios .allow{float:right;width:590px}.related-setting .form .group .radios > .radio.disabled .tooltip.error{display:none !important}.related-setting .form .group .radios > .radio.disabled .audition-input input{border-color:#ccc;color:#ccc}.related-setting .form .group .checkboxes .checkbox{cursor:pointer;margin-left:80px;max-width:200px}.related-setting .form .group .checkboxes .hint{display:inline;font-size:12px;color:#cbcbcb;margin-left:20px}.dialog-alert .close{display:none}";}),define('userCenter/teacherCenter/classCourseEdit/onlineCourseEdit/onlineCourseEdit_html',function(){return'<div class="top-bar"><span class="button" on-click="goBack()"><i class="icon-chevron-left"></i>返回<span class="muted">&nbsp;/&nbsp;设置班课</span></span>{{#if courseNumber}}<span class="course-number muted">班课编号\uFF1A{{courseNumber}}</span>{{/if}}{{#if needCaogao}}<span class="save-time success">草稿最近自动保存时间: {{saveTime}}</span>{{/if}}</div><div class="content-wrapper"><div id="basic-info-edit"><OnlineBasicInfo options="{{onlineBasicInfoOptions}}" /></div><div id="course-cover-edit"><OfflineCoverEdit options="{{offlineCoverEditOptions}}" /></div><div id="course-detail-edit">{{#if !showOldEditor}}<OfflineDetailEdit options="{{offlineDetailEditOptions}}" />{{else}}<div class="rich-editor"><div class="header"><div class="title">课程图文详情</div></div><RichTextEditor options="{{richTextEditorOptions}}" /></div>{{/if}}</div><div id="course-plan-edit"><OnlinePlanEdit options="{{onlinePlanEditOptions}}" /></div><div id="related-setting-edit"><OnlineRelatedSetting options="{{onlineRelatedSettingOptions}}" /></div><div class="more" id="course-more-edit"><div class="header"><div class="help button" on-click="toggle(\'isShowMore\')">{{#if isShowMore}}点击收起{{else}}展开更多{{/if}}</div><div class="title">更多设置</div></div></div>{{#if isShowMore}}<OnlineCourseSetting options="{{onlineCourseSettingOptions}}" /><OfflineRelatedCourses options="{{offlineRelatedCoursesOptions}}" /><div id="course-template-edit"><OfflineCourseTemplate options="{{offlineCourseTemplateOptions}}"/></div>{{/if}}<div class="footer buttons"><div class="button primary" {{#if saveStatus >= STATUS_UPLOADING}} disabled{{/if}}on-click="submit()">{{#if saveStatus == STATUS_UPLOADING}}正在发布{{else}}发布班课{{/if}}</div></div></div><div class="side-card"><a href="#basic-info-edit" class="side-list">基础信息</a><a href="#course-cover-edit" class="side-list">课程封面</a><a href="#course-detail-edit" class="side-list">课程详情</a><a href="#course-plan-edit" class="side-list">教学计划</a></div>';}),define('userCenter/teacherCenter/classCourseEdit/onlineCourseEdit/onlineCourseEdit_84ce3db1d7',['require','exports','module','../offlineCourseEdit/service_d104b5ab74','cc/util/Timer','cc/util/url','cc/function/toNumber','cc/util/localStorage','cobble/function/pageScrollTop','userCenter/common/filter/formatDateTime_dec0a6129d','common/bindScroll_f2ce0a166a','./onlineCourseEdit_html','./component/OnlineBasicInfo_ef4abbe850','../offlineCourseEdit/component/OfflineCoverEdit_41eeeb9853','../offlineCourseEdit/component/OfflineDetailEdit_12f789bdab','../offlineCourseEdit/component/OfflinePlanEdit_847587e127','./component/OnlineRelatedSetting_305934c2d6','./component/OnlineCourseSetting_a35d5c6919','../offlineCourseEdit/component/OfflineRelatedCourses_7176cf1bb1','../offlineCourseEdit/component/OfflineCourseTemplate_4c7b926090','userCenter/common/component/RichTextEditor_70c287328e'],function(require,exports){'use strict';function e(e,t){var i=e&&e.course,n=i.prices?i.prices.now:'',o=i.prices?i.prices.original:'',r=i.student_amount?i.student_amount.max:'',a=i.trial_minutes?E:T,s=i.trial_minutes?i.trial_minutes:'';if(!i.number||t)a=E,s=5;var l=i.subject?{id:i.subject.id,path_crumbs:i.subject.path_crumbs,path_array:i.subject.path_array}:{id:'',path_crumbs:'',path_array:''};return{courseName:i.display_name?i.display_name:'',price:n,originPrice:o,memberNumber:r,auditionFlag:a,auditionTime:s,subject:l};}function t(e){var t=e&&e.course;if(!t)return'';if(t.covers)return{list:$.map(t.covers,function(e){return{url:e.url,id:e.storage_id};})};else return void 0;}function i(e){return'bold'==e?!0:!1;}function n(e){return'17px'==e?!0:!1;}function o(e){return'center'==e?!0:!1;}function r(e){if(e){var t=e.style,r=e.list;if(!r)return;var a=[];return $.each(r,function(e,t){if('title'==t.type)a.push({type:t.type,options:{text:t.text}});else if('body'==t.type){var r=t.text.replace(/<br \/>/g,'\n');a.push({type:t.type,options:{text:r,color:t.color,isBold:i(t.font_weight),isBig:n(t.font_size),isCenter:o(t.text_align),isEditing:!0}});}else if('image'==t.type)a.push({type:t.type,options:{url:t.url,storage_id:t.storage_id}});else if('video'==t.type)a.push({type:t.type,options:{video_id:t.video_id,cover:t.cover}});else if('audio'==t.type)a.push({type:t.type,options:{storage_id:t.storage_id,url:t.url}});}),{style:t,list:a};}}function a(e){var t=e&&e.course;if(t&&t.intro)return r({style:t.intro.style,list:t.intro.items});else return{style:'white',list:[]};}function s(e){var t=e.have_student,i=!1;if(e.from_shizi_login)i=!0;var n,o,r=e&&e.course,a='',s='',l='',c='',u='',d='';if(r.retire)n=r.retire.flag,o=r.retire.length;var s,l,p,f;if(r.chaban)s=r.chaban.flag,l=r.chaban.price_flag,p=r.chaban.quota,f=r.chaban.price;var c,m;if(r.student_amount){var h=r.student_amount.min;if(c=h,h>1)m=r.student_amount.min;}if(1==n)a='hourExit';else if(2==n)a='custom';else if(100==n)a='noExit';else a='anyTime';if(1==s)s='nochaban';else if(2==s)s='chabancustom';else s='insertchaban';if(2==l)l='chabanpricecustom';else if(1==l)l='restfullprice';else l='allfullprice';if(m>1)c='minRule';else c='normalRule';if(void 0==r.auto_increase_max_student_amount)u=1;else u=r.auto_increase_max_student_amount;if(void 0==r.mobile_visible)d=1;else d=r.mobile_visible;return{classRule:a,compatibleRule:s,compatiblePrice:l,minimumRule:c,retireText:o,chabanQuota:p,chabanPrice:f,minimumMember:m,autoReamed:u,smsContact:d,fromShiziLogin:i,haveStudent:t};}function l(e){var t=e.have_student,i=e.org_teachers,n=e&&e.course;if(n&&n.org_teachers)i=n.org_teachers;var o=[];if(n.schedules)I=n.schedules.length,$.each(n.schedules,function(e,i){o.push({id:i.id,beginTime:i.began_at,endTime:i.ended_at,content:i.content,readonly:t,teacherId:i.teacher_id});});var r=e.rest_schedules_time_change_times;return{schedules:o,haveStudent:t,orgTeachers:i,planLength:I,schedulesTimeChangeTimes:r};}function c(e,t){var i;if(e.free_data_size)i=e.free_data_size;else i=e.course.free_data_size;var e=e.course,n=e.trial_minutes?E:T,o=e.trial_minutes?e.trial_minutes:'',r=0===e.playback_to_video?e.playback_to_video:1,a=0===e.auto_playback_record?e.auto_playback_record:1;if(!e.number||t)n=E,o=5;var s=e.schedules,l=!1;if(s&&s[0]){var c=s[0].began_at.replace(/-/g,'/');if(new Date(c).getTime()<new Date().getTime()&&'copyCourse'!==A.action)l=!0;}return{auditionFlag:n,auditionTime:o,playbackToVideo:r,playbackToVideoDisabled:l,freeDataSize:i,autoPlaybackRecord:a};}function u(e){var t,i,n=e.templates.pc,o=e.templates.m,r=e&&e.course;if(r&&r.templates)t=r.templates.pc,i=r.templates.m;return{templatePc:n,templateM:o,templateCheckedPc:t,templateCheckedM:i};}function d(e){var t=e&&e.course;return{relatedCourse:t.recommend_courses};}function p(e,t,i,n,o,r,a,s){var l={};l.templatePc=s.templatePc,l.templateM=s.templateM,l.org_teachers=n.orgTeachers,l.display_name=e.courseName,l.subject={},l.student_amount={},l.subject=e.subject,l.prices={now:e.price,original:e.originPrice},l.trial_minutes=e.auditionTime,l.student_amount.max=e.memberNumber,l.student_amount.min=1,l.covers=[],l.cover_storage_ids=[],$.each(t.list,function(e,t){l.covers.push({storage_id:t.id,url:t.url}),l.cover_storage_ids.push(t.id);}),l.intro={},l.intro.style=i.style?i.style:'white';var c=[];if($.each(i.list,function(e,t){var i=t.type;if('title'==i)c.push({type:i,text:t.options.text});else if('body'==i)c.push({type:i,text:t.options.text,font_weight:t.options.isBold?'bold':'normal',font_size:t.options.isBig?'17px':'15px',text_align:t.options.isCenter?'center':'left',color:t.options.color});else if('image'==i)c.push({type:i,storage_id:t.options.storage_id,url:t.options.url});else if('video'==i)c.push({type:i,cover:t.options.cover,video_id:t.options.video_id});else if('audio'==i)c.push({type:i,url:t.options.url,storage_id:t.options.storage_id});}),l.intro.items=c,l.schedules=[],$.each(n.schedules,function(e,t){l.schedules.push({id:t.id,began_at:t.beginTime,ended_at:t.endTime,content:t.content,teacher_id:t.teacherId});}),l.trial_minutes=o.auditionTime,l.playback_to_video=o.playbackToVideo,l.free_data_size=o.freeDataSize,l.auto_playback_record=o.autoPlaybackRecord,l.chaban={},l.retire={},'anyTime'==r.classRule)l.retire.flag=0,l.retire.length=r.retireText;else if('custom'==r.classRule)l.retire.flag=2,l.retire.length=r.retireText;else if('noExit'==r.classRule)l.retire.flag=100,l.retire.length=r.retireText;if('nochaban'==r.compatibleRule)l.chaban.flag=1,l.chaban.quota='';else if('insertchaban'==r.compatibleRule)l.chaban.flag=3,l.chaban.quota='';if('allfullprice'==r.compatiblePrice)l.chaban.price_flag=3,l.chaban.price='';else if('restfullprice'==r.compatiblePrice)l.chaban.price_flag=1,l.chaban.price='';if('normalRule'==r.minimumRule)l.student_amount.min=1;else{var u=r.minimumMember;l.student_amount.min=u;}if(l.auto_increase_max_student_amount=r.autoReamed,''==r.autoReamed)l.auto_increase_max_student_amount=1;return l.mobile_visible=r.smsContact,l.from_shizi_login=r.fromShiziLogin,l.recommend_courses=a.relatedCourse,l.templates={},l.templates.pc=s.templateCheckedPc||'default',l.templates.m=s.templateCheckedM||'default',l.lesson_way=2,l;}var f,m=require('../offlineCourseEdit/service_d104b5ab74'),h=require('cc/util/Timer'),v=require('cc/util/url'),g=(require('cc/function/toNumber'),require('cc/util/localStorage')),b=require('cobble/function/pageScrollTop'),x=require('userCenter/common/filter/formatDateTime_dec0a6129d'),y=require('common/bindScroll_f2ce0a166a'),C='editLiveClassCourese',w=0,_=1,S=2,k=3,T=0,E=1,O=60000,D=0,I=0,A=v.parseQuery(location.search);exports.init=function(i){var n=l(i),o=!0,r=i.course.number,v=i.course.introduction?!0:!1,T=s(i),E=e(i),R=c(i);if('copyCourse'===A.action){if(E=e(i,'copyCourse'),R=c(i,'copyCourse'),n.copyCourse=!0,n.haveStudent=!1,T.haveStudent=!1,'hourExit'==T.classRule)T.classRule='anyTime';if('chabancustom'==T.compatibleRule)T.compatibleRule='insertchaban',T.chabanQuota=void 0;if('chabanpricecustom'==T.compatiblePrice)T.compatiblePrice='allfullprice',T.chabanPrice=void 0;o=!1,r='',v=!1;}new Ractive({el:'#container',template:require('./onlineCourseEdit_html'),data:{onlineBasicInfoOptions:E,offlineCoverEditOptions:t(i),offlineDetailEditOptions:a(i),onlinePlanEditOptions:n,onlineRelatedSettingOptions:R,onlineCourseSettingOptions:T,offlineCourseTemplateOptions:u(i),offlineRelatedCoursesOptions:d(i),isShowMore:!1,checkedIndex:0,STATUS_EDITING:w,STATUS_UPLOADING:_,STATUS_UPLOAD_SUCCESS:S,STATUS_UPLOAD_FAILURE:k,saveStatus:w,saveTime:x(new Date().getTime(),'HH:mm'),courseNumber:r,needCaogao:o,showOldEditor:v,richTextEditorOptions:{content:i.course.introduction,initHeight:400,initWidth:785,maxLength:1000,maxImageWidth:760,error:'',length:0},options:{}},components:{OnlineBasicInfo:require('./component/OnlineBasicInfo_ef4abbe850'),OfflineCoverEdit:require('../offlineCourseEdit/component/OfflineCoverEdit_41eeeb9853'),OfflineDetailEdit:require('../offlineCourseEdit/component/OfflineDetailEdit_12f789bdab'),OnlinePlanEdit:require('../offlineCourseEdit/component/OfflinePlanEdit_847587e127'),OnlineRelatedSetting:require('./component/OnlineRelatedSetting_305934c2d6'),OnlineCourseSetting:require('./component/OnlineCourseSetting_a35d5c6919'),OfflineRelatedCourses:require('../offlineCourseEdit/component/OfflineRelatedCourses_7176cf1bb1'),OfflineCourseTemplate:require('../offlineCourseEdit/component/OfflineCourseTemplate_4c7b926090'),RichTextEditor:require('userCenter/common/component/RichTextEditor_70c287328e')},onrender:function(){var i=this;if(!i.get('courseNumber')&&i.get('needCaogao')){var n=g.get(C+userData.id);if(n&&'undefined'!=n){var o={};o.course=JSON.parse(n),i.set({onlineBasicInfoOptions:e(o),offlineCoverEditOptions:t(o),offlineDetailEditOptions:a(o),onlinePlanEditOptions:l(o),onlineRelatedSettingOptions:c(o),onlineCourseSettingOptions:s(o),offlineRelatedCoursesOptions:d(o)});}f=new h({task:function(){var e=i.get('onlineBasicInfoOptions'),t=i.get('offlineCoverEditOptions'),n=i.get('offlineDetailEditOptions'),o=i.get('onlinePlanEditOptions'),r=i.get('onlineRelatedSettingOptions'),a=i.get('onlineCourseSettingOptions'),s=i.get('offlineRelatedCoursesOptions'),l=i.get('offlineCourseTemplateOptions'),c=i.findComponent('OnlineBasicInfo'),u=p(e,t,n,o,r,a,s,l,c);g.set(C+userData.id,JSON.stringify(u)),i.set('saveTime',x(new Date().getTime(),'HH:mm'));},interval:O}),f.start();}else i.set('needCaogao',!1);var r=function(){var e=$('.side-card'),t=$('.content-wrapper'),i=e.offset().top,n=t.children(),o=e.children(),r=function(e){var t=!1;n.each(function(i){var n=$(this),r=$(o[i]);if(!t&&n.offset().top+n.height()+20>e)t=!0,r.addClass('checked');else r.removeClass('checked');});},a=function(){var t=b();if(t>i)e.addClass('fixed');else e.removeClass('fixed');r(t);};y(window,a,1),a();};if(r(),'#course-template-edit'==location.hash)i.set('isShowMore',!0).then(function(){location.href='#course-template-edit';});},onteardown:function(){f.dispose();},goBack:function(){alert({title:'温馨提示',content:'直播课信息未保存\uFF0C确认要返回直播课列表吗\uFF1F',buttons:[{text:'确定',type:'primary',action:function(){location.href='/tcenter/courses/class-courses/list-html?lesson_way=2';}},{text:'取消',action:function(){this.hide();}}]});},submit:function(){var e=this,t=e.get('onlineBasicInfoOptions'),i=(e.get('offlineCoverEditOptions'),e.get('offlineDetailEditOptions')),n=e.get('onlinePlanEditOptions'),o=e.get('onlineCourseSettingOptions'),r=e.get('offlineRelatedCoursesOptions'),a=e.get('offlineCourseTemplateOptions'),s=e.findComponent('OfflineDetailEdit'),l=e.findComponent('OnlineBasicInfo'),c=e.findComponent('OfflineCoverEdit'),u=e.findComponent('OnlineRelatedSetting'),d=e.findComponent('OnlinePlanEdit'),p=e.findComponent('OnlineCourseSetting'),f=e.findComponent('OfflineCourseTemplate'),h={};if(l.validate()&&u.validate()){if(''!=e.get('courseNumber'))h.number=e.get('courseNumber');if(!e.get('showOldEditor')){if(0==i.list.length)return alert({title:'温馨提示',content:'请编辑课程详情'}),void(location.href='#course-detail-edit');var v=s.validate();if(v)return void(location.href='#course-detail-edit');$.extend(h,s.getData());}else h.introduction=e.get('richTextEditorOptions.content');var b=n.schedules.length;if(0==b)return alert({title:'温馨提示',content:'请编辑课节'}),void(location.href='#course-plan-edit');if(500>I&&b>500)return alert({title:'温馨提示',content:'课节最多不能超过 500 节'}),void(location.href='#course-plan-edit');if($.extend(h,l.getData(),c.getData(),d.getData(),u.getData()),h.chaban={},h.retire={},$.extend(h,e.getSettingData()),'custom'==o.classRule){if(b<=o.retireText){var x;if(1==b)x='抱歉\uFF0C当您的课节总数为1时\uFF0C不可设置\u201C课前可退\u201D\uFF0C还请修改后提交';else x='退班规则最大可输入'+(b-1);return void alert({title:'温馨提示',content:x});}if(e.get('isShowMore'))if(p&&p.validate('retireText'))h.retire.length=o.retireText;else return void alert({title:'温馨提示',content:'请编辑退班规则'});else h.retire.length=o.retireText;}if('chabancustom'==o.compatibleRule)if(!e.get('isShowMore'))h.chaban.quota=o.chabanQuota;else if(p&&p.validate('chabanQuota'))h.chaban.quota=o.chabanQuota;else return void alert({title:'温馨提示',content:'请编辑插班规则'});if('chabanpricecustom'==o.compatiblePrice)if(!e.get('isShowMore'))h.chaban.price=o.chabanPrice;else if(p&&p.validate('chabanPrice'))h.chaban.price=o.chabanPrice;else return void alert({title:'温馨提示',content:'请编辑插班价格'});if('normalRule'==o.minimumRule)h.student_amount.min=1;else if(!e.get('isShowMore')){var y=+o.minimumMember;h.student_amount.min=y;}else if(p&&p.validate('minMember')){var y=+o.minimumMember;if(y-t.memberNumber>0)return void alert({title:'温馨提示',content:'保底开班人数必须小于班级人数'});else h.student_amount.min=y;}else return;if(h.mobile_visible=o.smsContact,h.auto_increase_max_student_amount=o.autoReamed,h.recommend_courses=r.relatedCourse,h.templates={},h.templates.pc=a.templateCheckedPc||'default',h.templates.m=a.templateCheckedM||'default',e.get('isShowMore')&&!f.validate())return;if(h.lesson_way=2,D)h.ignore_schedule_conflict=1;var T=JSON.stringify(h);if(!e.get('saveStatus'))e.set('saveStatus',_).then(function(){var t=C+userData.id;m.saveOfflineCourse({data:T}).then(function(i){if(0==i.code)g.remove(t),e.set('saveStatus',S).then(function(){location.href='/class_course/success?number='+i.data.number;});},function(t){if(991105===t.code)e.set('saveStatus',k).then(function(){alert({title:'温馨提示',content:t.msg,onbeforehide:function(){e.set('saveStatus',w);},buttons:[{text:'确定',type:'primary',action:function(){D=1,e.set('saveStatus',w).then(function(){e.submit();}),this.hide();}},{text:'取消',type:'',action:function(){e.set('saveStatus',w),this.hide();}}]});});else e.set('saveStatus',k).then(function(){alert({title:'温馨提示',content:t.msg,onbeforehide:function(){e.set('saveStatus',w);},buttons:[{text:'确定',type:'primary',action:function(){e.set('saveStatus',w),this.hide();}}]});});});});}else;},getSettingData:function(){var e=this,t=e.get('onlineCourseSettingOptions'),i={};if(i.chaban={},i.retire={},'hourExit'==t.classRule)i.retire.flag=1,i.retire.length=t.retireText;else if('anyTime'==t.classRule)i.retire.flag=0,i.retire.length=t.retireText;else if('noExit'==t.classRule)i.retire.flag=100,i.retire.length=t.retireText;else if('custom'==t.classRule)i.retire.flag=2;if('nochaban'==t.compatibleRule)i.chaban.flag=1,i.chaban.quota='';else if('insertchaban'==t.compatibleRule)i.chaban.flag=3,i.chaban.quota='';else if('chabancustom'==t.compatibleRule)i.chaban.flag=2;if('allfullprice'==t.compatiblePrice)i.chaban.price_flag=3,i.chaban.price='';else if('restfullprice'==t.compatiblePrice)i.chaban.price_flag=1,i.chaban.price='';else if('chabanpricecustom'==t.compatiblePrice)i.chaban.price_flag=2;return i;}});};}),define('userCenter/teacherCenter/videoCourseEdit/component/VideoCropDialog_html',function(){return'<div class="dialog video-crop-dialog"><div class="header"><div class="title">上传封面</div></div><div class="close">\xD7</div><div class="body"><div style="width: {{width}}px;height: {{height}}px;"><div class="image-crop"></div></div></div></div>';}),define('userCenter/teacherCenter/videoCourseEdit/component/VideoCropDialog_ccea4c99f9',['require','../../../common/function/ractiveDialog_e00233834c','imageCrop','./VideoCropDialog_html'],function(require){'use strict';var e=require('../../../common/function/ractiveDialog_e00233834c'),t=require('imageCrop');return function(i){var n=825,o=445,r=e({template:require('./VideoCropDialog_html'),data:{width:n,height:o},onrender:function(){var e=$(this.el);this.imageCrop=new t({element:e.find('.image-crop'),width:n,height:o,action:'/user/previewBinaryImage',accept:'png,jpg,jpeg',minSize:1,maxSize:5120,button:{select:{x:560,y:380,width:80,height:30,text:'选择图片'},upload:{x:700,y:380,width:80,height:30,text:'保存图片'},leftRotate:{x:600,y:320,width:40,height:30,text:'左转'},rightRotate:{x:700,y:320,width:40,height:30,text:'右转'}},src:{x:520,y:0,width:300,height:280},dest:[{x:0,y:0,width:500,height:280,text:'500x280'},{x:0,y:320,width:180,height:100,text:'180x100'},{x:200,y:365,width:100,height:56,text:'100x56'}],onValidateError:function(e){if('size'==e.type)alert({title:'温馨提示',content:'不要上传大于 5M 的图片哦'});},onUploadComplete:function(e){var t=e.data;if('string'===$.type(t))t=$.parseJSON(t);if(0!==t.code&&t.msg)alert(t.msg);var n=i&&i.onUploadComplete;if($.isFunction(n))n(t);}});}});return r;};});