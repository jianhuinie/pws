define("cc/form/DateRange",["require","exports","module","../function/split","../function/contains","../function/isValidDate","../helper/Popup","../ui/Calendar","../util/life","../util/input","./common"],function(require){"use strict";function e(e){f.init(this,e)}function t(e,t){var n=e.execute("parse",t);return o(n)?t:""}function n(e,n,i){var r=t(e,e.get(i)),u=new a({mainElement:n,mainTemplate:e.option("calendarTemplate"),mode:e.option("mode"),date:r?r:null,parse:e.option("parse"),today:e.option("today"),stable:e.option("stable"),firstDay:e.option("firstDay"),renderSelector:e.option("renderSelector"),renderTemplate:e.option("renderTemplate"),prevSelector:e.option("prevSelector"),nextSelector:e.option("nextSelector"),itemSelector:e.option("itemSelector"),itemActiveClass:e.option("itemActiveClass"),valueAttribute:e.option("valueAttribute"),renderOnClickAdjacency:e.option("renderOnClickAdjacency"),render:function(t,n){return e.execute("render",[t,n])}});return e.once("aftersync",function(){var t=e.option("watchSync")||{};t[i]=function(t){var n=e.execute("parse",t);if(o(n))u.set({date:n,value:t})},e.option({watchSync:t}),t[i](e.get(i))}),u}var i=require("../function/split"),r=require("../function/contains"),o=require("../function/isValidDate"),u=require("../helper/Popup"),a=require("../ui/Calendar"),f=require("../util/life"),c=require("../util/input"),s=require("./common"),l=e.prototype;return l.type="DateRange",l.init=function(){var e=this;e.initStruct();var t=e.option("mainElement"),i=t.find(e.option("inputSelector")),o=t.find(e.option("layerSelector")),a=n(e,o.find(e.option("startCalendarSelector")),"startDate");a.on("valueadd",function(t,n){var i=f.get("value");if(i){var r=e.execute("parse",n.value);if(i=e.execute("parse",i),r>i)return!1}});var f=n(e,o.find(e.option("endCalendarSelector")),"endDate");f.on("valueadd",function(t,n){var i=a.get("value");if(i){var r=e.execute("parse",n.value);if(i=e.execute("parse",i),i>r)return!1}});var s=new u({triggerElement:i,layerElement:o,showLayerTrigger:e.option("showLayerTrigger"),showLayerDelay:e.option("showLayerDelay"),hideLayerTrigger:e.option("hideLayerTrigger"),hideLayerDelay:e.option("hideLayerDelay"),showLayerAnimation:function(){e.execute("showLayerAnimation",{layerElement:o})},hideLayerAnimation:function(){e.execute("hideLayerAnimation",{layerElement:o})}});c.init(i),i.on(c.INPUT,function(){e.set("value",this.value)}),e.once("aftersync",function(){s.option("watchSync",{opened:function(t){if(t)e.open();else e.close()}}),e.state("opened",s.is("opened"))}),s.on("dispatch",function(t,n){var u=t.originalEvent;if("beforeclose"===u.type){var a=u.originalEvent,f=a.target;if("click"===a.type&&f)if(!r(document,f)||r(i,f)||r(o,f))return!1}e.dispatch(e.emit(u,n),n)});var l=e.namespace(),p=e.option("applySelector");if(p)o.on("click"+l,p,function(){var t=[a.get("value"),f.get("value")];e.set("value",t.join(e.option("separator"))),e.close()});var d=e.option("cancelSelector");if(d)o.on("click"+l,d,function(){e.close()});e.inner({main:t,layer:o,"native":i,popup:s,startCalendar:a,endCalendar:f}),e.set({name:e.option("name"),value:e.option("value"),startDate:e.option("startDate"),endDate:e.option("endDate")})},l.open=function(){this.state("opened",!0)},l.close=function(){this.state("opened",!1)},l.dispose=function(){var e=this;f.dispose(e),c.dispose(e.inner("native")),e.inner("popup").dispose(),e.inner("startCalendar").dispose(),e.inner("endCalendar").dispose(),e.inner("layer").off(e.namespace())},f.extend(l,["open","close"]),e.propertyUpdater={},e.propertyUpdater.name=e.propertyUpdater.value=e.propertyUpdater.startDate=e.propertyUpdater.endDate=function(e,n,r){var o=this,u=o.option("separator"),a=r.name;if(a)s.prop(o,"name",a.newValue);var f,n,c,l,p=r.value;if(p)f=p.newValue,n=p.oldValue;else{var d=r.startDate;if(d)c=d.newValue;var v=r.endDate;if(v)l=v.newValue;if("string"===$.type(c)||"string"===$.type(l)){if(!c)c=o.get("startDate");if(!l)l=o.get("endDate");if(o.execute("parse",c)<=o.execute("parse",l))f=[c,l].join(u)}}if("string"===$.type(f)){var h=i(f,u);if(2===h.length)if(c=t(o,h[0]),l=t(o,h[1]),c&&l)o.set({startDate:c,endDate:l});else f="";else f="";if(o.set("value",f,{silent:!0}),s.prop(this,"value",f),!f&&n)o.state("opened",!0)}return!1},e.propertyValidator={name:function(e){return s.validateName(this,e)},value:function(e){return s.validateValue(this,e)},startDate:function(e){return t(this,e)},endDate:function(e){return t(this,e)}},e.stateUpdater={opened:function(e){var t=this.inner("popup");if(e)t.open();else t.close()}},e}),define("cc/form/common",["require","exports","module"],function(require,exports){"use strict";exports.prop=function(e,t,n){if($.isPlainObject(t))$.each(t,function(t,n){exports.prop(e,t,n)});else{var i=e.inner("native");if(2===arguments.length)return i.prop(t);else{if(i.prop(t)!==n)i.prop(t,n);if("value"===t)i.trigger("change")}}},exports.setClass=function(e,t,n){var i=e.option(t);if(i)e.option("mainElement")[n+"Class"](i)},exports.findNative=function(e,t){var n=e.option("mainElement").find(t);if(0===n.length)e.error("form/"+e.type+" 必须包含一个 ["+t+"].");return n.eq(0)},exports.validateName=function(e,t){if("string"!==$.type(t))if(t=exports.prop(e,"name"),!t||"string"!==$.type(t))e.error("name attribute is missing.");return t},exports.validateValue=function(e,t){var n=$.type(t);if("number"===n)t=""+t;else if("string"!==n)t=exports.prop(e,"value")||"";return t}}),define("cc/function/around",["require","exports","module"],function(){"use strict";return function(e,t,n,i){var r="string"===$.type(t),o=r?e[t]:e;if(!r)i=n,n=t;var u=function(){var e,t=$.makeArray(arguments);if($.isFunction(n))e=n.apply(this,t);if(e!==!1){if($.isFunction(o))e=o.apply(this,t);if($.isFunction(i)){t.push(e);var r=i.apply(this,t);if("undefined"!==$.type(r))e=r}return e}};return r?e[t]=u:u}}),define("cc/function/contains",["require","exports","module"],function(){"use strict";return function(e,t){if(e=e.jquery?e[0]:e,t=t.jquery?t[0]:t,!e||!t)return!1;if(e===t)return!0;else return $.contains(e,t)}}),define("cc/function/createEvent",["require","exports","module"],function(){"use strict";return function(e){if(e&&!e[$.expando])e="string"===$.type(e)||e.type?$.Event(e):$.Event(null,e);return e||$.Event()}}),define("cc/function/extend",["require","exports","module"],function(){"use strict";return function(e,t){if($.isPlainObject(t))$.each(t,function(t,n){if(!(t in e))e[t]=n})}}),define("cc/function/firstDateInMonth",["require","exports","module","./offsetDate"],function(require){"use strict";var e=require("./offsetDate");return function(t){if("number"===$.type(t))t=new Date(t);return e(t,1-t.getDate())}}),define("cc/function/firstDateInWeek",["require","exports","module","./offsetDate"],function(require){"use strict";var e=require("./offsetDate");return function(t,n){if("number"===$.type(t))t=new Date(t);var i=t.getDay();return i=i>=n?i:i+7,e(t,-1*(i-n))}}),define("cc/function/guid",["require","exports","module"],function(){var e=0;return function(){return"cc_"+e++}}),define("cc/function/isHidden",["require","exports","module"],function(){"use strict";return function(e){e.css("display");return"none"===e.css("display")||0==e.css("opacity")||"hidden"===e.css("visibility")}}),define("cc/function/isValidDate",["require","exports","module"],function(){"use strict";return function(e){if("date"!==$.type(e))return!1;var t=e.getTime();if("number"===$.type(t))return(""+t).length>8;else return!1}}),define("cc/function/lastDateInMonth",["require","exports","module","./offsetDate","./offsetMonth","./firstDateInMonth"],function(require){"use strict";var e=require("./offsetDate"),t=require("./offsetMonth"),n=require("./firstDateInMonth");return function(i){return e(n(t(i,1)),-1)}}),define("cc/function/lastDateInWeek",["require","exports","module","./firstDateInWeek","./offsetDate"],function(require){"use strict";var e=require("./firstDateInWeek"),t=require("./offsetDate");return function(n,i){return t(e(n,i),6)}}),define("cc/function/nextTick",["require","exports","module"],function(){"use strict";return function(e){var t=setTimeout(e,0);return function(){clearTimeout(t)}}}),define("cc/function/offsetDate",["require","exports","module","./offsetHour"],function(require){"use strict";var e=require("./offsetHour");return function(t,n){return e(t,24*n)}}),define("cc/function/offsetHour",["require","exports","module","./offsetMinute"],function(require){"use strict";var e=require("./offsetMinute");return function(t,n){return e(t,60*n)}}),define("cc/function/offsetMinute",["require","exports","module","./offsetSecond"],function(require){"use strict";var e=require("./offsetSecond");return function(t,n){return e(t,60*n)}}),define("cc/function/offsetMonth",["require","exports","module"],function(){"use strict";return function(e,t){if("date"===$.type(e))e=e.getTime();return e=new Date(e),e.setDate(1),e.setMonth(e.getMonth()+t),e}}),define("cc/function/offsetParent",["require","exports","module"],function(){"use strict";function e(e){return e.is("body")||"static"!==e.css("position")}return function(t){if(t.is("body"))return t;for(var n=t.parent();!e(n);)n=n.parent();return n}}),define("cc/function/offsetSecond",["require","exports","module"],function(){"use strict";return function(e,t){if("date"===$.type(e))e=e.getTime();return new Date(e+1e3*t)}}),define("cc/function/offsetWeek",["require","exports","module","./offsetDate"],function(require){"use strict";var e=require("./offsetDate");return function(t,n){return e(t,7*n)}}),define("cc/function/parseDate",["require","exports","module"],function(){"use strict";return function(e,t,n){var i=!1;if($.isNumeric(e)&&$.isNumeric(t)&&$.isNumeric(n))i=!0;else if(1===arguments.length){if($.isPlainObject(e))i=!0,n=e.date,t=e.month,e=e.year}else if(2===arguments.length)if("string"===$.type(e)){i=!0;var r=e.split(t||"-");e=r[0],t=r[1],n=r[2]}if(i)if(4===String(e).length&&t>=1&&12>=t&&n>=1&&31>=n)return new Date(e,t-1,n)}}),define("cc/function/replaceWith",["require"],function(){"use strict";return function(e,t){e=e[0],t=t[0],e.parentNode.replaceChild(t,e)}}),define("cc/function/simplifyDate",["require","exports","module"],function(){"use strict";return function(e){if(e){if("number"===$.type(e))e=new Date(e);return{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate(),day:e.getDay()}}}}),define("cc/function/split",["require","exports","module"],function(){"use strict";return function(e,t){var n=[];if("number"===$.type(e))e=""+e;if(e&&"string"===$.type(e))$.each(e.split(t),function(e,t){if(t=$.trim(t))n.push(t)});return n}}),define("cc/function/supportInput",["require","exports","module"],function(){"use strict";return function(){var e=$('<input type="text" />')[0];return"oninput"in e}}),define("cc/function/toBoolean",["require","exports","module"],function(){"use strict";return function(e,t){if("boolean"!==$.type(e)){if(1===arguments.length)t=!!e;e=t}return e}}),define("cc/function/ucFirst",["require","exports","module"],function(){"use strict";return function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}),define("cc/helper/Popup",["require","exports","module","../function/isHidden","../function/contains","../function/nextTick","../util/life","../util/trigger","../util/instance"],function(require){"use strict";function e(e){h.init(this,e)}function t(e,t){return function(n){var i=$(this);if("disabled"!==i.attr("disabled")){if($.isFunction(t))if(!t.call(this,n))return;e.open(n)}}}function n(e,t){return function(n){var i=$(this);if("disabled"!==i.attr("disabled")){if($.isFunction(t))if(!t.call(this,n))return;e.close(n);var r=e.inner(w);if(r)e.sync(),r.resolve()}}}function i(e,t,n,i){if(e)e.on(t,i,n)}function r(e,t,n){if(e)e.off(t,n)}function o(e,t){var n=e.option("triggerElement"),r=e.option("triggerSelector");if(n||r)i(n||m.body,t.type,t.handler,r)}function u(e,t){r(e.option("triggerElement")||m.body,t.type,t.handler)}function a(e,t){i(m.document,t.type,t.handler)}function f(e,t){r(m.document,t.type,t.handler)}function c(e){return n(e,function(t){return!d(e.inner("layer"),t.target)})}function s(e,t){var n=e.option("triggerElement"),i=e.option("triggerSelector");if(n&&!i)return n;if(t)return $(t.currentTarget);else return void 0}function l(e,t){var n=e.option("layerElement");if(n&&n.jquery&&n.length)return n;if(t&&$.isFunction(n)){if(n=e.execute(n,t),n&&n.tagName)n=$(n);return n}}var p=require("../function/isHidden"),d=require("../function/contains"),v=require("../function/nextTick"),h=require("../util/life"),y=require("../util/trigger"),m=require("../util/instance"),g=e.prototype;g.type="Popup",g.init=function(){var e=this,t=function(t,n){if($.isFunction(t[n]))return t[n](e);else return void 0},n=y.parse(e.option("showLayerTrigger"),function(n){var i=S.show[n];return{delay:e.option("showLayerDelay"),startDelay:t(i,"startDelay"),endDelay:t(i,"endDelay"),handler:t(i,"handler"),beforeHandler:function(t){var n=function(){e.inner({trigger:s(e,t),layer:l(e,t)})};if(e.is("opened")){var i=$.Deferred();return i.then(n),e.inner(w,i),i}else n()}}}),i=y.parse(e.option("hideLayerTrigger"),function(n){var i=S.hide[n];return{delay:e.option("hideLayerDelay"),startDelay:t(i,"startDelay"),endDelay:t(i,"endDelay"),handler:t(i,"handler")}}),r=function(t){$.each(n,function(n,i){S.show[n][t](e,i)})},o=function(t){$.each(i,function(n,i){S.hide[n][t](e,i)})},u=!1,a=!1,f=function(){if(!u)r("on"),u=!0},c=function(){if(u)r("off"),u=!1},p=function(){if(!a)o("on"),a=!0},d=function(){if(a)o("off"),a=!1},h=function(t,n){var i=n.opened;if(i)if(i.newValue){if(!e.option("triggerSelector"))c();v(p)}else d(),f()};e.before("dispose",function(){e.off("statechange",h),c(),d(),e.close()}).on("statechange",h),e.inner({trigger:s(e),layer:l(e)}),e.state({opened:e.option("opened")})},g.open=function(){this.state("opened",!0)},g._open=function(e){var t=this;if(t.is("opened")){var n=t.inner("layer"),i=t.inner("trigger"),r=n.data(x);if(i&&r&&i[0]!==r[0])n.data(D).close(),v(function(){if(t.guid)t.open(e)});return!1}return{dispatch:!0}},g.open_=function(){var e=this,t=e.inner("layer");if(t){var n={};n[x]=e.inner("trigger"),n[D]=e,t.data(n)}return{dispatch:!0}},g.close=function(){this.state("opened",!1)},g._close=function(){if(!this.is("opened"))return!1;else return{dispatch:!0}},g.close_=function(){var e=this,t=e.inner("layer");if(t)t.removeData(D).removeData(x);return{dispatch:!0}},g.dispose=function(){h.dispose(this)},h.extend(g),e.stateUpdater={opened:function(e){var t=this.inner("layer");if(t)this.execute(e?"showLayerAnimation":"hideLayerAnimation",{layerElement:t})}},e.stateValidator={opened:function(e){if("boolean"!==$.type(e)){var t=this.inner("layer");if(t)e=!p(t)}return e}};var D="__prev_popup__",x="__trigger_element__",w="__hide_promise__",b=y.enter.type,q=y.leave.type,S={show:{focus:{on:o,off:u,handler:t},click:{on:o,off:u,handler:t},enter:{on:o,off:u,handler:t,startDelay:function(e){return function(t){i(e.inner("trigger"),q,t)}},endDelay:function(e){return function(t){r(e.inner("trigger"),q,t)}}},context:{on:o,off:u,handler:t}},hide:{blur:{on:o,off:u,handler:n},click:{on:a,off:f,handler:c},leave:{on:function(e,t){i(e.inner("trigger"),t.type,t.handler),i(e.inner("layer"),t.type,t.handler)},off:function(e,t){r(e.inner("trigger"),t.type,t.handler),r(e.inner("layer"),t.type,t.handler)},handler:n,startDelay:function(e){return function(t){i(e.inner("trigger"),b,t),i(e.inner("layer"),b,t)}},endDelay:function(e){return function(t){r(e.inner("trigger"),b,t),r(e.inner("layer"),b,t)}}},context:{on:a,off:f,handler:c}}};return e}),define("cc/ui/Calendar",["require","../function/offsetWeek","../function/offsetMonth","../function/firstDateInWeek","../function/lastDateInWeek","../function/firstDateInMonth","../function/lastDateInMonth","../function/isValidDate","../function/parseDate","../function/simplifyDate","../util/life","../util/Value"],function(require){"use strict";function e(e){v.init(this,e)}function t(e,t){var i,r,u=e.option("firstDay"),a=o(e.get("today")),p=e.option("mode")===m;if(p)i=f(s(t),u),r=c(l(t),u);else i=f(t,u),r=c(t,u);if(i=o(i),r=o(r),p&&e.option("stable")){var v=r-i,h=D-v;if(h>0)r+=h}var y={};e.inner("value").each(function(t){if(t){var n=e.execute("parse",t);y[o(n)]=1}});var g=n(i,r,a,y);return $.extend(d(t),{start:g[0],end:g[g.length-1],list:g})}function n(e,t,n,i){for(var r,o=[],u=e;t>=u;u+=g){if(r=d(u),u>n)r.phase="future";else if(n>u)r.phase="past";else r.phase="today";if(i[u])r.active=!0;o.push(r)}return o}function i(e,t,n){if(!n)return!1;var i,r;if(e.option("mode")===m)i=s(n),r=l(n);else{var o=e.option("firstDay");i=f(n,o),r=c(n,o)}return t>=i&&t<r.getTime()+g}function r(e,n){var i=e.get("date");i=e.option("mode")===m?a(i,n):u(i,n),e.set({date:i,data:t(e,i)})}function o(e){return e.setHours(0,0,0,0)}var u=require("../function/offsetWeek"),a=require("../function/offsetMonth"),f=require("../function/firstDateInWeek"),c=require("../function/lastDateInWeek"),s=require("../function/firstDateInMonth"),l=require("../function/lastDateInMonth"),p=require("../function/isValidDate"),d=(require("../function/parseDate"),require("../function/simplifyDate")),v=require("../util/life"),h=require("../util/Value"),y=e.prototype;y.type="Calendar",y.init=function(){var e=this;e.initStruct();var t=e.option("mainElement"),n="click"+e.namespace(),r=e.option("itemSelector");if(r){var o=e.option("valueAttribute");if(!o)e.error("valueAttribute is missing.");t.on(n,r,function(){var t,n,r=$(this).attr(o),u=e.inner("value");if(u.has(r)){if(e.option("toggle"))t="valuedel",u.remove(r)}else if(t="valueadd",u.add(r))if(e.option("renderOnClickAdjacency"))if(n=e.execute("parse",r),i(e,n,e.get("date")))n=null;if(t)if(t=e.emit(t,{value:r}),!t.isDefaultPrevented()){var a={value:u.get()};if(n)a.date=n;e.set(a),e.sync()}})}var u=e.option("prevSelector");if(u)t.on(n,u,$.proxy(e.prev,e));var a=e.option("nextSelector");if(a)t.on(n,a,$.proxy(e.next,e));e.inner({main:t,value:new h({multiple:e.option("multiple"),validate:function(t){return p(e.execute("parse",t))}})});var f=e.option("today")||new Date;e.set({today:f,date:e.option("date")||f,value:e.option("value")})},y.prev=function(){r(this,-1)},y.next=function(){r(this,1)},y.render=function(){this.renderWith(this.get("data"))},y._render=function(){if(!this.get("data"))return!1;else return void 0},y.dispose=function(){var e=this;v.dispose(e),e.inner("value").dispose()},v.extend(y),e.propertyUpdater={},e.propertyUpdater.data=e.propertyUpdater.date=e.propertyUpdater.value=function(e,n,i){var r,o=this,u=function(e){r=!0,o.set("data",t(o,e),{silent:!0})};if(i.data)r=i.data.newValue;if(!r&&i.date)u(i.date.newValue);if(!r&&!o.get("data"))u(o.get("date"));if(r)return void o.render();else if(!i.value)return;var a=o.option("valueAttribute"),f=o.option("itemActiveClass");if(a&&f){var c=o.inner("main");return c.find("."+f).removeClass(f),o.inner("value").each(function(e){if(e)c.find("["+a+'="'+e+'"]').addClass(f)}),!1}},e.propertyValidator={value:function(e){var t=this.inner("value");return t.set(e),t.get()}};var m="month",g=864e5,D=41*g;return e}),define("cc/util/Value",["require","exports","module","../function/split"],function(require){"use strict";function e(t){$.extend(this,e.defaultOptions,t),this.init()}var t=require("../function/split"),n=e.prototype;return n.init=function(){this.list=[]},n.get=function(){return this.list.join(this.sep)},n.set=function(e){var n=this;n.list.length=0,$.each(t(e,n.sep),function(e,t){n.add(t)})},n.add=function(e){var t=this,n=t.list,i=$.inArray(e,n);if(0>i){if(!t.validate||t.validate(e))n.push(e);else return;if(n.length>1)if(!t.multiple)n[0]=n.pop(),n.length=1;else if(t.sort)n.sort(t.sort);return!0}else;},n.remove=function(e){var t=this.list,n=$.inArray(e,t);if(n>=0)return t.splice(n,1),!0;else return void 0},n.has=function(e){return $.inArray(e,this.list)>=0},n.each=function(e){$.each(this.list,function(t,n){return e(n,t)})},n.dispose=function(){this.list=null},e.defaultOptions={sep:",",sort:function(e,t){if(e>t)return 1;else if(t>e)return-1;else return 0}},e}),define("cc/util/event",["require","exports","module","../function/extend","../function/createEvent"],function(require,exports){"use strict";var e=require("../function/extend"),t=require("../function/createEvent"),n={get$:function(){var e=this;if(!e.$)e.$=$({});return e.$},on:function(e,t,n){return this.get$().on(e,t,n),this},once:function(e,t,n){return this.get$().one(e,t,n),this},off:function(e,t){return this.get$().off(e,t),this},emit:function(e,n){return e=t(e),this.get$().trigger(e,n),e}};exports.extend=function(t){e(t,n)}}),define("cc/util/input",["require","exports","module","../function/guid","../function/around","../function/supportInput"],function(require,exports){"use strict";function e(e){var t="."+n();e.data(o,t).on("input"+t,function(t){t.type=u,e.trigger(t)})}function t(e){var t=e.val(),r=!1,a="."+n();e.data(o,a).on("propertychange"+a,function(n){if(r)return void(r=!1);if("value"===n.originalEvent.propertyName){var i=e.val();if(i!==t)if(n.type=u,e.trigger(n),!n.isDefaultPrevented())t=i}}),i(e,"val",function(){if(0!==arguments.length)r=!0})}var n=require("../function/guid"),i=require("../function/around"),r=require("../function/supportInput"),o="cc-util-input",u="cc-input";exports.INPUT=u,exports.init=r()?e:t,exports.dispose=function(e){var t=e.data(o);if(t)e.removeData(o).off(t)}}),define("cc/util/instance",["require","exports","module"],function(require,exports){exports.window=$(window),exports.document=$(document),exports.html=$(document.documentElement),exports.body=$(document.body)}),define("cc/util/life",["require","exports","module","../function/guid","../function/around","../function/extend","../function/ucFirst","../function/nextTick","../function/toBoolean","../function/createEvent","../function/replaceWith","../function/offsetParent","./event"],function(require,exports){"use strict";function e(e,t,n,i,r){return function(a,f,c){var s=this;if($.isPlainObject(a))return c=f,void $.each(a,function(e,t){s[n](e,t,c)});c=c||{};var l=s[i](a),d=s.constructor[e+"Validator"];if(d)if($.isFunction(d[a]))f=d[a].call(s,f,c);if($.isFunction(r))f=r(s,f,c);if(l!==f||c.force)if(s[t][a]=f,!c.silent){var v={};o(v,c),v.newValue=f,v.oldValue=l;var h={};h[a]=v;var y=function(e){if(e&&e[a])s.execute(e[a],[f,l,v])};if(y(s.inner("watchSync")),y(s.option("watchSync")),c.sync)return y(s.constructor[e+"Updater"]),y(s.option("watch")),void s.emit(e+"change",h);var m=s.inner(e+"Changes");if(!m)m={},s.inner(e+"Changes",m);if($.extend(m,h),!s.inner(p))s.inner(p,u(function(){s.sync(p)}))}}}function t(){this.error("initStruct() can just call one time.")}function n(e,t,n,i,r){var o,u="before"===i?"_"+t:t+"_",a=e[u];if($.isFunction(a))if(o=a.apply(e,n),o!==!1&&!$.isPlainObject(o))o=null;if(o===!1)return!1;var f=!1;if(o&&o.dispatch)f=!0,delete o.dispatch;if(r=$.Event(r),r.type=i+t,e.emit(r,o),f)e.dispatch(r,o);if(r.isDefaultPrevented())return!1;else return void 0}var i=require("../function/guid"),r=require("../function/around"),o=require("../function/extend"),u=(require("../function/ucFirst"),require("../function/nextTick")),a=require("../function/toBoolean"),f=require("../function/createEvent"),c=require("../function/replaceWith"),s=(require("../function/offsetParent"),require("./event")),l={},p="__update_async__",d={},v={initStruct:function(){var e=this,n=e.option("mainElement"),i=e.option("mainTemplate");if("string"===$.type(i)){var r=e.option("share"),o=e.type+i;if(r)n=d[o];var u;if(!n){if(u=$(i),r)d[o]=u}else if(e.option("replace"))c(n,u=$(i));else n.html(i);if(u)n=u,e.option("mainElement",n)}var a=e.option("parentSelector");if(a&&!n.parent().is(a))n.appendTo(a);e.initStruct=t},warn:function(e){if("undefined"!=typeof console)console.warn(["[CC warn]",this.type,e].join(" "))},error:function(e){throw new Error(["[CC error]",this.type,e].join(" "))},live:function(e,t,n){var i=this,r=i.inner("main");if(r)r.on(e+i.namespace(),t,n);return i},emit:function(e,t){var n=this,i=n.option("context")||n;e=f(e),e.cc=i;var r=[e];if($.isPlainObject(t))r.push(t);e.type=e.type.toLowerCase();var o=i.get$();o.trigger.apply(o,r);var u="on"+e.type;if(!e.isPropagationStopped()&&i.execute(u,r)===!1)e.preventDefault(),e.stopPropagation();return i.execute(u+"_",r),e},dispatch:function(e,t){if(!e.isPropagationStopped()){if(!e.originalEvent)e.originalEvent={preventDefault:$.noop,stopPropagation:$.noop};var n=$.Event(e);if(n.type="dispatch",this.emit(n,t),n.isPropagationStopped())e.preventDefault(),e.stopPropagation()}},before:function(e,t){return this.on("before"+e.toLowerCase(),t)},after:function(e,t){return this.on("after"+e.toLowerCase(),t)},find:function(e){var t=this.inner("main");if(t){var n=t.find(e);if(n.length)return n}},appendTo:function(e){var t=this.inner("main");if(t)t.appendTo(e)},prependTo:function(e){var t=this.inner("main");if(t)t.prependTo(e)},execute:function(e,t){var n=this,i=e;if("string"===$.type(e))i=n.option(e);if($.isFunction(i)){var r=n.option("context")||n;if($.isArray(t))return i.apply(r,t);else return i.call(r,t)}},renderWith:function(e,t,n){var i=this;if(!t)if(t=i.option("renderTemplate"),!t)t=i.option("mainTemplate");if(!n)n=i.option("mainElement");var r=i.option("renderSelector");if(r)n=n.find(r);var o;if($.isPlainObject(e)||$.isArray(e))o=i.execute("render",[e,t]);else if("string"===$.type(e))o=e;n.html(o)},namespace:function(){return"."+this.guid},option:function(e,t){var n=this;if(1===arguments.length&&"string"===$.type(e))return n.options[e];else{if($.isPlainObject(e))return void $.each(e,function(e,t){n.option(e,t)});n.options[e]=t}},inner:function(e,t){var n=this,i=n.inners||{};if(1===arguments.length&&"string"===$.type(e))return i[e];else{if($.isPlainObject(e))return void $.each(e,function(e,t){n.inner(e,t)});i[e]=t}},is:function(e){return this.states[e]},state:e("state","states","state","is",function(e,t){return a(t,!1)}),get:function(e){return this.properties[e]},set:e("property","properties","set","get")},h={sync:function(){var e=this,t=function(t,n,i){$.each(t,function(r,o){return e.execute(n[r],[o.newValue,o.oldValue,i?t:o])})};if($.each(["property","state"],function(n,i){var r=e.inner(i+"Changes");if(r){e.inner(i+"Changes",null);var o=e.constructor[i+"Updater"];if(o)t(r,o,!0);var u=e.option("watch");if(u)t(r,u);e.emit(i+"change",r)}}),arguments[0]!==p)e.execute(e.inner(p));e.inner(p,!1)},_sync:function(){if(!this.inner(p))return!1;else return void 0},_init:function(){var e="initCalled";if(this.is(e))return!1;else return void this.state(e,!0)},_dispose:function(){var e="disposeCalled";if(this.is(e))return!1;else return void this.state(e,!0)}};exports.extend=function(e,t){o(e,h),$.each(e,function(i,o){var u=i.indexOf("_");if($.isFunction(o)&&0!==u&&u!==i.length-1)if(!($.isArray(t)&&$.inArray(i,t)>=0)){var a=function(e){return n(this,i,arguments,"before",e)},f=function(e){var t=this,r=arguments,u=function(){return n(t,i,r,"after",e)};if(o.length+1===r.length){var a=r[r.length-1];if(a&&$.isFunction(a.then))return void a.then(u)}u()};r(e,i,a,f)}}),o(e,v),s.extend(e)},exports.init=function(e,t){if(!t)t={};return o(t,e.constructor.defaultOptions),t.onafterinit_=function(){e.state("inited",!0)},t.onafterdispose_=function(){e.state("disposed",!0),e.off();var t=e.inner("main");if(e.option("removeOnDispose")&&t)t.remove();u(function(){delete l[e.guid],e.properties=e.options=e.changes=e.states=e.inners=e.guid=null})},l[e.guid=i()]=e,e.properties={},e.options=t,e.states={},e.inners={},e.init(),e},exports.dispose=function(e){e.sync();var t=e.inner("main")||e.option("mainElement");if(t)t.off(e.namespace())}}),define("cc/util/trigger",["require","exports","module","../function/split"],function(require,exports){"use strict";function e(e){return function(t){var i=e.delay,r=e.startDelay,o=e.endDelay,u=function(){e.handler.call(t.currentTarget,t)},a=function(){if(i>0&&r&&o){var t=function(){e[n]=setTimeout(function(){f(n)},i)},a=function(){clearTimeout(e[n]),o(f,e),e[n]=null},f=function(t){if(e[n])a();if(n===t)u()};if(!e[n])r(f,e),t()}else u()},f=e.beforeHandler;if($.isFunction(f)){var c=f.call(t.currentTarget,t);if(c===!1)return;else if(c&&$.isFunction(c.then))return void c.then(a)}a()}}var t=require("../function/split"),n="delayTimer";return exports={focus:{type:"focusin",handler:e},blur:{type:"focusout",handler:e},click:{type:"click",handler:e},enter:{type:"mouseenter",handler:e},leave:{type:"mouseleave",handler:e},context:{type:"contextmenu",handler:e}},exports.parse=function(e,n){var i={};if(e)$.each(t(e,","),function(e,t){var r=exports[t];if(r)i[t]={type:r.type,handler:r.handler(n(t))}});return i},exports});