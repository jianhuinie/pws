define("custom/form/BoxGroup",["require","exports","module","cc/form/BoxGroup"],function(require){"use strict";var e=require("cc/form/BoxGroup");return e.defaultOptions={boxCheckedClass:"checked",boxDisabledClass:"disabled"},e}),define("cc/form/Box",["require","exports","module","../function/debounce","../util/life","./common"],function(require){"use strict";function e(e){t.init(this,e)}var n=require("../function/debounce"),t=require("../util/life"),i=require("./common"),r=e.prototype;return r.type="Box",r.init=function(){var e=this;e.initStruct();var t=e.option("mainElement"),r=e.option("toggle");t.on("click"+e.namespace(),n(function(){if(!e.is("disabled")){var n=e.is("checked");if(n){if(r)n=!1}else n=!0;e.state("checked",n)}},50)),e.inner({main:t,"native":i.findNative(e,r?'input[type="checkbox"]':'input[type="radio"]')}),e.set({name:e.option("name"),value:e.option("value")}),e.state({checked:e.option("checked"),disabled:e.option("disabled")})},r.dispose=function(){t.dispose(this)},t.extend(r),e.propertyUpdater={name:function(e){i.prop(this,"name",e)},value:function(e){i.prop(this,"value",e)}},e.propertyValidator={name:function(e){return i.validateName(this,e)},value:function(e){return i.validateValue(this,e)}},e.stateUpdater={checked:function(e){i.prop(this,"checked",e),i.setClass(this,"checkedClass",e?"add":"remove")},disabled:function(e){i.prop(this,"disabled",e),i.setClass(this,"disabledClass",e?"add":"remove")}},e.stateValidator={checked:function(e){if("boolean"!==$.type(e))e=i.prop(this,"checked");return e},disabled:function(e){if("boolean"!==$.type(e))e=i.prop(this,"disabled");return e}},e}),define("cc/form/BoxGroup",["require","exports","module","../util/life","../util/Value","./common","./Box"],function(require){"use strict";function e(e){n.init(this,e)}var n=require("../util/life"),t=require("../util/Value"),i=require("./common"),r=require("./Box"),o=e.prototype;return o.type="BoxGroup",o.init=function(){var e=this;e.initStruct();var n=e.option("mainElement"),o=n.find(e.option("boxSelector")),u=[];$.each(o,function(n){u.push(new r({mainElement:o.eq(n),mainTemplate:e.option("boxTemplate"),checkedClass:e.option("boxCheckedClass"),disabledClass:e.option("boxDisabledClass"),toggle:e.option("toggle")}))}),e.once("aftersync",function(){$.each(u,function(n,t){t.option("watchSync",{checked:function(n){var i=e.inner("value"),r=t.get("value");if(n)i.add(r);else i.remove(r);e.set("value",i.get())}})})}),e.inner({main:n,"native":i.findNative(e,'input[type="hidden"]'),boxes:u,value:new t({multiple:e.option("multiple")})}),e.set({name:e.option("name"),value:e.option("value")})},o.dispose=function(){n.dispose(this),$.each(this.inner("boxes"),function(e,n){n.dispose()})},n.extend(o),e.propertyUpdater={name:function(e){i.prop(this,"name",e)},value:function(e){var n=this;if(i.prop(n,"value",e),e){var t=n.inner("value");$.each(n.inner("boxes"),function(e,n){n.state("checked",t.has(n.get("value")))})}}},e.propertyValidator={name:function(e){return i.validateName(this,e)},value:function(e){if(null==e)e=i.validateValue(this,e);var n=this.inner("value");return n.set(e),n.get()}},e}),define("cc/form/common",["require","exports","module"],function(require,exports){"use strict";exports.prop=function(e,n,t){if($.isPlainObject(n))$.each(n,function(n,t){exports.prop(e,n,t)});else{var i=e.inner("native");if(2===arguments.length)return i.prop(n);else{if(i.prop(n)!==t)i.prop(n,t);if("value"===n)i.trigger("change")}}},exports.setClass=function(e,n,t){var i=e.option(n);if(i)e.option("mainElement")[t+"Class"](i)},exports.findNative=function(e,n){var t=e.option("mainElement").find(n);if(0===t.length)e.error("form/"+e.type+" 必须包含一个 ["+n+"].");return t.eq(0)},exports.validateName=function(e,n){if("string"!==$.type(n))if(n=exports.prop(e,"name"),!n||"string"!==$.type(n))e.error("name attribute is missing.");return n},exports.validateValue=function(e,n){var t=$.type(n);if("number"===t)n=""+n;else if("string"!==t)n=exports.prop(e,"value")||"";return n}}),define("cc/function/around",["require","exports","module"],function(){"use strict";return function(e,n,t,i){var r="string"===$.type(n),o=r?e[n]:e;if(!r)i=t,t=n;var u=function(){var e,n=$.makeArray(arguments);if($.isFunction(t))e=t.apply(this,n);if(e!==!1){if($.isFunction(o))e=o.apply(this,n);if($.isFunction(i)){n.push(e);var r=i.apply(this,n);if("undefined"!==$.type(r))e=r}return e}};return r?e[n]=u:u}}),define("cc/function/createEvent",["require","exports","module"],function(){"use strict";return function(e){if(e&&!e[$.expando])e="string"===$.type(e)||e.type?$.Event(e):$.Event(null,e);return e||$.Event()}}),define("cc/function/debounce",["require","exports","module"],function(){"use strict";return function(e,n,t){function i(t){o=setTimeout(function(){o=null,r=$.now(),e.apply(null,$.makeArray(t))},n)}n="number"===$.type(n)?n:50;var r,o;return function(){if(t&&r>0&&$.now()-r<n)clearTimeout(o),o=null;if(!o)i(arguments)}}}),define("cc/function/extend",["require","exports","module"],function(){"use strict";return function(e,n){if($.isPlainObject(n))$.each(n,function(n,t){if(!(n in e))e[n]=t})}}),define("cc/function/guid",["require","exports","module"],function(){var e=0;return function(){return"cc_"+e++}}),define("cc/function/nextTick",["require","exports","module"],function(){"use strict";return function(e){var n=setTimeout(e,0);return function(){clearTimeout(n)}}}),define("cc/function/offsetParent",["require","exports","module"],function(){"use strict";function e(e){return e.is("body")||"static"!==e.css("position")}return function(n){if(n.is("body"))return n;for(var t=n.parent();!e(t);)t=t.parent();return t}}),define("cc/function/replaceWith",["require"],function(){"use strict";return function(e,n){e=e[0],n=n[0],e.parentNode.replaceChild(n,e)}}),define("cc/function/split",["require","exports","module"],function(){"use strict";return function(e,n){var t=[];if("number"===$.type(e))e=""+e;if(e&&"string"===$.type(e))$.each(e.split(n),function(e,n){if(n=$.trim(n))t.push(n)});return t}}),define("cc/function/toBoolean",["require","exports","module"],function(){"use strict";return function(e,n){if("boolean"!==$.type(e)){if(1===arguments.length)n=!!e;e=n}return e}}),define("cc/function/ucFirst",["require","exports","module"],function(){"use strict";return function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}),define("cc/util/Value",["require","exports","module","../function/split"],function(require){"use strict";function e(n){$.extend(this,e.defaultOptions,n),this.init()}var n=require("../function/split"),t=e.prototype;return t.init=function(){this.list=[]},t.get=function(){return this.list.join(this.sep)},t.set=function(e){var t=this;t.list.length=0,$.each(n(e,t.sep),function(e,n){t.add(n)})},t.add=function(e){var n=this,t=n.list,i=$.inArray(e,t);if(0>i){if(!n.validate||n.validate(e))t.push(e);else return;if(t.length>1)if(!n.multiple)t[0]=t.pop(),t.length=1;else if(n.sort)t.sort(n.sort);return!0}else;},t.remove=function(e){var n=this.list,t=$.inArray(e,n);if(t>=0)return n.splice(t,1),!0;else return void 0},t.has=function(e){return $.inArray(e,this.list)>=0},t.each=function(e){$.each(this.list,function(n,t){return e(t,n)})},t.dispose=function(){this.list=null},e.defaultOptions={sep:",",sort:function(e,n){if(e>n)return 1;else if(n>e)return-1;else return 0}},e}),define("cc/util/event",["require","exports","module","../function/extend","../function/createEvent"],function(require,exports){"use strict";var e=require("../function/extend"),n=require("../function/createEvent"),t={get$:function(){var e=this;if(!e.$)e.$=$({});return e.$},on:function(e,n,t){return this.get$().on(e,n,t),this},once:function(e,n,t){return this.get$().one(e,n,t),this},off:function(e,n){return this.get$().off(e,n),this},emit:function(e,t){return e=n(e),this.get$().trigger(e,t),e}};exports.extend=function(n){e(n,t)}}),define("cc/util/life",["require","exports","module","../function/guid","../function/around","../function/extend","../function/ucFirst","../function/nextTick","../function/toBoolean","../function/createEvent","../function/replaceWith","../function/offsetParent","./event"],function(require,exports){"use strict";function e(e,n,t,i,r){return function(s,c,a){var f=this;if($.isPlainObject(s))return a=c,void $.each(s,function(e,n){f[t](e,n,a)});a=a||{};var p=f[i](s),d=f.constructor[e+"Validator"];if(d)if($.isFunction(d[s]))c=d[s].call(f,c,a);if($.isFunction(r))c=r(f,c,a);if(p!==c||a.force)if(f[n][s]=c,!a.silent){var h={};o(h,a),h.newValue=c,h.oldValue=p;var v={};v[s]=h;var m=function(e){if(e&&e[s])f.execute(e[s],[c,p,h])};if(m(f.inner("watchSync")),m(f.option("watchSync")),a.sync)return m(f.constructor[e+"Updater"]),m(f.option("watch")),void f.emit(e+"change",v);var g=f.inner(e+"Changes");if(!g)g={},f.inner(e+"Changes",g);if($.extend(g,v),!f.inner(l))f.inner(l,u(function(){f.sync(l)}))}}}function n(){this.error("initStruct() can just call one time.")}function t(e,n,t,i,r){var o,u="before"===i?"_"+n:n+"_",s=e[u];if($.isFunction(s))if(o=s.apply(e,t),o!==!1&&!$.isPlainObject(o))o=null;if(o===!1)return!1;var c=!1;if(o&&o.dispatch)c=!0,delete o.dispatch;if(r=$.Event(r),r.type=i+n,e.emit(r,o),c)e.dispatch(r,o);if(r.isDefaultPrevented())return!1;else return void 0}var i=require("../function/guid"),r=require("../function/around"),o=require("../function/extend"),u=(require("../function/ucFirst"),require("../function/nextTick")),s=require("../function/toBoolean"),c=require("../function/createEvent"),a=require("../function/replaceWith"),f=(require("../function/offsetParent"),require("./event")),p={},l="__update_async__",d={},h={initStruct:function(){var e=this,t=e.option("mainElement"),i=e.option("mainTemplate");if("string"===$.type(i)){var r=e.option("share"),o=e.type+i;if(r)t=d[o];var u;if(!t){if(u=$(i),r)d[o]=u}else if(e.option("replace"))a(t,u=$(i));else t.html(i);if(u)t=u,e.option("mainElement",t)}var s=e.option("parentSelector");if(s&&!t.parent().is(s))t.appendTo(s);e.initStruct=n},warn:function(e){if("undefined"!=typeof console)console.warn(["[CC warn]",this.type,e].join(" "))},error:function(e){throw new Error(["[CC error]",this.type,e].join(" "))},live:function(e,n,t){var i=this,r=i.inner("main");if(r)r.on(e+i.namespace(),n,t);return i},emit:function(e,n){var t=this,i=t.option("context")||t;e=c(e),e.cc=i;var r=[e];if($.isPlainObject(n))r.push(n);e.type=e.type.toLowerCase();var o=i.get$();o.trigger.apply(o,r);var u="on"+e.type;if(!e.isPropagationStopped()&&i.execute(u,r)===!1)e.preventDefault(),e.stopPropagation();return i.execute(u+"_",r),e},dispatch:function(e,n){if(!e.isPropagationStopped()){if(!e.originalEvent)e.originalEvent={preventDefault:$.noop,stopPropagation:$.noop};var t=$.Event(e);if(t.type="dispatch",this.emit(t,n),t.isPropagationStopped())e.preventDefault(),e.stopPropagation()}},before:function(e,n){return this.on("before"+e.toLowerCase(),n)},after:function(e,n){return this.on("after"+e.toLowerCase(),n)},find:function(e){var n=this.inner("main");if(n){var t=n.find(e);if(t.length)return t}},appendTo:function(e){var n=this.inner("main");if(n)n.appendTo(e)},prependTo:function(e){var n=this.inner("main");if(n)n.prependTo(e)},execute:function(e,n){var t=this,i=e;if("string"===$.type(e))i=t.option(e);if($.isFunction(i)){var r=t.option("context")||t;if($.isArray(n))return i.apply(r,n);else return i.call(r,n)}},renderWith:function(e,n,t){var i=this;if(!n)if(n=i.option("renderTemplate"),!n)n=i.option("mainTemplate");if(!t)t=i.option("mainElement");var r=i.option("renderSelector");if(r)t=t.find(r);var o;if($.isPlainObject(e)||$.isArray(e))o=i.execute("render",[e,n]);else if("string"===$.type(e))o=e;t.html(o)},namespace:function(){return"."+this.guid},option:function(e,n){var t=this;if(1===arguments.length&&"string"===$.type(e))return t.options[e];else{if($.isPlainObject(e))return void $.each(e,function(e,n){t.option(e,n)});t.options[e]=n}},inner:function(e,n){var t=this,i=t.inners||{};if(1===arguments.length&&"string"===$.type(e))return i[e];else{if($.isPlainObject(e))return void $.each(e,function(e,n){t.inner(e,n)});i[e]=n}},is:function(e){return this.states[e]},state:e("state","states","state","is",function(e,n){return s(n,!1)}),get:function(e){return this.properties[e]},set:e("property","properties","set","get")},v={sync:function(){var e=this,n=function(n,t,i){$.each(n,function(r,o){return e.execute(t[r],[o.newValue,o.oldValue,i?n:o])})};if($.each(["property","state"],function(t,i){var r=e.inner(i+"Changes");if(r){e.inner(i+"Changes",null);var o=e.constructor[i+"Updater"];if(o)n(r,o,!0);var u=e.option("watch");if(u)n(r,u);e.emit(i+"change",r)}}),arguments[0]!==l)e.execute(e.inner(l));e.inner(l,!1)},_sync:function(){if(!this.inner(l))return!1;else return void 0},_init:function(){var e="initCalled";if(this.is(e))return!1;else return void this.state(e,!0)},_dispose:function(){var e="disposeCalled";if(this.is(e))return!1;else return void this.state(e,!0)}};exports.extend=function(e,n){o(e,v),$.each(e,function(i,o){var u=i.indexOf("_");if($.isFunction(o)&&0!==u&&u!==i.length-1)if(!($.isArray(n)&&$.inArray(i,n)>=0)){var s=function(e){return t(this,i,arguments,"before",e)},c=function(e){var n=this,r=arguments,u=function(){return t(n,i,r,"after",e)};if(o.length+1===r.length){var s=r[r.length-1];if(s&&$.isFunction(s.then))return void s.then(u)}u()};r(e,i,s,c)}}),o(e,h),f.extend(e)},exports.init=function(e,n){if(!n)n={};return o(n,e.constructor.defaultOptions),n.onafterinit_=function(){e.state("inited",!0)},n.onafterdispose_=function(){e.state("disposed",!0),e.off();var n=e.inner("main");if(e.option("removeOnDispose")&&n)n.remove();u(function(){delete p[e.guid],e.properties=e.options=e.changes=e.states=e.inners=e.guid=null})},p[e.guid=i()]=e,e.properties={},e.options=n,e.states={},e.inners={},e.init(),e},exports.dispose=function(e){e.sync();var n=e.inner("main")||e.option("mainElement");if(n)n.off(e.namespace())}});