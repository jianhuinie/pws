define("custom/form/Time",["require","exports","module","cc/form/Time","cc/function/lpad","cc/util/etpl"],function(require){"use strict";var e=require("cc/form/Time"),t=(require("cc/function/lpad"),require("cc/util/etpl")),n={};return e.defaultOptions={inputSelector:":text",layerSelector:".menu",itemSelector:"[data-value]",valueAttribute:"data-value",itemActiveClass:"checked",showLayerTrigger:"focus",hideLayerTrigger:"blur,click",showLayerAnimation:function(e){e.layerElement.show()},hideLayerAnimation:function(e){e.layerElement.hide()},data:{times:["00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30","05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30"]},renderSelector:".menu",renderTemplate:'<!-- for: ${times} as ${time} --><div class="item" data-value="${time}">${time}</div><!-- /for -->',render:function(e,i){var r=n[i];if(!r)r=n[i]=t.compile(i);return r(e)}},e}),define("cc/form/Time",["require","exports","module","../function/contains","../function/replaceWith","../helper/Popup","../util/life","../util/input","./common"],function(require){"use strict";function e(e){i.init(this,e)}var t=require("../function/contains"),n=(require("../function/replaceWith"),require("../helper/Popup")),i=require("../util/life"),r=require("../util/input"),o=require("./common"),a=e.prototype;return a.type="Time",a.init=function(){var e=this;e.initStruct();var i=e.option("mainElement"),o=i.find(e.option("layerSelector")),a=e.option("itemSelector"),s=e.option("valueAttribute");o.on("click",a,function(){u.close(),e.set("value",$(this).attr(s))});var u=new n({triggerElement:i,layerElement:o,showLayerTrigger:e.option("showLayerTrigger"),showLayerDelay:e.option("showLayerDelay"),hideLayerTrigger:e.option("hideLayerTrigger"),hideLayerDelay:e.option("hideLayerDelay"),showLayerAnimation:function(){e.execute("showLayerAnimation",{layerElement:o})},hideLayerAnimation:function(){e.execute("hideLayerAnimation",{layerElement:o})}});e.once("aftersync",function(){u.option("watchSync",{opened:function(t){e.state("opened",t)}}),e.state("opened",u.is("opened"))}),u.on("dispatch",function(n,i){var r=n.originalEvent;if("beforeclose"===r.type){var a=r.originalEvent.target;if(a)if(t(c,a)||t(o,a))return!1}e.dispatch(e.emit(r,i),i)});var c=i.find(e.option("inputSelector"));r.init(c),c.on(r.INPUT,function(){e.set("value",this.value)}),e.inner({main:i,"native":c,layer:o,popup:u}),e.set({name:e.option("name"),value:e.option("value"),data:e.option("data")})},a.open=function(){this.state("opened",!0)},a.close=function(){this.state("opened",!1)},a.render=function(){this.renderWith(this.get("data"))},a.dispose=function(){var e=this;i.dispose(e),r.dispose(e.inner("native")),e.inner("popup").dispose()},i.extend(a,["open","close"]),e.propertyUpdater={name:function(e){o.prop(this,"name",e)}},e.propertyUpdater.data=e.propertyUpdater.value=function(e,t,n){var i=this,r=n.data;if(r)i.render();var a=n.value;if(a){var s=a.newValue,t=a.oldValue;o.prop(i,"value",s);var u=i.inner("layer"),c=i.option("itemActiveClass");if(c)u.find("."+c).removeClass(c);if(s){var f=u.find("["+i.option("valueAttribute")+'="'+s+'"]');if(1===f.length&&c)f.addClass(c)}if(!s&&t)i.state("opened",!0)}return!1},e.propertyValidator={name:function(e){return o.validateName(this,e)},value:function(e){return o.validateValue(this,e)}},e.stateUpdater={opened:function(e){var t=this.inner("popup");if(e)t.open();else t.close()}},e}),define("cc/form/common",["require","exports","module"],function(require,exports){"use strict";exports.prop=function(e,t,n){if($.isPlainObject(t))$.each(t,function(t,n){exports.prop(e,t,n)});else{var i=e.inner("native");if(2===arguments.length)return i.prop(t);else{if(i.prop(t)!==n)i.prop(t,n);if("value"===t)i.trigger("change")}}},exports.setClass=function(e,t,n){var i=e.option(t);if(i)e.option("mainElement")[n+"Class"](i)},exports.findNative=function(e,t){var n=e.option("mainElement").find(t);if(0===n.length)e.error("form/"+e.type+" 必须包含一个 ["+t+"].");return n.eq(0)},exports.validateName=function(e,t){if("string"!==$.type(t))if(t=exports.prop(e,"name"),!t||"string"!==$.type(t))e.error("name attribute is missing.");return t},exports.validateValue=function(e,t){var n=$.type(t);if("number"===n)t=""+t;else if("string"!==n)t=exports.prop(e,"value")||"";return t}}),define("cc/function/around",["require","exports","module"],function(){"use strict";return function(e,t,n,i){var r="string"===$.type(t),o=r?e[t]:e;if(!r)i=n,n=t;var a=function(){var e,t=$.makeArray(arguments);if($.isFunction(n))e=n.apply(this,t);if(e!==!1){if($.isFunction(o))e=o.apply(this,t);if($.isFunction(i)){t.push(e);var r=i.apply(this,t);if("undefined"!==$.type(r))e=r}return e}};return r?e[t]=a:a}}),define("cc/function/contains",["require","exports","module"],function(){"use strict";return function(e,t){if(e=e.jquery?e[0]:e,t=t.jquery?t[0]:t,!e||!t)return!1;if(e===t)return!0;else return $.contains(e,t)}}),define("cc/function/createEvent",["require","exports","module"],function(){"use strict";return function(e){if(e&&!e[$.expando])e="string"===$.type(e)||e.type?$.Event(e):$.Event(null,e);return e||$.Event()}}),define("cc/function/extend",["require","exports","module"],function(){"use strict";return function(e,t){if($.isPlainObject(t))$.each(t,function(t,n){if(!(t in e))e[t]=n})}}),define("cc/function/guid",["require","exports","module"],function(){var e=0;return function(){return"cc_"+e++}}),define("cc/function/isHidden",["require","exports","module"],function(){"use strict";return function(e){e.css("display");return"none"===e.css("display")||0==e.css("opacity")||"hidden"===e.css("visibility")}}),define("cc/function/lpad",["require","exports","module"],function(){"use strict";return function(e,t){if(null==t)t=2;var n=new Array(t-(""+e).length+1);return n.join("0")+e}}),define("cc/function/nextTick",["require","exports","module"],function(){"use strict";return function(e){var t=setTimeout(e,0);return function(){clearTimeout(t)}}}),define("cc/function/offsetParent",["require","exports","module"],function(){"use strict";function e(e){return e.is("body")||"static"!==e.css("position")}return function(t){if(t.is("body"))return t;for(var n=t.parent();!e(n);)n=n.parent();return n}}),define("cc/function/replaceWith",["require"],function(){"use strict";return function(e,t){e=e[0],t=t[0],e.parentNode.replaceChild(t,e)}}),define("cc/function/split",["require","exports","module"],function(){"use strict";return function(e,t){var n=[];if("number"===$.type(e))e=""+e;if(e&&"string"===$.type(e))$.each(e.split(t),function(e,t){if(t=$.trim(t))n.push(t)});return n}}),define("cc/function/supportInput",["require","exports","module"],function(){"use strict";return function(){var e=$('<input type="text" />')[0];return"oninput"in e}}),define("cc/function/toBoolean",["require","exports","module"],function(){"use strict";return function(e,t){if("boolean"!==$.type(e)){if(1===arguments.length)t=!!e;e=t}return e}}),define("cc/function/ucFirst",["require","exports","module"],function(){"use strict";return function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}),define("cc/helper/Popup",["require","exports","module","../function/isHidden","../function/contains","../function/nextTick","../util/life","../util/trigger","../util/instance"],function(require){"use strict";function e(e){v.init(this,e)}function t(e,t){return function(n){var i=$(this);if("disabled"!==i.attr("disabled")){if($.isFunction(t))if(!t.call(this,n))return;e.open(n)}}}function n(e,t){return function(n){var i=$(this);if("disabled"!==i.attr("disabled")){if($.isFunction(t))if(!t.call(this,n))return;e.close(n);var r=e.inner(E);if(r)e.sync(),r.resolve()}}}function i(e,t,n,i){if(e)e.on(t,i,n)}function r(e,t,n){if(e)e.off(t,n)}function o(e,t){var n=e.option("triggerElement"),r=e.option("triggerSelector");if(n||r)i(n||y.body,t.type,t.handler,r)}function a(e,t){r(e.option("triggerElement")||y.body,t.type,t.handler)}function s(e,t){i(y.document,t.type,t.handler)}function u(e,t){r(y.document,t.type,t.handler)}function c(e){return n(e,function(t){return!h(e.inner("layer"),t.target)})}function f(e,t){var n=e.option("triggerElement"),i=e.option("triggerSelector");if(n&&!i)return n;if(t)return $(t.currentTarget);else return void 0}function p(e,t){var n=e.option("layerElement");if(n&&n.jquery&&n.length)return n;if(t&&$.isFunction(n)){if(n=e.execute(n,t),n&&n.tagName)n=$(n);return n}}var l=require("../function/isHidden"),h=require("../function/contains"),d=require("../function/nextTick"),v=require("../util/life"),g=require("../util/trigger"),y=require("../util/instance"),m=e.prototype;m.type="Popup",m.init=function(){var e=this,t=function(t,n){if($.isFunction(t[n]))return t[n](e);else return void 0},n=g.parse(e.option("showLayerTrigger"),function(n){var i=_.show[n];return{delay:e.option("showLayerDelay"),startDelay:t(i,"startDelay"),endDelay:t(i,"endDelay"),handler:t(i,"handler"),beforeHandler:function(t){var n=function(){e.inner({trigger:f(e,t),layer:p(e,t)})};if(e.is("opened")){var i=$.Deferred();return i.then(n),e.inner(E,i),i}else n()}}}),i=g.parse(e.option("hideLayerTrigger"),function(n){var i=_.hide[n];return{delay:e.option("hideLayerDelay"),startDelay:t(i,"startDelay"),endDelay:t(i,"endDelay"),handler:t(i,"handler")}}),r=function(t){$.each(n,function(n,i){_.show[n][t](e,i)})},o=function(t){$.each(i,function(n,i){_.hide[n][t](e,i)})},a=!1,s=!1,u=function(){if(!a)r("on"),a=!0},c=function(){if(a)r("off"),a=!1},l=function(){if(!s)o("on"),s=!0},h=function(){if(s)o("off"),s=!1},v=function(t,n){var i=n.opened;if(i)if(i.newValue){if(!e.option("triggerSelector"))c();d(l)}else h(),u()};e.before("dispose",function(){e.off("statechange",v),c(),h(),e.close()}).on("statechange",v),e.inner({trigger:f(e),layer:p(e)}),e.state({opened:e.option("opened")})},m.open=function(){this.state("opened",!0)},m._open=function(e){var t=this;if(t.is("opened")){var n=t.inner("layer"),i=t.inner("trigger"),r=n.data(w);if(i&&r&&i[0]!==r[0])n.data(x).close(),d(function(){if(t.guid)t.open(e)});return!1}return{dispatch:!0}},m.open_=function(){var e=this,t=e.inner("layer");if(t){var n={};n[w]=e.inner("trigger"),n[x]=e,t.data(n)}return{dispatch:!0}},m.close=function(){this.state("opened",!1)},m._close=function(){if(!this.is("opened"))return!1;else return{dispatch:!0}},m.close_=function(){var e=this,t=e.inner("layer");if(t)t.removeData(x).removeData(w);return{dispatch:!0}},m.dispose=function(){v.dispose(this)},v.extend(m),e.stateUpdater={opened:function(e){var t=this.inner("layer");if(t)this.execute(e?"showLayerAnimation":"hideLayerAnimation",{layerElement:t})}},e.stateValidator={opened:function(e){if("boolean"!==$.type(e)){var t=this.inner("layer");if(t)e=!l(t)}return e}};var x="__prev_popup__",w="__trigger_element__",E="__hide_promise__",b=g.enter.type,R=g.leave.type,_={show:{focus:{on:o,off:a,handler:t},click:{on:o,off:a,handler:t},enter:{on:o,off:a,handler:t,startDelay:function(e){return function(t){i(e.inner("trigger"),R,t)}},endDelay:function(e){return function(t){r(e.inner("trigger"),R,t)}}},context:{on:o,off:a,handler:t}},hide:{blur:{on:o,off:a,handler:n},click:{on:s,off:u,handler:c},leave:{on:function(e,t){i(e.inner("trigger"),t.type,t.handler),i(e.inner("layer"),t.type,t.handler)},off:function(e,t){r(e.inner("trigger"),t.type,t.handler),r(e.inner("layer"),t.type,t.handler)},handler:n,startDelay:function(e){return function(t){i(e.inner("trigger"),b,t),i(e.inner("layer"),b,t)}},endDelay:function(e){return function(t){r(e.inner("trigger"),b,t),r(e.inner("layer"),b,t)}}},context:{on:s,off:u,handler:c}}};return e}),define("cc/util/etpl",function(){function e(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n];return e}function t(){this.raw=[],this.length=0}function n(){return"___"+C++}function i(e,t){var n=new Function;n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function r(e){return k[e]}function o(e){return'"'+e.replace(/\x5C/g,"\\\\").replace(/"/g,'\\"').replace(/\x0A/g,"\\n").replace(/\x09/g,"\\t").replace(/\x0D/g,"\\r")+'"'}function a(e){return e.replace(/[\^\[\]\$\(\)\{\}\?\*\.\+]/g,function(e){return"\\"+e})}function s(e){var t=arguments;return e.replace(/\{([0-9]+)\}/g,function(e,n){return t[n-0+1]})}function u(e){return e=e.replace(/^\s*\*/,""),s('gv({0},["{1}"])',o(e),e.replace(/\[['"]?([^'"]+)['"]?\]/g,function(e,t){return"."+t}).split(".").join('","'))}function c(e,t,n,i,r,o){for(var a=n.length,s=e.split(t),u=0,c=[],f=0,p=s.length;p>f;f++){var l=s[f];if(f){var h=1;for(u++;;){var d=l.indexOf(n);if(0>d){c.push(u>1&&h?t:"",l);break}if(u=i?u-1:0,c.push(u>0&&h?t:"",l.slice(0,d),u>0?n:""),l=l.slice(d+a),h=0,0===u)break}if(0===u)r(c.join("")),o(l),c=[]}else l&&o(l)}if(u>0&&c.length>0)o(t),o(c.join(""))}function f(e,t,n){var i,r=[],a=t.options,s="",p="",l="",h="";if(n)s="ts(",p=")",l=O,h=L,i=a.defaultFilter;return c(e,a.variableOpen,a.variableClose,1,function(e){if(n&&e.indexOf("|")<0&&i)e+="|"+i;var o=e.indexOf("|"),a=(o>0?e.slice(0,o):e).replace(/^\s+/,"").replace(/\s+$/,""),c=o>0?e.slice(o+1):"",d=0===a.indexOf("*"),v=[d?"":s,u(a),d?"":p];if(c){c=f(c,t);for(var g=c.split("|"),y=0,m=g.length;m>y;y++){var $=g[y];if(/^\s*([a-z0-9_-]+)(\((.*)\))?\s*$/i.test($)){if(v.unshift('fs["'+RegExp.$1+'"]('),RegExp.$3)v.push(",",RegExp.$3);v.push(")")}}}r.push(l,v.join(""),h)},function(e){r.push(l,n?o(e):e,h)}),r.join("")}function p(e,t){this.value=e,this.engine=t}function l(e,t){this.value=e,this.engine=t,this.children=[],this.cloneProps=[]}function h(e,t){var n=e.stack,i=t?n.find(function(e){return e instanceof t}):n.bottom();if(i){for(var r;(r=n.top())!==i;){if(!r.autoClose)throw new Error(r.type+" must be closed manually: "+r.value);r.autoClose(e)}i.close(e)}return i}function d(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*(\(\s*master\s*=\s*([a-z0-9\/_-]+)\s*\))?\s*/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.master=RegExp.$3,this.name=RegExp.$1,l.call(this,e,t),this.blocks={}}function v(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,l.call(this,e,t),this.cloneProps=["name"]}function g(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,l.call(this,e,t),this.cloneProps=["name","state","blocks"],this.blocks={}}function y(e,t){if(!/^\s*([a-z0-9_]+)\s*=([\s\S]*)$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,this.expr=RegExp.$2,l.call(this,e,t),this.cloneProps=["name","expr"]}function m(e,t){if(!/^\s*([a-z0-9_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,this.args=RegExp.$3,l.call(this,e,t),this.cloneProps=["name","args"]}function $(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,this.args=RegExp.$3,l.call(this,e,t),this.cloneProps=["name","args"]}function x(e,t){var n=new RegExp(s("^\\s*({0}[\\s\\S]+{1})\\s+as\\s+{0}([0-9a-z_]+){1}\\s*(,\\s*{0}([0-9a-z_]+){1})?\\s*$",a(t.options.variableOpen),a(t.options.variableClose)),"i");if(!n.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.list=RegExp.$1,this.item=RegExp.$2,this.index=RegExp.$4,l.call(this,e,t),this.cloneProps=["list","item","index"]}function w(e,t){l.call(this,e,t)}function E(e,t){w.call(this,e,t)}function b(e,t){l.call(this,e,t)}function R(e,t){t.target=e;var n=t.engine,i=e.name;if(n.targets[i])switch(n.options.namingConflict){case"override":n.targets[i]=e,t.targets.push(i);case"ignore":break;default:throw new Error("Target exists: "+i)}else n.targets[i]=e,t.targets.push(i)}function _(e,t){F[e]=t,t.prototype.type=e}function D(t){this.options={commandOpen:"<!--",commandClose:"-->",commandSyntax:/^\s*(\/)?([a-z]+)\s*(?::([\s\S]*))?$/,variableOpen:"${",variableClose:"}",defaultFilter:"html"},this.config(t),this.targets={},this.filters=e({},A)}function P(e,n){function i(){var e;if(d.length>0&&(e=d.join(""))){var t=new p(e,n);if(t.beforeAdd(f),u.top().addChild(t),d=[],n.options.strip&&f.current instanceof l)t.value=e.replace(/^[\x20\t\r]*\n/,"");f.current=t}}var r,o=n.options.commandOpen,a=n.options.commandClose,s=n.options.commandSyntax,u=new t,f={engine:n,targets:[],stack:u,target:null},d=[];return c(e,o,a,0,function(e){var t=s.exec(e);if(t&&(r=F[t[2].toLowerCase()])&&"function"==typeof r){i();var u=f.current;if(n.options.strip&&u instanceof p)u.value=u.value.replace(/\r?\n[\x20\t]*$/,"\n");if(t[1])u=h(f,r);else{if(u=new r(t[3],n),"function"==typeof u.beforeOpen)u.beforeOpen(f);u.open(f)}f.current=u}else if(!/^\s*\/\//.test(e))d.push(o,e,a);r=null},function(e){d.push(e)}),i(),h(f),f.targets}t.prototype={push:function(e){this.raw[this.length++]=e},pop:function(){if(this.length>0){var e=this.raw[--this.length];return this.raw.length=this.length,e}},top:function(){return this.raw[this.length-1]},bottom:function(){return this.raw[0]},find:function(e){for(var t=this.length;t--;){var n=this.raw[t];if(e(n))return n}}};var C=178245,k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},A={html:function(e){return e.replace(/[&<>"']/g,r)},url:encodeURIComponent,raw:function(e){return e}},T='var r="";',O="r+=",L=";",S="return r;";if("undefined"!=typeof navigator&&/msie\s*([0-9]+)/i.test(navigator.userAgent)&&RegExp.$1-0<8)T="var r=[],ri=0;",O="r[ri++]=",S='return r.join("");';p.prototype={getRendererBody:function(){var e=this.value,t=this.engine.options;if(!e||t.strip&&/^\s*$/.test(e))return"";else return f(e,this.engine,1)},clone:function(){return this}},l.prototype={addChild:function(e){this.children.push(e)},open:function(e){var t=e.stack.top();t&&t.addChild(this),e.stack.push(this)},close:function(e){if(e.stack.top()===this)e.stack.pop()},getRendererBody:function(){for(var e=[],t=this.children,n=0;n<t.length;n++)e.push(t[n].getRendererBody());return e.join("")},clone:function(){for(var e=this.constructor,t=new e(this.value,this.engine),n=0,i=this.children.length;i>n;n++)t.addChild(this.children[n].clone());for(var n=0,i=this.cloneProps.length;i>n;n++){var r=this.cloneProps[n];t[r]=this[r]}return t}};var q='data=data||{};var v={},fs=engine.filters,hg=typeof data.get=="function",gv=function(n,ps){var p=ps[0],d=v[p];if(d==null){if(hg){return data.get(n);}d=data[p];}for(var i=1,l=ps.length;i<l;i++)if(d!=null)d = d[ps[i]];return d;},ts=function(s){if(typeof s==="string"){return s;}if(s==null){s="";}return ""+s;};';i(d,l),i(v,l),i(g,l),i(y,l),i(m,l),i($,l),i(x,l),i(w,l),i(E,w),i(b,w);var j={READING:1,READED:2,APPLIED:3,READY:4};g.prototype.applyMaster=d.prototype.applyMaster=function(e){function t(e){var i=e.children;if(i instanceof Array)for(var r=0,o=i.length;o>r;r++){var a=i[r];if(a instanceof v&&n[a.name])a=i[r]=n[a.name];t(a)}}if(this.state>=j.APPLIED)return 1;var n=this.blocks,i=this.engine.targets[e];if(i&&i.applyMaster(i.master))return this.children=i.clone().children,t(this),this.state=j.APPLIED,1;else return void 0},d.prototype.isReady=function(){function e(i){for(var r=0,o=i.children.length;o>r;r++){var a=i.children[r];if(a instanceof g){var s=t.targets[a.name];n=n&&s&&s.isReady(t)}else if(a instanceof l)e(a)}}if(this.state>=j.READY)return 1;var t=this.engine,n=1;if(this.applyMaster(this.master))return e(this),n&&(this.state=j.READY),n;else return void 0},d.prototype.getRenderer=function(){if(this.renderer)return this.renderer;if(this.isReady()){var e=new Function("data","engine",[q,T,this.getRendererBody(),S].join("\n")),t=this.engine;return this.renderer=function(n){return e(n,t)},this.renderer}return null},d.prototype.open=function(e){h(e),l.prototype.open.call(this,e),this.state=j.READING,R(this,e)},y.prototype.open=$.prototype.open=function(e){e.stack.top().addChild(this)},v.prototype.open=function(e){l.prototype.open.call(this,e),e.stack.find(function(e){return e.blocks}).blocks[this.name]=this},E.prototype.open=function(e){var t=new b;t.open(e);var n=h(e,w);n.addChild(this),e.stack.push(this)},b.prototype.open=function(e){var t=h(e,w);t.addChild(this),e.stack.push(this)},g.prototype.open=function(e){this.parent=e.stack.top(),this.target=e.target,l.prototype.open.call(this,e),this.state=j.READING},$.prototype.close=y.prototype.close=function(){},g.prototype.close=function(e){l.prototype.close.call(this,e),this.state=j.READED},d.prototype.close=function(e){l.prototype.close.call(this,e),this.state=this.master?j.READED:j.APPLIED,e.target=null},g.prototype.autoClose=function(e){var t=this.parent.children;t.push.apply(t,this.children),this.children.length=0;for(var n in this.blocks)this.target.blocks[n]=this.blocks[n];this.blocks={},this.close(e)},$.prototype.beforeOpen=g.prototype.beforeOpen=y.prototype.beforeOpen=x.prototype.beforeOpen=m.prototype.beforeOpen=v.prototype.beforeOpen=w.prototype.beforeOpen=p.prototype.beforeAdd=function(e){if(!e.stack.bottom()){var t=new d(n(),e.engine);t.open(e)}},g.prototype.getRendererBody=function(){return this.applyMaster(this.name),l.prototype.getRendererBody.call(this)},$.prototype.getRendererBody=function(){return s("{0}engine.render({2},{{3}}){1}",O,L,o(this.name),f(this.args,this.engine).replace(/(^|,)\s*([a-z0-9_]+)\s*=/gi,function(e,t,n){return(t||"")+o(n)+":"}))},y.prototype.getRendererBody=function(){if(this.expr)return s("v[{0}]={1};",o(this.name),f(this.expr,this.engine));else return""},w.prototype.getRendererBody=function(){return s("if({0}){{1}}",f(this.value,this.engine),l.prototype.getRendererBody.call(this))},b.prototype.getRendererBody=function(){return s("}else{{0}",l.prototype.getRendererBody.call(this))},x.prototype.getRendererBody=function(){return s('var {0}={1};if({0} instanceof Array)for (var {4}=0,{5}={0}.length;{4}<{5};{4}++){v[{2}]={4};v[{3}]={0}[{4}];{6}}else if(typeof {0}==="object")for(var {4} in {0}){v[{2}]={4};v[{3}]={0}[{4}];{6}}',n(),f(this.list,this.engine),o(this.index||n()),o(this.item),n(),n(),l.prototype.getRendererBody.call(this))},m.prototype.getRendererBody=function(){var e=this.args;return s("{2}fs[{5}]((function(){{0}{4}{1}})(){6}){3}",T,S,O,L,l.prototype.getRendererBody.call(this),o(this.name),e?","+f(e,this.engine):"")};var F={};_("target",d),_("block",v),_("import",g),_("use",$),_("var",y),_("for",x),_("if",w),_("elif",E),_("else",b),_("filter",m),D.prototype.config=function(t){e(this.options,t)},D.prototype.compile=D.prototype.parse=function(e){if(e){var t=P(e,this);if(t.length)return this.targets[t[0]].getRenderer()}return new Function('return ""')},D.prototype.getRenderer=function(e){var t=this.targets[e];if(t)return t.getRenderer();else return void 0},D.prototype.render=function(e,t){var n=this.getRenderer(e);if(n)return n(t);else return""},D.prototype.addFilter=function(e,t){if("function"==typeof t)this.filters[e]=t};var I=new D;return I.Engine=D,I}),define("cc/util/event",["require","exports","module","../function/extend","../function/createEvent"],function(require,exports){"use strict";var e=require("../function/extend"),t=require("../function/createEvent"),n={get$:function(){var e=this;if(!e.$)e.$=$({});return e.$},on:function(e,t,n){return this.get$().on(e,t,n),this},once:function(e,t,n){return this.get$().one(e,t,n),this},off:function(e,t){return this.get$().off(e,t),this},emit:function(e,n){return e=t(e),this.get$().trigger(e,n),e}};exports.extend=function(t){e(t,n)}}),define("cc/util/input",["require","exports","module","../function/guid","../function/around","../function/supportInput"],function(require,exports){"use strict";function e(e){var t="."+n();e.data(o,t).on("input"+t,function(t){t.type=a,e.trigger(t)})}function t(e){var t=e.val(),r=!1,s="."+n();e.data(o,s).on("propertychange"+s,function(n){if(r)return void(r=!1);if("value"===n.originalEvent.propertyName){var i=e.val();if(i!==t)if(n.type=a,e.trigger(n),!n.isDefaultPrevented())t=i}}),i(e,"val",function(){if(0!==arguments.length)r=!0})}var n=require("../function/guid"),i=require("../function/around"),r=require("../function/supportInput"),o="cc-util-input",a="cc-input";exports.INPUT=a,exports.init=r()?e:t,exports.dispose=function(e){var t=e.data(o);if(t)e.removeData(o).off(t)}}),define("cc/util/instance",["require","exports","module"],function(require,exports){exports.window=$(window),exports.document=$(document),exports.html=$(document.documentElement),exports.body=$(document.body)}),define("cc/util/life",["require","exports","module","../function/guid","../function/around","../function/extend","../function/ucFirst","../function/nextTick","../function/toBoolean","../function/createEvent","../function/replaceWith","../function/offsetParent","./event"],function(require,exports){"use strict";function e(e,t,n,i,r){return function(s,u,c){var f=this;if($.isPlainObject(s))return c=u,void $.each(s,function(e,t){f[n](e,t,c)});c=c||{};var p=f[i](s),h=f.constructor[e+"Validator"];if(h)if($.isFunction(h[s]))u=h[s].call(f,u,c);if($.isFunction(r))u=r(f,u,c);if(p!==u||c.force)if(f[t][s]=u,!c.silent){var d={};o(d,c),d.newValue=u,d.oldValue=p;var v={};v[s]=d;var g=function(e){if(e&&e[s])f.execute(e[s],[u,p,d])};if(g(f.inner("watchSync")),g(f.option("watchSync")),c.sync)return g(f.constructor[e+"Updater"]),g(f.option("watch")),void f.emit(e+"change",v);var y=f.inner(e+"Changes");if(!y)y={},f.inner(e+"Changes",y);if($.extend(y,v),!f.inner(l))f.inner(l,a(function(){f.sync(l)}))}}}function t(){this.error("initStruct() can just call one time.")}function n(e,t,n,i,r){var o,a="before"===i?"_"+t:t+"_",s=e[a];if($.isFunction(s))if(o=s.apply(e,n),o!==!1&&!$.isPlainObject(o))o=null;if(o===!1)return!1;var u=!1;if(o&&o.dispatch)u=!0,delete o.dispatch;if(r=$.Event(r),r.type=i+t,e.emit(r,o),u)e.dispatch(r,o);if(r.isDefaultPrevented())return!1;else return void 0}var i=require("../function/guid"),r=require("../function/around"),o=require("../function/extend"),a=(require("../function/ucFirst"),require("../function/nextTick")),s=require("../function/toBoolean"),u=require("../function/createEvent"),c=require("../function/replaceWith"),f=(require("../function/offsetParent"),require("./event")),p={},l="__update_async__",h={},d={initStruct:function(){var e=this,n=e.option("mainElement"),i=e.option("mainTemplate");if("string"===$.type(i)){var r=e.option("share"),o=e.type+i;if(r)n=h[o];var a;if(!n){if(a=$(i),r)h[o]=a}else if(e.option("replace"))c(n,a=$(i));else n.html(i);if(a)n=a,e.option("mainElement",n)}var s=e.option("parentSelector");if(s&&!n.parent().is(s))n.appendTo(s);e.initStruct=t},warn:function(e){if("undefined"!=typeof console)console.warn(["[CC warn]",this.type,e].join(" "))},error:function(e){throw new Error(["[CC error]",this.type,e].join(" "))},live:function(e,t,n){var i=this,r=i.inner("main");if(r)r.on(e+i.namespace(),t,n);return i},emit:function(e,t){var n=this,i=n.option("context")||n;e=u(e),e.cc=i;var r=[e];if($.isPlainObject(t))r.push(t);e.type=e.type.toLowerCase();var o=i.get$();o.trigger.apply(o,r);var a="on"+e.type;if(!e.isPropagationStopped()&&i.execute(a,r)===!1)e.preventDefault(),e.stopPropagation();return i.execute(a+"_",r),e},dispatch:function(e,t){if(!e.isPropagationStopped()){if(!e.originalEvent)e.originalEvent={preventDefault:$.noop,stopPropagation:$.noop};var n=$.Event(e);if(n.type="dispatch",this.emit(n,t),n.isPropagationStopped())e.preventDefault(),e.stopPropagation()}},before:function(e,t){return this.on("before"+e.toLowerCase(),t)},after:function(e,t){return this.on("after"+e.toLowerCase(),t)},find:function(e){var t=this.inner("main");if(t){var n=t.find(e);if(n.length)return n}},appendTo:function(e){var t=this.inner("main");if(t)t.appendTo(e)},prependTo:function(e){var t=this.inner("main");if(t)t.prependTo(e)},execute:function(e,t){var n=this,i=e;if("string"===$.type(e))i=n.option(e);if($.isFunction(i)){var r=n.option("context")||n;if($.isArray(t))return i.apply(r,t);else return i.call(r,t)}},renderWith:function(e,t,n){var i=this;if(!t)if(t=i.option("renderTemplate"),!t)t=i.option("mainTemplate");if(!n)n=i.option("mainElement");var r=i.option("renderSelector");if(r)n=n.find(r);var o;if($.isPlainObject(e)||$.isArray(e))o=i.execute("render",[e,t]);else if("string"===$.type(e))o=e;n.html(o)},namespace:function(){return"."+this.guid},option:function(e,t){var n=this;if(1===arguments.length&&"string"===$.type(e))return n.options[e];else{if($.isPlainObject(e))return void $.each(e,function(e,t){n.option(e,t)});n.options[e]=t}},inner:function(e,t){var n=this,i=n.inners||{};if(1===arguments.length&&"string"===$.type(e))return i[e];else{if($.isPlainObject(e))return void $.each(e,function(e,t){n.inner(e,t)});i[e]=t}},is:function(e){return this.states[e]},state:e("state","states","state","is",function(e,t){return s(t,!1)}),get:function(e){return this.properties[e]},set:e("property","properties","set","get")},v={sync:function(){var e=this,t=function(t,n,i){$.each(t,function(r,o){return e.execute(n[r],[o.newValue,o.oldValue,i?t:o])})};if($.each(["property","state"],function(n,i){var r=e.inner(i+"Changes");if(r){e.inner(i+"Changes",null);var o=e.constructor[i+"Updater"];if(o)t(r,o,!0);var a=e.option("watch");if(a)t(r,a);e.emit(i+"change",r)}}),arguments[0]!==l)e.execute(e.inner(l));e.inner(l,!1)},_sync:function(){if(!this.inner(l))return!1;else return void 0},_init:function(){var e="initCalled";if(this.is(e))return!1;else return void this.state(e,!0)},_dispose:function(){var e="disposeCalled";if(this.is(e))return!1;else return void this.state(e,!0)}};exports.extend=function(e,t){o(e,v),$.each(e,function(i,o){var a=i.indexOf("_");if($.isFunction(o)&&0!==a&&a!==i.length-1)if(!($.isArray(t)&&$.inArray(i,t)>=0)){var s=function(e){return n(this,i,arguments,"before",e)},u=function(e){var t=this,r=arguments,a=function(){return n(t,i,r,"after",e)};if(o.length+1===r.length){var s=r[r.length-1];if(s&&$.isFunction(s.then))return void s.then(a)}a()};r(e,i,s,u)}}),o(e,d),f.extend(e)},exports.init=function(e,t){if(!t)t={};return o(t,e.constructor.defaultOptions),t.onafterinit_=function(){e.state("inited",!0)},t.onafterdispose_=function(){e.state("disposed",!0),e.off();var t=e.inner("main");if(e.option("removeOnDispose")&&t)t.remove();a(function(){delete p[e.guid],e.properties=e.options=e.changes=e.states=e.inners=e.guid=null})},p[e.guid=i()]=e,e.properties={},e.options=t,e.states={},e.inners={},e.init(),e},exports.dispose=function(e){e.sync();var t=e.inner("main")||e.option("mainElement");if(t)t.off(e.namespace())}}),define("cc/util/trigger",["require","exports","module","../function/split"],function(require,exports){"use strict";function e(e){return function(t){var i=e.delay,r=e.startDelay,o=e.endDelay,a=function(){e.handler.call(t.currentTarget,t)},s=function(){if(i>0&&r&&o){var t=function(){e[n]=setTimeout(function(){u(n)},i)},s=function(){clearTimeout(e[n]),o(u,e),e[n]=null},u=function(t){if(e[n])s();if(n===t)a()};if(!e[n])r(u,e),t()}else a()},u=e.beforeHandler;if($.isFunction(u)){var c=u.call(t.currentTarget,t);if(c===!1)return;else if(c&&$.isFunction(c.then))return void c.then(s)}s()}}var t=require("../function/split"),n="delayTimer";return exports={focus:{type:"focusin",handler:e},blur:{type:"focusout",handler:e},click:{type:"click",handler:e},enter:{type:"mouseenter",handler:e},leave:{type:"mouseleave",handler:e},context:{type:"contextmenu",handler:e}},exports.parse=function(e,n){var i={};if(e)$.each(t(e,","),function(e,t){var r=exports[t];if(r)i[t]={type:r.type,handler:r.handler(n(t))}});return i},exports});