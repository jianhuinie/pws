define("cobble/function/around",["require","exports","module"],function(){"use strict";return function(e,n,t,i){var o="string"===$.type(n),r=o?e[n]:e;if(!o)i=t,t=n;var u=function(){var e,n=arguments;if($.isFunction(t))e=t.apply(this,n);if(e!==!1){if($.isFunction(r))e=r.apply(this,n);if($.isFunction(i)){var o=i.apply(this,n);if("undefined"!==$.type(o))e=o}return e}};return o?e[n]=u:u}}),define("cobble/function/autoScrollDown",["require","exports","module"],function(){"use strict";return function(e,n){var t=e.height(),i=e.scrollTop(),o=i+t,r=n.prop("offsetTop")+n.outerHeight(!0);if(i>r||r>o)e.scrollTop(r-t)}}),define("cobble/function/autoScrollUp",["require","exports","module"],function(){"use strict";return function(e,n){var t=e.scrollTop(),i=t+e.height(),o=n.prop("offsetTop");if(t>o||o>i)e.scrollTop(o)}}),define("cobble/function/call",["require","exports","module"],function(){"use strict";return function(e,n,t){if($.isFunction(e)){var i=$.isArray(t)?"apply":"call";return e[i](n,t)}}}),define("cobble/function/contains",["require","exports","module"],function(){"use strict";return function(e,n){if(e=e.jquery?e[0]:e,n=n.jquery?n[0]:n,!e||!n)return!1;if(e===n)return!0;else return $.contains(e,n)}}),define("cobble/function/isHidden",["require","exports","module"],function(){"use strict";return function(e){e.css("display");return"none"===e.css("display")||0==e.css("opacity")||"hidden"===e.css("visibility")}}),define("cobble/function/jquerify",["require","exports","module"],function(){"use strict";function e(e){return e.faker||e.element}var n=$.prototype,t={on:function(){return n.on.apply(e(this),arguments),this},off:function(){return n.off.apply(e(this),arguments),this},emit:function(t,i){var o=this,r=e(o);if(r){if(!t[$.expando])t="string"===$.type(t)?$.Event(t):$.Event(null,t);t.cobble=o;var u=[t];if(i)u.push(i);var f=o[$.camelCase("on-"+t.type)];if($.isFunction(f)&&f.apply(o,u)===!1)t.preventDefault();if(!t.isPropagationStopped())n.trigger.apply(r,u);return t}},before:function(n){e(this).before(n)},after:function(n){e(this).after(n)},appendTo:function(n){e(this).appendTo(n)},prependTo:function(n){e(this).prependTo(n)}};return function(e){$.each(t,function(n,t){if(null==e[n])e[n]=t})}}),define("cobble/function/lifeCycle",["require","exports"],function(require,exports){"use strict";exports.init=function(e,n){var t=e.constructor,i="__cobble__"+t.prototype.type,o=n.element;if(o&&o.data(i))e=o.data(i);else if($.extend(e,t.defaultOptions,n),e.init(),o)o.data(i,e);return e},exports.dispose=function(e){var n="__cobble__"+e.constructor.prototype.type,t=e.element;if(t)t.removeData(n)}}),define("cobble/function/split",["require","exports","module"],function(){"use strict";return function(e,n){var t=[];return $.each(e.split(n),function(e,n){if(n=$.trim(n))t.push(n)}),t}}),define("cobble/function/timer",["require","exports","module"],function(){"use strict";return function(e,n,t){t="number"===$.type(t)?t:0;var i,o=function(){i=setTimeout(o,n),e()},r={start:function(){r.stop(),setTimeout(o,t)},stop:function(){if(i)clearTimeout(i),i=null}};return r}}),define("cobble/helper/Input",["require","exports","module","../function/around","../function/jquerify","../function/lifeCycle","../util/keyboard","../util/input","./Keyboard"],function(require){"use strict";function e(e){return t.init(this,e)}var n=(require("../function/around"),require("../function/jquerify")),t=require("../function/lifeCycle"),i=require("../util/keyboard"),o=require("../util/input"),r=require("./Keyboard");e.prototype={constructor:e,type:"Input",init:function(){var e=this,n=e.element;o.init(n);var t=e.action;if(t)$.each(t,function(n,i){t[n]=$.proxy(i,e)});var f,c;e.keyboard=new r({element:n,action:t,longPress:e.longPress,onKeyDown:function(n){e.emit(n)},onKeyUp:function(n){e.emit(n)},onBeforeLongPress:function(){f=n.val(),c=!0,e.emit("beforeLongPress")},onAfterLongPress:function(t){if(c=!1,e.emit("afterLongPress"),f!==n.val()&&(i.isCharKey(t.keyCode)||i.isDeleteKey()))e.emit("change")}}),n.on("input"+u,function(){if(!c||!e.smart)e.emit("change")})},autoWidth:function(){var e=this,n=e.element;e.on("change",function(){if(n.scrollLeft()>0)n.width(n.prop("scrollWidth"))})},autoHeight:function(){var e=this,n=e.element;if("hidden"!==n.css("overflow-y"))n.css("overflow-y","hidden");var t,i=n.height(),o=i,r=parseInt(n.css("font-size"),10),u=n.innerHeight()-i;e.on("change",function(){if(o!==i)o=i,n.height(i);if(t=n.prop("scrollHeight")-u,Math.abs(t-o)>r)n.height(t),o=t})},dispose:function(){var e=this;t.dispose(e);var n=e.element;o.dispose(n),n.off(u),e.keyboard.dispose(),e.element=e.keyboard=null}},n(e.prototype),e.defaultOptions={smart:!0,longPress:!1};var u=".cobble_helper_input";return e}),define("cobble/helper/Iterator",["require","exports","module","./Keyboard","../function/timer","../function/jquerify"],function(require){"use strict";function e(n){$.extend(this,e.defaultOptions,n),this.init()}var n=require("./Keyboard"),t=require("../function/timer"),i=require("../function/jquerify");return e.prototype={constructor:e,init:function(){var e=this;e.setData(e.data);var i=function(){e.prev(),e.timer=u},o=function(){e.next(),e.timer=f},r=e.delay,u=t(i,r,r),f=t(o,r,r),c={};c[e.prevKey]=i,c[e.nextKey]=o,e.keyboard=new n({element:e.element,longPress:!1,onBeforeLongPress:$.proxy(e.start,e),onAfterLongPress:$.proxy(e.pause,e),action:c})},start:function(){var e=this.timer;if(e)e.start()},pause:function(){var e=this.timer;if(e)e.stop(),this.timer=null},stop:function(){var e=this;e.pause(),e.index=e.startIndex},getData:function(){return this.data},setData:function(e){var n=this;if(n.stop(),$.isArray(e))n.data=e,n.maxIndex=e.length-1},to:function(e,n){var t=this,i=t.index;if(n=n||{},n.force||i!==e)if(t.index=e,!n.silence)t.emit("change",{from:i,to:e,action:n.action||"to"})},prev:function(){var e=this,n=e.index-1;if(n<e.minIndex)n=e.loop?e.maxIndex:e.minIndex;e.to(n,{action:"prev"})},next:function(){var e=this,n=e.index+1;if(n>e.maxIndex)n=e.loop?e.minIndex:e.maxIndex;e.to(n,{action:"next"})},dispose:function(){var e=this;e.stop(),e.keyboard.dispose(),e.element=e.keyboard=null}},i(e.prototype),e.defaultOptions={delay:60,loop:!0,minIndex:0,startIndex:-1,prevKey:"up",nextKey:"down"},e}),define("cobble/helper/Keyboard",["require","exports","module","../function/call","../function/split","../function/jquerify","../util/keyboard"],function(require){"use strict";function e(n){$.extend(this,e.defaultOptions,n),this.init()}function n(e){var n=[];return $.each(e,function(e,t){var i=[],o="plus",u=r(e.replace(/\$\+/g,o),"+");if($.each(f.combinationKey,function(e){if($.inArray(e,u)<0)u.push("!"+e)}),$.each(u,function(e,n){var t=0===n.indexOf("!");if(t)n=n.substr(1);if(n===o)n="$+";if(f.combinationKey[n])i.push((t?"!":"")+"e."+n+"Key");else if(f[n])i.push("e.keyCode==="+f[n]);else return i.length=0,!1}),i.length>0)n.push({test:new Function("e","return "+i.join("&")),handler:t})}),n}function t(e){var n=e.data,t=e.keyCode,i=n.cache,r=i.counter;if(i.keyCode===t&&r>0){if(1===r)n.emit({type:"beforeLongPress",keyCode:t});r++}else i.keyCode=t,r=1;if(i.counter=r,n.longPress||1===r)$.each(i.action,function(t,i){if(i.test(e))o(i.handler,n,e)});e.type="keyDown",n.emit(e)}function i(e){var n=e.data,t=n.cache;if(t.keyCode=null,t.counter>1)n.emit({type:"afterLongPress",keyCode:e.keyCode}),t.counter=0;e.type="keyUp",n.emit(e)}var o=require("../function/call"),r=require("../function/split"),u=require("../function/jquerify"),f=require("../util/keyboard");e.prototype={constructor:e,type:"Keyboard",init:function(){var e=this;e.cache={counter:0,action:n(e.action||{})},e.element.on("keydown"+c,e,t).on("keyup"+c,e,i)},dispose:function(){var e=this;e.element.off(c),e.element=e.cache=null}},u(e.prototype),e.defaultOptions={longPress:!1};var c=".cobble_helper_keyboard";return e}),define("cobble/helper/Popup",["require","exports","module","../function/split","../function/isHidden","../function/contains","../function/jquerify","../function/lifeCycle","../util/instance"],function(require){"use strict";function e(e){return C.init(this,e)}function n(e,n){$.each(e.showConfigList,function(t,i){i[n](e)})}function t(e,n){$.each(e.hideConfigList,function(t,i){i[n](e)})}function i(e,n){if(e)e.type=n;else e=n;return e}function o(e){var n=e.currentTarget;return n&&"HTML"===n.tagName?null:n}function r(e,n){return e.emit(i(n,"beforeShow"))}function u(e,i){return e.layer.data(D,o(i)),n(e,"off"),t(e,"on"),e.emit("afterShow")}function f(e,n){return e.emit(i(n,"beforeHide"))}function c(e){return e.layer.removeData(D),t(e,"off"),n(e,"on"),e.emit("afterHide")}function a(){return $.now()}function s(e){return"__"+e+"Handler__"}function l(e,n){return null==e[n]}function p(e,n){return e.layer.data(D)!==o(n)}function d(e,n,t){return!n||n(e,t)}function h(e,n){return n-e[T]>50}function m(n,t){return function(i){var o=i.data,r=a(i);if(l(o,P)&&p(o,i)&&d(o,t,i))o[T]=r,v({popup:o,delay:o.show.delay,toggle:e.trigger.show[n].delay,timer:P,success:function(){var e=function(){o.open(i)},n=o[K];if(n)n.done(e);else e()}})}}function y(n,t){return function(i){var o=i.data,r=a(i);if(l(o,I)&&d(o,t,i)&&h(o,r))o[T]=r,o[K]=$.Deferred(),v({popup:o,delay:o.hide.delay,toggle:e.trigger.hide[n].delay,timer:I,success:function(){o.close(i),o[K].resolve()},fail:function(){o[K]=null}})}}function v(e){var n=e.delay,t=e.success;if(n>0){var i=e.popup,o=e.timer,r=e.toggle||{},u=r.on||$.noop,f=r.off||$.noop,c=e.fail||$.noop,a=function(){clearTimeout(i[o]),f(i,s),i[o]=null},s=function(e){var n=i[o];if(n)a();if(n&&e===T)t();else c()};u(i,s),i[o]=setTimeout(function(){s(T)},n)}else t()}function g(e){var n=this,t=n.type,i=n.handler,o=s(t);if(e[o]!==i)e.element.on(t,e.selector,e,i),e[o]=i}function b(e){var n=this;if(!e.selector){var t=n.type;e.element.off(t,n.handler),e[s(t)]=null}}var x=require("../function/split"),_=require("../function/isHidden"),k=require("../function/contains"),w=require("../function/jquerify"),C=require("../function/lifeCycle"),q=require("../util/instance");e.prototype={constructor:e,type:"Popup",init:function(){var i=this,o=i.showConfigList=[],r=i.hideConfigList=[],u=i.show.trigger,f=i.hide.trigger;if(u)$.each(x(u,","),function(n,t){var i=e.trigger.show[t];if(i)o.push(i)});if(f)$.each(x(i.hide.trigger,","),function(n,t){var i=e.trigger.hide[t];if(i)r.push(i)});if(i.hidden=_(i.layer))n(i,"on");else t(i,"on")},open:function(){var e=this,n=arguments[0];if(!n)e[T]=a();if(n=r(e,n),!n.isDefaultPrevented()){var t=e.layer,i=e.show.animation;if($.isFunction(i))i.call(e,t);else t.show();e.hidden=!1,u(e,n)}},close:function(){var e=this;if(!e.hidden){var n=arguments[0];if(!n)e[T]=a();if(n=f(e,n),!n.isDefaultPrevented()){var t=e.layer,i=e.hide.animation;if($.isFunction(i))i.call(e,t);else t.hide();e.hidden=!0,c(e)}}},dispose:function(){var e=this;C.dispose(e),e.close(),n(e,"off"),e.element=e.layer=null}},w(e.prototype),e.defaultOptions={show:{trigger:"click"},hide:{trigger:"click"}};var K="__hidePromise__",P="__showTimer__",I="__hideTimer__",T="__lastTriggerTime__",D="__sourceElement__",H=function(e,n){if(!n)return!1;else return k(e.layer,n)};return e.trigger={show:{focus:{type:"focusin",handler:m("focus"),on:g,off:b},click:{type:"click",handler:m("click"),on:g,off:b},over:{type:"mouseenter",handler:m("over"),on:g,off:b,delay:{on:function(e,n){e.element.on("mouseleave",e.selector,n)},off:function(e,n){e.element.off("mouseleave",n)}}},context:{type:"contextmenu",handler:m("context"),on:g,off:b}},hide:{blur:{type:"focusout",handler:y("blur"),on:g,off:b},click:{type:"click",handler:function(){return y(this.type,function(e,n){return!H(e,n.target)})},on:function(e){var n=this;q.document.on(n.type,e,e.clickHandler=n.handler())},off:function(e){q.document.off(this.type,e.clickHandler)}},out:{type:"mouseleave",handler:y("out"),on:function(e){var n=this.type,t=this.handler;e.layer.on(n,e,t),e.element.on(n,e.selector,e,t)},off:function(e){var n=this.type,t=this.handler;e.element.off(n,t),e.layer.off(n,t)},delay:{on:function(e,n){e.element.on("mouseenter",e.selector,n),e.layer.on("mouseenter",n)},off:function(e,n){e.element.off("mouseenter",n),e.layer.off("mouseenter",n)}}},context:{type:"contextmenu",handler:function(){return y("context",function(e,n){return!H(e,n.target)})},on:function(e){var n=this;q.document.on(n.type,e,e.contextHandler=n.handler())},off:function(e){q.document.off(this.type,e.contextHandler)}}}},e}),define("cobble/ui/AutoComplete",["require","exports","module","../function/timer","../function/jquerify","../function/lifeCycle","../function/autoScrollUp","../function/autoScrollDown","../helper/Input","../helper/Popup","../helper/Iterator"],function(require){"use strict";function e(e){return o.init(this,e)}function n(e){var n=e.element,i=e.show,o=e.hide;if(!i.trigger)i.trigger="focus";if(!o.trigger)o.trigger="click";var r=i.animation;if($.isFunction(r))i.animation=$.proxy(r,e);if(r=o.animation,$.isFunction(r))o.animation=$.proxy(r,e);return new c({element:n,layer:e.menu,show:i,hide:o,onBeforeShow:function(n){if("eventPhase"in n)return t(e),!1;else return void 0},onBeforeHide:function(t){var i;if("eventPhase"in t)i=t.target!==n[0];if(i)e.iterator.stop();return i}})}function t(e){var n=e.cache,t=$.trim(e.element.val()),i=n[t];if(i)e.render(i);else e.load(t,function(i){n[t]=i,e.render(i)})}var i=(require("../function/timer"),require("../function/jquerify")),o=require("../function/lifeCycle"),r=require("../function/autoScrollUp"),u=require("../function/autoScrollDown"),f=require("../helper/Input"),c=require("../helper/Popup"),a=require("../helper/Iterator");e.prototype={constructor:e,type:"AutoComplete",init:function(){var e,i,o=this,c=o.menu,p=o.element,d=o.activeClass;o.cache={};var h=[{element:p,data:{text:p.val()}}],m=o.iterator=new a({element:p,startIndex:0,minIndex:o.includeInput?0:1,data:h,delay:o.delay,onChange:function(n,t){var f=t.to,a=(t.from,t.action),s=this.data[f];if(i)i.removeClass(d);if(i=s.element,o.autoScroll){var l="prev"===a?r:u;l(c,i)}if(f>0)i.addClass(d);if(e=s.data,"render"!==a)p.val(e.text);o.emit("change",{index:f-1,data:e})}});o.input=new f({element:p,smart:!0,longPress:!1,action:{up:function(e){e.preventDefault()},enter:function(){if(o.popup.hidden)e=h[0].data;else o.close();o.emit("enter",e)}},onChange:function(){h[0].data.text=p.val(),t(o)}}),o.popup=n(o);var y,v=o.itemSelector,g=!1,b=function(){c.on("mouseleave"+s,v,function(){if(!g)m.to(m.startIndex),x()})},x=function(){c.off("mouseleave"+s)};c.on("scroll"+s,function(){if(y)clearTimeout(y);g=!0,y=setTimeout(function(){y=null,g=!1},500)}).on("click"+s,v,function(){x();var n=$(this).data(l);m.to(n,{force:!0}),o.close(),o.emit("itemClick",e)}).on("mouseenter"+s,v,function(){if(!g){if(i)i.removeClass(d);i=$(this),i.addClass(d),m.index=i.data(l),b()}})},render:function(e){var n=this;if($.isArray(e)&&e.length>0){n.emit("beforeRender");var t=n.iterator;t.stop();var i=t.getData();i.length=1;var o=n.menu;o.html(n.renderTemplate(e,n.template)),o.find(n.itemSelector).each(function(){var e=$(this),n=e.data();if(null==n.text)n.text=e.html();var t=i.push({element:e,data:n});e.data(l,t-1)}),t.maxIndex=i.length-1;var r=o.find("."+n.activeClass);if(1===r.length){var u=r.data(l);if("number"===$.type(u))t.to(u,{action:"render"})}n.emit("afterRender"),n.open()}else n.close()},open:function(){var e=this,n=e.popup;if(n.hidden)e.emit("beforeOpen"),n.open(),e.emit("afterOpen")},close:function(){var e=this,n=e.popup;if(!n.hidden)e.emit("beforeClose"),n.close(),e.emit("afterClose")},dispose:function(){var e=this;o.dispose(e),e.menu.off(s),e.input.dispose(),e.popup.dispose(),e.element=e.menu=e.data=e.items=e.cache=null}},i(e.prototype),e.defaultOptions={delay:60,includeInput:!0,itemSelector:"li",show:{},hide:{}};var s=".cobble_ui_autocomplete",l="__index__";return e}),define("cobble/util/input",["require","exports","module","../function/around"],function(require,exports){"use strict";function e(){}function n(e){var n=e.val(),i=!1;e.on("propertychange"+r,function(t){if(i)return void(i=!1);if("value"===t.originalEvent.propertyName){var o=e.val();if(o!==n)e.trigger("input"),n=o}}),t(e,"val",function(){if(0!==arguments.length)i=!0})}var t=require("../function/around"),i=$('<input type="text" />')[0],o="oninput"in i;i=null;var r=".cobble_util_input";exports.init=o?e:n,exports.dispose=function(e){e.off(r)}}),define("cobble/util/instance",["require","exports","module"],function(require,exports){exports.window=$(window),exports.document=$(document),exports.html=$(document.documentElement),exports.body=$(document.body)}),define("cobble/util/keyboard",["require","exports","module"],function(require,exports){"use strict";function e(e){var n={};return $.each(e,function(e,t){n[t]=e}),n}var n={a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,"`":192,"-":173,"=":61,"[":219,"]":221,"\\":220,";":59,"'":222,",":188,".":190,"/":191,$0:96,$1:97,$2:98,$3:99,$4:100,$5:101,$6:102,$7:103,$8:104,$9:105,"$.":110,"$+":107,"$-":109,"$*":106,"$/":111,space:32,tab:9},t={backspace:8,"delete":46},i={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,enter:13,esc:27,capslock:20,insert:45,home:36,end:35,pageup:33,pagedown:34,left:37,right:39,up:38,down:40},o={shift:16,ctrl:17,meta:91,alt:18};$.extend(exports,n,i,o),exports.charKey=n,exports.deleteKey=t,exports.functionKey=i,exports.combinationKey=o,exports.isCharKey=function(t){return t in e(n)},exports.isDeleteKey=function(n){return n in e(t)},exports.isFunctionKey=function(n){return n in e(i)},exports.isCombinationKey=function(n){return n in e(o)}});