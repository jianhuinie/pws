define("cobble/function/contains",["require","exports","module"],function(){"use strict";return function(e,n){if(e=e.jquery?e[0]:e,n=n.jquery?n[0]:n,!e||!n)return!1;if(e===n)return!0;else return $.contains(e,n)}}),define("cobble/function/decimalLength",["require","exports","module"],function(){"use strict";return function(e){var n=(""+e).split(".");return 2===n.length?n[1].length:0}}),define("cobble/function/divide",["require","exports","module","./decimalLength","./float2Int"],function(require){"use strict";var e=require("./decimalLength"),n=require("./float2Int");return function(t,i){var o=Math.max(e(t),e(i));return t=n(t,o),i=n(i,o),t/i}}),define("cobble/function/float2Int",["require","exports","module"],function(){"use strict";return function(e,n){var t,i=(""+e).split(".");if(n>=0);else n=0;if(1===i.length)t=e+new Array(n+1).join("0");else n=Math.max(0,n-i[1].length),t=i.join("")+new Array(n+1).join("0");return+t}}),define("cobble/function/isHidden",["require","exports","module"],function(){"use strict";return function(e){e.css("display");return"none"===e.css("display")||0==e.css("opacity")||"hidden"===e.css("visibility")}}),define("cobble/function/jquerify",["require","exports","module"],function(){"use strict";function e(e){return e.faker||e.element}var n=$.prototype,t={on:function(){return n.on.apply(e(this),arguments),this},off:function(){return n.off.apply(e(this),arguments),this},emit:function(t,i){var o=this,r=e(o);if(r){if(!t[$.expando])t="string"===$.type(t)?$.Event(t):$.Event(null,t);t.cobble=o;var u=[t];if(i)u.push(i);var f=o[$.camelCase("on-"+t.type)];if($.isFunction(f)&&f.apply(o,u)===!1)t.preventDefault();if(!t.isPropagationStopped())n.trigger.apply(r,u);return t}},before:function(n){e(this).before(n)},after:function(n){e(this).after(n)},appendTo:function(n){e(this).appendTo(n)},prependTo:function(n){e(this).prependTo(n)}};return function(e){$.each(t,function(n,t){if(null==e[n])e[n]=t})}}),define("cobble/function/lifeCycle",["require","exports"],function(require,exports){"use strict";exports.init=function(e,n){var t=e.constructor,i="__cobble__"+t.prototype.type,o=n.element;if(o&&o.data(i))e=o.data(i);else if($.extend(e,t.defaultOptions,n),e.init(),o)o.data(i,e);return e},exports.dispose=function(e){var n="__cobble__"+e.constructor.prototype.type,t=e.element;if(t)t.removeData(n)}}),define("cobble/function/offsetParent",["require","exports","module"],function(){"use strict";function e(e){return e.is("body")||"static"!==e.css("position")}return function(n){if(n.is("body"))return n;for(var t=n.parent();!e(t);)t=t.parent();return t}}),define("cobble/function/parsePercent",["require","exports","module","./divide"],function(require){"use strict";var e=require("./divide"),n=/(-?\d+(\.\d+)?)%/;return function(t){if(n.test(t))return e(RegExp.$1,100);else return void 0}}),define("cobble/function/pin",["require","exports","module","../util/instance","./parsePercent"],function(require){"use strict";function e(e){var n=o[e.x];if(null==n)n=e.x;if("string"===$.type(n)){var t=i(n);if(null!=t)n=t*(e.width||e.element.outerWidth())}return n}function n(e){var n=o[e.y];if(null==n)n=e.y;if("string"===$.type(n)){var t=i(n);if(null!=t)n=t*(e.height||e.element.outerHeight())}return n}var t=require("../util/instance"),i=require("./parsePercent"),o={left:0,top:0,center:"50%",middle:"50%",right:"100%",bottom:"100%"};return function(i){var o=i.element,r=i.attachment||{};if(!r.element)r.element=t.body;var u=r.element.offset(),f=u.left+e(r),c=u.top+n(r),l=f-e(i),s=c-n(i),a=i.offset;if(a){if("number"===$.type(a.x))l+=a.x;if("number"===$.type(a.y))s+=a.y}var p={left:l,top:s},d=o.css("position");if("absolute"!==d&&"fixed"!==d)p.position="absolute";if(i.silence)return p;else o.css(p)}}),define("cobble/function/split",["require","exports","module"],function(){"use strict";return function(e,n){var t=[];return $.each(e.split(n),function(e,n){if(n=$.trim(n))t.push(n)}),t}}),define("cobble/helper/Popup",["require","exports","module","../function/split","../function/isHidden","../function/contains","../function/jquerify","../function/lifeCycle","../util/instance"],function(require){"use strict";function e(e){return P.init(this,e)}function n(e,n){$.each(e.showConfigList,function(t,i){i[n](e)})}function t(e,n){$.each(e.hideConfigList,function(t,i){i[n](e)})}function i(e,n){if(e)e.type=n;else e=n;return e}function o(e){var n=e.currentTarget;return n&&"HTML"===n.tagName?null:n}function r(e,n){return e.emit(i(n,"beforeShow"))}function u(e,i){return e.layer.data(L,o(i)),n(e,"off"),t(e,"on"),e.emit("afterShow")}function f(e,n){return e.emit(i(n,"beforeHide"))}function c(e){return e.layer.removeData(L),t(e,"off"),n(e,"on"),e.emit("afterHide")}function l(){return $.now()}function s(e){return"__"+e+"Handler__"}function a(e,n){return null==e[n]}function p(e,n){return e.layer.data(L)!==o(n)}function d(e,n,t){return!n||n(e,t)}function h(e,n){return n-e[j]>50}function m(n,t){return function(i){var o=i.data,r=l(i);if(a(o,H)&&p(o,i)&&d(o,t,i))o[j]=r,v({popup:o,delay:o.show.delay,toggle:e.trigger.show[n].delay,timer:H,success:function(){var e=function(){o.open(i)},n=o[C];if(n)n.done(e);else e()}})}}function y(n,t){return function(i){var o=i.data,r=l(i);if(a(o,T)&&d(o,t,i)&&h(o,r))o[j]=r,o[C]=$.Deferred(),v({popup:o,delay:o.hide.delay,toggle:e.trigger.hide[n].delay,timer:T,success:function(){o.close(i),o[C].resolve()},fail:function(){o[C]=null}})}}function v(e){var n=e.delay,t=e.success;if(n>0){var i=e.popup,o=e.timer,r=e.toggle||{},u=r.on||$.noop,f=r.off||$.noop,c=e.fail||$.noop,l=function(){clearTimeout(i[o]),f(i,s),i[o]=null},s=function(e){var n=i[o];if(n)l();if(n&&e===j)t();else c()};u(i,s),i[o]=setTimeout(function(){s(j)},n)}else t()}function g(e){var n=this,t=n.type,i=n.handler,o=s(t);if(e[o]!==i)e.element.on(t,e.selector,e,i),e[o]=i}function b(e){var n=this;if(!e.selector){var t=n.type;e.element.off(t,n.handler),e[s(t)]=null}}var x=require("../function/split"),_=require("../function/isHidden"),w=require("../function/contains"),q=require("../function/jquerify"),P=require("../function/lifeCycle"),k=require("../util/instance");e.prototype={constructor:e,type:"Popup",init:function(){var i=this,o=i.showConfigList=[],r=i.hideConfigList=[],u=i.show.trigger,f=i.hide.trigger;if(u)$.each(x(u,","),function(n,t){var i=e.trigger.show[t];if(i)o.push(i)});if(f)$.each(x(i.hide.trigger,","),function(n,t){var i=e.trigger.hide[t];if(i)r.push(i)});if(i.hidden=_(i.layer))n(i,"on");else t(i,"on")},open:function(){var e=this,n=arguments[0];if(!n)e[j]=l();if(n=r(e,n),!n.isDefaultPrevented()){var t=e.layer,i=e.show.animation;if($.isFunction(i))i.call(e,t);else t.show();e.hidden=!1,u(e,n)}},close:function(){var e=this;if(!e.hidden){var n=arguments[0];if(!n)e[j]=l();if(n=f(e,n),!n.isDefaultPrevented()){var t=e.layer,i=e.hide.animation;if($.isFunction(i))i.call(e,t);else t.hide();e.hidden=!0,c(e)}}},dispose:function(){var e=this;P.dispose(e),e.close(),n(e,"off"),e.element=e.layer=null}},q(e.prototype),e.defaultOptions={show:{trigger:"click"},hide:{trigger:"click"}};var C="__hidePromise__",H="__showTimer__",T="__hideTimer__",j="__lastTriggerTime__",L="__sourceElement__",D=function(e,n){if(!n)return!1;else return w(e.layer,n)};return e.trigger={show:{focus:{type:"focusin",handler:m("focus"),on:g,off:b},click:{type:"click",handler:m("click"),on:g,off:b},over:{type:"mouseenter",handler:m("over"),on:g,off:b,delay:{on:function(e,n){e.element.on("mouseleave",e.selector,n)},off:function(e,n){e.element.off("mouseleave",n)}}},context:{type:"contextmenu",handler:m("context"),on:g,off:b}},hide:{blur:{type:"focusout",handler:y("blur"),on:g,off:b},click:{type:"click",handler:function(){return y(this.type,function(e,n){return!D(e,n.target)})},on:function(e){var n=this;k.document.on(n.type,e,e.clickHandler=n.handler())},off:function(e){k.document.off(this.type,e.clickHandler)}},out:{type:"mouseleave",handler:y("out"),on:function(e){var n=this.type,t=this.handler;e.layer.on(n,e,t),e.element.on(n,e.selector,e,t)},off:function(e){var n=this.type,t=this.handler;e.element.off(n,t),e.layer.off(n,t)},delay:{on:function(e,n){e.element.on("mouseenter",e.selector,n),e.layer.on("mouseenter",n)},off:function(e,n){e.element.off("mouseenter",n),e.layer.off("mouseenter",n)}}},context:{type:"contextmenu",handler:function(){return y("context",function(e,n){return!D(e,n.target)})},on:function(e){var n=this;k.document.on(n.type,e,e.contextHandler=n.handler())},off:function(e){k.document.off(this.type,e.contextHandler)}}}},e}),define("cobble/ui/ContextMenu",["require","exports","module","../helper/Popup","../util/instance","../function/pin","../function/jquerify","../function/lifeCycle","../function/offsetParent"],function(require){"use strict";function e(e){return f.init(this,e)}function n(e){var n=e.data,i=n.element,u=n.template;if(!i&&u)i=n.element=$(u),t(n);if(l&&l!==n)l.close();n.contextEvent=e,l=n,l.open(),r({element:i,x:0,y:0,attachment:{element:o.body,x:e.pageX,y:e.pageY}}),e.stopPropagation(),e.preventDefault()}function t(e){var n=e.element;if(n.is(":visible"))n.hide();if(!c(n).is("body"))o.body.append(n);var t=e.action;if(t)$.each(t,function(t,i){n.on("click",t,function(){i.call(e,e.contextEvent)})});var r=e.show,u=e.hide;if(!u.trigger)u.trigger="click,context";var f=r.animation;if($.isFunction(f))r.animation=$.proxy(f,e);if(f=u.animation,$.isFunction(f))u.animation=$.proxy(f,e);e.popup=new i({layer:n,show:r,hide:u})}var i=require("../helper/Popup"),o=require("../util/instance"),r=require("../function/pin"),u=require("../function/jquerify"),f=require("../function/lifeCycle"),c=require("../function/offsetParent");e.prototype={constructor:e,type:"ContextMenu",init:function(){var e=this;if(e.element)t(e);e.container.on("contextmenu"+s,e,n)},open:function(){this.popup.open()},close:function(){this.popup.close()},dispose:function(){var e=this;if(f.dispose(e),l===e)l=null;var n=e.popup;if(n)n.dispose(),e.popup=null;var t=e.element;if(t)t.remove(),e.element=null;e.container.off(s),e.container=null}},u(e.prototype),e.defaultOptions={container:o.body,hide:{}};var l,s=".cobble_ui_contextmenu";return e}),define("cobble/util/instance",["require","exports","module"],function(require,exports){exports.window=$(window),exports.document=$(document),exports.html=$(document.documentElement),exports.body=$(document.body)});