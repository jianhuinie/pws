define("cobble/function/jquerify",["require","exports","module"],function(){"use strict";function e(e){return e.faker||e.element}var t=$.prototype,n={on:function(){return t.on.apply(e(this),arguments),this},off:function(){return t.off.apply(e(this),arguments),this},emit:function(n,i){var r=this,a=e(r);if(a){if(!n[$.expando])n="string"===$.type(n)?$.Event(n):$.Event(null,n);n.cobble=r;var o=[n];if(i)o.push(i);var u=r[$.camelCase("on-"+n.type)];if($.isFunction(u)&&u.apply(r,o)===!1)n.preventDefault();if(!n.isPropagationStopped())t.trigger.apply(a,o);return n}},before:function(t){e(this).before(t)},after:function(t){e(this).after(t)},appendTo:function(t){e(this).appendTo(t)},prependTo:function(t){e(this).prependTo(t)}};return function(e){$.each(n,function(t,n){if(null==e[t])e[t]=n})}}),define("cobble/function/lifeCycle",["require","exports"],function(require,exports){"use strict";exports.init=function(e,t){var n=e.constructor,i="__cobble__"+n.prototype.type,r=t.element;if(r&&r.data(i))e=r.data(i);else if($.extend(e,n.defaultOptions,t),e.init(),r)r.data(i,e);return e},exports.dispose=function(e){var t="__cobble__"+e.constructor.prototype.type,n=e.element;if(n)n.removeData(t)}}),define("cobble/ui/Calendar",["require","../function/jquerify","../function/lifeCycle","../util/date"],function(require){"use strict";function e(e){return i.init(this,e)}function t(e,t,n){for(var i,a=[],o=e;t>=o;o+=r.DAY){if(i=r.simplify(o),o>n)i.phase="future";else if(n>o)i.phase="past";else i.phase="today";a.push(i)}return a}var n=require("../function/jquerify"),i=require("../function/lifeCycle"),r=require("../util/date");e.prototype={constructor:e,type:"Calendar",init:function(){var e=this,t=e.today||new Date;if(e.today=t.setHours(0,0,0,0),e.render(e.date||new Date),e.value)e.setValue(e.value,{force:!0,silence:!0});var n="click"+a,i=e.element;i.on(n,"[data-value]",function(){var t,n=$(this),i=e.activeClass,r=n.hasClass(i);if(r)if(e.toggle)t="",n.removeClass(i);else return;else t=n.data("value");e.setValue(t)});var r=e.prevSelector;if(r)i.on(n,r,$.proxy(e.prev,e));var o=e.nextSelector;if(o)i.on(n,o,$.proxy(e.next,e))},getValue:function(){return this.value},setValue:function(e,t){var n=this,i=n.element,r=i.find('[data-value="'+e+'"]');if(1!==r.length)e="";if(t=t||{},t.force||n.value!=e){n.value=e;var a=n.activeClass,o=i.find("."+a);if(e){if(!n.multiple)o.removeClass(a);r.addClass(a)}else o.removeClass(a);if(!t.silence)n.emit("change")}},prev:function(){var e=this,t=e.date;t="week"===e.mode?r.prevWeek(t):r.prevMonth(t),e.render(t),e.emit("prev")},next:function(){var e=this,t=e.date;t="week"===e.mode?r.nextWeek(t):r.nextMonth(t),e.render(t),e.emit("next")},inRange:function(e){var t=this.data,n=r.parse(t.start),i=r.parse(t.end);return e>=n&&i>=e},createData:function(e){var n=this,i=n.firstDay;e=e.setHours(0,0,0,0);var a,o;if("week"===n.mode)a=r.getWeekFirstDay(e,i),o=r.getWeekLastDay(e,i);else{var u=r.getMonthFirstDay(e),s=r.getMonthLastDay(e);a=r.getWeekFirstDay(u,i),o=r.getWeekLastDay(s,i)}var f=t(+a,+o,n.today);return $.extend(r.simplify(e),{start:f[0],end:f[f.length-1],list:f})},render:function(e){var t=this;t.date=e;var n=t.data=t.createData(e);t.emit("beforeRender",n),t.element.html(t.renderTemplate(n,t.template)),t.emit("afterRender",n)},dispose:function(){var e=this;i.dispose(e),e.element.off(a),e.element=null}},n(e.prototype),e.defaultOptions={firstDay:1,mode:"month",toggle:!1,multiple:!1,activeClass:"active"};var a=".cobble_ui_calendar";return e}),define("cobble/util/date",["require","exports","module"],function(require,exports){"use strict";exports.parse=function(e,t,n){var i=!1;if($.isNumeric(e)&&$.isNumeric(t)&&$.isNumeric(n))i=!0;else if(1===arguments.length)if(i=!0,$.isPlainObject(e))n=e.date,t=e.month,e=e.year;else if("string"===$.type(e)){var r=e.split("-");e=r[0],t=r[1],n=r[2]}if(i)if(t>=1&&12>=t&&n>=1&&31>=n)return new Date(e,t-1,n)},exports.stringify=function(e){if("number"===$.type(e))e=new Date(e);var t=e.getFullYear(),n=e.getMonth()+1,e=e.getDate();if(10>n)n="0"+n;if(10>e)e="0"+e;return[t,n,e].join("-")},exports.simplify=function(e){if("number"===$.type(e))e=new Date(e);return{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate(),day:e.getDay()}},exports.getWeekFirstDay=function(e,t){if("number"===$.type(e))e=new Date(e);var n=e.getDay();return n=n>=t?n:n+7,new Date(e.getTime()-(n-t)*exports.DAY)},exports.getWeekLastDay=function(e,t){return e=exports.getWeekFirstDay(e,t),e.setTime(e.getTime()+6*exports.DAY),e},exports.getMonthFirstDay=function(e){var t="number"===$.type(e)?e:e.getTime();return e=new Date(t),e.setDate(1),e},exports.getMonthLastDay=function(e){var t="number"===$.type(e)?e:e.getTime();return e=new Date(t),e.setDate(1),e.setMonth(e.getMonth()+1),e.setDate(0),e},exports.prevMonth=function(e){var t="number"===$.type(e)?e:e.getTime();return e=new Date(t),e.setDate(1),e.setTime(e.getTime()-exports.WEEK),e},exports.nextMonth=function(e){var t="number"===$.type(e)?e:e.getTime();return e=new Date(t),e.setDate(28),e.setTime(e.getTime()+exports.WEEK),e},exports.prevWeek=function(e){return exports.subtract(e,7)},exports.nextWeek=function(e){return exports.add(e,7)},exports.add=function(e,t){if("date"===$.type(e))e=e.getTime();return new Date(e+t*exports.DAY)},exports.subtract=function(e,t){if("date"===$.type(e))e=e.getTime();return new Date(e-t*exports.DAY)},exports.DAY=864e5,exports.WEEK=7*exports.DAY});