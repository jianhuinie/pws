define("cobble/form/Number",["require","exports","module","../function/init","../function/timer","../function/toNumber","../function/jquerify","../function/lifeCycle","../function/replaceWith","../function/plus","../function/minus","../function/divide","../helper/Input","../util/instance"],function(require){"use strict";function e(e){return r.init(this,e)}var t=require("../function/init"),n=require("../function/timer"),i=require("../function/toNumber"),o=require("../function/jquerify"),r=require("../function/lifeCycle"),u=require("../function/replaceWith"),c=require("../function/plus"),f=require("../function/minus"),a=require("../function/divide"),l=require("../helper/Input"),s=require("../util/instance");e.prototype={constructor:e,type:"Number",init:function(){var e,t=this,o=t.element,r=t.upSelector,a=t.downSelector;if(1===o.find(r).length)e=o,o=t.element=e.find(":text");else e=$(t.template),u(o,e),u(e.find(":text"),o);t.faker=e,t.step=i(o.attr("step"),1),t.min=i(o.attr("min")),t.max=i(o.attr("max")),t.value=i(o.val(),"");var d=function(){var e=t.getValue();if("number"===$.type(e)){if(e=c(e,t.step),null!=t.max)e=Math.min(t.max,e)}else e=t.min||0;t.setValue(e)},m=function(){var e=t.getValue();if("number"===$.type(e)){if(e=f(e,t.step),null!=t.min)e=Math.max(t.min,e)}else e=t.min||0;t.setValue(e)};t.input=new l({element:o,longPress:!0,action:{up:d,down:m}});var h=n(d,40,400),y=n(m,40,400),b="mouseup"+p,v="mousedown"+p,g="focusout"+p;e.on(v,r,h.start).on(v,a,y.start).on(g,":text",function(){t.setValue(o.val())}),s.document.on(b,function(){h.stop(),y.stop()})},getLegalValue:function(e){var t=this;if("string"===$.type(e))e=$.trim(e);return e=t.validate(e)?i(e):t.defaultValue,"number"===$.type(e)?e:""},getValue:function(){var e=this,t=e.element;return document.activeElement===t[0]?e.getLegalValue(t.val()):e.value},setValue:function(e,t){var n=this,i=n.element;if(e=n.getLegalValue(e),t=t||{},t.force||e!==i.val())if(n.value=e,i.val(e),!t.silence)n.emit("change")},validate:function(e){var t=this;if(null==e)e=t.getValue();if(e=i(e,""),""===e||e<t.min||e>t.max)return!1;var n=a(f(e,t.min),t.step);return n===Math.floor(n)},dispose:function(){var e=this;r.dispose(e),e.faker.off(p),s.document.off(p),e.input.dispose(),e.element=e.faker=e.input=null}},o(e.prototype),e.defaultOptions={upSelector:".icon-caret-up",downSelector:".icon-caret-down",template:'<div class="form-number"><input class="form-text" type="text" /><i class="icon icon-caret-up"></i><i class="icon icon-caret-down"></i></div>'},e.init=t(e);var p=".cobble_form_number";return e}),define("cobble/function/around",["require","exports","module"],function(){"use strict";return function(e,t,n,i){var o="string"===$.type(t),r=o?e[t]:e;if(!o)i=n,n=t;var u=function(){var e,t=arguments;if($.isFunction(n))e=n.apply(this,t);if(e!==!1){if($.isFunction(r))e=r.apply(this,t);if($.isFunction(i)){var o=i.apply(this,t);if("undefined"!==$.type(o))e=o}return e}};return o?e[t]=u:u}}),define("cobble/function/call",["require","exports","module"],function(){"use strict";return function(e,t,n){if($.isFunction(e)){var i=$.isArray(n)?"apply":"call";return e[i](t,n)}}}),define("cobble/function/decimalLength",["require","exports","module"],function(){"use strict";return function(e){var t=(""+e).split(".");return 2===t.length?t[1].length:0}}),define("cobble/function/divide",["require","exports","module","./decimalLength","./float2Int"],function(require){"use strict";var e=require("./decimalLength"),t=require("./float2Int");return function(n,i){var o=Math.max(e(n),e(i));return n=t(n,o),i=t(i,o),n/i}}),define("cobble/function/float2Int",["require","exports","module"],function(){"use strict";return function(e,t){var n,i=(""+e).split(".");if(t>=0);else t=0;if(1===i.length)n=e+new Array(t+1).join("0");else t=Math.max(0,t-i[1].length),n=i.join("")+new Array(t+1).join("0");return+n}}),define("cobble/function/init",["require","exports","module"],function(){"use strict";return function(e){return function(t,n){var i=[];return t.each(function(){i.push(new e($.extend({element:$(this)},n)))}),i}}}),define("cobble/function/jquerify",["require","exports","module"],function(){"use strict";function e(e){return e.faker||e.element}var t=$.prototype,n={on:function(){return t.on.apply(e(this),arguments),this},off:function(){return t.off.apply(e(this),arguments),this},emit:function(n,i){var o=this,r=e(o);if(r){if(!n[$.expando])n="string"===$.type(n)?$.Event(n):$.Event(null,n);n.cobble=o;var u=[n];if(i)u.push(i);var c=o[$.camelCase("on-"+n.type)];if($.isFunction(c)&&c.apply(o,u)===!1)n.preventDefault();if(!n.isPropagationStopped())t.trigger.apply(r,u);return n}},before:function(t){e(this).before(t)},after:function(t){e(this).after(t)},appendTo:function(t){e(this).appendTo(t)},prependTo:function(t){e(this).prependTo(t)}};return function(e){$.each(n,function(t,n){if(null==e[t])e[t]=n})}}),define("cobble/function/lifeCycle",["require","exports"],function(require,exports){"use strict";exports.init=function(e,t){var n=e.constructor,i="__cobble__"+n.prototype.type,o=t.element;if(o&&o.data(i))e=o.data(i);else if($.extend(e,n.defaultOptions,t),e.init(),o)o.data(i,e);return e},exports.dispose=function(e){var t="__cobble__"+e.constructor.prototype.type,n=e.element;if(n)n.removeData(t)}}),define("cobble/function/minus",["require","exports","module","./decimalLength","./float2Int"],function(require){"use strict";var e=require("./decimalLength"),t=require("./float2Int");return function(n,i){var o=Math.max(e(n),e(i));return n=t(n,o),i=t(i,o),(n-i)/Math.pow(10,o)}}),define("cobble/function/plus",["require","exports","module","./decimalLength","./float2Int"],function(require){"use strict";var e=require("./decimalLength"),t=require("./float2Int");return function(n,i){var o=Math.max(e(n),e(i));return n=t(n,o),i=t(i,o),(n+i)/Math.pow(10,o)}}),define("cobble/function/replaceWith",["require"],function(){"use strict";return function(e,t){e=e[0],t=t[0],e.parentNode.replaceChild(t,e)}}),define("cobble/function/split",["require","exports","module"],function(){"use strict";return function(e,t){var n=[];return $.each(e.split(t),function(e,t){if(t=$.trim(t))n.push(t)}),n}}),define("cobble/function/timer",["require","exports","module"],function(){"use strict";return function(e,t,n){n="number"===$.type(n)?n:0;var i,o=function(){i=setTimeout(o,t),e()},r={start:function(){r.stop(),setTimeout(o,n)},stop:function(){if(i)clearTimeout(i),i=null}};return r}}),define("cobble/function/toNumber",["require","exports","module"],function(){"use strict";var e={"int":parseInt,"float":parseFloat};return function(t,n,i){if("number"!==$.type(t)){var o=e[i];if(t=o?o(t,10):+t,isNaN(t))t=n}return t}}),define("cobble/helper/Input",["require","exports","module","../function/around","../function/jquerify","../function/lifeCycle","../util/keyboard","../util/input","./Keyboard"],function(require){"use strict";function e(e){return n.init(this,e)}var t=(require("../function/around"),require("../function/jquerify")),n=require("../function/lifeCycle"),i=require("../util/keyboard"),o=require("../util/input"),r=require("./Keyboard");e.prototype={constructor:e,type:"Input",init:function(){var e=this,t=e.element;o.init(t);var n=e.action;if(n)$.each(n,function(t,i){n[t]=$.proxy(i,e)});var c,f;e.keyboard=new r({element:t,action:n,longPress:e.longPress,onKeyDown:function(t){e.emit(t)},onKeyUp:function(t){e.emit(t)},onBeforeLongPress:function(){c=t.val(),f=!0,e.emit("beforeLongPress")},onAfterLongPress:function(n){if(f=!1,e.emit("afterLongPress"),c!==t.val()&&(i.isCharKey(n.keyCode)||i.isDeleteKey()))e.emit("change")}}),t.on("input"+u,function(){if(!f||!e.smart)e.emit("change")})},autoWidth:function(){var e=this,t=e.element;e.on("change",function(){if(t.scrollLeft()>0)t.width(t.prop("scrollWidth"))})},autoHeight:function(){var e=this,t=e.element;if("hidden"!==t.css("overflow-y"))t.css("overflow-y","hidden");var n,i=t.height(),o=i,r=parseInt(t.css("font-size"),10),u=t.innerHeight()-i;e.on("change",function(){if(o!==i)o=i,t.height(i);if(n=t.prop("scrollHeight")-u,Math.abs(n-o)>r)t.height(n),o=n})},dispose:function(){var e=this;n.dispose(e);var t=e.element;o.dispose(t),t.off(u),e.keyboard.dispose(),e.element=e.keyboard=null}},t(e.prototype),e.defaultOptions={smart:!0,longPress:!1};var u=".cobble_helper_input";return e}),define("cobble/helper/Keyboard",["require","exports","module","../function/call","../function/split","../function/jquerify","../util/keyboard"],function(require){"use strict";function e(t){$.extend(this,e.defaultOptions,t),this.init()}function t(e){var t=[];return $.each(e,function(e,n){var i=[],o="plus",u=r(e.replace(/\$\+/g,o),"+");if($.each(c.combinationKey,function(e){if($.inArray(e,u)<0)u.push("!"+e)}),$.each(u,function(e,t){var n=0===t.indexOf("!");if(n)t=t.substr(1);if(t===o)t="$+";if(c.combinationKey[t])i.push((n?"!":"")+"e."+t+"Key");else if(c[t])i.push("e.keyCode==="+c[t]);else return i.length=0,!1}),i.length>0)t.push({test:new Function("e","return "+i.join("&")),handler:n})}),t}function n(e){var t=e.data,n=e.keyCode,i=t.cache,r=i.counter;if(i.keyCode===n&&r>0){if(1===r)t.emit({type:"beforeLongPress",keyCode:n});r++}else i.keyCode=n,r=1;if(i.counter=r,t.longPress||1===r)$.each(i.action,function(n,i){if(i.test(e))o(i.handler,t,e)});e.type="keyDown",t.emit(e)}function i(e){var t=e.data,n=t.cache;if(n.keyCode=null,n.counter>1)t.emit({type:"afterLongPress",keyCode:e.keyCode}),n.counter=0;e.type="keyUp",t.emit(e)}var o=require("../function/call"),r=require("../function/split"),u=require("../function/jquerify"),c=require("../util/keyboard");e.prototype={constructor:e,type:"Keyboard",init:function(){var e=this;e.cache={counter:0,action:t(e.action||{})},e.element.on("keydown"+f,e,n).on("keyup"+f,e,i)},dispose:function(){var e=this;e.element.off(f),e.element=e.cache=null}},u(e.prototype),e.defaultOptions={longPress:!1};var f=".cobble_helper_keyboard";return e}),define("cobble/util/input",["require","exports","module","../function/around"],function(require,exports){"use strict";function e(){}function t(e){var t=e.val(),i=!1;e.on("propertychange"+r,function(n){if(i)return void(i=!1);if("value"===n.originalEvent.propertyName){var o=e.val();if(o!==t)e.trigger("input"),t=o}}),n(e,"val",function(){if(0!==arguments.length)i=!0})}var n=require("../function/around"),i=$('<input type="text" />')[0],o="oninput"in i;i=null;var r=".cobble_util_input";exports.init=o?e:t,exports.dispose=function(e){e.off(r)}}),define("cobble/util/instance",["require","exports","module"],function(require,exports){exports.window=$(window),exports.document=$(document),exports.html=$(document.documentElement),exports.body=$(document.body)}),define("cobble/util/keyboard",["require","exports","module"],function(require,exports){"use strict";function e(e){var t={};return $.each(e,function(e,n){t[n]=e}),t}var t={a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,"`":192,"-":173,"=":61,"[":219,"]":221,"\\":220,";":59,"'":222,",":188,".":190,"/":191,$0:96,$1:97,$2:98,$3:99,$4:100,$5:101,$6:102,$7:103,$8:104,$9:105,"$.":110,"$+":107,"$-":109,"$*":106,"$/":111,space:32,tab:9},n={backspace:8,"delete":46},i={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,enter:13,esc:27,capslock:20,insert:45,home:36,end:35,pageup:33,pagedown:34,left:37,right:39,up:38,down:40},o={shift:16,ctrl:17,meta:91,alt:18};$.extend(exports,t,i,o),exports.charKey=t,exports.deleteKey=n,exports.functionKey=i,exports.combinationKey=o,exports.isCharKey=function(n){return n in e(t)},exports.isDeleteKey=function(t){return t in e(n)},exports.isFunctionKey=function(t){return t in e(i)},exports.isCombinationKey=function(t){return t in e(o)}});