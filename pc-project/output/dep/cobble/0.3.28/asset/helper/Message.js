define("cobble/function/lifeCycle",["require","exports"],function(require,exports){"use strict";exports.init=function(e,t){var i=e.constructor,n="__cobble__"+i.prototype.type,r=t.element;if(r&&r.data(n))e=r.data(n);else if($.extend(e,i.defaultOptions,t),e.init(),r)r.data(n,e);return e},exports.dispose=function(e){var t="__cobble__"+e.constructor.prototype.type,i=e.element;if(i)i.removeData(t)}}),define("cobble/function/timer",["require","exports","module"],function(){"use strict";return function(e,t,i){i="number"===$.type(i)?i:0;var n,r=function(){n=setTimeout(r,t),e()},o={start:function(){o.stop(),setTimeout(r,i)},stop:function(){if(n)clearTimeout(n),n=null}};return o}}),define("cobble/helper/Message",["require","exports","module","../function/timer","../function/lifeCycle","../util/url"],function(require){"use strict";function e(e){return n.init(this,e)}function t(){return"__message__"+o++}var i=require("../function/timer"),n=require("../function/lifeCycle"),r=require("../util/url");e.prototype={constructor:e,type:"Message",init:function(){var e=this;e.id=t(),e.origin=r.getOrigin(e.agentUrl),e.timer=i(function(){e.send(e.reader()||{})},e.delay,e.delay),e.timer.start()},send:$.isFunction(window.postMessage)&&"onmessage"in window?function(e){window.top.postMessage(e,this.origin)}:function(e){var t=this,i=$("#"+t.id);if(0===i.length)i=$('<iframe id="'+t.id+'"></iframe>'),i.hide().appendTo("body");i.prop("src",t.agentUrl+"#"+$.param(e))},dispose:function(){var e=this;n.dispose(e),e.timer.stop(),e.timer=null}},e.defaultOptions={delay:100};var o=0;return e}),define("cobble/util/url",["require","exports","module"],function(require,exports){"use strict";exports.parseQuery=function(e){var t={};if("string"===$.type(e)&&e.length>1){var i=0,n=e.charAt(0);if("?"===n)i=1;else if("#"===n){i=1;var r=e.charAt(1);if("/"===r)i=2}if(i>0)e=e.substr(i);$.each(e.split("&"),function(e,i){var n=i.split("=");if(2===n.length){var r=$.trim(n[0]);if(r)t[r]=decodeURIComponent($.trim(n[1]))}})}return t},exports.getOrigin=function(e){if(!e)e=document.URL;return exports.parse(e).origin},exports.parse=function(e){var t=document.createElement("a");t.href=e,e=t.href;var i="";if(t.protocol&&t.host)i=t.protocol+"//"+t.host;else if(/^(http[s]?:\/\/[^\/]+)(?=\/)/.test(e))i=RegExp.$1;var n=i.split(":");if(0===i.indexOf("http:")&&3===n.length&&80==n[2])n.length=2,i=n.join(":");var r=t.pathname;if(r&&"/"!==r.charAt(0))r="/"+r;return{origin:i,pathname:r,search:t.search}}});