!function(t){function i(t,i,e){for(var o=4,a=[];o--;)a[o]=Math.round(i.rgba[o]+(t.rgba[o]-i.rgba[o])*(1-e));return"rgba("+a.join(",")+")"}var e=t.Axis,o=t.Chart,a=t.Point,n=t.Pointer,r=t.each,s=t.extend,l=t.merge,h=t.pick,p=t.numberFormat,d=t.getOptions(),m=t.seriesTypes,c=d.plotOptions,u=t.wrap,f=t.Color,x=function(){};d.mapNavigation={buttonOptions:{align:"right",verticalAlign:"bottom",x:0,width:18,height:18,style:{fontSize:"15px",fontWeight:"bold",textAlign:"center"}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:"+",y:-32},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:0}}},t.splitPath=function(t){var i,t=t.replace(/([A-Za-z])/g," $1 "),t=t.replace(/^\s*/,"").replace(/\s*$/,""),t=t.split(/[ ,]+/);for(i=0;i<t.length;i++)/[a-zA-Z]/.test(t[i])||(t[i]=parseFloat(t[i]));return t},t.maps={},u(e.prototype,"getSeriesExtremes",function(t){var i,e,o=this.isXAxis,a=[];r(this.series,function(t,i){if(t.useMapGeometry)a[i]=t.xData,t.xData=[]}),t.call(this),i=h(this.dataMin,Number.MAX_VALUE),e=h(this.dataMax,Number.MIN_VALUE),r(this.series,function(t,n){if(t.useMapGeometry)i=Math.min(i,t[o?"minX":"minY"]),e=Math.max(e,t[o?"maxX":"maxY"]),t.xData=a[n]}),this.dataMin=i,this.dataMax=e}),u(e.prototype,"setAxisTranslation",function(t){var i=this.chart,e=i.plotWidth/i.plotHeight,o=this.isXAxis,a=i.xAxis[0];if(t.call(this),"map"===i.options.chart.type&&!o&&void 0!==a.transA)this.transA=a.transA=Math.min(this.transA,a.transA),t=(a.max-a.min)/(this.max-this.min),a=t>e?this:a,e=(a.max-a.min)*a.transA,a.minPixelPadding=(a.len-e)/2}),u(o.prototype,"render",function(i){var e=this,o=e.options.mapNavigation;i.call(e),e.renderMapNavigation(),o.zoomOnDoubleClick&&t.addEvent(e.container,"dblclick",function(t){e.pointer.onContainerDblClick(t)}),o.zoomOnMouseWheel&&t.addEvent(e.container,void 0===document.onmousewheel?"DOMMouseScroll":"mousewheel",function(t){e.pointer.onContainerMouseWheel(t)})}),s(n.prototype,{onContainerDblClick:function(t){var i=this.chart,t=this.normalize(t);i.isInsidePlot(t.chartX-i.plotLeft,t.chartY-i.plotTop)&&i.mapZoom(.5,i.xAxis[0].toValue(t.chartX),i.yAxis[0].toValue(t.chartY))},onContainerMouseWheel:function(t){var i,e=this.chart,t=this.normalize(t);i=t.detail||-(t.wheelDelta/120),e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&e.mapZoom(i>0?2:.5,e.xAxis[0].toValue(t.chartX),e.yAxis[0].toValue(t.chartY))}}),u(n.prototype,"init",function(t,i,e){if(t.call(this,i,e),e.mapNavigation.enableTouchZoom)this.pinchX=this.pinchHor=this.pinchY=this.pinchVert=!0}),s(o.prototype,{renderMapNavigation:function(){var t,i,e,o=this,a=this.options.mapNavigation,n=a.buttons,r=function(){this.handler.call(o)};if(a.enableButtons)for(t in n)if(n.hasOwnProperty(t))e=l(a.buttonOptions,n[t]),i=o.renderer.button(e.text,0,0,r).attr({width:e.width,height:e.height}).css(e.style).add(),i.handler=e.onclick,i.align(s(e,{width:i.width,height:i.height}),null,"spacingBox")},fitToBox:function(t,i){return r([["x","width"],["y","height"]],function(e){var o=e[0],e=e[1];t[o]+t[e]>i[o]+i[e]&&(t[e]>i[e]?(t[e]=i[e],t[o]=i[o]):t[o]=i[o]+i[e]-t[e]),t[e]>i[e]&&(t[e]=i[e]),t[o]<i[o]&&(t[o]=i[o])}),t},mapZoom:function(t,i,e){if(!this.isMapZooming){var o=this,a=o.xAxis[0],n=a.max-a.min,r=h(i,a.min+n/2),i=n*t,n=o.yAxis[0],s=n.max-n.min,e=h(e,n.min+s/2);if(t*=s,r-=i/2,s=e-t/2,e=h(o.options.chart.animation,!0),i=o.fitToBox({x:r,y:s,width:i,height:t},{x:a.dataMin,y:n.dataMin,width:a.dataMax-a.dataMin,height:n.dataMax-n.dataMin}),a.setExtremes(i.x,i.x+i.width,!1),n.setExtremes(i.y,i.y+i.height,!1),a=e?e.duration||500:0)o.isMapZooming=!0,setTimeout(function(){o.isMapZooming=!1},a);o.redraw()}}}),c.map=l(c.scatter,{animation:!1,nullColor:"#F8F8F8",borderColor:"silver",borderWidth:1,marker:null,stickyTracking:!1,dataLabels:{verticalAlign:"middle"},turboThreshold:0,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.y}<br/>"},states:{normal:{animation:!0}}}),e=t.extendClass(a,{applyOptions:function(i,e){var o=a.prototype.applyOptions.call(this,i,e);if(o.path&&"string"==typeof o.path)o.path=o.options.path=t.splitPath(o.path);return o},onMouseOver:function(){clearTimeout(this.colorInterval),a.prototype.onMouseOver.call(this)},onMouseOut:function(){var t=this,e=+new Date,o=f(t.options.color),n=f(t.pointAttr.hover.fill),r=t.series.options.states.normal.animation,s=r&&(r.duration||500);if(s&&4===o.rgba.length&&4===n.rgba.length)delete t.pointAttr[""].fill,clearTimeout(t.colorInterval),t.colorInterval=setInterval(function(){var a=(new Date-e)/s,r=t.graphic;a>1&&(a=1),r&&r.attr("fill",i(n,o,a)),a>=1&&clearTimeout(t.colorInterval)},13);a.prototype.onMouseOut.call(t)}}),m.map=t.extendClass(m.scatter,{type:"map",pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},colorKey:"y",pointClass:e,trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:x,supportsDrilldown:!0,getExtremesFromAll:!0,useMapGeometry:!0,init:function(i){var e,o,a,n,s,l,h,d=this,c=i.options.legend.valueDecimals,u=[];if(l="horizontal"===i.options.legend.layout,t.Series.prototype.init.apply(this,arguments),s=d.options.colorRange,n=d.options.valueRanges)r(n,function(i){o=i.from,a=i.to,e="",void 0===o?e="< ":void 0===a&&(e="> "),void 0!==o&&(e+=p(o,c)),void 0!==o&&void 0!==a&&(e+=" - "),void 0!==a&&(e+=p(a,c)),u.push(t.extend({chart:d.chart,name:e,options:{},drawLegendSymbol:m.area.prototype.drawLegendSymbol,visible:!0,setState:function(){},setVisible:function(){}},i))}),d.legendItems=u;else if(s)o=s.from,a=s.to,n=s.fromLabel,s=s.toLabel,h=l?[0,0,1,0]:[0,1,0,0],l||(l=n,n=s,s=l),l={linearGradient:{x1:h[0],y1:h[1],x2:h[2],y2:h[3]},stops:[[0,o],[1,a]]},u=[{chart:d.chart,options:{},fromLabel:n,toLabel:s,color:l,drawLegendSymbol:this.drawLegendSymbolGradient,visible:!0,setState:function(){},setVisible:function(){}}],d.legendItems=u},drawLegendSymbol:m.area.prototype.drawLegendSymbol,drawLegendSymbolGradient:function(t,i){var e,o,a,n=t.options.symbolPadding,r=h(t.options.padding,8),s=this.chart.renderer.fontMetrics(t.options.itemStyle.fontSize).h,l="horizontal"===t.options.layout;a=h(t.options.rectangleLength,200),l?(e=-(n/2),o=0):(e=-a+t.baseline-n/2,o=r+s),i.fromText=this.chart.renderer.text(i.fromLabel,o,e).attr({zIndex:2}).add(i.legendGroup),o=i.fromText.getBBox(),i.legendSymbol=this.chart.renderer.rect(l?o.x+o.width+n:o.x-s-n,o.y,l?a:s,l?s:a,2).attr({zIndex:1}).add(i.legendGroup),a=i.legendSymbol.getBBox(),i.toText=this.chart.renderer.text(i.toLabel,a.x+a.width+n,l?e:a.y+a.height-n).attr({zIndex:2}).add(i.legendGroup),e=i.toText.getBBox(),l?(t.offsetWidth=o.width+a.width+e.width+2*n+r,t.itemY=s+r):(t.offsetWidth=Math.max(o.width,e.width)+n+a.width+r,t.itemY=a.height+r,t.itemX=n)},getBox:function(t){var i=Number.MIN_VALUE,e=Number.MAX_VALUE,o=Number.MIN_VALUE,a=Number.MAX_VALUE;r(t||this.options.data,function(t){for(var n=t.path,r=n.length,s=!1,l=Number.MIN_VALUE,h=Number.MAX_VALUE,p=Number.MIN_VALUE,d=Number.MAX_VALUE;r--;)"number"==typeof n[r]&&!isNaN(n[r])&&(s?(l=Math.max(l,n[r]),h=Math.min(h,n[r])):(p=Math.max(p,n[r]),d=Math.min(d,n[r])),s=!s);t._maxX=l,t._minX=h,t._maxY=p,t._minY=d,i=Math.max(i,l),e=Math.min(e,h),o=Math.max(o,p),a=Math.min(a,d)}),this.minY=a,this.maxY=o,this.minX=e,this.maxX=i},translatePath:function(t){var i,e=!1,o=this.xAxis,a=this.yAxis,t=[].concat(t);for(i=t.length;i--;)"number"==typeof t[i]&&(t[i]=e?Math.round(o.translate(t[i])):Math.round(a.len-a.translate(t[i])),e=!e);return t},setData:function(){t.Series.prototype.setData.apply(this,arguments),this.getBox()},translate:function(){var t=this,i=Number.MAX_VALUE,e=Number.MIN_VALUE;t.generatePoints(),r(t.data,function(o){if(o.shapeType="path",o.shapeArgs={d:t.translatePath(o.path)},"number"==typeof o.y)if(o.y>e)e=o.y;else if(o.y<i)i=o.y}),t.translateColors(i,e)},translateColors:function(t,e){var o,a,n=this.options,s=n.valueRanges,l=n.colorRange,h=this.colorKey;l&&(o=f(l.from),a=f(l.to)),r(this.data,function(r){var p,d,m,c=r[h];if(s){for(m=s.length;m--;)if(p=s[m],o=p.from,a=p.to,(void 0===o||c>=o)&&(void 0===a||a>=c)){d=p.color;break}}else l&&void 0!==c&&(p=1-(e-c)/(e-t),d=null===c?n.nullColor:i(o,a,p));if(d)r.color=null,r.options.color=d})},drawGraph:x,drawDataLabels:x,drawPoints:function(){var i=this.xAxis,e=this.yAxis,o=this.colorKey;r(this.data,function(t){if(t.plotY=1,null===t[o])t[o]=0,t.isNull=!0}),m.column.prototype.drawPoints.apply(this),r(this.data,function(t){var a=t.dataLabels,n=i.toPixels(t._minX,!0),r=i.toPixels(t._maxX,!0),s=e.toPixels(t._minY,!0),l=e.toPixels(t._maxY,!0);t.plotX=Math.round(n+(r-n)*h(a&&a.anchorX,.5)),t.plotY=Math.round(s+(l-s)*h(a&&a.anchorY,.5)),t.isNull&&(t[o]=null)}),t.Series.prototype.drawDataLabels.call(this)},animateDrilldown:function(t){var i=this.chart.plotBox,e=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],o=e.bBox,a=this.chart.options.drilldown.animation;if(!t)t=Math.min(o.width/i.width,o.height/i.height),e.shapeArgs={scaleX:t,scaleY:t,translateX:o.x,translateY:o.y},r(this.points,function(t){t.graphic.attr(e.shapeArgs).animate({scaleX:1,scaleY:1,translateX:0,translateY:0},a)}),delete this.animate},animateDrillupFrom:function(t){m.column.prototype.animateDrillupFrom.call(this,t)},animateDrillupTo:function(t){m.column.prototype.animateDrillupTo.call(this,t)}}),c.mapline=l(c.map,{lineWidth:1,backgroundColor:"none"}),m.mapline=t.extendClass(m.map,{type:"mapline",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth",fill:"backgroundColor"},drawLegendSymbol:m.line.prototype.drawLegendSymbol}),c.mappoint=l(c.scatter,{dataLabels:{enabled:!0,format:"{point.name}",color:"black",style:{textShadow:"0 0 5px white"}}}),m.mappoint=t.extendClass(m.scatter,{type:"mappoint"}),t.Map=function(i,e){var o,a={endOnTick:!1,gridLineWidth:0,labels:{enabled:!1},lineWidth:0,minPadding:0,maxPadding:0,startOnTick:!1,tickWidth:0,title:null};return o=i.series,i.series=null,i=l({chart:{type:"map",panning:"xy"},xAxis:a,yAxis:l(a,{reversed:!0})},i,{chart:{inverted:!1}}),i.series=o,new t.Chart(i,e)}}(Highcharts);