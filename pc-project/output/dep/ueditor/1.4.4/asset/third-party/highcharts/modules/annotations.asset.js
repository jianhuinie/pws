!function(t,i){function e(t){var i,e;if(e={xAxis:0,yAxis:0,title:{style:{},text:"",x:0,y:0},shape:{params:{stroke:"#000000",fill:"transparent",strokeWidth:2}}},i={circle:{params:{x:0,y:0}}},i[t])e.shape=d(e.shape,i[t]);return e}function n(t){return"[object Array]"===Object.prototype.toString.call(t)}function a(t){return"number"==typeof t}function s(t){return t!==o&&null!==t}function r(t,i,e,n,a){for(var s=t.length,r=0;s>r;)if("number"==typeof t[r]&&"number"==typeof t[r+1])t[r]=i.toPixels(t[r])-n,t[r+1]=e.toPixels(t[r+1])-a,r+=2;else r+=1;return t}var o,l,h,p=t.Chart,f=t.extend,c=t.each;h=["path","rect","circle"],l={top:0,left:0,center:.5,middle:.5,bottom:1,right:1};var u=i.inArray,d=t.merge,y=function(){this.init.apply(this,arguments)};y.prototype={init:function(t,i){var n=i.shape&&i.shape.type;this.chart=t,this.options=d({},e(n),i)},render:function(t){var i=this,e=this.chart,n=i.chart.renderer,a=i.group,s=i.title,r=i.shape,o=i.options,l=o.title,p=o.shape;if(!a)a=i.group=n.g();if(!r&&p&&-1!==u(p.type,h))r=i.shape=n[o.shape.type](p.params),r.add(a);if(!s&&l)s=i.title=n.label(l),s.add(a);if(a.add(e.annotations.group),i.linkObjects(),t!==!1)i.redraw()},redraw:function(){var i,e,n,o,h,p,c,d=this.options,y=this.chart,x=this.group,g=this.title,b=this.shape,m=this.linkedObject,v=y.xAxis[d.xAxis],w=y.yAxis[d.yAxis],k=d.width,P=d.height,O=l[d.anchorY],j=l[d.anchorX],A=!1;if(m){if(e=m instanceof t.Point?"point":m instanceof t.Series?"series":null,"point"===e)d.xValue=m.x,d.yValue=m.y,n=m.series;else if("series"===e)n=m;if(x.visibility!==n.group.visibility)x.attr({visibility:n.group.visibility})}if(p=s(d.xValue)?v.toPixels(d.xValue+v.minPointOffset)-v.minPixelPadding:d.x,c=s(d.yValue)?w.toPixels(d.yValue):d.y,!isNaN(p)&&!isNaN(c)&&a(p)&&a(c)){if(g)g.attr(d.title),g.css(d.title.style),A=!0;if(b){if(i=f({},d.shape.params),"values"===d.units){for(o in i)if(u(o,["width","x"])>-1)i[o]=v.translate(i[o]);else if(u(o,["height","y"])>-1)i[o]=w.translate(i[o]);if(i.width)i.width-=v.toPixels(0)-v.left;if(i.x)i.x+=v.minPixelPadding;if("path"===d.shape.type)r(i.d,v,w,p,c)}if("circle"===d.shape.type)i.x+=i.r,i.y+=i.r;A=!0,b.attr(i)}if(x.bBox=null,!a(k))h=x.getBBox(),k=h.width;if(!a(P)){if(!h)h=x.getBBox();P=h.height}if(!a(j))j=l.center;if(!a(O))O=l.center;if(p-=k*j,c-=P*O,y.animation&&s(x.translateX)&&s(x.translateY))x.animate({translateX:p,translateY:c});else x.translate(p,c)}},destroy:function(){var t=this,i=this.chart,e=i.annotations.allItems,n=e.indexOf(t);if(n>-1)e.splice(n,1);c(["title","shape","group"],function(i){if(t[i])t[i].destroy(),t[i]=null}),t.group=t.title=t.shape=t.chart=t.options=null},update:function(t,i){f(this.options,t),this.linkObjects(),this.render(i)},linkObjects:function(){var t=this,i=t.chart,e=t.linkedObject,n=e&&(e.id||e.options.id),a=t.options,r=a.linkedTo;if(!s(r))t.linkedObject=null;else if(!s(e)||r!==n)t.linkedObject=i.get(r)}},f(p.prototype,{annotations:{add:function(t,i){var e,a,s=this.allItems,r=this.chart;if(!n(t))t=[t];for(a=t.length;a--;)e=new y(r,t[a]),s.push(e),e.render(i)},redraw:function(){c(this.allItems,function(t){t.redraw()})}}}),p.prototype.callbacks.push(function(i){var e,a=i.options.annotations;if(e=i.renderer.g("annotations"),e.attr({zIndex:7}),e.add(),i.annotations.allItems=[],i.annotations.chart=i,i.annotations.group=e,n(a)&&a.length>0)i.annotations.add(i.options.annotations);t.addEvent(i,"redraw",function(){i.annotations.redraw()})})}(Highcharts,HighchartsAdapter);