!function(t){var e=t.each,i=function(t,e){this.init(t,e)};t.extend(i.prototype,{init:function(t,e){if(this.options=t,this.chartOptions=e,this.columns=t.columns||this.rowsToColumns(t.rows)||[],this.columns.length)this.dataFound();else this.parseCSV(),this.parseTable(),this.parseGoogleSpreadsheet()},getColumnDistribution:function(){var i=this.chartOptions,s=function(e){return(t.seriesTypes[e||"line"].prototype.pointArrayMap||[0]).length},n=i&&i.chart&&i.chart.type,o=[];e(i&&i.series||[],function(t){o.push(s(t.type||n))}),this.valueCount={global:s(n),individual:o}},dataFound:function(){this.parseTypes(),this.findHeaderRow(),this.parsed(),this.complete()},parseCSV:function(){var t,i=this,s=this.options,n=s.csv,o=this.columns,r=s.startRow||0,a=s.endRow||Number.MAX_VALUE,l=s.startColumn||0,u=s.endColumn||Number.MAX_VALUE,h=0;if(n)t=n.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split(s.lineDelimiter||"\n"),e(t,function(t,n){var f,c=i.trim(t),p=0===c.indexOf("#"),m=""===c;if(n>=r&&a>=n&&!p&&!m)f=t.split(s.itemDelimiter||","),e(f,function(t,e){if(e>=l&&u>=e){if(!o[e-l])o[e-l]=[];o[e-l][h]=t}}),h+=1}),this.dataFound()},parseTable:function(){var t,i=this.options,s=i.table,n=this.columns,o=i.startRow||0,r=i.endRow||Number.MAX_VALUE,a=i.startColumn||0,l=i.endColumn||Number.MAX_VALUE;if(s){if("string"==typeof s)s=document.getElementById(s);e(s.getElementsByTagName("tr"),function(i,s){if(t=0,s>=o&&r>=s)e(i.childNodes,function(e){if(("TD"===e.tagName||"TH"===e.tagName)&&t>=a&&l>=t){if(!n[t])n[t]=[];n[t][s-o]=e.innerHTML,t+=1}})}),this.dataFound()}},parseGoogleSpreadsheet:function(){var t,e,i=this,s=this.options,n=s.googleSpreadsheetKey,o=this.columns,r=s.startRow||0,a=s.endRow||Number.MAX_VALUE,l=s.startColumn||0,u=s.endColumn||Number.MAX_VALUE;if(n)jQuery.getJSON("https://spreadsheets.google.com/feeds/cells/"+n+"/"+(s.googleSpreadsheetWorksheet||"od6")+"/public/values?alt=json-in-script&callback=?",function(s){var n,h,f=s.feed.entry,c=f.length,p=0,m=0;for(h=0;c>h;h++)n=f[h],p=Math.max(p,n.gs$cell.col),m=Math.max(m,n.gs$cell.row);for(h=0;p>h;h++)if(h>=l&&u>=h)o[h-l]=[],o[h-l].length=Math.min(m,a-r);for(h=0;c>h;h++)if(n=f[h],t=n.gs$cell.row-1,e=n.gs$cell.col-1,e>=l&&u>=e&&t>=r&&a>=t)o[e-l][t-r]=n.content.$t;i.dataFound()})},findHeaderRow:function(){var t=0;e(this.columns,function(e){if("string"!=typeof e[0])t=null}),this.headerRow=0},trim:function(t){return"string"==typeof t?t.replace(/^\s+|\s+$/g,""):t},parseTypes:function(){for(var t,e,i,s,n,o=this.columns,r=o.length;r--;)for(t=o[r].length;t--;)if(e=o[r][t],i=parseFloat(e),s=this.trim(e),s==i)if(o[r][t]=i,i>31536e6)o[r].isDatetime=!0;else o[r].isNumeric=!0;else if(n=this.parseDate(e),0===r&&"number"==typeof n&&!isNaN(n))o[r][t]=n,o[r].isDatetime=!0;else o[r][t]=""===s?null:s},dateFormats:{"YYYY-mm-dd":{regex:"^([0-9]{4})-([0-9]{2})-([0-9]{2})$",parser:function(t){return Date.UTC(+t[1],t[2]-1,+t[3])}}},parseDate:function(t){var e,i,s,n,o=this.options.parseDate;if(o)e=o(t);if("string"==typeof t)for(i in this.dateFormats)if(s=this.dateFormats[i],n=t.match(s.regex))e=s.parser(n);return e},rowsToColumns:function(t){var e,i,s,n,o;if(t)for(o=[],i=t.length,e=0;i>e;e++)for(n=t[e].length,s=0;n>s;s++){if(!o[s])o[s]=[];o[s][e]=t[e][s]}return o},parsed:function(){if(this.options.parsed)this.options.parsed.call(this,this.columns)},complete:function(){var e,i,s,n,o,r,a,l,u=this.columns,h=this.options;if(h.complete){if(this.getColumnDistribution(),u.length>1){if(e=u.shift(),0===this.headerRow)e.shift();if(e.isDatetime)i="datetime";else if(!e.isNumeric)i="category"}for(r=0;r<u.length;r++)if(0===this.headerRow)u[r].name=u[r].shift();for(n=[],r=0,l=0;r<u.length;l++){for(s=t.pick(this.valueCount.individual[l],this.valueCount.global),o=[],a=0;a<u[r].length;a++){if(o[a]=[e[a],void 0!==u[r][a]?u[r][a]:null],s>1)o[a].push(void 0!==u[r+1][a]?u[r+1][a]:null);if(s>2)o[a].push(void 0!==u[r+2][a]?u[r+2][a]:null);if(s>3)o[a].push(void 0!==u[r+3][a]?u[r+3][a]:null);if(s>4)o[a].push(void 0!==u[r+4][a]?u[r+4][a]:null)}n[l]={name:u[r].name,data:o},r+=s}h.complete({xAxis:{type:i},series:n})}}}),t.Data=i,t.data=function(t,e){return new i(t,e)},t.wrap(t.Chart.prototype,"init",function(i,s,n){var o=this;if(s&&s.data)t.data(t.extend(s.data,{complete:function(r){if(s.series)e(s.series,function(e,i){s.series[i]=t.merge(e,r.series[i])});s=t.merge(r,s),i.call(o,s,n)}}),s);else i.call(o,s,n)})}(Highcharts);