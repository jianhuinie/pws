!function(t){"use strict";var e=t.getOptions(),n=e.plotOptions,a=t.seriesTypes,i=t.merge,o=function(){},r=t.each;n.funnel=i(n.pie,{center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",dataLabels:{connectorWidth:1,connectorColor:"#606060"},size:!0,states:{select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}}}),a.funnel=t.extendClass(a.pie,{type:"funnel",animate:o,translate:function(){var t,e,n,a,i,s,l,h,c,p,d,f=function(t,e){return/%$/.test(t)?e*parseInt(t,10)/100:parseInt(t,10)},u=0,g=this,b=g.chart,w=b.plotWidth,y=b.plotHeight,C=0,L=g.options,k=L.center,W=f(k[0],w),v=f(k[0],y),A=f(L.width,w),H=f(L.height,y),P=f(L.neckWidth,w),X=f(L.neckHeight,y),m=H-X,T=g.data,Y="left"===L.dataLabels.position?1:0;g.getWidthAt=e=function(t){return t>H-X||H===X?P:P+(A-P)*((H-X-t)/(H-X))},g.getX=function(t,n){return W+(n?-1:1)*(e(t)/2+L.dataLabels.distance)},g.center=[W,v,H],g.centerX=W,r(T,function(t){u+=t.y}),r(T,function(r){if(d=null,a=u?r.y/u:0,s=v-H/2+C*H,c=s+a*H,t=e(s),i=W-t/2,l=i+t,t=e(c),h=W-t/2,p=h+t,s>m)i=h=W-P/2,l=p=W+P/2;else if(c>m)d=c,t=e(m),h=W-t/2,p=h+t,c=m;if(n=["M",i,s,"L",l,s,p,c],d)n.push(p,d,h,d);n.push(h,c,"Z"),r.shapeType="path",r.shapeArgs={d:n},r.percentage=100*a,r.plotX=W,r.plotY=(s+(d||c))/2,r.tooltipPos=[W,r.plotY],r.slice=o,r.half=Y,C+=a}),g.setTooltipPoints()},drawPoints:function(){var t=this,e=t.options,n=t.chart,a=n.renderer;r(t.data,function(n){var i=n.graphic,o=n.shapeArgs;if(!i)n.graphic=a.path(o).attr({fill:n.color,stroke:e.borderColor,"stroke-width":e.borderWidth}).add(t.group);else i.animate(o)})},sortByAngle:o,drawDataLabels:function(){var t,e,n,i,o,r=this.data,s=this.options.dataLabels.distance,l=r.length;for(this.center[2]-=2*s;l--;)n=r[l],t=n.half,e=t?1:-1,o=n.plotY,i=this.getX(o,t),n.labelPos=[0,o,i+(s-5)*e,o,i+s*e,o,t?"right":"left",0];a.pie.prototype.drawDataLabels.call(this)}})}(Highcharts);