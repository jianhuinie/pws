{{ *

@file 老师个人中心侧边栏
      需传入一个 menu 数组
      数组元素格式为 array( 'name'=>'', 'url'=>'', 'icon' => '', level => '')
@author wangyujie

* }}

{{ strip }}

{{ if !isset($nav_active_tab) }}
    {{ $nav_active_tab = '' }}
{{ /if }}


<div id="sidebar" class="card {{ if $identity !== 'teacher' }} student-sidebar {{ else }} teacher-sidebar{{ /if }}">
    {{ if $identity !== 'teacher' }}
        <div class="user-info{{ if $nav_active_tab == 'index' }} active{{ /if }}">

            {{ include file="common/component/image.html" url=$user_data.avatar width=58 class="thumbnail small" }}

            {{ $display_name = $user_data.display_name|cn_truncate: 5 }}

            <h5{{ if $display_name != $user_data.display_name }} data-title="{{ $user_data.display_name }}"{{ /if }}>
                {{ $display_name }}
            </h5>

            <p>
                ID：{{ $user_data.user_number }}
            </p>
        </div>
    {{ /if }}

    <div class="menu">
    {{ foreach $menu as $item }}

        {{ if isset($item.https) && $item.https }}
            {{ $host_name = $origin_https }}
        {{ else }}
            {{ $host_name = $origin_http }}
        {{ /if }}

        {{ $class = [] }}

        {{ if isset($item.children) && count($item.children) > 0 }}
            {{ $class[] = 'has-children' }}
            {{ $has_children = true }}
        {{ else }}
            {{ $has_children = false }}
        {{ /if }}

        {{ if isset($item.active) && $item.active }}
            {{ $class[] = 'active' }}
        {{ /if }}

        {{ $class = implode(' ', $class) }}

        <div class="menu-item{{ if $class }} {{ $class }}{{ /if }}">

            {{ if $has_children }}
                <b>
                    {{ if isset($item.icon) }}
                        <i class="icon {{ $item.icon }}"></i>
                    {{ /if }}
                    <strong>{{ $item.name }}</strong>
                </b>
            {{ else }}
                <a {{ if isset($item.url) }} href="{{ $host_name }}{{ $item.url }}" {{ /if }} {{ if isset($item.blank) }}target="_blank"{{ /if }} >

                    {{ if isset($item.icon) }}
                        <i class="icon {{ $item.icon }}"></i>
                    {{ /if }}
                    <strong>{{ $item.name }}</strong>
                    {{ if $item.name == '预约试听' }}
                        <img src="{{ $static_origin }}/src/img/teacher-center/new.png" style="margin-left:5px;">
                    {{ /if }}
                </a>
            {{ /if }}

            {{ if $has_children }}
            <ul class="sub-menu">

                {{ foreach $item.children as $sub_item }}

                    {{ $class = [] }}

                    {{ if isset($sub_item.class) }}
                        {{ $class[] = $sub_item.class }}
                    {{ /if }}

                    {{ if isset($sub_item.active) && $sub_item.active }}
                        {{ $class[] = 'active' }}
                    {{ /if }}

                    {{ $class = implode(' ', $class) }}

                    <li{{ if $class }} class="{{ $class }}"{{ /if }}>
                        <a {{ if isset($sub_item.outer) }} href="{{ $sub_item.url }}" {{ else }} href="{{ $host_name }}{{ $sub_item.url }}" {{ /if }} {{ if isset($sub_item.blank) }}target="_blank"{{ /if }}>
                            {{ $sub_item.name }}
                            {{ if $sub_item.name === '主页装修去掉' }}
                                <strong class="text-error tiny" style="font-weight: bold;">
                                    &nbsp;NEW
                                </strong>
                            {{ /if }}
                        </a>
                    </li>

                {{ /foreach }}

            </ul>
            {{ /if }}

        </div>
    {{ /foreach }}
    </div>

    {{ if $identity === 'teacher' && count($ext_data.teacher_center_notify) > 0 }}
    <div class="notify">
        {{ foreach $ext_data.teacher_center_notify as $item }}

        <a href="{{ $item.link }}" target="_blank">
            <i></i>
            {{ $title = $item.title|cn_truncate: 11 }}
            <span{{ if $title != $item.title }} data-title="{{ $item.title }}"{{ /if }}>
            {{ $title }}
            </span>
        </a>

        {{ /foreach }}
    </div>
    {{ /if }}

    {{ if $identity !== 'teacher' }}
        <div class="qrcode-box">
            <div class="text-primary">跟谁学微信公众号码</div>
            <div class="wechat-qrcode"></div>
            <div class="text-info">关注领好课</div>
        </div>
    {{ /if }}

</div>
{{ /strip }}